!function(e){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(u){var n=/\+/g;function p(e){return f.raw?e:encodeURIComponent(e)}function h(e,t){e=f.raw?e:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(n," ")),f.json?JSON.parse(e):e}catch(e){}}(e);return u.isFunction(t)?t(e):e}var f=u.cookie=function(e,t,n){var o,i;if(void 0!==t&&!u.isFunction(t))return"number"==typeof(n=u.extend({},f.defaults,n)).expires&&(i=n.expires,(o=n.expires=new Date).setTime(+o+864e5*i)),document.cookie=[p(e),"=",(i=t,p(f.json?JSON.stringify(i):String(i))),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("");for(var r=e?void 0:{},s=document.cookie?document.cookie.split("; "):[],a=0,l=s.length;a<l;a++){var c=s[a].split("="),d=(d=c.shift(),f.raw?d:decodeURIComponent(d)),c=c.join("=");if(e&&e===d){r=h(c,t);break}e||void 0===(c=h(c))||(r[d]=c)}return r};f.defaults={},u.removeCookie=function(e,t){return void 0!==u.cookie(e)&&(u.cookie(e,"",u.extend({},t,{expires:-1})),!u.cookie(e))}}),define("plone-patterns-toolbar",["jquery","pat-base","pat-registry","mockup-utils","translate","jquery.cookie"],function(c,e,n,o,d){"use strict";return e.extend({name:"toolbar",trigger:".pat-toolbar",parser:"mockup",defaults:{containerSelector:"#edit-zone",classNames:{logo:"plone-toolbar-logo",left:"plone-toolbar-left",leftDefault:"plone-toolbar-left-default",leftExpanded:"plone-toolbar-left-expanded",top:"plone-toolbar-top",topDefault:"plone-toolbar-top-default",topExpanded:"plone-toolbar-top-expanded",default:"plone-toolbar-default",expanded:"plone-toolbar-expanded",active:"active"},cookieName:"plone-toolbar",toolbar_width:"120px",submenu_width:"180px",desktop_width:"768px"},pxToInt:function(e){return parseInt(e.split("px")[0],10)},setupMobile:function(){var t=this;t.$container.css("right","-"+t.options.toolbar_width),c("body").addClass(t.options.classNames.leftExpanded),c("body").addClass(t.options.classNames.expanded),c("body").addClass(t.options.classNames.left),c("body").removeClass(t.options.classNames.topExpanded),c("body").removeClass(t.options.classNames.top),c("body").removeClass(t.options.classNames.topDefault),c("body").removeClass(t.options.classNames.default),c("."+t.options.classNames.logo,t.$container).off("click").on("click",function(){var e=c(t.$el);e.hasClass("open")?(t.$container.css("right","-"+t.options.toolbar_width),c("html").css("margin-left","0"),c("html").css("margin-right","0"),e.removeClass("open"),c("nav li",t.$container).removeClass(t.options.classNames.active)):(t.$container.css("right","0"),e.addClass("open"),c("html").css("margin-left","-"+t.options.toolbar_width),c("html").css("margin-right",t.options.toolbar_width))}),c("nav > ul > li",t.$container).has("a .plone-toolbar-caret").off("click"),c("nav li a",t.$container).has(".plone-toolbar-caret").off("click").on("click",function(e){e.preventDefault(),e.stopPropagation();e=c(this).parent();e.hasClass(t.options.classNames.active)?(t.$container.css("right","0"),c("html").css("margin-left","-"+t.options.toolbar_width),c("html").css("margin-right",t.options.toolbar_width),c("nav li",t.$container).removeClass(t.options.classNames.active)):(c("nav li",t.$container).removeClass(t.options.classNames.active),e.addClass(t.options.classNames.active),t.$container.css("right",t.options.submenu_width),e=t.pxToInt(t.options.toolbar_width)+t.pxToInt(t.options.submenu_width),c("html").css("margin-left","-"+e+"px"),c("html").css("margin-right",+e+"px"))})},setupDesktop:function(){var i=this;i.state.expanded?(c("body").addClass(i.options.classNames.expanded),c("body").addClass(i.state.left?i.options.classNames.leftExpanded:i.options.classNames.topExpanded),c("body").removeClass(i.options.classNames.default),c("body").removeClass(i.options.classNames.leftDefault),c("body").removeClass(i.options.classNames.topDefault)):(c("body").addClass(i.options.classNames.default),c("body").addClass(i.state.left?i.options.classNames.leftDefault:i.options.classNames.topDefault),c("body").removeClass(i.options.classNames.expanded),c("body").removeClass(i.options.classNames.leftExpanded),c("body").removeClass(i.options.classNames.topExpanded)),i.state.left||(c("body").addClass(i.options.classNames.top),c("body").addClass(i.state.expanded?i.options.classNames.topExpanded:i.options.classNames.topDefault),c("body").removeClass(i.options.classNames.left),c("body").removeClass(i.options.classNames.leftDefault),c("body").removeClass(i.options.classNames.leftExpanded)),c("."+i.options.classNames.logo,i.$container).off("click").on("click",function(){i.state.expanded?(i.setState({expanded:!1}),c("body").removeClass(i.options.classNames.expanded),c("body").addClass(i.options.classNames.default),c("nav li",i.$container).removeClass(i.options.classNames.active),i.state.left?(c("body").addClass(i.options.classNames.leftDefault),c("body").removeClass(i.options.classNames.leftExpanded)):(c("body").addClass(i.options.classNames.topDefault),c("body").removeClass(i.options.classNames.topExpanded))):(i.setState({expanded:!0}),c("body").addClass(i.options.classNames.expanded),c("body").removeClass(i.options.classNames.default),c("nav li",i.$container).removeClass(i.options.classNames.active),i.state.left?(c("body").addClass(i.options.classNames.leftExpanded),c("body").removeClass(i.options.classNames.leftDefault)):(c("body").addClass(i.options.classNames.topExpanded),c("body").removeClass(i.options.classNames.topDefault))),i.hideElements()}),c("nav > ul > li li",i.$container).off("click").on("click",function(e){e.stopImmediatePropagation()}),c("nav li a",i.$container).has(".plone-toolbar-caret").off("click"),c("nav > ul > li",i.$container).has("a .plone-toolbar-caret").off("click").on("click",function(e){var t=c(this),n=i.options.classNames.active;e.preventDefault(),e.stopPropagation();var o=t.hasClass(n),e=t.parent("#plone-toolbar-more-subset");e.length?e.find("li").filter('[id*="contentmenu-"]').removeClass(n):(c("."+n+"> ul",i.$container).attr("aria-hidden","true"),c("."+n,i.$container).removeClass(n),c("#plone-toolbar-more-subset").hide()),c("nav li > ul",c(this)).css({"margin-top":""}),o||(t.addClass(n),i.padPulloutContent(t))}),c("body").off("click.closetoolbarsubmenus").on("click.closetoolbarsubmenus",function(e){e=i.$container.find(e.target);e.length&&"NAV"!==e.prop("tagName")||(c("nav > ul > li",i.$container).each(function(e,t){c(t).removeClass(i.options.classNames.active)}),c("#plone-toolbar-more-subset").hide())}),i.setHeight()},padPulloutContent:function(e){var t,n,o;this.state.left&&this.isDesktop()&&(n=(o=(t=c("> ul",e)).find("> *")).first(),n=(o=o.last()).position().top-n.position().top+o.outerHeight(),o=t.outerHeight(),e=(1<e.position().top?e.position():e.offset()).top,t.css({"margin-top":Math.min(e,o-n)}),t.attr("aria-hidden","false"))},isDesktop:function(){return c(window).width()>this.pxToInt(this.options.desktop_width)},_setHeight:function(){var t=c(".plone-toolbar-main",this.$container);t.css({height:""});var e=t.outerHeight();c(".scroll-btn",this.$container).remove(),t.css({"padding-top":""});var n,o,i=c(window).height()-c("#personal-bar-container").height()-c(".plone-toolbar-logo").height();i<e&&(n=c('<li class="scroll-btn up" aria-hidden="true"><a title="'+d("scroll up")+'" href="#"><span class="icon-up"></span><span>&nbsp;</span></a></li>'),o=c('<li class="scroll-btn down" aria-hidden="true"><a title="'+d("scroll down")+'" href="#"><span class="icon-down"></span><span>&nbsp;</span></a></li>'),t.prepend(n),t.append(o),t.height(i),t.scroll(function(){0==t.scrollTop()?n.css("display","none"):n.css("display","list-item"),t.scrollTop()+t.height()==e?o.css("display","none"):o.css("display","list-item")}),0==t.scrollTop()&&n.css("display","none"),n.click(function(e){e.preventDefault(),t.scrollTop(t.scrollTop()-50)}),o.click(function(e){e.preventDefault(),t.scrollTop(t.scrollTop()+50)}));i=c("li.active ul:visible",this.$container);0<i.length&&this.padPulloutContent(i)},setHeight:function(){var e;this.state.left&&this.isDesktop()&&(e=this,clearTimeout(e.heightTimeout),e.heightTimeout=setTimeout(function(){e._setHeight()},50))},setState:function(e){this.state=c.extend({},this.state,e),c.cookie(this.options.cookieName,JSON.stringify({expanded:this.state.expanded}),{path:"/"})},cloneViewsIntoSubset:function(e,t,n){var o,i,r=e[0],s=t.length-1;if(0!==r.offsetTop)for(o=s;0<=s&&((i=t.eq(o)).is(":hidden")||(i.hide().clone(!0,!0).appendTo(n).show(),0!==r.offsetTop));--s);},hideElements:function(){var e,t,o,n,i,r,s,a,l=this;l.state.left||(e=c(".plone-toolbar-container").width(),t=c(".plone-toolbar-logo").width(),(n=(o=c(".plone-toolbar-main")).find("> li")).each(function(){t+=c(this).width()}),(i=c("#personal-bar-container")).find("> li").each(function(){t+=c(this).width()}),r=c("#plone-toolbar-more-options"),t-=r.width(),s=n.filter('[id^="plone-contentmenu-"]'),a=n.filter('[id^="contentview-"]'),e<t?r.length||function(){s.hide(),r=c('<li id="plone-toolbar-more-options"><a href="#"><span class="icon-moreOptions" aria-hidden="true"></span><span>'+d("More")+'</span><span class="plone-toolbar-caret"></span></a></li>'),o.append(r);var t=c('<ul id="plone-toolbar-more-subset" style="display: none"></ul>');i.after(t),s.each(function(){c(this).clone(!0,!0).show().appendTo(t)}),l.cloneViewsIntoSubset(i,a,t);var n=l.options.classNames.active;r.find("a").on("click",function(e){c("."+n,l.$container).removeClass(n),c(this).parent().toggleClass("active",t.is(":hidden")),t.toggle(),e.preventDefault()})}():(r.remove(),c("#plone-toolbar-more-subset").remove(),o.children().show()),i[0]&&0!==i[0].offsetTop&&l.cloneViewsIntoSubset(i,a,c("#plone-toolbar-more-subset")))},init:function(){var e=this;e.heightTimeout=0,e.$container=c(e.options.containerSelector);var t=c.cookie(e.options.cookieName);if(e.state={expanded:!0,left:c("body").hasClass(e.options.classNames.left)},t)try{e.state=c.extend({},e.state,c.parseJSON(t))}catch(e){}e.isDesktop()?(e.setupDesktop(),e.state.left||e.hideElements()):e.setupMobile(),e.$el.addClass("initialized"),c("body").off("structure-url-changed.toolbar").on("structure-url-changed.toolbar",function(e,t){c.ajax({url:c("body").attr("data-portal-url")+t+"/@@render-toolbar"}).done(function(e){e=(e=c(o.parseBodyTag(e))).find("#edit-zone").length?e.find("#edit-zone"):e;c("body").find("#edit-zone").replaceWith(e),n.scan(e)})}),c(window).on("resize",function(){e.isDesktop()?(e.setupDesktop(),e.state.left||e.hideElements()):e.setupMobile()})}})}),define("plone-patterns-portletmanager",["jquery","pat-base","mockup-utils","mockup-patterns-modal","translate","pat-logger","jquery.form"],function(r,e,s,i,a,t){"use strict";var l=t.getLogger("pat-manage-portlets");return e.extend({name:"manage-portlets",trigger:".pat-manage-portlets",parser:"mockup",messageTimeout:0,submitTimeout:0,switchTimeout:0,isModal:!1,dirty:!1,init:function(){var e=this,t=e.$el.parents(".plone-modal");1===t.length?(this.isModal=!0,(t=t.data("pattern-plone-modal")).on("hide",function(){e.dirty&&window.location.reload()}),e.loading=t.loading):e.loading=s.loading,e.bind()},bind:function(){var i=this;i.setupAddDropdown(),i.setupSwitchPortletManager(),i.setupSavePortletsSettings(),i.setupPortletEdit(),i.isModal&&r(".portlets-link-to-parent").off("click").click(function(e){i.loading.show();var o=r(this);e.preventDefault(),r.ajax({url:o.attr("href"),data:{ajax_load:1}}).done(function(e){var t=r(s.parseBodyTag(e)),n=o.parents(".plone-modal-body");n.empty();e=r("#content",t),t=r("h1",e);r(".plone-modal-header",n.parent()).find("h2").html(t.html()),t.remove(),n.append(e),i.rebind(r(".pat-manage-portlets",e),!0),i.loading.hide()})})},rebind:function(e,t){l.info("rebind"),r.contains(document,this.$el[0])&&this.$el.replaceWith(e),this.$el=e,this.bind(),t||this.statusMessage(),this.dirty=!0},statusMessage:function(e){void 0===e&&(e=a("Portlet changes saved"));var t=r("#portlet-message");0===t.length&&(t=r('<div class="alert alert-info" role="alert" id="portlet-message" style="opacity: 0"></div>'),(this.isModal?r(".plone-modal-body:visible"):r("#content-core")).prepend(t)),t.html('<strong class="mr-1">'+a("Info")+"</strong>"+e),clearTimeout(this.messageTimeout),t.fadeTo(500,1),this.messageTimeout=window.setTimeout(function(){t.fadeTo(500,.6)},3e3)},showEditPortlet:function(e){l.info("show edit portlet in modal");var n=this,t=r("<a/>");r("body").append(t);var o=new i(t,{ajaxUrl:e,actionOptions:{displayInModal:!1,reloadWindowOnClose:!1,isForm:!0,onSuccess:function(e,t){o.hide();t=r(s.parseBodyTag(t));n.rebind(r("#"+n.$el.attr("id"),t).eq(0)),n.statusMessage(a("Portlet added"))}}});o.on("after-render",function(){var e=r("#"+n.$el.attr("id"),o.$raw);1===e.length&&(e=e.clone(),o.on("shown",function(){o.hide()}),n.rebind(e),n.statusMessage(a("Portlet added")))}),o.show()},setupPortletEdit:function(){var t=this;r(".managedPortlet .portletHeader > a",t.$el).click(function(e){e.preventDefault(),t.showEditPortlet(r(this).attr("href"))})},setupAddDropdown:function(){var n=this;r(".add-portlet",n.$el).change(function(e){e.preventDefault();var t=r(this),e=t.parents("form"),e=t.attr("data-context-url")+t.val()+"?_authenticator="+r('[name="_authenticator"]').val()+"&referer="+r('[name="referer"]',e).val();n.showEditPortlet(e)})},setupSavePortletsSettings:function(){var t=this;r(".portlets-settings, form.portlet-action",t.$el).ajaxForm({beforeSubmit:function(){t.loading.show()},success:function(e){t.loading.hide(),l.info("form submit");e=r(s.parseBodyTag(e));t.rebind(r("#"+t.$el.attr("id"),e).eq(0))}}),r(".portlets-settings select",t.$el).change(function(){l.info("select change"),clearTimeout(t.submitTimeout),t.submitTimeout=window.setTimeout(function(){r(".portlets-settings",t.$el).submit()},100)})},setupSwitchPortletManager:function(){var n=this;r("#main-container").on("change",".switch-portlet-manager",function(e){e.stopImmediatePropagation(),l.info("switch portlet manager");var t=r(this).val();clearTimeout(n.switchTimeout),n.switchTimeout=window.setTimeout(function(){n._reloadPortletManager(t)},100)}),r(window).on("popstate",function(e){e.stopImmediatePropagation(),e&&void 0===e.state&&(e=window.location.href,l.info("redirecting to: "+e),n._reloadPortletManager(e,!0))})},_reloadPortletManager:function(t,n){var o=this;o.loading.show(),r.get(t,{ajax_load:1}).done(function(e){e=r(s.parseBodyTag(e));r("#content").html(e),o.rebind(r(".pat-manage-portlets",e),!0),n?window.history.replaceState(null,null,t):window.history.pushState(null,null,t),o.loading.hide()})}})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("sortable",t):(e=e||self).Sortable=t()}(this,function(){function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,o=arguments[t];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function e(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var y=e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),w=e(/Edge/i),l=e(/firefox/i),d=e(/safari/i)&&!e(/chrome/i)&&!e(/android/i),t=e(/iP(ad|od|hone)/i),n=e(/chrome/i)&&e(/android/i),o={capture:!1,passive:!1};function c(e,t,n){e.addEventListener(t,n,!y&&o)}function r(e,t,n){e.removeEventListener(t,n,!y&&o)}function s(e,t){if(t&&(">"===t[0]&&(t=t.substring(1)),e))try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return}}function k(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"!==t[0]||e.parentNode===n)&&s(e,t)||o&&e===n)return e}while(e!==n&&(e=(i=e).host&&i!==document&&i.host.nodeType?i.host:i.parentNode))}var i;return null}var i,a=/\s+/g;function E(e,t,n){var o;e&&t&&(e.classList?e.classList[n?"add":"remove"](t):(o=(" "+e.className+" ").replace(a," ").replace(" "+t+" "," "),e.className=(o+(n?" "+t:"")).replace(a," ")))}function P(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function h(e,t){var n="";if("string"==typeof e)n=e;else do{var o=P(e,"transform")}while(o&&"none"!==o&&(n=o+" "+n),!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function u(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function A(){return document.scrollingElement||document.documentElement}function N(e,t,n,o,i){if(e.getBoundingClientRect||e===window){var r,s,a,l,c,d,u=e!==window&&e!==A()?(s=(r=e.getBoundingClientRect()).top,a=r.left,l=r.bottom,c=r.right,d=r.height,r.width):(a=s=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,window.innerWidth);if((t||n)&&e!==window&&(i=i||e.parentNode,!y))do{if(i&&i.getBoundingClientRect&&("none"!==P(i,"transform")||n&&"static"!==P(i,"position"))){var p=i.getBoundingClientRect();s-=p.top+parseInt(P(i,"border-top-width")),a-=p.left+parseInt(P(i,"border-left-width")),l=s+r.height,c=a+r.width;break}}while(i=i.parentNode);return o&&e!==window&&(o=(t=h(i||e))&&t.a,e=t&&t.d,t&&(l=(s/=e)+(d/=e),c=(a/=o)+(u/=o))),{top:s,left:a,bottom:l,right:c,width:u,height:d}}}function O(e,t,n){for(var o=$(e,!0),i=N(e)[t];o;){var r=N(o)[n];if(!("top"===n||"left"===n?r<=i:i<=r))return o;if(o===A())break;o=$(o,!1)}return!1}function p(e,t,n){for(var o=0,i=0,r=e.children;i<r.length;){if("none"!==r[i].style.display&&r[i]!==Pe.ghost&&r[i]!==Pe.dragged&&k(r[i],n.draggable,e,!1)){if(o===t)return r[i];o++}i++}return null}function R(e,t){for(var n=e.lastElementChild;n&&(n===Pe.ghost||"none"===P(n,"display")||t&&!s(n,t));)n=n.previousElementSibling;return n||null}function L(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Pe.clone||t&&!s(e,t)||n++;return n}function f(e){var t=0,n=0,o=A();if(e)do{var i=h(e)}while(t+=e.scrollLeft*i.a,n+=e.scrollTop*i.d,e!==o&&(e=e.parentNode));return[t,n]}function $(e,t){if(!e||!e.getBoundingClientRect)return A();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=P(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return A();if(o||t)return n;o=!0}}}while(n=n.parentNode);return A()}function m(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function g(t,n){return function(){var e;i||(1===(e=arguments).length?t.call(this,e[0]):t.apply(this,e),i=setTimeout(function(){i=void 0},n))}}function B(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function v(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function b(e,t){P(e,"position","absolute"),P(e,"top",t.top),P(e,"left",t.left),P(e,"width",t.width),P(e,"height",t.height)}function x(e){P(e,"position",""),P(e,"top",""),P(e,"left",""),P(e,"width",""),P(e,"height","")}var M="Sortable"+(new Date).getTime(),C=[],S={initializeByDefault:!0},T={mount:function(e){for(var t in S)!S.hasOwnProperty(t)||t in e||(e[t]=S[t]);C.push(e)},pluginEvent:function(t,n,o){var e=this;this.eventCanceled=!1,o.cancel=function(){e.eventCanceled=!0};var i=t+"Global";C.forEach(function(e){n[e.pluginName]&&(n[e.pluginName][i]&&n[e.pluginName][i](D({sortable:n},o)),n.options[e.pluginName]&&n[e.pluginName][t]&&n[e.pluginName][t](D({sortable:n},o)))})},initializePlugins:function(n,o,i,e){for(var t in C.forEach(function(e){var t=e.pluginName;(n.options[t]||e.initializeByDefault)&&((e=new e(n,o,n.options)).sortable=n,e.options=n.options,n[t]=e,Object.assign(i,e.defaults))}),n.options){var r;!n.options.hasOwnProperty(t)||void 0!==(r=this.modifyOption(n,t,n.options[t]))&&(n.options[t]=r)}},getEventProperties:function(t,n){var o={};return C.forEach(function(e){"function"==typeof e.eventProperties&&Object.assign(o,e.eventProperties.call(n[e.pluginName],t))}),o},modifyOption:function(t,n,o){var i;return C.forEach(function(e){t[e.pluginName]&&e.optionListeners&&"function"==typeof e.optionListeners[n]&&(i=e.optionListeners[n].call(t[e.pluginName],o))}),i}};function _(e){var t=e.sortable,n=e.rootEl,o=e.name,i=e.targetEl,r=e.cloneEl,s=e.toEl,a=e.fromEl,l=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,u=e.newDraggableIndex,p=e.originalEvent,h=e.putSortable,f=e.extraEventProperties;if(t=t||n&&n[M]){var m,g=t.options,e="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||y||w?(m=document.createEvent("Event")).initEvent(o,!0,!0):m=new CustomEvent(o,{bubbles:!0,cancelable:!0}),m.to=s||n,m.from=a||n,m.item=i||n,m.clone=r,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=d,m.newDraggableIndex=u,m.originalEvent=p,m.pullMode=h?h.lastPutMode:void 0;var v,b=D({},f,T.getEventProperties(o,t));for(v in b)m[v]=b[v];n&&n.dispatchEvent(m),g[e]&&g[e].call(t,m)}}function j(e,t,n){var o=(n=void 0===n?{}:n).evt,n=function(e,t){if(null==e)return{};for(var n,o={},i=Object.keys(e),r=0;r<i.length;r++)0<=t.indexOf(n=i[r])||(o[n]=e[n]);return o}(n,["evt"]);T.pluginEvent.bind(Pe)(e,t,D({dragEl:U,parentEl:z,ghostEl:q,rootEl:W,nextEl:V,lastDownEl:I,cloneEl:F,cloneHidden:X,dragStarted:se,putSortable:Z,activeSortable:Pe.active,originalEvent:o,oldIndex:G,oldDraggableIndex:K,newIndex:Y,newDraggableIndex:J,hideGhostForTarget:Ie,unhideGhostForTarget:Fe,cloneNowHidden:function(){X=!0},cloneNowShown:function(){X=!1},dispatchSortableEvent:function(e){H({sortable:t,name:e,originalEvent:o})}},n))}function H(e){_(D({putSortable:Z,cloneEl:F,targetEl:U,rootEl:W,oldIndex:G,oldDraggableIndex:K,newIndex:Y,newDraggableIndex:J},e))}var U,z,q,W,V,I,F,X,G,Y,K,J,Q,Z,ee,te,ne,oe,ie,re,se,ae,le,ce,de,ue=!1,pe=!1,he=[],fe=!1,me=!1,ge=[],ve=!1,be=[],ye="undefined"!=typeof document,we=t,xe=w||y?"cssFloat":"float",Ce=ye&&!n&&!t&&"draggable"in document.createElement("div"),Se=function(){if(ye){if(y)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Te=function(e,t){var n=P(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=p(e,0,t),r=p(e,1,t),s=i&&P(i),a=r&&P(r),e=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+N(i).width,t=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+N(r).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":i&&s.float&&"none"!==s.float?!r||"both"!==a.clear&&a.clear!==("left"===s.float?"left":"right")?"horizontal":"vertical":i&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||o<=e&&"none"===n[xe]||r&&"none"===n[xe]&&o<e+t)?"vertical":"horizontal"},_e=function(e){function s(i,r){return function(e,t,n,o){if(null==i&&(r||e.options.group.name&&t.options.group.name&&e.options.group.name===t.options.group.name))return!0;if(null==i||!1===i)return!1;if(r&&"clone"===i)return i;if("function"==typeof i)return s(i(e,t,n,o),r)(e,t,n,o);t=(r?e:t).options.group.name;return!0===i||"string"==typeof i&&i===t||i.join&&-1<i.indexOf(t)}}var t={},n=e.group;n&&"object"==typeof n||(n={name:n}),t.name=n.name,t.checkPull=s(n.pull,!0),t.checkPut=s(n.put),t.revertClone=n.revertClone,e.group=t},Ie=function(){!Se&&q&&P(q,"display","none")},Fe=function(){!Se&&q&&P(q,"display","")};ye&&document.addEventListener("click",function(e){if(pe)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),pe=!1},!0);function De(e){if(U){var t=(i=(e=e.touches?e.touches[0]:e).clientX,r=e.clientY,he.some(function(e){if(!R(e)){var t=N(e),n=e[M].options.emptyInsertThreshold;return n&&i>=t.left-n&&i<=t.right+n&&r>=t.top-n&&r<=t.bottom+n?s=e:void 0}}),s);if(t){var n,o={};for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[M]._onDragOver(o)}}var i,r,s}function ke(e){U&&U.parentNode[M]._isOutsideThisEl(e.target)}var Ee;function Pe(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Object.assign({},t),e[M]=this;var n,o,i,r,s={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Te(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Pe.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(i in T.initializePlugins(this,e,s),s)i in t||(t[i]=s[i]);for(r in _e(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Ce,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?c(e,"pointerdown",this._onTapStart):(c(e,"mousedown",this._onTapStart),c(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(c(e,"dragover",this),c(e,"dragenter",this)),he.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Object.assign(this,(o=[],{captureAnimationState:function(){o=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(e){var t,n;"none"!==P(e,"display")&&void 0!==e&&(o.push({target:e,rect:N(e)}),t=D({},o[o.length-1].rect),!e.thisAnimationDuration||(n=h(e,!0))&&(t.top-=n.f,t.left-=n.e),e.fromRect=t)})},addAnimationState:function(e){o.push(e)},removeAnimationState:function(e){o.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(o,{target:e}),1)},animateAll:function(e){var c=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof e&&e());var d=!1,u=0;o.forEach(function(e){var t=0,n=e.target,o=n.fromRect,i=N(n),r=n.prevFromRect,s=n.prevToRect,a=e.rect,l=h(n,!0);l&&(i.top-=l.f,i.left-=l.e),n.toRect=i,n.thisAnimationDuration&&m(r,i)&&!m(o,i)&&(a.top-i.top)/(a.left-i.left)==(o.top-i.top)/(o.left-i.left)&&(e=a,l=r,r=s,s=c.options,t=Math.sqrt(Math.pow(l.top-e.top,2)+Math.pow(l.left-e.left,2))/Math.sqrt(Math.pow(l.top-r.top,2)+Math.pow(l.left-r.left,2))*s.animation),m(i,o)||(n.prevFromRect=o,n.prevToRect=i,t=t||c.options.animation,c.animate(n,a,i,t)),t&&(d=!0,u=Math.max(u,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(n),d?n=setTimeout(function(){"function"==typeof e&&e()},u):"function"==typeof e&&e(),o=[]},animate:function(e,t,n,o){var i,r;o&&(P(e,"transition",""),P(e,"transform",""),r=h(this.el),i=(t.left-n.left)/(r&&r.a||1),r=(t.top-n.top)/(r&&r.d||1),e.animatingX=!!i,e.animatingY=!!r,P(e,"transform","translate3d("+i+"px,"+r+"px,0)"),this.forRepaintDummy=e.offsetWidth,P(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),P(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){P(e,"transition",""),P(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},o))}}))}function Ae(e,t,n,o,i,r,s,a){var l,c,d=e[M],u=d.options.onMove;return!window.CustomEvent||y||w?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=o,l.related=i||t,l.relatedRect=r||N(t),l.willInsertAfter=a,l.originalEvent=s,e.dispatchEvent(l),u&&(c=u.call(d,l,s)),c}function Ne(e){e.draggable=!1}function Oe(){ve=!1}function Re(e){return setTimeout(e,0)}function Le(e){return clearTimeout(e)}Pe.prototype={constructor:Pe,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ae=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,U):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,e=this.options,i=e.preventOnFilter,r=t.type,s=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,a=(s||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,c=e.filter;if(function(e){be.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&be.push(o)}}(o),!U&&!(/mousedown|pointerdown/.test(r)&&0!==t.button||e.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!d||!a||"SELECT"!==a.tagName.toUpperCase())&&!((a=k(a,e.draggable,o,!1))&&a.animated||I===a)){if(G=L(a),K=L(a,e.draggable),"function"==typeof c){if(c.call(this,t,a,this))return H({sortable:n,rootEl:l,name:"filter",targetEl:a,toEl:o,fromEl:o}),j("filter",n,{evt:t}),void(i&&t.cancelable&&t.preventDefault())}else if(c=c&&c.split(",").some(function(e){if(e=k(l,e.trim(),o,!1))return H({sortable:n,rootEl:e,name:"filter",targetEl:a,fromEl:o,toEl:o}),j("filter",n,{evt:t}),!0}))return void(i&&t.cancelable&&t.preventDefault());e.handle&&!k(l,e.handle,o,!1)||this._prepareDragStart(t,s,a)}}},_prepareDragStart:function(e,t,n){var o,i=this,r=i.el,s=i.options,a=r.ownerDocument;n&&!U&&n.parentNode===r&&(o=N(n),W=r,z=(U=n).parentNode,V=U.nextSibling,I=n,Q=s.group,ie=(ee={target:Pe.dragged=U,clientX:(t||e).clientX,clientY:(t||e).clientY}).clientX-o.left,re=ee.clientY-o.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,U.style["will-change"]="all",o=function(){j("delayEnded",i,{evt:e}),Pe.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!l&&i.nativeDraggable&&(U.draggable=!0),i._triggerDragStart(e,t),H({sortable:i,name:"choose",originalEvent:e}),E(U,s.chosenClass,!0))},s.ignore.split(",").forEach(function(e){u(U,e.trim(),Ne)}),c(a,"dragover",De),c(a,"mousemove",De),c(a,"touchmove",De),c(a,"mouseup",i._onDrop),c(a,"touchend",i._onDrop),c(a,"touchcancel",i._onDrop),l&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),j("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(w||y)?o():Pe.eventCanceled?this._onDrop():(c(a,"mouseup",i._disableDelayedDrag),c(a,"touchend",i._disableDelayedDrag),c(a,"touchcancel",i._disableDelayedDrag),c(a,"mousemove",i._delayedDragTouchMoveHandler),c(a,"touchmove",i._delayedDragTouchMoveHandler),s.supportPointer&&c(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,s.delay)))},_delayedDragTouchMoveHandler:function(e){e=e.touches?e.touches[0]:e;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&Ne(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._delayedDragTouchMoveHandler),r(e,"touchmove",this._delayedDragTouchMoveHandler),r(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?c(document,this.options.supportPointer?"pointermove":t?"touchmove":"mousemove",this._onTouchMove):(c(U,"dragend",this),c(W,"dragstart",this._onDragStart));try{document.selection?Re(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){var n;ue=!1,W&&U?(j("dragStarted",this,{evt:t}),this.nativeDraggable&&c(document,"dragover",ke),n=this.options,e||E(U,n.dragClass,!1),E(U,n.ghostClass,!0),Pe.active=this,e&&this._appendGhost(),H({sortable:this,name:"start",originalEvent:t})):this._nulling()},_emulateDragOver:function(){if(te){this._lastX=te.clientX,this._lastY=te.clientY,Ie();for(var e=document.elementFromPoint(te.clientX,te.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(te.clientX,te.clientY))!==t;)t=e;if(U.parentNode[M]._isOutsideThisEl(e),t)for(;(!t[M]||!t[M]._onDragOver({clientX:te.clientX,clientY:te.clientY,target:e,rootEl:t})||this.options.dragoverBubble)&&(t=(e=t).parentNode););Fe()}},_onTouchMove:function(e){if(ee){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,i=e.touches?e.touches[0]:e,r=q&&h(q,!0),s=q&&r&&r.a,a=q&&r&&r.d,t=we&&de&&f(de),s=(i.clientX-ee.clientX+o.x)/(s||1)+(t?t[0]-ge[0]:0)/(s||1),a=(i.clientY-ee.clientY+o.y)/(a||1)+(t?t[1]-ge[1]:0)/(a||1);if(!Pe.active&&!ue){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}q&&(r?(r.e+=s-(ne||0),r.f+=a-(oe||0)):r={a:1,b:0,c:0,d:1,e:s,f:a},r="matrix("+r.a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")",P(q,"webkitTransform",r),P(q,"mozTransform",r),P(q,"msTransform",r),P(q,"transform",r),ne=s,oe=a,te=i),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!q){var e=this.options.fallbackOnBody?document.body:W,t=N(U,!0,we,!0,e),n=this.options;if(we){for(de=e;"static"===P(de,"position")&&"none"===P(de,"transform")&&de!==document;)de=de.parentNode;de!==document.body&&de!==document.documentElement?(de===document&&(de=A()),t.top+=de.scrollTop,t.left+=de.scrollLeft):de=A(),ge=f(de)}E(q=U.cloneNode(!0),n.ghostClass,!1),E(q,n.fallbackClass,!0),E(q,n.dragClass,!0),P(q,"transition",""),P(q,"transform",""),P(q,"box-sizing","border-box"),P(q,"margin",0),P(q,"top",t.top),P(q,"left",t.left),P(q,"width",t.width),P(q,"height",t.height),P(q,"opacity","0.8"),P(q,"position",we?"absolute":"fixed"),P(q,"zIndex","100000"),P(q,"pointerEvents","none"),Pe.ghost=q,e.appendChild(q),P(q,"transform-origin",ie/parseInt(q.style.width)*100+"% "+re/parseInt(q.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,i=n.options;j("dragStart",this,{evt:e}),Pe.eventCanceled?this._onDrop():(j("setupClone",this),Pe.eventCanceled||((F=v(U)).draggable=!1,F.style["will-change"]="",this._hideClone(),E(F,this.options.chosenClass,!1),Pe.clone=F),n.cloneId=Re(function(){j("clone",n),Pe.eventCanceled||(n.options.removeCloneOnHide||W.insertBefore(F,U),n._hideClone(),H({sortable:n,name:"clone"}))}),t||E(U,i.dragClass,!0),t?(pe=!0,n._loopId=setInterval(n._emulateDragOver,50)):(r(document,"mouseup",n._onDrop),r(document,"touchend",n._onDrop),r(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,U)),c(document,"drop",n),P(U,"transform","translateZ(0)")),ue=!0,n._dragStartId=Re(n._dragStarted.bind(n,t,e)),c(document,"selectstart",n),se=!0,d&&P(document.body,"user-select","none"))},_onDragOver:function(c){var n,d,o,u,i=this.el,p=c.target,t=this.options,e=t.group,r=Pe.active,s=Q===e,a=t.sort,l=Z||r,h=this,f=!1;if(!ve){if(void 0!==c.preventDefault&&c.cancelable&&c.preventDefault(),p=k(p,t.draggable,i,!0),T("dragOver"),Pe.eventCanceled)return f;if(U.contains(c.target)||p.animated&&p.animatingX&&p.animatingY||h._ignoreWhileAnimating===p)return I(!1);if(pe=!1,r&&!t.disabled&&(s?a||(o=!W.contains(U)):Z===this||(this.lastPutMode=Q.checkPull(this,r,U,c))&&e.checkPut(this,r,U,c))){if(u="vertical"===this._getDirection(c,p),n=N(U),T("dragOverValid"),Pe.eventCanceled)return f;if(o)return z=W,_(),this._hideClone(),T("revert"),Pe.eventCanceled||(V?W.insertBefore(U,V):W.appendChild(U)),I(!0);var m=R(i,t.draggable);if(!m||function(e,t,n){n=N(R(n.el,n.options.draggable));return t?e.clientX>n.right+10||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+10}(c,u,this)&&!m.animated){if(m===U)return I(!1);if(m&&i===c.target&&(p=m),p&&(d=N(p)),!1!==Ae(W,i,U,n,p,d,c,!!p))return _(),i.appendChild(U),z=i,F(),I(!0)}else if(p.parentNode===i){d=N(p);var g,v,b,y=U.parentNode!==i,m=(x=U.animated&&U.toRect||n,S=p.animated&&p.toRect||d,w=u?x.left:x.top,e=u?S.left:S.top,!(w===e||(u?x.right:x.bottom)===(u?S.right:S.bottom)||w+(u?x.width:x.height)/2===e+(u?S.width:S.height)/2)),w=u?"top":"left",x=O(p,"top","top")||O(U,"top","top"),e=x?x.scrollTop:void 0;if(ae!==p&&(v=d[w],fe=!1,me=!m&&t.invertSwap||y),0!==(g=function(e,t,n,o){var i=u?c.clientY:c.clientX,r=u?d.height:d.width,s=u?d.top:d.left,a=u?d.bottom:d.right,l=!1;if(!n)if(o&&ce<r*e){if(!fe&&(1===le?s+r*t/2<i:i<a-r*t/2)&&(fe=!0),fe)l=!0;else if(1===le?i<s+ce:a-ce<i)return-le}else if(s+r*(1-e)/2<i&&i<a-r*(1-e)/2)return e=p,L(U)<L(e)?1:-1;return(l=l||n)&&(i<s+r*t/2||a-r*t/2<i)?s+r/2<i?1:-1:0}(m?1:t.swapThreshold,null==t.invertedSwapThreshold?t.swapThreshold:t.invertedSwapThreshold,me,ae===p)))for(var C=L(U);b=z.children[C-=g],b&&("none"===P(b,"display")||b===q););if(0===g||b===p)return I(!1);le=g;var S=(ae=p).nextElementSibling,y=!1,m=Ae(W,i,U,n,p,d,c,y=1===g);if(!1!==m)return 1!==m&&-1!==m||(y=1===m),ve=!0,setTimeout(Oe,30),_(),y&&!S?i.appendChild(U):p.parentNode.insertBefore(U,y?S:p),x&&B(x,0,e-x.scrollTop),z=U.parentNode,void 0===v||me||(ce=Math.abs(v-N(p)[w])),F(),I(!0)}if(i.contains(U))return I(!1)}return!1}function T(e,t){j(e,h,D({evt:c,isOwner:s,axis:u?"vertical":"horizontal",revert:o,dragRect:n,targetRect:d,canSort:a,fromSortable:l,target:p,completed:I,onMove:function(e,t){return Ae(W,i,U,n,e,N(e),c,t)},changed:F},t))}function _(){T("dragOverAnimationCapture"),h.captureAnimationState(),h!==l&&l.captureAnimationState()}function I(e){return T("dragOverCompleted",{insertion:e}),e&&(s?r._hideClone():r._showClone(h),h!==l&&(E(U,(Z||r).options.ghostClass,!1),E(U,t.ghostClass,!0)),Z!==h&&h!==Pe.active?Z=h:h===Pe.active&&Z&&(Z=null),l===h&&(h._ignoreWhileAnimating=p),h.animateAll(function(){T("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==l&&(l.animateAll(),l._ignoreWhileAnimating=null)),(p===U&&!U.animated||p===i&&!p.animated)&&(ae=null),t.dragoverBubble||c.rootEl||p===document||(U.parentNode[M]._isOutsideThisEl(c.target),e||De(c)),!t.dragoverBubble&&c.stopPropagation&&c.stopPropagation(),f=!0}function F(){Y=L(U),J=L(U,t.draggable),H({sortable:h,name:"change",toEl:i,newIndex:Y,newDraggableIndex:J,originalEvent:c})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){r(document,"mousemove",this._onTouchMove),r(document,"touchmove",this._onTouchMove),r(document,"pointermove",this._onTouchMove),r(document,"dragover",De),r(document,"mousemove",De),r(document,"touchmove",De)},_offUpEvents:function(){var e=this.el.ownerDocument;r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"pointerup",this._onDrop),r(e,"touchcancel",this._onDrop),r(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Y=L(U),J=L(U,n.draggable),j("drop",this,{evt:e}),z=U&&U.parentNode,Y=L(U),J=L(U,n.draggable),Pe.eventCanceled||(fe=me=ue=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Le(this.cloneId),Le(this._dragStartId),this.nativeDraggable&&(r(document,"drop",this),r(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),d&&P(document.body,"user-select",""),P(U,"transform",""),e&&(se&&(e.cancelable&&e.preventDefault(),n.dropBubble||e.stopPropagation()),q&&q.parentNode&&q.parentNode.removeChild(q),(W===z||Z&&"clone"!==Z.lastPutMode)&&F&&F.parentNode&&F.parentNode.removeChild(F),U&&(this.nativeDraggable&&r(U,"dragend",this),Ne(U),U.style["will-change"]="",se&&!ue&&E(U,(Z||this).options.ghostClass,!1),E(U,this.options.chosenClass,!1),H({sortable:this,name:"unchoose",toEl:z,newIndex:null,newDraggableIndex:null,originalEvent:e}),W!==z?(0<=Y&&(H({rootEl:z,name:"add",toEl:z,fromEl:W,originalEvent:e}),H({sortable:this,name:"remove",toEl:z,originalEvent:e}),H({rootEl:z,name:"sort",toEl:z,fromEl:W,originalEvent:e}),H({sortable:this,name:"sort",toEl:z,originalEvent:e})),Z&&Z.save()):Y!==G&&0<=Y&&(H({sortable:this,name:"update",toEl:z,originalEvent:e}),H({sortable:this,name:"sort",toEl:z,originalEvent:e})),Pe.active&&(null!=Y&&-1!==Y||(Y=G,J=K),H({sortable:this,name:"end",toEl:z,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){j("nulling",this),W=U=z=q=V=F=I=X=ee=te=se=Y=J=G=K=ae=le=Z=Q=Pe.dragged=Pe.ghost=Pe.clone=Pe.active=null,be.forEach(function(e){e.checked=!0}),be.length=ne=oe=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":U&&(this._onDragOver(e),(t=e).dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault());break;case"selectstart":e.preventDefault()}var t},toArray:function(){for(var e,t=[],n=this.el.children,o=0,i=n.length,r=this.options;o<i;o++)k(e=n[o],r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||function(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}(e));return t},sort:function(e){var n={},o=this.el;this.toArray().forEach(function(e,t){t=o.children[t];k(t,this.options.draggable,o,!1)&&(n[e]=t)},this),e.forEach(function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return k(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=T.modifyOption(this,e,t);n[e]=void 0!==o?o:t,"group"===e&&_e(n)},destroy:function(){j("destroy",this);var e=this.el;e[M]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),r(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),he.splice(he.indexOf(this.el),1),this.el=e=null},_hideClone:function(){X||(j("hideClone",this),Pe.eventCanceled||(P(F,"display","none"),this.options.removeCloneOnHide&&F.parentNode&&F.parentNode.removeChild(F),X=!0))},_showClone:function(e){"clone"===e.lastPutMode?X&&(j("showClone",this),Pe.eventCanceled||(U.parentNode!=W||this.options.group.revertClone?V?W.insertBefore(F,V):W.appendChild(F):W.insertBefore(F,U),this.options.group.revertClone&&this.animate(U,F),P(F,"display",""),X=!1)):this._hideClone()}},ye&&c(document,"touchmove",function(e){(Pe.active||ue)&&e.cancelable&&e.preventDefault()}),Pe.utils={on:c,off:r,css:P,find:u,is:function(e,t){return!!k(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:g,closest:k,toggleClass:E,clone:v,index:L,nextTick:Re,cancelNextTick:Le,detectDirection:Te,getChild:p},Pe.get=function(e){return e[M]},Pe.mount=function(){var e=[].slice.call(arguments);e[0].constructor===Array&&(e=e[0]),e.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not "+{}.toString.call(e);e.utils&&(Pe.utils=D({},Pe.utils,e.utils)),T.mount(e)})},Pe.create=function(e,t){return new Pe(e,t)};var $e,Be,Me,je,He,Ue=[],ze=[],qe=!(Pe.version="1.12.0"),We=!1,Ve=!1;function Xe(n,o){ze.forEach(function(e,t){t=o.children[e.sortableIndex+(n?Number(t):0)];t?o.insertBefore(e,t):o.appendChild(e)})}function Ge(){Ue.forEach(function(e){e!==Me&&e.parentNode&&e.parentNode.removeChild(e)})}t=function(e){var t,n=e.originalEvent,o=e.putSortable,i=e.dragEl,r=e.dispatchSortableEvent,s=e.unhideGhostForTarget;n&&(t=o||e.activeSortable,(0,e.hideGhostForTarget)(),n=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,n=document.elementFromPoint(n.clientX,n.clientY),s(),t&&!t.el.contains(n)&&(r("spill"),this.onSpill({dragEl:i,putSortable:o})))};function Ye(){}function Ke(){}Ye.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();e=p(this.sortable.el,this.startIndex,this.options);e?this.sortable.el.insertBefore(t,e):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:t},Object.assign(Ye,{pluginName:"revertOnSpill"}),Ke.prototype={onSpill:function(e){var t=e.dragEl,e=e.putSortable||this.sortable;e.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),e.animateAll()},drop:t},Object.assign(Ke,{pluginName:"removeOnSpill"});var Je,Qe,Ze,et,tt,nt,ot=[],it=!1;function rt(){ot.forEach(function(e){clearInterval(e.pid)}),ot=[]}function st(){clearInterval(nt)}var at=g(function(n,e,t,o){if(e.scroll){var i,r=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,a=e.scrollSensitivity,l=e.scrollSpeed,c=A(),d=!1;Qe!==t&&(Qe=t,rt(),i=e.scrollFn,!0===(Je=e.scroll)&&(Je=$(t,!0)));var u=0,p=Je;do{var h=p,f=N(h),m=f.top,g=f.bottom,v=f.left,b=f.right,y=f.width,w=f.height,x=void 0,C=void 0,S=h.scrollWidth,T=h.scrollHeight,_=P(h),I=h.scrollLeft,f=h.scrollTop,C=h===c?(x=y<S&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),w<T&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(x=y<S&&("auto"===_.overflowX||"scroll"===_.overflowX),w<T&&("auto"===_.overflowY||"scroll"===_.overflowY)),I=x&&(Math.abs(b-r)<=a&&I+y<S)-(Math.abs(v-r)<=a&&!!I),f=C&&(Math.abs(g-s)<=a&&f+w<T)-(Math.abs(m-s)<=a&&!!f);if(!ot[u])for(var F=0;F<=u;F++)ot[F]||(ot[F]={});ot[u].vx==I&&ot[u].vy==f&&ot[u].el===h||(ot[u].el=h,ot[u].vx=I,ot[u].vy=f,clearInterval(ot[u].pid),0==I&&0==f||(d=!0,ot[u].pid=setInterval(function(){o&&0===this.layer&&Pe.active._onTouchMove(tt);var e=ot[this.layer].vy?ot[this.layer].vy*l:0,t=ot[this.layer].vx?ot[this.layer].vx*l:0;"function"==typeof i&&"continue"!==i.call(Pe.dragged.parentNode[M],t,e,n,tt,ot[this.layer].el)||B(ot[this.layer].el,t,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&p!==c&&(p=$(p,!1)));it=d}},30);return Pe.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){e=e.originalEvent;this.sortable.nativeDraggable?c(document,"dragover",this._handleAutoScroll):c(document,this.options.supportPointer?"pointermove":e.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){e=e.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?r(document,"dragover",this._handleAutoScroll):(r(document,"pointermove",this._handleFallbackAutoScroll),r(document,"touchmove",this._handleFallbackAutoScroll),r(document,"mousemove",this._handleFallbackAutoScroll)),st(),rt(),clearTimeout(i),i=void 0},nulling:function(){tt=Qe=Je=it=nt=Ze=et=null,ot.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(t,n){var o,i=this,r=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,e=document.elementFromPoint(r,s);tt=t,n||w||y||d?(at(t,this.options,e,n),o=$(e,!0),!it||nt&&r===Ze&&s===et||(nt&&st(),nt=setInterval(function(){var e=$(document.elementFromPoint(r,s),!0);e!==o&&(o=e,rt()),at(t,i.options,e,n)},10),Ze=r,et=s)):this.options.bubbleScroll&&$(e,!0)!==A()?at(t,this.options,$(e,!1),!1):rt()}},Object.assign(e,{pluginName:"scroll",initializeByDefault:!0})}),Pe.mount(Ke,Ye),Pe.mount(new function(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){Ee=e.dragEl},dragOverValid:function(e){var t,n,o=e.completed,i=e.target,r=e.changed,s=e.cancel;e.activeSortable.options.swap&&(t=this.options,i&&i!==this.sortable.el&&(n=Ee,Ee=!1!==(0,e.onMove)(i)?(E(i,t.swapClass,!0),i):null,n&&n!==Ee&&E(n,t.swapClass,!1)),r(),o(!0),s())},drop:function(e){var t,n,o=e.activeSortable,i=e.putSortable,r=e.dragEl,s=i||this.sortable,a=this.options;Ee&&E(Ee,a.swapClass,!1),Ee&&(a.swap||i&&i.options.swap)&&r!==Ee&&(s.captureAnimationState(),s!==o&&o.captureAnimationState(),n=(t=Ee).parentNode,(a=(e=r).parentNode)&&n&&!a.isEqualNode(t)&&!n.isEqualNode(e)&&(i=L(e),r=L(t),a.isEqualNode(n)&&i<r&&r++,a.insertBefore(t,a.children[i]),n.insertBefore(e,n.children[r])),s.animateAll(),s!==o&&o.animateAll())},nulling:function(){Ee=null}},Object.assign(e,{pluginName:"swap",eventProperties:function(){return{swapItem:Ee}}})}),Pe.mount(new function(){function e(o){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));o.options.supportPointer?c(document,"pointerup",this._deselectMultiDrag):(c(document,"mouseup",this._deselectMultiDrag),c(document,"touchend",this._deselectMultiDrag)),c(document,"keydown",this._checkKeyDown),c(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,t){var n="";Ue.length&&Be===o?Ue.forEach(function(e,t){n+=(t?", ":"")+e.textContent}):n=t.textContent,e.setData("Text",n)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){Me=e.dragEl},delayEnded:function(){this.isMultiDrag=~Ue.indexOf(Me)},setupClone:function(e){var t=e.sortable,e=e.cancel;if(this.isMultiDrag){for(var n=0;n<Ue.length;n++)ze.push(v(Ue[n])),ze[n].sortableIndex=Ue[n].sortableIndex,ze[n].draggable=!1,ze[n].style["will-change"]="",E(ze[n],this.options.selectedClass,!1),Ue[n]===Me&&E(ze[n],this.options.chosenClass,!1);t._hideClone(),e()}},clone:function(e){var t=e.dispatchSortableEvent,n=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ue.length&&Be===e.sortable&&(Xe(!0,e.rootEl),t("clone"),n()))},showClone:function(e){var t=e.cloneNowShown,n=e.cancel;this.isMultiDrag&&(Xe(!1,e.rootEl),ze.forEach(function(e){P(e,"display","")}),t(),He=!1,n())},hideClone:function(e){var t=this,n=e.cloneNowHidden,e=e.cancel;this.isMultiDrag&&(ze.forEach(function(e){P(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}),n(),He=!0,e())},dragStartGlobal:function(e){!this.isMultiDrag&&Be&&Be.multiDrag._deselectMultiDrag(),Ue.forEach(function(e){e.sortableIndex=L(e)}),Ue=Ue.sort(function(e,t){return e.sortableIndex-t.sortableIndex}),Ve=!0},dragStarted:function(e){var t,n=this,e=e.sortable;this.isMultiDrag&&(this.options.sort&&(e.captureAnimationState(),this.options.animation)&&(Ue.forEach(function(e){e!==Me&&P(e,"position","absolute")}),t=N(Me,!1,!0,!0),Ue.forEach(function(e){e!==Me&&b(e,t)}),qe=We=!0),e.animateAll(function(){qe=We=!1,n.options.animation&&Ue.forEach(function(e){x(e)}),n.options.sort&&Ge()}))},dragOver:function(e){var t=e.completed,n=e.cancel;We&&~Ue.indexOf(e.target)&&(t(!1),n())},revert:function(e){var n,o,t=e.fromSortable,i=e.rootEl,r=e.sortable,s=e.dragRect;1<Ue.length&&(Ue.forEach(function(e){r.addAnimationState({target:e,rect:We?N(e):s}),x(e),e.fromRect=s,t.removeAnimationState(e)}),We=!1,n=!this.options.removeCloneOnHide,o=i,Ue.forEach(function(e,t){t=o.children[e.sortableIndex+(n?Number(t):0)];t?o.insertBefore(e,t):o.appendChild(e)}))},dragOverCompleted:function(e){var t,n=e.sortable,o=e.isOwner,i=e.activeSortable,r=e.parentEl,s=e.putSortable,a=this.options;e.insertion&&(o&&i._hideClone(),qe=!1,a.animation&&1<Ue.length&&(We||!o&&!i.options.sort&&!s)&&(t=N(Me,!1,!0,!0),Ue.forEach(function(e){e!==Me&&(b(e,t),r.appendChild(e))}),We=!0),o||(We||Ge(),1<Ue.length?(o=He,i._showClone(n),i.options.animation&&!He&&o&&ze.forEach(function(e){i.addAnimationState({target:e,rect:je}),e.fromRect=je,e.thisAnimationDuration=null})):i._showClone(n)))},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,e=e.activeSortable;Ue.forEach(function(e){e.thisAnimationDuration=null}),e.options.animation&&!n&&e.multiDrag.isMultiDrag&&(je=Object.assign({},t),t=h(Me,!0),je.top-=t.f,je.left-=t.e)},dragOverAnimationComplete:function(){We&&(We=!1,Ge())},drop:function(e){var t=e.originalEvent,n=e.rootEl,o=e.parentEl,i=e.sortable,r=e.dispatchSortableEvent,s=e.oldIndex,a=e.putSortable,l=a||this.sortable;if(t){var c,d,u,p=this.options,h=o.children;if(!Ve)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),E(Me,p.selectedClass,!~Ue.indexOf(Me)),~Ue.indexOf(Me))Ue.splice(Ue.indexOf(Me),1),$e=null,_({sortable:i,rootEl:n,name:"deselect",targetEl:Me,originalEvt:t});else{if(Ue.push(Me),_({sortable:i,rootEl:n,name:"select",targetEl:Me,originalEvt:t}),t.shiftKey&&$e&&i.el.contains($e)){var f,m,g=L($e),e=L(Me);if(~g&&~e&&g!==e)for(f=g<e?(m=g,e):(m=e,g+1);m<f;m++)~Ue.indexOf(h[m])||(E(h[m],p.selectedClass,!0),Ue.push(h[m]),_({sortable:i,rootEl:n,name:"select",targetEl:h[m],originalEvt:t}))}else $e=Me;Be=l}Ve&&this.isMultiDrag&&((o[M].options.sort||o!==n)&&1<Ue.length&&(c=N(Me),d=L(Me,":not(."+this.options.selectedClass+")"),!qe&&p.animation&&(Me.thisAnimationDuration=null),l.captureAnimationState(),qe||(p.animation&&(Me.fromRect=c,Ue.forEach(function(e){var t;e.thisAnimationDuration=null,e!==Me&&(t=We?N(e):c,e.fromRect=t,l.addAnimationState({target:e,rect:t}))})),Ge(),Ue.forEach(function(e){h[d]?o.insertBefore(e,h[d]):o.appendChild(e),d++}),s!==L(Me))||(u=!1,Ue.forEach(function(e){e.sortableIndex===L(e)||(u=!0)}),u&&r("update")),Ue.forEach(function(e){x(e)}),l.animateAll()),Be=l),(n===o||a&&"clone"!==a.lastPutMode)&&ze.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}},nullingGlobal:function(){this.isMultiDrag=Ve=!1,ze.length=0},destroyGlobal:function(){this._deselectMultiDrag(),r(document,"pointerup",this._deselectMultiDrag),r(document,"mouseup",this._deselectMultiDrag),r(document,"touchend",this._deselectMultiDrag),r(document,"keydown",this._checkKeyDown),r(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==Ve&&Ve||Be!==this.sortable||e&&k(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;Ue.length;){var t=Ue[0];E(t,this.options.selectedClass,!1),Ue.shift(),_({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Object.assign(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[M];t&&t.options.multiDrag&&!~Ue.indexOf(e)&&(Be&&Be!==t&&(Be.multiDrag._deselectMultiDrag(),Be=t),E(e,t.options.selectedClass,!0),Ue.push(e))},deselect:function(e){var t=e.parentNode[M],n=Ue.indexOf(e);t&&t.options.multiDrag&&~n&&(E(e,t.options.selectedClass,!1),Ue.splice(n,1))}},eventProperties:function(){var n=this,o=[],i=[];return Ue.forEach(function(e){var t;o.push({multiDragElement:e,index:e.sortableIndex}),t=We&&e!==Me?-1:We?L(e,":not(."+n.options.selectedClass+")"):L(e),i.push({multiDragElement:e,index:t})}),{items:[].concat(Ue),clones:[].concat(ze),oldIndicies:o,newIndicies:i}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":1<e.length&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}),Pe}),function(e){define("select2",[],function(){return function(){var i;void 0===(i=jQuery).fn.each2&&i.extend(i.fn,{each2:function(e){for(var t=i([0]),n=-1,o=this.length;++n<o&&(t.context=t[0]=this[n])&&!1!==e.call(t[0],n,t););return this}}),function(y,v){"use strict";var e,t,n,b,i,a,w,c,o,r,s;function l(e){var t=y(document.createTextNode(""));e.before(t),t.before(e),t.remove()}function d(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return o[e]||e})}function u(e,t){for(var n=0,o=t.length;n<o;n+=1)if(p(e,t[n]))return n;return-1}function p(e,t){return e===t||e!==v&&t!==v&&(null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+""))}function h(e,t,n){var o,i,r;if(null===e||e.length<1)return[];for(i=0,r=(o=e.split(t)).length;i<r;i+=1)o[i]=n(o[i]);return o}function f(e){return e.outerWidth(!1)-e.width()}function m(t){var n="keyup-change-value";t.on("keydown",function(){y.data(t,n)===v&&y.data(t,n,t.val())}),t.on("keyup",function(){var e=y.data(t,n);e!==v&&t.val()!==e&&(y.removeData(t,n),t.trigger("keyup-change"))})}function g(t,n,o){var i;return o=o||v,function(){var e=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(o,e)},t)}}function x(e){e.preventDefault(),e.stopPropagation()}function C(e,t,n){var o,i=[],r=y.trim(e.attr("class"));r&&y((r=""+r).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&i.push(this)}),(r=y.trim(t.attr("class")))&&y((r=""+r).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=n(this))&&i.push(o)}),e.attr("class",i.join(" "))}function S(e,t,n,o){var i=d(e.toUpperCase()).indexOf(d(t.toUpperCase())),t=t.length;i<0?n.push(o(e)):(n.push(o(e.substring(0,i))),n.push("<span class='select2-match'>"),n.push(o(e.substring(i,i+t))),n.push("</span>"),n.push(o(e.substring(i+t,e.length))))}function T(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(r){var e,s=null,t=r.quietMillis||100,a=r.url,l=this;return function(i){window.clearTimeout(e),e=window.setTimeout(function(){var e=r.data,t=a,n=r.transport||y.fn.select2.ajaxDefaults.transport,o={type:r.type||"GET",cache:r.cache||!1,jsonpCallback:r.jsonpCallback||v,dataType:r.dataType||"json"},o=y.extend({},y.fn.select2.ajaxDefaults.params,o),e=e?e.call(l,i.term,i.page,i.context):null,t="function"==typeof t?t.call(l,i.term,i.page,i.context):t;s&&"function"==typeof s.abort&&s.abort(),r.params&&(y.isFunction(r.params)?y.extend(o,r.params.call(l)):y.extend(o,r.params)),y.extend(o,{url:t,dataType:r.dataType,data:e,success:function(e){e=r.results(e,i.page,i);i.callback(e)},error:function(e,t,n){n={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};i.callback(n)}}),s=n.call(l,o)},t)}}function I(e){var t,n,o=e,a=function(e){return""+e.text};y.isArray(o)&&(o={results:n=o}),!1===y.isFunction(o)&&(n=o,o=function(){return n});e=o();return e.text&&(a=e.text,y.isFunction(a)||(t=e.text,a=function(e){return e[t]})),function(i){var r,s=i.term,n={results:[]};""!==s?(r=function(e,t){var n,o;if((e=e[0]).children){for(o in n={},e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.children=[],y(e.children).each2(function(e,t){r(t,n.children)}),(n.children.length||i.matcher(s,a(n),e))&&t.push(n)}else i.matcher(s,a(e),e)&&t.push(e)},y(o().results).each2(function(e,t){r(t,n.results)}),i.callback(n)):i.callback(o())}}function F(t){var r=y.isFunction(t);return function(n){var o=n.term,i={results:[]},e=r?t(n):t;y.isArray(e)&&(y(e).each(function(){var e=this.text!==v,t=e?this.text:this;""!==o&&!n.matcher(o,t)||i.results.push(e?this:{id:this,text:this})}),n.callback(i))}}function D(e,t){if(y.isFunction(e))return 1;if(e){if("string"==typeof e)return 1;throw new Error(t+" must be a string, function, or falsy value")}}function k(e,t){if(y.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return e.apply(t,n)}return e}function E(){var n=this;y.each(arguments,function(e,t){n[t].remove(),n[t]=null})}function P(e,t){function n(){}return((n.prototype=new e).constructor=n).prototype.parent=e.prototype,n.prototype=y.extend(n.prototype,t),n}window.Select2===v&&(a={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which||e){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return 112<=(e=e.which||e)&&e<=123}},o={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"},s=y(document),r=1,b=function(){return r++},e=P(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(e){var r,t,n,o,i,s=".select2-results";this.opts=e=this.prepareOpts(e),this.id=e.id,e.element.data("select2")!==v&&null!==e.element.data("select2")&&e.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=y(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=y("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(e.element.attr("id")||"autogen"+b()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",e.element.attr("title")),this.body=y(document.body),C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",e.element.attr("style")),this.container.css(k(e.containerCss,this.opts.element)),this.container.addClass(k(e.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",x),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(e.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",x),this.results=r=this.container.find(s),this.search=t=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",x),this.results.on("mousemove",function(e){a!==v&&a.x===e.pageX&&a.y===e.pageY||y(e.target).trigger("mousemove-filtered",e)}),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),n=80,o=this.results,i=g(n,function(e){o.trigger("scroll-debounced",e)}),o.on("scroll",function(e){0<=u(e.target,o.get())&&i(e)}),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),y(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),y(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),y.fn.mousewheel&&r.mousewheel(function(e,t,n,o){var i=r.scrollTop();0<o&&i-o<=0?(r.scrollTop(0),x(e)):o<0&&r.get(0).scrollHeight-r.scrollTop()+o<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),x(e))}),m(t),t.on("keyup-change input paste",this.bind(this.updateResults)),t.on("focus",function(){t.addClass("select2-focused")}),t.on("blur",function(){t.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(e){0<y(e.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.lastSearchTerm=v,y.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==e.maximumInputLength&&this.search.attr("maxlength",e.maximumInputLength);s=e.element.prop("disabled");s===v&&(s=!1),this.enable(!s);s=e.element.prop("readonly");s===v&&(s=!1),this.readonly(s),w=w||function(){var e=y("<div class='select2-measure-scrollbar'></div>");e.appendTo(document.body);var t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t}(),this.autofocus=e.element.prop("autofocus"),e.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",e.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2"),n=this;this.close(),e.length&&e[0].detachEvent&&n._sync&&e.each(function(){n._sync&&this.detachEvent("onpropertychange",n._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,t!==v&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.removeData("select2").off(".select2"),e.is("input[type='hidden']")?e.css("display",""):(e.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())),E.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:p(e.attr("locked"),"locked")||p(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(m){var t,e,n,g=this,s=m.element;if("select"===s.get(0).tagName.toLowerCase()&&(this.select=e=m.element),e&&y.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in m)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),m.debug=m.debug||y.fn.select2.defaults.debug,m.debug&&console&&console.warn&&(null!=m.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=m.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=m.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=m.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=m.ajax&&null!=m.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=m.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=m.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=m.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=m.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=m.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=m.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),m.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=m.element.data("tags")&&(n=m.element.data("tags"),y.isArray(n)||(n=[]),m.element.data("select2Tags",n)),null!=m.sorter&&(m.sortResults=m.sorter),null!=m.selectOnClose&&(m.selectOnBlur=m.selectOnClose),null!=m.ajax&&y.isFunction(m.ajax.processResults)&&(m.ajax.results=m.ajax.processResults),null!=m.language&&(n=m.language,y.isFunction(n.noMatches)&&(m.formatNoMatches=n.noMatches),y.isFunction(n.searching)&&(m.formatSearching=n.searching),y.isFunction(n.inputTooShort)&&(m.formatInputTooShort=n.inputTooShort),y.isFunction(n.inputTooLong)&&(m.formatInputTooLong=n.inputTooLong),y.isFunction(n.loadingMore)&&(m.formatLoading=n.loadingMore),y.isFunction(n.maximumSelected)&&(m.formatSelectionTooBig=n.maximumSelected)),"function"!=typeof(m=y.extend({},{populateResults:function(e,t,u){var p=this.opts.id,h=this.liveRegion,f=function(e,t,n){for(var o,i,r,s,a,l=[],c=0,d=(e=m.sortResults(e,t,u)).length;c<d;c+=1)r=!(a=!0===(o=e[c]).disabled)&&p(o)!==v,s=o.children&&0<o.children.length,(i=y("<li></li>")).addClass("select2-results-dept-"+n),i.addClass("select2-result"),i.addClass(r?"select2-result-selectable":"select2-result-unselectable"),a&&i.addClass("select2-disabled"),s&&i.addClass("select2-result-with-children"),i.addClass(g.opts.formatResultCssClass(o)),i.attr("role","presentation"),(r=y(document.createElement("div"))).addClass("select2-result-label"),r.attr("id","select2-result-label-"+b()),r.attr("role","option"),(a=m.formatResult(o,r,u,g.opts.escapeMarkup))!==v&&(r.html(a),i.append(r)),s&&((s=y("<ul></ul>")).addClass("select2-result-sub"),f(o.children,s,n+1),i.append(s)),i.data("select2-data",o),l.push(i[0]);t.append(l),h.text(m.formatMatches(e.length))};f(t,e,0)}},y.fn.select2.defaults,m)).id&&(t=m.id,m.id=function(e){return e[t]}),y.isArray(m.element.data("select2Tags"))){if("tags"in m)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+m.element.attr("id");m.tags=m.element.data("select2Tags")}if(e?(m.query=this.bind(function(o){var e,n={results:[],more:!1},i=o.term,r=function(e,t){var n;e.is("option")?o.matcher(i,e.text(),e)&&t.push(g.optionToData(e)):e.is("optgroup")&&(n=g.optionToData(e),e.children().each2(function(e,t){r(t,n.children)}),0<n.children.length&&t.push(n))},t=s.children();this.getPlaceholder()!==v&&0<t.length&&(e=this.getPlaceholderOption())&&(t=t.not(e)),t.each2(function(e,t){r(t,n.results)}),o.callback(n)}),m.id=function(e){return e.id}):"query"in m||("ajax"in m?((e=m.element.data("ajax-url"))&&0<e.length&&(m.ajax.url=e),m.query=_.call(m.element,m.ajax)):"data"in m?m.query=I(m.data):"tags"in m&&(m.query=F(m.tags),m.createSearchChoice===v&&(m.createSearchChoice=function(e){return{id:y.trim(e),text:y.trim(e)}}),m.initSelection===v&&(m.initSelection=function(e,t){var n=[];y(h(e.val(),m.separator,m.transformVal)).each(function(){var e={id:this,text:this},t=m.tags;y.isFunction(t)&&(t=t()),y(t).each(function(){if(p(this.id,e.id))return e=this,!1}),n.push(e)}),t(n)}))),"function"!=typeof m.query)throw"query function not defined for Select2 "+m.element.attr("id");if("top"===m.createSearchChoicePosition)m.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===m.createSearchChoicePosition)m.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof m.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return m},monitorSource:function(){var e,t=this.opts.element,n=this;t.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=t.prop("disabled");e===v&&(e=!1),this.enable(!e);e=t.prop("readonly");e===v&&(e=!1),this.readonly(e),this.container&&(C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(k(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(this.opts.dropdownCssClass,this.opts.element)))}),t.length&&t[0].attachEvent&&t.each(function(){this.attachEvent("onpropertychange",n._sync)}),(e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==v&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new e(function(e){y.each(e,n._sync)}),this.propertyObserver.observe(t.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){e=y.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(e),!e.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=y.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===v&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===v&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,t,n,o=this.dropdown,i=this.container,r=i.offset(),s=i.outerHeight(!1),a=i.outerWidth(!1),l=o.outerHeight(!1),c=y(window),d=c.width(),u=c.height(),p=c.scrollLeft()+d,h=c.scrollTop()+u,f=r.top+s,m=r.left,g=f+l<=h,v=r.top-l>=c.scrollTop(),b=o.outerWidth(!1);o.hasClass("select2-drop-above")?(e=!0,!v&&g&&(e=!(t=!0))):(e=!1,!g&&v&&(e=t=!0)),t&&(o.hide(),r=this.container.offset(),s=this.container.outerHeight(!1),a=this.container.outerWidth(!1),l=o.outerHeight(!1),p=c.scrollLeft()+d,c.scrollTop(),f=r.top+s,m=r.left,b=o.outerWidth(!1),o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(n=y(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),a<(b=o.outerWidth(!1)+(n.scrollHeight===n.clientHeight?0:w.width))?a=b:b=a,l=o.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(f-=(n=this.body.offset()).top,m-=n.left),!(m+b<=p)&&r.left+p+i.outerWidth(!1)>b&&(m=r.left+this.container.outerWidth(!1)-b),a={left:m,width:a},e?(this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above"),l=o.outerHeight(!1),a.top=r.top-l,a.bottom="auto"):(a.top=f,a.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),a=y.extend(a,k(this.opts.dropdownCss,this.opts.element)),o.css(a)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=y.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),s.on("mousemove.select2Event",function(e){a.x=e.pageX,a.y=e.pageY}),!0)},opening:function(){var n,e=this.containerEventName,t="scroll."+e,o="resize."+e,i="orientationchange."+e;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(n=y("#select2-drop-mask")).length&&((n=y(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body),n.on("mousedown touchstart click",function(e){l(n);var t=y("#select2-drop");0<t.length&&((t=t.data("select2")).opts.selectOnBlur&&t.selectHighlighted({noFocus:!0}),t.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),y("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){y(this).on(o+" "+t+" "+i,function(e){r.opened()&&r.positionDropdown()})})},close:function(){var e,t,n,o;this.opened()&&(e=this.containerEventName,t="scroll."+e,n="resize."+e,o="orientationchange."+e,this.container.parents().add(window).each(function(){y(this).off(t).off(n).off(o)}),this.clearDropdownAlignmentPreference(),y("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),s.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(y.Event("select2-close")))},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var e=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return e!==v&&(this.search.val(e),this.search.select(),!0)},getMaximumSelectionSize:function(){return k(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,t,n,o,i,r=this.results,s=this.highlight();s<0||(0!=s?(e=this.findHighlightableChoices().find(".select2-result-label"),n=(i=((t=y(e[s])).offset()||{}).top||0)+t.outerHeight(!0),s===e.length-1&&0<(o=r.find("li.select2-more-results")).length&&(n=o.offset().top+o.outerHeight(!0)),(o=r.offset().top+r.outerHeight(!1))<n&&r.scrollTop(r.scrollTop()+(n-o)),(i=i-r.offset().top)<0&&"none"!=t.css("display")&&r.scrollTop(r.scrollTop()+i)):r.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var t=this.findHighlightableChoices(),n=this.highlight();-1<n&&n<t.length;){var o=y(t[n+=e]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(e){var t=this.findHighlightableChoices();if(0===arguments.length)return u(t.filter(".select2-highlighted")[0],t.get());e>=t.length&&(e=t.length-1),e<0&&(e=0),this.removeHighlight(),(e=y(t[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",e.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(e.text()),(e=e.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var t=y(e.target).closest(".select2-result-selectable");0<t.length&&!t.is(".select2-highlighted")?(e=this.findHighlightableChoices(),this.highlight(e.index(t))):0==t.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,n=t.find("li.select2-more-results"),o=this.resultsPage+1,i=this,r=this.search.val(),s=this.context;0!==n.length&&n.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:o,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){i.opened()&&(i.opts.populateResults.call(this,t,e.results,{term:r,page:o,context:s}),i.postprocessResults(e,!1,!1),!0===e.more?(n.detach().appendTo(t).html(i.opts.escapeMarkup(k(i.opts.formatLoadMore,i.opts.element,o+1))),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):n.remove(),i.positionDropdown(),i.resultsPage=o,i.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})}))},tokenize:function(){},updateResults:function(n){var e,o,i=this.search,r=this.results,s=this.opts,a=this,t=i.val(),l=y.data(this.container,"select2-last-term");if((!0===n||!l||!p(t,l))&&(y.data(this.container,"select2-last-term",t),!0===n||!1!==this.showSearchInput&&this.opened())){o=++this.queryCount;t=this.getMaximumSelectionSize();if(!(1<=t&&(e=this.data(),y.isArray(e)&&e.length>=t&&D(s.formatSelectionTooBig,"formatSelectionTooBig"))))return i.val().length<s.minimumInputLength?(D(s.formatInputTooShort,"formatInputTooShort")?d("<li class='select2-no-results'>"+k(s.formatInputTooShort,s.element,i.val(),s.minimumInputLength)+"</li>"):d(""),void(n&&this.showSearch&&this.showSearch(!0))):void(s.maximumInputLength&&i.val().length>s.maximumInputLength?D(s.formatInputTooLong,"formatInputTooLong")?d("<li class='select2-no-results'>"+k(s.formatInputTooLong,s.element,i.val(),s.maximumInputLength)+"</li>"):d(""):(s.formatSearching&&0===this.findHighlightableChoices().length&&d("<li class='select2-searching'>"+k(s.formatSearching,s.element)+"</li>"),i.addClass("select2-active"),this.removeHighlight(),(e=this.tokenize())!=v&&null!=e&&i.val(e),this.resultsPage=1,s.query({element:s.element,term:i.val(),page:this.resultsPage,context:null,matcher:s.matcher,callback:this.bind(function(e){var t;if(o==this.queryCount)if(this.opened())if(e.hasError!==v&&D(s.formatAjaxError,"formatAjaxError"))d("<li class='select2-ajax-error'>"+k(s.formatAjaxError,s.element,e.jqXHR,e.textStatus,e.errorThrown)+"</li>");else{if(this.context=e.context===v?null:e.context,this.opts.createSearchChoice&&""!==i.val()&&(t=this.opts.createSearchChoice.call(a,i.val(),e.results))!==v&&null!==t&&a.id(t)!==v&&null!==a.id(t)&&0===y(e.results).filter(function(){return p(a.id(this),a.id(t))}).length&&this.opts.createSearchChoicePosition(e.results,t),0===e.results.length&&D(s.formatNoMatches,"formatNoMatches"))return d("<li class='select2-no-results'>"+k(s.formatNoMatches,s.element,i.val())+"</li>"),void(this.showSearch&&this.showSearch(i.val()));r.empty(),a.opts.populateResults.call(this,r,e.results,{term:i.val(),page:this.resultsPage,context:null}),!0===e.more&&D(s.formatLoadMore,"formatLoadMore")&&(r.append("<li class='select2-more-results'>"+s.escapeMarkup(k(s.formatLoadMore,s.element,this.resultsPage))+"</li>"),window.setTimeout(function(){a.loadMoreIfNeeded()},10)),this.postprocessResults(e,n),c(),this.opts.element.trigger({type:"select2-loaded",items:e})}else this.search.removeClass("select2-active")})})));d("<li class='select2-selection-limit'>"+k(s.formatSelectionTooBig,s.element,t)+"</li>")}function c(){i.removeClass("select2-active"),a.positionDropdown(),r.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?a.liveRegion.text(r.text()):a.liveRegion.text(a.opts.formatMatches(r.find('.select2-result-selectable:not(".select2-selected")').length))}function d(e){r.html(e),c()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var n;(n=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var e=n[0],t=n.val().length;n.focus(),(0<e.offsetWidth||0<e.offsetHeight)&&e===document.activeElement&&(e.setSelectionRange?e.setSelectionRange(t,t):e.createTextRange&&((e=e.createTextRange()).collapse(!1),e.select()))},0)},selectHighlighted:function(e){var t,n;this._touchMoved?this.clearTouchMoved():(t=this.highlight(),(n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data"))?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close())},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==v?e.text():v)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();return this.opts.placeholderOption!==v?"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select):""===y.trim(e.text())&&""===e.val()?e:void 0}},initContainerWidth:function(){var e=function(){var e,t,n,o,i;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return y.isFunction(this.opts.width)?this.opts.width():this.opts.width;if("string"==typeof(e=this.opts.element.attr("style")))for(o=0,i=(t=e.split(";")).length;o<i;o+=1)if(null!==(n=t[o].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=n.length)return n[1];return"resolve"===this.opts.width?0<(e=this.opts.element.css("width")).indexOf("%")?e:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==e&&this.container.css("width",e)}}),t=P(e,{createContainer:function(){return y(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,t;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(e=this.search.get(0)).createTextRange?((t=e.createTextRange()).collapse(!1),t.select()):e.setSelectionRange&&(t=this.search.val().length,e.setSelectionRange(t,t))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(y.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){y("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),E.call(this,"selection","focusser")},initContainer:function(){var t,e=this.container,n=this.dropdown,o=b();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),e=y("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(e.text()).attr("for",this.focusser.attr("id"));o=this.opts.element.attr("title");this.opts.element.attr("title",o||e.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(y("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==c.PAGE_UP&&e.which!==c.PAGE_DOWN)switch(e.which){case c.UP:case c.DOWN:return this.moveHighlight(e.which===c.UP?-1:1),void x(e);case c.ENTER:return this.selectHighlighted(),void x(e);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(e),void x(e)}else x(e)})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&1<this.results.length&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==c.TAB&&!c.isControl(e)&&!c.isFunctionKey(e)&&e.which!==c.ESC){if(!1!==this.opts.openOnEnter||e.which!==c.ENTER)return e.which==c.DOWN||e.which==c.UP||e.which==c.ENTER&&this.opts.openOnEnter?e.altKey||e.ctrlKey||e.shiftKey||e.metaKey?void 0:(this.open(),void x(e)):void(e.which!=c.DELETE&&e.which!=c.BACKSPACE||(this.opts.allowClear&&this.clear(),x(e)));x(e)}})),m(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){0<=this.opts.minimumResultsForSearch&&(e.stopPropagation(),this.opened()||this.open())})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),(e=e).preventDefault(),e.stopImmediatePropagation(),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(e){l(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(y.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),x(e)})),n.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){x(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(y.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(y.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(y.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var t,n=this.selection.data("select2-data");n&&(t=y.Event("select2-clearing"),this.opts.element.trigger(t),t.isDefaultPrevented()||(t=this.getPlaceholderOption(),this.opts.element.val(t?t.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))))},initSelection:function(){var t;this.isPlaceholderOptionSelected()?(this.updateSelection(null),this.close(),this.setPlaceholder()):(t=this).opts.initSelection.call(null,this.opts.element,function(e){e!==v&&null!==e&&(t.updateSelection(e),t.close(),t.setPlaceholder(),t.lastSearchTerm=t.search.val())})},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==v&&((e=this.getPlaceholderOption())!==v&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===v||null===this.opts.element.val())},prepareOpts:function(){var s=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===s.element.get(0).tagName.toLowerCase()?s.initSelection=function(e,t){e=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(e))}:"data"in s&&(s.initSelection=s.initSelection||function(e,t){var i=e.val(),r=null;s.query({matcher:function(e,t,n){var o=p(i,s.id(n));return o&&(r=n),o},callback:y.isFunction(t)?function(){t(r)}:y.noop})}),s},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===v?v:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();this.isPlaceholderOptionSelected()&&e!==v&&(this.select&&this.getPlaceholderOption()===v||(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")))},postprocessResults:function(e,t,n){var o=0,i=this;this.findHighlightableChoices().each2(function(e,t){if(p(i.id(t.data("select2-data")),i.opts.element.val()))return o=e,!1}),!1!==n&&(!0===t&&0<=o?this.highlight(o):this.highlight(0)),!0!==t||0<=(t=this.opts.minimumResultsForSearch)&&this.showSearch(function n(e){var o=0;return y.each(e,function(e,t){t.children?o+=n(t.children):o++}),o}(e.results)>=t)},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),y(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(e,t){var n,o;this.triggerSelect(e)&&(n=this.opts.element.val(),o=this.data(),this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),p(n,this.id(e))||this.triggerChange({added:e,removed:o}))},updateSelection:function(e){var t,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),n.empty(),null!==e&&(t=this.opts.formatSelection(e,n,this.opts.escapeMarkup)),t!==v&&n.append(t),(e=this.opts.formatSelectionCssClass(e,n))!==v&&n.addClass(e),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==v&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,n=null,o=this,i=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],1<arguments.length&&(t=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return n=o.optionToData(t),!1}),this.updateSelection(n),this.setPlaceholder(),t&&this.triggerChange({added:n,removed:i});else if(e||0===e){if(this.opts.initSelection===v)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){o.opts.element.val(e?o.id(e):""),o.updateSelection(e),o.setPlaceholder(),t&&o.triggerChange({added:e,removed:i})})}else this.clear(t)},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,n=!1;if(0===arguments.length)return(t=this.selection.data("select2-data"))==v&&(t=null),t;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),1<arguments.length&&(n=arguments[1]),e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:t})):this.clear(n)}}),n=P(e,{createContainer:function(){return y(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var l=this.parent.prepareOpts.apply(this,arguments),o=this;return"select"===l.element.get(0).tagName.toLowerCase()?l.initSelection=function(e,t){var n=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){n.push(o.optionToData(t))}),t(n)}:"data"in l&&(l.initSelection=l.initSelection||function(e,r){var s=h(e.val(),l.separator,l.transformVal),a=[];l.query({matcher:function(e,t,n){var o=y.grep(s,function(e){return p(e,l.id(n))}).length;return o&&a.push(n),o},callback:y.isFunction(r)?function(){for(var e=[],t=0;t<s.length;t++)for(var n=s[t],o=0;o<a.length;o++){var i=a[o];if(p(n,l.id(i))){e.push(i),a.splice(o,1);break}}r(e)}:y.noop})}),l},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){y("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),E.call(this,"searchContainer","selection")},initContainer:function(){var l,e=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=l=this.container.find(e);var t=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(e){t.search[0].focus(),t.selectChoice(y(this))}),this.search.attr("id","s2id_autogen"+b()),this.search.prev().text(y("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t,n,o,i=l.find(".select2-search-choice-focus"),r=i.prev(".select2-search-choice:not(.select2-locked)"),s=i.next(".select2-search-choice:not(.select2-locked)"),o=(t=this.search,a=o=0,"selectionStart"in(t=y(t)[0])?(o=t.selectionStart,a=t.selectionEnd-o):"selection"in document&&(t.focus(),n=document.selection.createRange(),a=document.selection.createRange().text.length,n.moveStart("character",-t.value.length),o=n.text.length-a),{offset:o,length:a});if(i.length&&(e.which==c.LEFT||e.which==c.RIGHT||e.which==c.BACKSPACE||e.which==c.DELETE||e.which==c.ENTER)){var a=i;return e.which==c.LEFT&&r.length?a=r:e.which==c.RIGHT?a=s.length?s:null:e.which===c.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),a=r.length?r:s):e.which==c.DELETE?this.unselect(i.first())&&(this.search.width(10),a=s.length?s:null):e.which==c.ENTER&&(a=null),this.selectChoice(a),x(e),void(a&&a.length||this.open())}if((e.which===c.BACKSPACE&&1==this.keydowns||e.which==c.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(l.find(".select2-search-choice:not(.select2-locked)").last()),void x(e);if(this.selectChoice(null),this.opened())switch(e.which){case c.UP:case c.DOWN:return this.moveHighlight(e.which===c.UP?-1:1),void x(e);case c.ENTER:return this.selectHighlighted(),void x(e);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(e),void x(e)}if(e.which!==c.TAB&&!c.isControl(e)&&!c.isFunctionKey(e)&&e.which!==c.BACKSPACE&&e.which!==c.ESC){if(e.which===c.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==c.PAGE_UP&&e.which!==c.PAGE_DOWN||x(e),e.which===c.ENTER&&x(e)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(y.Event("select2-blur"))})),this.container.on("click",e,this.bind(function(e){this.isInterfaceEnabled()&&(0<y(e.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(y.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",e,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(y.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var t;""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),!this.select&&""===this.opts.element.val()||(t=this).opts.initSelection.call(null,this.opts.element,function(e){e!==v&&null!==e&&(t.updateSelection(e),t.close(),t.clearSearch())})},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();e!==v&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(0<t?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(y.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var t={},n=[],o=this;y(e).each(function(){o.id(this)in t||(t[o.id(this)]=0,n.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(n),o.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=v&&(this.search.val(e),0<e.length&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),!this.opts.closeOnSelect&&0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(e){var t=this.getVal(),n=this;y(e).each(function(){t.push(n.createChoice(this))}),this.setVal(t)},createChoice:function(e){var t=!e.locked,n=y("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),o=y("<li class='select2-search-choice select2-locked'><div></div></li>"),i=t?n:o,n=this.id(e),o=this.opts.formatSelection(e,i.find("div"),this.opts.escapeMarkup);return o!=v&&i.find("div").replaceWith(y("<div></div>").html(o)),(o=this.opts.formatSelectionCssClass(e,i.find("div")))!=v&&i.addClass(o),t&&i.find(".select2-search-choice-close").on("mousedown",x).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(y(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),x(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),i.data("select2-data",e),i.insertBefore(this.searchContainer),n},unselect:function(e){var t,n,o=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(t=e.data("select2-data")){var i=y.Event("select2-removing");if(i.val=this.id(t),i.choice=t,this.opts.element.trigger(i),i.isDefaultPrevented())return!1;for(;0<=(n=u(this.id(t),o));)o.splice(n,1),this.setVal(o),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}),!0}},postprocessResults:function(e,t,n){var o=this.getVal(),i=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),s=this;i.each2(function(e,t){0<=u(s.id(t.data("select2-data")),o)&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==n&&!0===this.opts.closeOnSelect&&s.highlight(0),!this.opts.createSearchChoice&&0<!i.filter(".select2-result:not(.select2-selected)").length&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&D(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+k(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-f(this.search)},resizeSearch:function(){var e,t,n,o=f(this.search);t=this.search,i||(n=t[0].currentStyle||window.getComputedStyle(t[0],null),(i=y(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),y(document.body).append(i)),i.text(t.val()),e=i.width()+10,n=this.search.offset().left,(n=(t=this.selection.width())-(n-this.selection.offset().left)-o)<e&&(n=t-o),n<40&&(n=t-o),n<=0&&(n=e),this.search.width(Math.floor(n))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:h(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(e){var t,n;this.select?this.select.val(e):(t=[],n={},y(e).each(function(){this in n||(t.push(this),n[this]=0)}),this.opts.element.val(0===t.length?"":t.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var o=0;o<e.length;o++)if(p(this.opts.id(t[n]),this.opts.id(e[o]))){t.splice(n,1),n--,e.splice(o,1);break}return{added:t,removed:e}},val:function(e,n){var o,i=this;if(0===arguments.length)return this.getVal();if((o=this.data()).length||(o=[]),!e&&0!==e)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:o}));if(this.setVal(e),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===v)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var t=y.map(e,i.id);i.setVal(t),i.updateSelection(e),i.clearSearch(),n&&i.triggerChange(i.buildChangeDetails(o,i.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],t=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(t.opts.id(y(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,t){var n,o,i=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return y(this).data("select2-data")}).get();o=this.data(),e=e||[],n=y.map(e,function(e){return i.opts.id(e)}),this.setVal(n),this.updateSelection(e),this.clearSearch(),t&&this.triggerChange(this.buildChangeDetails(o,this.data()))}}),y.fn.select2=function(){var e,t,n,o=Array.prototype.slice.call(arguments,0),i=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],r=["opened","isFocused","container","dropdown"],s=["val","data"],a={search:"externalSearch"};return this.each(function(){if(0===o.length||"object"==typeof o[0])(e=0===o.length?{}:y.extend({},o[0])).element=y(this),"select"===e.element.get(0).tagName.toLowerCase()?n=e.element.prop("multiple"):(n=e.multiple||!1,"tags"in e&&(e.multiple=n=!0)),(n=new(n?window.Select2.class.multi:window.Select2.class.single)).init(e);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(u(o[0],i)<0)throw"Unknown method: "+o[0];if(t=v,(n=y(this).data("select2"))!==v)return e=o[0],t="container"===e?n.container:"dropdown"===e?n.dropdown:(a[e]&&(e=a[e]),n[e].apply(n,o.slice(1))),!(0<=u(o[0],r)||0<=u(o[0],s)&&1==o.length)&&void 0}}),t===v?this:t},y.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,o){var i=[];return S(this.text(e),n.term,i,o),i.join("")},transformVal:function(e){return y.trim(e)},formatSelection:function(e,t,n){return e?n(this.text(e)):v},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,t){return v},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==v?null:e.id},text:function(e){return e&&this.data&&this.data.text?y.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(e,t){return 0<=d(""+t).toUpperCase().indexOf(d(""+e).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(e,t,n,o){var i,r,s,a,l,c=e,d=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return v;for(;;){for(r=-1,s=0,a=o.tokenSeparators.length;s<a&&(l=o.tokenSeparators[s],!(0<=(r=e.indexOf(l))));s++);if(r<0)break;if(i=e.substring(0,r),e=e.substring(r+l.length),0<i.length&&(i=o.createSearchChoice.call(this,i,t))!==v&&null!==i&&o.id(i)!==v&&null!==o.id(i)){for(d=!1,s=0,a=t.length;s<a;s++)if(p(o.id(i),o.id(t[s]))){d=!0;break}d||n(i)}}return c!==e?e:void 0},escapeMarkup:T,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,t){return v},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||0<navigator.msMaxTouchPoints)||!(e.opts.minimumResultsForSearch<0)}},y.fn.select2.locales=[],y.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){e=t-e.length;return"Please enter "+e+" or more character"+(1==e?"":"s")},formatInputTooLong:function(e,t){t=e.length-t;return"Please delete "+t+" character"+(1==t?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}},y.extend(y.fn.select2.defaults,y.fn.select2.locales.en),y.fn.select2.ajaxDefaults={transport:y.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:_,local:I,tags:F},util:{debounce:g,markMatch:S,escapeMarkup:T,stripDiacritics:d},class:{abstract:e,single:t,multi:n}})}(jQuery)}.apply(e,arguments)})}(this),define("mockup-patterns-select2",["jquery","pat-base","mockup-utils","sortable","select2"],function(a,e,l,o){"use strict";return e.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var i=this;i.options.initialValues&&(i.options.id=function(e){return e.id},i.options.initSelection=function(e,t){var n=[],e=e.val(),o=i.options.initialValues;"string"==typeof i.options.initialValues&&""!==i.options.initialValues&&("{"===i.options.initialValues[0]?o=JSON.parse(i.options.initialValues):(o={},a(i.options.initialValues.split(i.options.separator)).each(function(){var e=this.split(":"),t=a.trim(e[0]),e=a.trim(e[1]);o[t]=e}))),a(e.split(i.options.separator)).each(function(){var e=this;o[this]&&(e=o[this]),n.push({id:l.removeHTML(this),text:l.removeHTML(e)})}),t(n)})},initializeTags:function(){var e=this;e.options.tags&&"string"==typeof e.options.tags&&("["===e.options.tags.substr(0,1)?e.options.tags=JSON.parse(e.options.tags):e.options.tags=e.options.tags.split(e.options.separator)),e.options.tags&&!e.options.allowNewItems&&(e.options.data=a.map(e.options.tags,function(e,t){return{id:e,text:e}}),e.options.multiple=!0,delete e.options.tags)},initializeOrdering:function(){var n=this;n.options.orderable&&this.$el.on("change",function(e){var t=this.$select2[0].querySelector(".select2-choices");new o(t,{draggable:"li",dragClass:"select2-choice-dragging",chosenClass:"dragging",onStart:function(e){n.$el.select2("onSortStart")}.bind(this),onEnd:function(e){this.$el.select2("onSortEnd")}.bind(this)})}.bind(this))},initializeSelect2:function(){var n=this;function t(e,t){return e&&(n.options.debug&&console.debug("callback",e,t),"string"==typeof e&&(e=window[e]),e(t))}n.options.formatResultCssClass=function(e){if(e.id)return"select2-option-"+e.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},n.$el.select2(n.options),n.$el.on("select2-selected",function(e){t(n.options.onSelected,e)}),n.$el.on("select2-selecting",function(e){t(n.options.onSelecting,e)}),n.$el.on("select2-deselecting",function(e){t(n.options.onDeselecting,e)}),n.$el.on("select2-deselected",function(e){t(n.options.onDeselected,e)}),n.$select2=n.$el.parent().find(".select2-container"),n.$el.parent().off("close.plone-modal.patterns"),n.options.orderable&&n.$select2.addClass("select2-orderable")},opened:function(){return 1===a(".select2-dropdown-open",this.$el.parent()).length},init:function(){var r,e,t,n,s=this;s.options.allowNewItems=!s.options.hasOwnProperty("allowNewItems")||JSON.parse(s.options.allowNewItems),s.options.ajax||s.options.vocabularyUrl?(s.options.vocabularyUrl&&(s.options.multiple=void 0===s.options.multiple||s.options.multiple,s.options.ajax=s.options.ajax||{},s.options.ajax.url=s.options.vocabularyUrl,s.options.initSelection=function(e,t){var n=[],e=e.val();a(e.split(s.options.separator)).each(function(){var e=l.removeHTML(this);n.push({id:e,text:e})}),t(n)}),r="",s.options.ajax=a.extend({quietMillis:300,data:function(e,t){return{query:r=e,page_limit:10,page:t}},results:function(e,t){var n,o,i=e.results;return s.options.vocabularyUrl&&(n=[],a.each(e.results,function(e,t){n.push(t.id)}),i=[],o=""===r||0<=a.inArray(r,n),s.options.allowNewItems&&!o&&(r=l.removeHTML(r),i.push({id:r,text:r})),a.each(e.results,function(e,t){i.push(t)})),{results:i}}},s.options.ajax)):s.options.multiple&&s.$el.is("select")&&(e=s.$el.val()||[],t=a.map(s.$el.find("option"),function(e){return{text:a(e).html(),id:e.value}}),(n=a('<input type="hidden" />')).val(e.join(s.options.separator)),n.attr("class",s.$el.attr("class")),n.attr("name",s.$el.attr("name")),n.attr("id",s.$el.attr("id")),s.$orig=s.$el,s.$el.replaceWith(n),s.$el=n,s.options.data=t),s.initializeValues(),s.initializeTags(),s.initializeOrdering(),s.initializeSelect2()}})}),define("mockup-ui-url/views/base",["jquery","underscore","backbone","translate"],function(n,o,i,r){"use strict";return i.View.extend({isUIView:!0,eventPrefix:"ui",template:null,idPrefix:"base-",appendInContainer:!0,initialize:function(e){for(var t in this.options=e,this.options)this[t]=this.options[t];this.options._t=r},render:function(){return this.applyTemplate(),this.trigger("render",this),this.afterRender(),this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this},afterRender:function(){},serializedModel:function(){return this.options},applyTemplate:function(){var e,t;null!==this.template&&(e=n.extend({_t:r},this.options,this.serializedModel()),"string"==typeof(t=this.template)&&(t=o.template(t)),this.$el.html(t(e)))},propagateEvent:function(e){if(0<e.indexOf(":")){e=e.split(":")[0];if(""!==this.eventPrefix&&(e===this.eventPrefix||e===this.eventPrefix+"."+this.id))return!0}return!1},uiEventTrigger:function(e){var t=[].slice.call(arguments,0);""!==this.eventPrefix&&(t[0]=this.eventPrefix+":"+e,i.View.prototype.trigger.apply(this,t),this.id&&(t[0]=this.eventPrefix+"."+this.id+":"+e,i.View.prototype.trigger.apply(this,t)))}})}),define("mockup-patterns-tooltip",["jquery","pat-base"],function(c,e,t){"use strict";function n(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)}return n.VERSION="3.2.0",n.DEFAULTS={animation:!0,placement:"auto",selector:!1,template:'<div class="tooltip mockup-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!0,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,t,n){this.enabled=!0,this.type=e,this.$element=c(t),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&c(this.options.viewport.selector||this.options.viewport);for(var o=this.options.trigger.split(" "),i=o.length;i--;){var r,s=o[i];"click"==s?this.$element.on("click."+this.type,this.options.selector,c.proxy(this.toggle,this)):"manual"!=s&&(r="hover"==s?"mouseenter":"focusin",s="hover"==s?"mouseleave":"focusout",this.$element.on(r+"."+this.type,this.options.selector,c.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,c.proxy(this.leave,this)))}this.options.selector?this._options=c.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return(e=c.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var n={},o=this.getDefaults();return this._options&&c.each(this._options,function(e,t){o[e]!=t&&(n[e]=t)}),n},n.prototype.enter=function(e){var t=e instanceof this.constructor?e:c(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),c(e.currentTarget).data("bs."+this.type,t)),t.leaving=!1,clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)},n.prototype.leave=function(e){var t=e instanceof this.constructor?e:c(e.currentTarget).data("bs."+this.type);if(t.leaving=!0,t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),c(e.currentTarget).data("bs."+this.type,t)),clearTimeout(t.timeout),t.hoverState="out",!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)},n.prototype.show=function(){var e,s,a,l,t=c.Event("show.bs."+this.type);this.hasContent()&&this.enabled&&(this.$element.trigger(t),e=c.contains(document.documentElement,this.$element[0]),!t.isDefaultPrevented()&&e&&(s=this.tip(),a=this.getUID(this.type),(l=this).setContent().then(function(){s.attr("id",a),l.$element.attr("aria-describedby",a),l.options.animation&&s.addClass("fade");var e="function"==typeof l.options.placement?l.options.placement.call(l,s[0],l.$element[0]):l.options.placement,t=/\s?auto?\s?/i,n=t.test(e);n&&(e=e.replace(t,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(e).data("bs."+l.type,l),l.options.container?s.appendTo(l.options.container):s.insertAfter(l.$element);var o=l.getPosition(),i=s[0].offsetWidth,r=s[0].offsetHeight;n&&(t=e,n=l.$element.parent(),n=l.getPosition(n),e="bottom"==e&&o.top+o.height+r-n.scroll>n.height?"top":"top"==e&&o.top-n.scroll-r<0?"bottom":"right"==e&&o.right+i>n.width?"left":"left"==e&&o.left-i<n.left?"right":e,s.removeClass(t).addClass(e));r=l.getCalculatedOffset(e,o,i,r);l.applyPlacement(r,e);e=function(){l.$element.trigger("shown.bs."+l.type),l.hoverState=null,l.leaving&&l.leave(l)};c.support.transition&&l.$tip.hasClass("fade")?s.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()})))},n.prototype.applyPlacement=function(e,t){var n=this.tip(),o=n[0].offsetWidth,i=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),e.top=e.top+r,e.left=e.left+s,c.offset.setOffset(n[0],c.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),n.addClass("in");r=n[0].offsetWidth,s=n[0].offsetHeight;"top"==t&&s!=i&&(e.top=e.top+i-s);t=this.getViewportAdjustedDelta(t,e,r,s);t.left?e.left+=t.left:e.top+=t.top;i=t.left?2*t.left-o+r:2*t.top-i+s,s=t.left?"left":"top",t=t.left?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(i,n[0][t],s)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},n.prototype.setContent=function(){var t=this.tip(),n=this.options.html?"html":"text",o=this.options.patTooltip?this.options.patTooltip.contentSelector:null;function i(e){"html"===n&&o&&(e=c(e).find(o).html()),t.find(".tooltip-inner")[n](e)}function e(){t.removeClass("fade in top bottom left right")}var r=this.getTitle(),s=this.getUrl();return s?(e(),c.get(s).then(function(e){i(e)})):(e(),i(r),new Promise(function(e,t){e(r)}))},n.prototype.getUrl=function(){return this.options.patTooltip?this.options.patTooltip.ajaxUrl:null},n.prototype.hide=function(){var e=this,t=this.tip(),n=c.Event("hide.bs."+this.type);function o(){"in"!=e.hoverState&&t.detach(),e.$element.trigger("hidden.bs."+e.type)}if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(n),!n.isDefaultPrevented())return t.removeClass("in"),c.support.transition&&this.$tip.hasClass("fade")?t.one("bsTransitionEnd",o).emulateTransitionEnd(150):o(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;!e.attr("title")&&"string"==typeof e.attr("data-original-title")||e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()||this.getUrl()},n.prototype.getPosition=function(e){var t=(e=e||this.$element)[0],n="BODY"==t.tagName;return c.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:n?c(window).width():e.outerWidth(),height:n?c(window).height():e.outerHeight()},n?{top:0,left:0}:e.offset())},n.prototype.getCalculatedOffset=function(e,t,n,o){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-o,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-o/2,left:t.left-n}:{top:t.top+t.height/2-o/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,o){var i={top:0,left:0};if(!this.$viewport)return i;var r,s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);return/right|left/.test(e)?(e=t.top-s-a.scroll,r=t.top+s-a.scroll+o,e<a.top?i.top=a.top-e:r>a.top+a.height&&(i.top=a.top+a.height-r)):(r=t.left-s,n=t.left+s+n,r<a.left?i.left=a.left-r:n>a.width&&(i.left=a.left+a.width-n)),i},n.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},n.prototype.getUID=function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},n.prototype.tip=function(){if(this.$tip)return this.$tip;var e=this.$tip||c(this.options.template);return this.options.patTooltip&&(this.options.patTooltip.style&&e.css(this.options.patTooltip.style),this.options.patTooltip.class&&e.addClass(this.options.patTooltip.class),this.options.patTooltip.innerStyle&&e.find(".tooltip-inner").css(this.options.patTooltip.innerStyle)),this.$tip=e},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var t=this;e&&((t=c(e.currentTarget).data("bs."+this.type))||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),c(e.currentTarget).data("bs."+this.type,t))),t.tip().hasClass("in")?t.leave(t):t.enter(t)},n.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)},e.extend({name:"tooltip",trigger:".pat-tooltip",parser:"mockup",defaults:{html:!1,placement:"top"},init:function(){"true"===this.options.html||!0===this.options.html?this.options.html=!0:this.options.html=!1,this.data=new n(this.$el[0],this.options)}})}),define("mockup-ui-url/views/button",["underscore","mockup-ui-url/views/base","mockup-patterns-tooltip"],function(n,o,i){"use strict";return o.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"default",idPrefix:"btn-",attributes:{href:"#"},extraClasses:[],tooltip:null,template:'<% if (icon) { %><span class="glyphicon glyphicon-<%= icon %>"></span><% } %> <%= title %>',events:{click:"handleClick"},initialize:function(e){var t;e.id||(t=e.title||"",e.id=""!==t?t.toLowerCase().replace(" ","-"):this.cid),o.prototype.initialize.apply(this,[e]),this.on("render",function(){this.$el.attr("title",this.options.title||""),this.$el.attr("aria-label",this.options.title||this.options.tooltip||""),null!==this.context&&this.$el.addClass("btn-"+this.context),n.each(this.extraClasses,function(e){this.$el.addClass(e)}.bind(this)),null!==this.tooltip&&(this.$el.attr("title",this.tooltip),new i(this.$el),this.$el.on("hidden",function(e){"hidden"===e.type&&e.stopPropagation()}))},this)},handleClick:function(e){e.preventDefault(),this.$el.is(".disabled")||this.uiEventTrigger("click",this,e)},serializedModel:function(){return n.extend({icon:"",title:""},this.options)},disable:function(){this.$el.addClass("disabled")},enable:function(){this.$el.removeClass("disabled")}})}),define("text",["module"],function(e){"use strict";var l,i,s,a,c,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,r=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,u=d&&location.protocol&&location.protocol.replace(/\:/,""),p=d&&location.hostname,h=d&&(location.port||void 0),f={},m=e.config&&e.config()||{};function g(e,t){return void 0===e||""===e?t:e}return l={version:"2.0.16",strip:function(e){var t;return e?(t=(e=e.replace(n,"")).match(r))&&(e=t[1]):e="",e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(e){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,o=!1,i=e.lastIndexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==i&&(!r||1<i)?(t=e.substring(0,i),n=e.substring(i+1)):t=e,-1!==(i=(e=n||t).indexOf("!"))&&(o="strip"===e.substring(i+1),e=e.substring(0,i),n?n=e:t=e),{moduleName:t,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,o){var i,r=l.xdRegExp.exec(e);return!r||(i=r[2],r=(e=(e=r[3]).split(":"))[1],e=e[0],(!i||i===t)&&(!e||e.toLowerCase()===n.toLowerCase())&&(!r&&!e||function(e,t,n,o){if(t===o)return!0;if(e===n){if("http"===e)return g(t,"80")===g(o,"80");if("https"===e)return g(t,"443")===g(o,"443")}return!1}(i,r,t,o)))},finishLoad:function(e,t,n,o){n=t?l.strip(n):n,m.isBuild&&(f[e]=n),o(n)},load:function(t,e,n,o){var i,r,s;o&&o.isBuild&&!o.inlineText?n():(m.isBuild=o&&o.isBuild,r=(i=l.parseName(t)).moduleName+(i.ext?"."+i.ext:""),s=e.toUrl(r),o=m.useXhr||l.useXhr,0!==s.indexOf("empty:")?!d||o(s,u,p,h)?l.get(s,function(e){l.finishLoad(t,i.strip,e,n)},function(e){n.error&&n.error(e)}):e([r],function(e){l.finishLoad(i.moduleName+"."+i.ext,i.strip,e,n)},function(e){n.error&&n.error(e)}):n())},write:function(e,t,n,o){var i;f.hasOwnProperty(t)&&(i=l.jsEscape(f[t]),n.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n"))},writeFile:function(n,e,t,o,i){var r=l.parseName(e),e=r.ext?"."+r.ext:"",s=r.moduleName+e,a=t.toUrl(r.moduleName+e)+".js";l.load(s,t,function(e){function t(e){return o(a,e)}t.asModule=function(e,t){return o.asModule(e,a,t)},l.write(n,s,t,i)},i)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),l.get=function(e,t,n){try{var o=i.readFileSync(e,"utf8");"\ufeff"===o[0]&&(o=o.substring(1)),t(o)}catch(e){n&&n(e)}}):"xhr"===m.env||!m.env&&l.createXhr()?l.get=function(n,o,i,e){var t,r=l.createXhr();if(r.open("GET",n,!0),e)for(t in e)e.hasOwnProperty(t)&&r.setRequestHeader(t.toLowerCase(),e[t]);m.onXhr&&m.onXhr(r,n),r.onreadystatechange=function(e){var t;4===r.readyState&&(399<(t=r.status||0)&&t<600?((t=new Error(n+" HTTP status: "+t)).xhr=r,i&&i(t)):o(r.responseText),m.onXhrComplete&&m.onXhrComplete(r,n))},r.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?l.get=function(e,t){var n,o,e=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(e),"utf-8")),s="";try{for(n=new java.lang.StringBuffer,(o=r.readLine())&&o.length()&&65279===o.charAt(0)&&(o=o.substring(1)),null!==o&&n.append(o);null!==(o=r.readLine());)n.append(i),n.append(o);s=String(n.toString())}finally{r.close()}t(s)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,a=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),c="@mozilla.org/windows-registry-key;1"in s,l.get=function(e,t){var n,o,i,r={};c&&(e=e.replace(/\//g,"\\")),i=new FileUtils.File(e);try{(n=s["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream)).init(i,1,0,!1),(o=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream)).init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),r),o.close(),n.close(),t(r.value)}catch(e){throw new Error((i&&i.path||"")+": "+e)}}),l}),define("text!mockup-patterns-relateditems-url/templates/breadcrumb.xml",[],function(){return'<span class="separator">/<span>\n<a href="<%- path %>" class="crumb"><%- text %></a>\n'}),define("text!mockup-patterns-relateditems-url/templates/favorite.xml",[],function(){return'<li><a href="<%- path %>" class="fav" aria-labelledby="blip"><%- title %></a></li>\n'}),define("text!mockup-patterns-relateditems-url/templates/recentlyused.xml",[],function(){return'<li class="pattern-relateditems-recentlyused">\n  <a class="pattern-relateditems-recentlyused-select" data-uid="<%- UID %>">\n    <div class="pattern-relateditems-recentlyused-info">\n      <span\n        class="pattern-relateditems-recentlyused-title <%- portal_type ? \'contenttype-\' + portal_type.toLowerCase() : \'\' %> <%- review_state ? \'state-\' + review_state : \'\' %>"\n        title="<%- portal_type %>">\n        <%- Title %>\n      </span>\n      <span class="pattern-relateditems-recentlyused-path"><%- path %></span>\n    </div>\n    <% if (getURL && (getIcon || portal_type === "Image")) { %>\n      <div class="pattern-relateditems-recentlyused-image">\n        <img src="<%- getURL %>/@@images/image/tile" />\n      </div>\n    <% } %>\n  </a>\n</li>\n'}),define("text!mockup-patterns-relateditems-url/templates/result.xml",[],function(){return'<div class="pattern-relateditems-result <%- oneLevelUp ? \'one-level-up\' : \'\' %>">\n  <div class="pattern-relateditems-result-browse-wrapper">\n  <% if (!oneLevelUp) { %>\n    <a\n      class="pattern-relateditems-result-select<%- selectable ? \' selectable\' : \'\' %><%- oneLevelUp ? \' one-level-up\' : \'\' %>"\n      data-path="<%- path %>">\n  <% } %>\n      <div class="pattern-relateditems-result-info">\n        <span\n          class="pattern-relateditems-result-title <%- portal_type ? \'contenttype-\' + portal_type.toLowerCase() : \'\' %> <%- review_state ? \'state-\' + review_state : \'\' %>"\n          title="<%- portal_type %>">\n          <%- Title %>\n        </span>\n        <span class="pattern-relateditems-result-path"><%- oneLevelUp ? currentPath : path %></span>\n      </div>\n      <% if (is_folderish) { %>\n        <a\n          class="pattern-relateditems-result-browse"\n          data-path="<%- path %>"\n          title="<%- oneLevelUp ? one_level_up : open_folder %>">\n          <span class="<%- oneLevelUp ? \'icon-left-circle\' : \'icon-right-circle\' %>"></span>\n        </a>\n      <% } %>\n  <% if (!oneLevelUp) { %>\n    </a>\n  <% } %>\n  </div>\n  <% if (getURL && (getIcon || portal_type === "Image")) { %>\n    <% if (!oneLevelUp) { %>\n    <a\n      class="pattern-relateditems-result-select<%- selectable ? \' selectable\' : \'\' %><%- oneLevelUp ? \' one-level-up\' : \'\' %>"\n      data-path="<%- path %>">\n    <% } %>\n    <div class="pattern-relateditems-result-image">\n      <img src="<%- getURL %>/@@images/image/thumb" />\n    </div>\n    <% if (!oneLevelUp) { %>\n    </a>\n    <% } %>\n  <% } %>\n</div>\n'}),define("text!mockup-patterns-relateditems-url/templates/selection.xml",[],function(){return'<div class="pattern-relateditems-item">\n  <div class="pattern-relateditems-result-info">\n    <span\n      class="pattern-relateditems-item-title <%- portal_type ? \'contenttype-\' + portal_type.toLowerCase() : \'\' %> <%- review_state ? \'state-\' + review_state : \'\' %>"\n      title="<%- portal_type %>">\n      <%- Title %>\n    </span>\n    <span class="pattern-relateditems-item-path"><%- path %></span>\n  </div>\n  <% if (getURL && (getIcon || portal_type === "Image")) { %>\n    <div class="pattern-relateditems-item-image">\n      <img src="<%- getURL %>/@@images/image/thumb" />\n    </div>\n  <% } %>\n</div>\n'}),define("text!mockup-patterns-relateditems-url/templates/toolbar.xml",[],function(){return'<% if (mode!==\'auto\') { %>\n<div class="btn-group mode-selector" role="group">\n  <button type="button" class="mode search btn <% if (mode==\'search\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- searchModeText %></button>\n  <button type="button" class="mode browse btn <% if (mode==\'browse\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- browseModeText %></button>\n</div>\n<% } %>\n<div class="path-wrapper">\n  <span class="pattern-relateditems-path-label"><%- searchText %></span>\n  <a class="crumb" href="/"><span class="glyphicon glyphicon-home"/></a>\n  <%= items %>\n</div>\n<div class="controls pull-right">\n\n  <% if (recentlyUsedItems) { %>\n  <div class="recentlyUsed dropdown pull-right">\n    <button type="button" class="recentlyUsed dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-time"/>\n      <%- recentlyUsedText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= recentlyUsedItems %>\n    </ul>\n  </div>\n  <% } %>\n\n  <% if (favorites.length > 0) { %>\n  <div class="favorites dropdown pull-right">\n    <button type="button" class="favorites dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-star"/>\n      <%- favText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= favItems %>\n    </ul>\n  </div>\n  <% } %>\n</div>\n'}),define("mockup-patterns-relateditems",["jquery","underscore","pat-base","mockup-patterns-select2","mockup-ui-url/views/button","mockup-utils","pat-registry","translate","text!mockup-patterns-relateditems-url/templates/breadcrumb.xml","text!mockup-patterns-relateditems-url/templates/favorite.xml","text!mockup-patterns-relateditems-url/templates/recentlyused.xml","text!mockup-patterns-relateditems-url/templates/result.xml","text!mockup-patterns-relateditems-url/templates/selection.xml","text!mockup-patterns-relateditems-url/templates/toolbar.xml","bootstrap-dropdown"],function(l,c,e,t,d,u,n,p,o,i,r,s,a,h){"use strict";var f=37,m=39;return e.extend({name:"relateditems",trigger:".pat-relateditems",parser:"mockup",currentPath:void 0,selectedUIDs:[],openAfterInit:void 0,defaults:{vocabularyUrl:null,attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],basePath:"",pageSize:10,browsing:void 0,closeOnSelect:!0,contextPath:void 0,dropdownCssClass:"pattern-relateditems-dropdown",favorites:[],recentlyUsed:!1,recentlyUsedMaxItems:20,recentlyUsedKey:"relateditems_recentlyused",maximumSelectionSize:-1,minimumInputLength:0,mode:"auto",orderable:!0,pathOperator:"plone.app.querystring.operation.string.path",rootPath:"/",rootUrl:"",scanSelection:!1,selectableTypes:null,separator:",",sortOn:null,sortOrder:"ascending",tokenSeparators:[","," "],upload:!1,uploadAllowView:void 0,width:"100%",breadcrumbTemplate:o,breadcrumbTemplateSelector:null,favoriteTemplate:i,favoriteTemplateSelector:null,recentlyusedTemplate:r,recentlyusedTemplateSelector:null,resultTemplate:s,resultTemplateSelector:null,selectionTemplate:a,selectionTemplateSelector:null,toolbarTemplate:h,toolbarTemplateSelector:null,multiple:!0},recentlyUsed:function(e){var t=(t=u.storage.get(this.options.recentlyUsedKey)||[]).slice(t.length-1e3,t.length);e&&t.filter(this.isSelectable.bind(this));e=parseInt(this.options.recentlyUsedMaxItems,10);return e&&(t=t.slice(t.length-e,t.length)),t},applyTemplate:function(e,t){var n=this,o=n.options[e+"TemplateSelector"]&&(o=l(n.options[e+"TemplateSelector"]).html())||n.options[e+"Template"],n=l.extend(!0,{},n.options,t,{browsing:n.browsing,open_folder:p("Open folder"),current_directory:p("current directory:"),one_level_up:p("Go one level up")});return n._item=t,c.template(o)(n)},setAjax:function(){var e={url:this.options.vocabularyUrl,dataType:"JSON",quietMillis:500,data:function(e,t){var n=[];e&&(e="*"+e+"*",n.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:e})),!this.browsing&&this.options.selectableTypes&&n.push({i:"portal_type",o:"plone.app.querystring.operation.selection.any",v:this.options.selectableTypes}),n.push({i:"path",o:this.options.pathOperator,v:this.options.rootPath+this.currentPath+(this.browsing?"::1":"")});var o=this.options.sortOn,e=o?this.options.sortOrder:null;return this.browsing&&null===o&&(o="getObjPositionInParent",e="ascending"),{query:JSON.stringify({criteria:n,sort_on:o,sort_order:e}),attributes:JSON.stringify(this.options.attributes),batch:JSON.stringify({page:t||1,size:this.options.pageSize})}}.bind(this),results:function(e,t){var n=t*this.options.pageSize<e.total,o=e.results;this.selectedUIDs=(this.$el.select2("data")||[]).map(function(e){return e.UID}),o=o.filter(function(e){return!!(this.browsing&&e.is_folderish||this.isSelectable(e)&&-1===this.selectedUIDs.indexOf(e.UID))}.bind(this));e=this.currentPath.split("/");return 1===t&&this.browsing&&1<e.length&&"/"!==this.currentPath&&(o=[{oneLevelUp:!0,Title:p("One level up"),path:e.slice(0,e.length-1).join("/")||"/",currentPath:this.currentPath,is_folderish:!0,selectable:!1}].concat(o)),{results:o,more:n}}.bind(this)};this.options.ajax=e},renderToolbar:function(){var i=this,e=i.currentPath.split("/"),n="",o="";c.each(e,function(e){var t;""!==e&&((t={}).path=n=n+"/"+e,t.text=e,o+=i.applyTemplate("breadcrumb",t))});var t="";c.each(i.options.favorites,function(e){e=c.clone(e);e.path=e.path.substr(i.options.rootPath.length)||"/",t+=i.applyTemplate("favorite",e)});var r,s="";function a(e,t){var n="upload-"+u.generateId(),o=new d({id:n,title:p("Upload"),tooltip:p("Upload files"),icon:"upload"});t&&o.disable(),l(".controls",i.$toolbar).prepend(o.render().el),i.uploadView=new e({triggerView:o,app:i}),l("#btn-"+n,i.$toolbar).append(i.uploadView.render().el)}i.options.recentlyUsed&&(r=i.recentlyUsed(!0),c.each(r.reverse(),function(e){s+=i.applyTemplate("recentlyused",e)})),r=i.applyTemplate("toolbar",{items:o,favItems:t,favText:p("Favorites"),searchText:p("Current path:"),searchModeText:p("Search"),browseModeText:p("Browse"),recentlyUsedItems:s,recentlyUsedText:p("Recently Used")}),i.$toolbar.html(r),l(".dropdown-toggle",i.$toolbar).dropdown(),l(".pattern-relateditems-dropdown").unbind("mouseup"),l(".pattern-relateditems-dropdown").bind("mouseup",function(e){e.stopPropagation()}),l("button.mode.search",i.$toolbar).on("click",function(e){e.preventDefault(),i.browsing?(l("button.mode.search",i.$toolbar).toggleClass("btn-primary btn-default"),l("button.mode.browse",i.$toolbar).toggleClass("btn-primary btn-default"),i.browsing=!1,0<i.$el.select2("data").length&&(i.openAfterInit=!0),i.openAfterInit||(i.$el.select2("close"),i.$el.select2("open"))):(i.$el.select2("close"),i.$el.select2("open"))}),l("button.mode.browse",i.$toolbar).on("click",function(e){e.preventDefault(),i.browsing?(i.$el.select2("close"),i.$el.select2("open")):(l("button.mode.search",i.$toolbar).toggleClass("btn-primary btn-default"),l("button.mode.browse",i.$toolbar).toggleClass("btn-primary btn-default"),i.browsing=!0,0<i.$el.select2("data").length&&(i.openAfterInit=!0),i.openAfterInit||(i.$el.select2("close"),i.$el.select2("open")))}),l("a.crumb",i.$toolbar).on("click",function(e){e.preventDefault(),i.browseTo(l(this).attr("href"))}),l("a.fav",i.$toolbar).on("click",function(e){e.preventDefault(),i.browseTo(l(this).attr("href"))}),i.options.recentlyUsed&&l(".pattern-relateditems-recentlyused-select",i.$toolbar).on("click",function(e){e.preventDefault();var t=l(this).data("uid"),e=i.recentlyUsed().filter(function(e){return e.UID===t});0<e.length&&(e=e[0],i.selectItem(e),0<i.options.maximumSelectionSize&&(i.$el.select2("data").length,i.options.maximumSelectionSize))}),i.options.upload&&u.featureSupport.dragAndDrop()&&u.featureSupport.fileApi()&&require(["mockup-patterns-relateditems-upload"],function(t){i.options.uploadAllowView?l.ajax({url:i.options.uploadAllowView,dataType:"JSON",data:{path:i.options.rootPath+i.currentPath},type:"GET",success:function(e){a(t,!e.allowUpload)}}):a(t)})},browseTo:function(e){var t=this;t.emit("before-browse"),t.currentPath=e,t.$el.select2("close"),t.renderToolbar(),t.$el.select2("open"),t.emit("after-browse")},selectItem:function(t){var e=this;e.emit("selecting");var n,o=e.$el.select2("data");o.push(t),e.$el.select2("data",o,!0),e.options.recentlyUsed&&(0<(o=(n=e.recentlyUsed()).filter(function(e){return e.UID===t.UID})).length&&n.splice(n.indexOf(o[0]),1),n.push(t),u.storage.set(e.options.recentlyUsedKey,n)),e.emit("selected")},deselectItem:function(n){this.emit("deselecting");var o=this.$el.select2("data");c.each(o,function(e,t){e.UID===n.UID&&o.splice(t,1)}),this.$el.select2("data",o,!0),this.emit("deselected")},isSelectable:function(e){return!1!==e.selectable&&(null===this.options.selectableTypes||-1!==this.options.selectableTypes.indexOf(e.portal_type))},init:function(){var i=this;i.browsing="search"!==i.options.mode,i.options.rootPath=i.options.rootPath.replace(/\/$/,""),i.currentPath=i.options.basePath.substr(i.options.rootPath.length)||"/",i.setAjax(),i.$el.wrap('<div class="pattern-relateditems-container" />'),i.$container=i.$el.parents(".pattern-relateditems-container"),i.$container.width(i.options.width),t.prototype.initializeValues.call(i),t.prototype.initializeTags.call(i),i.options.formatSelection=function(e){e=l.extend(!0,{Title:"",getIcon:"",getURL:"",path:"",portal_type:"",review_state:""},e);var t=l(i.applyTemplate("selection",e));return i.options.scanSelection&&n.scan(t),1==i.options.maximumSelectionSize&&(e=(e=e.path).split("/").slice(0,-1).join("/"),i.currentPath=e,i.renderToolbar()),t},t.prototype.initializeOrdering.call(i),i.options.formatResult=function(t){t.selectable=i.isSelectable(t),t=l.extend(!0,{Title:"",getIcon:"",getURL:"",is_folderish:!1,oneLevelUp:!1,path:"",portal_type:"",review_state:"",selectable:!1},t),-1!==i.selectedUIDs.indexOf(t.UID)&&(t.selectable=!1);var e=l(i.applyTemplate("result",t));return l(".pattern-relateditems-result-select",e).on("click",function(e){e.preventDefault(),l(this).is(".selectable")&&((e=l(this).parents(".pattern-relateditems-result")).is(".pattern-relateditems-active")?(e.removeClass("pattern-relateditems-active"),i.deselectItem(t)):(0<i.options.maximumSelectionSize&&i.$el.select2("data").length>=i.options.maximumSelectionSize&&i.$el.select2("close"),i.selectItem(t),e.addClass("pattern-relateditems-active"),i.options.closeOnSelect&&i.$el.select2("close")))}),l(".pattern-relateditems-result-browse",e).on("click",function(e){e.preventDefault(),e.stopPropagation();e=l(this).data("path");i.browseTo(e)}),l(e)},i.options.initSelection=function(e,n){var o,e=l(e).val();""!==e&&(o=e.split(i.options.separator),new u.QueryHelper(l.extend(!0,{},i.options,{pattern:i})).search("UID","plone.app.querystring.operation.list.contains",o,function(e){var t=e.results.reduce(function(e,t){return e[t.UID]=t,e},{});try{n(o.map(function(e){return t[e]}).filter(function(e){return void 0!==e}))}catch(e){}i.openAfterInit&&(i.$el.select2("open"),i.openAfterInit=void 0)},!1))},i.options.tokenizer=function(e){"auto"===this.options.mode&&(this.browsing=!e)}.bind(this),i.options.id=function(e){return e.UID},t.prototype.initializeSelect2.call(i),i.$toolbar=l('<div class="toolbar ui-offset-parent" />'),i.$container.prepend(i.$toolbar),i.$el.on("select2-selecting",function(e){i.isSelectable(e.choice)||e.preventDefault()}),i.renderToolbar(),l(document).on("keyup",i.$el,function(e){t.prototype.opened.call(i)&&(e.which!==f&&e.which!==m||(e.stopPropagation(),e=e.which===f?".pattern-relateditems-result.one-level-up":".select2-highlighted",1===(e=l(".pattern-relateditems-result-browse",e)).length&&(e=e.data("path"),i.browseTo(e))))})}})}),define("mockup-patterns-querystring",["jquery","pat-base","mockup-patterns-select2","mockup-patterns-pickadate","mockup-patterns-relateditems","select2","translate","underscore"],function(u,e,t,n,o,i,p,r){"use strict";function c(){this.init.apply(this,arguments)}return c.prototype={defaults:{indexWidth:"20em",remove:"",classBetweenDtName:"querystring-criteria-betweendt",classWrapperName:"querystring-criteria-wrapper",classIndexName:"querystring-criteria-index",classOperatorName:"querystring-criteria-operator",classValueName:"querystring-criteria-value",classRemoveName:"querystring-criteria-remove",classResultsName:"querystring-criteria-results",classClearName:"querystring-criteria-clear",classDepthName:"querystring-criteria-depth"},init:function(e,t,n,o,i,r,s,a,l,c){var d=this;d.options=u.extend(!0,{},d.defaults,t),d.indexes=n,d.indexGroups={},d.baseUrl=s,d.advanced=!1,d.initial=r,d.$wrapper=u("<div/>").addClass(d.options.classWrapperName).appendTo(e),d.patternDateOptions=a||{},d.patternAjaxSelectOptions=l||{},d.patternRelateditemsOptions=c||{},d.patternAjaxSelectOptions=u.extend({width:"250px"},d.patternAjaxSelectOptions),d.patternRelateditemsOptions=u.extend({vocabularyUrl:d.baseUrl+"@@getVocabulary?name=plone.app.vocabularies.Catalog&field=relatedItems",width:"400px"},d.patternRelateditemsOptions),d.patternRelateditemsOptions.maximumSelectionSize=1,d.$remove=u("<div>"+d.options.remove+"</div>").addClass(d.options.classRemoveName).appendTo(d.$wrapper).on("click",function(e){d.remove()}),d.$index=u("<select><option></option></select>").attr("placeholder",p("Select criteria")),u.each(d.indexes,function(e,t){t.enabled&&(d.indexGroups[t.group]||(d.indexGroups[t.group]=u("<optgroup/>").attr("label",t.group).appendTo(d.$index)),d.indexGroups[t.group].append(u("<option/>").attr("value",e).html(t.title)))}),d.$wrapper.append(u("<div/>").addClass(d.options.classIndexName).append(d.$index)),d.$index.patternSelect2({width:d.options.indexWidth,placeholder:p("Select criteria")}).on("change",function(e){d.removeValue(),d.createOperator(e.val),d.createClear(),d.trigger("index-changed")}),void 0!==o&&(d.$index.select2("val",o),d.createOperator(o,i,r),d.createClear()),d.trigger("create-criteria")},appendOperators:function(n){var o=this;o.$operator=u("<select/>"),o.indexes[n]&&r.each(o.indexes[n].operations,function(e){var t=o.indexes[n].operators[e];u("<option/>").attr("value",e).html(t.title).appendTo(o.$operator)}),o.$wrapper.append(u("<div/>").addClass(o.options.classOperatorName).append(o.$operator)),o.$operator.patternSelect2({width:"10em"}).on("change",function(e){o.createValue(n),o.createClear(),o.trigger("operator-changed")})},convertPathOperators:function(e){return this.advanced?e:e=e.replace("advanced","relativePath").replace("path","relativePath")},createPathOperators:function(){var e,t=this;t.advanced?t.resetPathOperators():(e="plone.app.querystring.operation.string.advanced",void 0===t.indexes.path.operators[e]&&(t.indexes.path.operations.push(e),t.indexes.path.operators[e]={title:"Advanced",widget:"AdvancedPathWidget",description:"Enter a custom path string",operation:"plone.app.querystring.queryparser._relativePath"}),u.each(t.indexes.path.operators,function(e,t){0<e.indexOf("absolute")?t.title="Custom":0<e.indexOf("relative")?t.title="Parent (../)":0<e.indexOf("advanced")?t.title="Advanced Mode":(t.title="Current (./)",t.widget="RelativePathWidget")}))},resetPathOperators:function(){u.each(this.indexes.path.operators,function(e,t){0<e.indexOf("absolute")?t.title="Absolute Path":0<e.indexOf("relative")?t.title="Relative Path":0<e.indexOf("advanced")?t.title="Simple Mode":(t.title="Navigation Path",t.widget="ReferenceWidget")})},createOperator:function(e,t,n){var o=this;o.removeOperator(),o.createPathOperators(),"path"===e&&n&&".::1"!==n&&"..::1"!==n&&!n.match(/^[0-9a-f\-]{32,36}::-?[0-9]+$/)&&(o.advanced=!0,o.resetPathOperators()),o.appendOperators(e),void 0===t&&(t=o.$operator.select2("val")),o.$operator.select2("val",t),o.createValue(e,n),o.trigger("create-operator")},createValue:function(e,t){var o=this,n=o.indexes[e].operators[o.$operator.val()].widget,i=u("<div/>").addClass(o.options.classValueName).appendTo(o.$wrapper);o.removeValue();var r,s,a;"StringWidget"===n?o.$value=u('<input type="text"/>').addClass(o.options.classValueName+"-"+n).val(t).appendTo(i).change(function(){o.trigger("value-changed")}):"DateWidget"===n?o.$value=u('<input type="text"/>').addClass(o.options.classValueName+"-"+n).attr("data-pat-pickadate",JSON.stringify(o.patternDateOptions)).val(t).appendTo(i).patternPickadate().on("updated.pickadate.patterns",function(){o.trigger("value-changed")}):"DateRangeWidget"===n?(a=u("<span/>").appendTo(i),r=s="",t&&(s=t[0]||"",r=t[1]||""),s=u('<input type="text"/>').addClass(o.options.classValueName+"-"+n).addClass(o.options.classValueName+"-"+n+"-start").attr("data-pat-pickadate",JSON.stringify(o.patternDateOptions)).val(s).appendTo(a).patternPickadate().on("updated.pickadate.patterns",function(){o.trigger("value-changed")}),i.append(u("<span/>").html(p("to")).addClass(o.options.classBetweenDtName)),a=u("<span/>").appendTo(i),a=u('<input type="text"/>').addClass(o.options.classValueName+"-"+n).addClass(o.options.classValueName+"-"+n+"-end").attr("data-pat-pickadate",JSON.stringify(o.patternDateOptions)).val(r).appendTo(a).patternPickadate().on("updated.pickadate.patterns",function(){o.trigger("value-changed")}),o.$value=[s,a]):"RelativeDateWidget"===n?o.$value=u('<input type="text"/>').after(u("<span/>").html(p("days"))).addClass(o.options.classValueName+"-"+n).val(t).appendTo(i).change(function(){o.trigger("value-changed")}):"AdvancedPathWidget"===n?(o.advanced?o.advanced=!1:o.advanced=!0,o.createPathOperators(),o.removeOperator(),o.appendOperators(e),o.createValue(e)):"RelativePathWidget"===n?o.advanced?o.$value=u('<input type="text"/>').addClass(o.options.classValueName+"-"+n).appendTo(i).val(t).change(function(){o.trigger("value-changed")}):(t?".::1"===t&&o.$operator.select2("val","plone.app.querystring.operation.string.path"):(t=".::1",0<o.$operator.val().indexOf("relativePath")&&(t="..::1")),o.$value=u('<input type="hidden"/>').addClass(o.options.classValueName+"-"+n).appendTo(i).val(t)):"ReferenceWidget"===n?o.advanced?o.$value=u('<input type="text"/>').addClass(o.options.classValueName+"-"+n).val(t).appendTo(i).change(function(){o.trigger("value-changed")}):(a=["",-1],void 0!==t&&(a=t.split("::")),o.$value=u('<input type="text"/>').addClass(o.options.classValueName+"-"+n).appendTo(i).val(a[0]).patternRelateditems(o.patternRelateditemsOptions).change(function(){o.trigger("value-changed")}),o.$value.parent().after(function(e){for(var t="<div class='depth-select-box'><label for='depth-select'>Depth</label><select name='depth-select' class='"+o.options.classDepthName+"'><option value='-1' selected='selected'>Unlimited</option>",n=0;n<=10;n+=1)t+="<option value="+n+" ",""+n===e&&(t+="selected='selected' "),t+=">"+n+"</option>";return u(t+="</select></div>").change(function(){o.trigger("depth-changed")})}(a[1])),o.$value.parents("."+o.options.classValueName).addClass("break-line")):"MultipleSelectionWidget"===n&&(o.$value=u("<select/>").prop("multiple",!0).addClass(o.options.classValueName+"-"+n).appendTo(i).change(function(){o.trigger("value-changed")}),o.indexes[e]&&u.each(o.indexes[e].values,function(e,t){u("<option/>").attr("value",e).html(t.title).appendTo(o.$value)}),o.$value.patternSelect2(o.patternAjaxSelectOptions)),void 0!==t&&void 0!==o.$value&&(u.isArray(o.$value)?u.each(t,function(e,t){o.$value[e].select2("val",t)}):("string"==typeof(e=t)&&"RelativePathWidget"!==n&&(e=t.replace(/::-?[0-9]+/,"")),o.$value.select2("val",e))),o.trigger("create-value")},createClear:function(){this.removeClear(),this.$clear=u("<div/>").addClass(this.options.classClearName).appendTo(this.$wrapper)},remove:function(){var e=this;e.trigger("remove"),e.$remove.remove(),e.$index.parent().remove(),e.removeOperator(),e.removeValue(),e.removeClear(),e.$wrapper.remove()},removeClear:function(){this.trigger("remove-clear"),this.$clear&&this.$clear.remove()},removeOperator:function(){this.trigger("remove-operator"),this.$operator&&this.$operator.parent().remove()},removeValue:function(){var e=this;e.trigger("remove-value"),e.$value&&(u.isArray(e.$value)?e.$value[0]:e.$value).parents(".querystring-criteria-value").remove()},buildQueryPart:function(){var e=this,t=e.$index.select2("val");if(""===t)return"";var n="query.i:records="+t;if(void 0===e.$operator)return"";var o=e.$operator.val();if("path"===t){if(0<o.indexOf("advanced"))return"";o=e.convertPathOperators(o)}var i="query.o:records="+o,r="query.v:records=",s="query.v:records:list=",a=[];return void 0===e.$value?a.push(r):u.isArray(e.$value)?u.each(e.$value,function(e,t){a.push(s+u(this).val())}):u.isArray(e.$value.val())?u.each(e.$value.val(),function(e,t){a.push(s+t)}):(o=r+e.$value.val(),"path"===t&&""!==e.$value.val()?o+=e.getDepthString():void 0!==e.initial&&(o=r+e.initial,delete e.initial),a.push(o)),n+"&"+i+"&"+a.join("&")},getJSONListStr:function(){var e=this,t=e.$index.select2("val");if(""===t)return"";if(void 0===e.$operator)return"";var n=e.$operator.val();if("path"===t){if(0<n.indexOf("advanced"))return"";n=e.convertPathOperators(n)}var o,i,r=[];return u.isArray(e.$value)?u.each(e.$value,function(e,t){r.push(u(this).val())}):void 0!==e.$value&&(i=e.$value.val(),"path"!==t||!i||(o=e.getDepthString())&&(i+=o),r.push(i)),i=1<r.length?'["'+r.join('","')+'"]':1===r.length?JSON.stringify(r[0]):'""',void 0!==e.indexes[t].operators[n]?'{"i":"'+t+'", "o":"'+n+'", "v":'+i+"}":void 0},getDepthString:function(){var e="",t=u("."+this.options.classDepthName).val();return""!==t&&void 0!==t&&(e+="::"+t),e},trigger:function(e){this.$wrapper.trigger(e+"-criteria.querystring.patterns",[this])},on:function(e,t){this.$wrapper.on(e+"-criteria.querystring.patterns",t)}},e.extend({name:"querystring",trigger:".pat-querystring",parser:"mockup",defaults:{indexes:[],classWrapperName:"querystring-wrapper",criteria:{},indexOptionsUrl:null,previewURL:"portal_factory/@@querybuilder_html_results",previewCountURL:"portal_factory/@@querybuildernumberofresults",patternDateOptions:{},patternAjaxSelectOptions:{},patternRelateditemsOptions:{},classSortLabelName:"querystring-sort-label",classSortReverseName:"querystring-sortreverse",classSortReverseLabelName:"querystring-sortreverse-label",classPreviewCountWrapperName:"querystring-previewcount-wrapper",classPreviewResultsWrapperName:"querystring-previewresults-wrapper",classPreviewWrapperName:"querystring-preview-wrapper",classPreviewName:"querystring-preview",classPreviewTitleName:"querystring-preview-title",classPreviewDescriptionName:"querystring-preview-description",classSortWrapperName:"querystring-sort-wrapper",showPreviews:!0},init:function(){var t=this;t.$el.hide(),t.$wrapper=u("<div/>"),t.$el.after(t.$wrapper),t.initialized=!1,t.options.indexOptionsUrl?u.ajax({url:t.options.indexOptionsUrl,success:function(e){t.options.indexes=e.indexes,t.options.sortable_indexes=e.sortable_indexes,t._init()},error:function(e){}}):t._init()},_init:function(){var n=this;n.$criteriaWrapper=u("<div/>").addClass(n.options.classWrapperName).appendTo(n.$wrapper),n.$sortWrapper=u("<div/>").addClass(n.options.classSortWrapperName).appendTo(n.$wrapper),"false"===n.options.showPreviews&&(n.options.showPreviews=!1),n.options.showPreviews&&(n.$previewWrapper=u("<div/>").addClass(n.options.classPreviewWrapperName).appendTo(n.$wrapper),u("<div/>").addClass(n.options.classPreviewTitleName).html(p("Preview")).appendTo(n.$previewWrapper),u("<div/>").addClass(n.options.classPreviewDescriptionName).html(p("Preview of at most 10 items")).appendTo(n.$previewWrapper)),n.criterias=[],n.$el.val()&&u.each(JSON.parse(n.$el.val()),function(e,t){n.createCriteria(t.i,t.o,t.v)}),n.createCriteria(),n.createSort(),n.options.showPreviews&&n.refreshPreviewEvent(),n.$el.trigger("initialized"),n.initialized=!0},createCriteria:function(e,t,n){var o=this,i=o.options.indexOptionsUrl.replace(/(@@.*)/g,""),r=new c(o.$criteriaWrapper,o.options.criteria,o.options.indexes,e,t,n,i,o.options.patternDateOptions,o.options.patternAjaxSelectOptions,o.options.patternRelateditemsOptions);r.on("remove",function(e){o.criterias[o.criterias.length-1]===r&&o.createCriteria()}),r.on("index-changed",function(e){o.criterias[o.criterias.length-1]===r&&o.createCriteria()});function s(){o.refreshPreviewEvent(),o.updateValue()}function a(){clearTimeout(l),l=setTimeout(s,100)}var l=-1;r.on("remove",function(e,t){-1!==o.criterias.indexOf(t)&&o.criterias.splice(o.criterias.indexOf(t),1),a()}),r.on("remove-clear",a),r.on("remove-operator",a),r.on("remove-value",a),r.on("index-changed",a),r.on("operator-changed",a),r.on("create-criteria",a),r.on("create-operator",a),r.on("create-value",a),r.on("value-changed",a),r.on("depth-changed",a),o.criterias.push(r)},createSort:function(){var e,t,n,o=this,i=u('[id$="-sort_on"]').filter('[id^="formfield-"]'),r=u('[id$="-sort_reversed"]').filter('[id^="formfield-"]');for(e in u("<span/>").addClass(o.options.classSortLabelName).html(p("Sort on")).appendTo(o.$sortWrapper),o.$sortOn=u("<select/>").attr("name","sort_on").appendTo(o.$sortWrapper).change(function(){o.refreshPreviewEvent.call(o),u('[id$="sort_on"]',i).val(u(this).val())}),o.$sortOn.append(u('<option value="">'+p("No sorting")+"</option>")),o.options.sortable_indexes)o.$sortOn.append(u("<option/>").attr("value",e).html(o.options.indexes[e].title));o.$sortOn.patternSelect2({width:"150px"}),o.$sortOrder=u('<input type="checkbox" />').attr("name","sort_reversed:boolean").change(function(){o.refreshPreviewEvent.call(o),u(this).prop("checked")?u('input[type="checkbox"]',r).prop("checked",!0):u('input[type="checkbox"]',r).prop("checked",!1)}),u("<span/>").addClass(o.options.classSortReverseName).appendTo(o.$sortWrapper).append(o.$sortOrder).append(u("<span/>").html(p("Reversed Order")).addClass(o.options.classSortReverseLabelName)),1<=i.length&&1<=r.length&&(t=u('input[type="checkbox"]',r).prop("checked"),n=u('[id$="-sort_on"]',i).val(),t&&o.$sortOrder.prop("checked",!0),o.$sortOn.select2("val",n),u(i).hide(),u(r).hide())},refreshPreviewEvent:function(e){var n,o=this;o.options.showPreviews&&(void 0!==o._previewXhr&&o._previewXhr.abort(),void 0!==o.$previewPane&&o.$previewPane.remove(),n=[],u.each(o.criterias,function(e,t){t=t.buildQueryPart();""!==t&&n.push(t)}),o.$previewPane=u("<div/>").addClass(o.options.classPreviewName).appendTo(o.$previewWrapper),n.length<=0?u("<div/>").addClass(o.options.classPreviewCountWrapperName).html("No results to preview").prependTo(o.$previewPane):(n.push("sort_on="+o.$sortOn.val()),o.$sortOrder.prop("checked")&&n.push("sort_order=reverse"),o._previewXhr=u.get(o.options.previewURL+"?"+n.join("&")).done(function(e,t){u("<div/>").addClass(o.options.classPreviewResultsWrapperName).html(e).appendTo(o.$previewPane)})))},updateValue:function(){var n=[];u.each(this.criterias,function(e,t){t=t.getJSONListStr();""!==t&&n.push(t)});this.$el.val();var e="["+n.join(",")+"]";this.$el.val(e),this.$el.trigger("change")}})}),define("mockup-ui-url/views/container",["jquery","underscore","mockup-ui-url/views/base"],function(e,n,t){"use strict";return t.extend({id:"",items:[],itemContainer:null,isOffsetParent:!0,idPrefix:"container-",render:function(){return this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this.applyTemplate(),this.renderItems(),this.bindEvents(),this.isOffsetParent&&this.$el.addClass("ui-offset-parent"),this.trigger("render",this),this.afterRender(),this.$el.data("component",this),this},renderItems:function(){var t;if(null!==this.itemContainer){if(0===(t=e(this.itemContainer,this.$el)).length)throw"Item Container element not found."}else t=this.$el;n.each(this.items,function(e){!0===e.appendInContainer?t.append(e.render().$el):e.render()},this)},bindEvents:function(){var i=this;n.each(this.items,function(e){e.on("all",function(){var e,t=[].slice,n=arguments[0],o=""!==i.id?i.id+"."+n:n;1<arguments.length&&(e=arguments[1]),o!==n&&((t=t.call(arguments,0))[0]=o,i.trigger.apply(i,t)),void 0!==e&&!0===e.isUIView&&!0===e.propagateEvent(n)&&i.trigger.apply(i,arguments)})})},get:function(e){return n.findWhere(this.items,{id:e})},add:function(e){if(void 0!==e.id&&this.get(e.id))throw"Another item with the same `id` already exists.";this.items.push(e)}})}),define("mockup-ui-url/views/toolbar",["mockup-ui-url/views/container"],function(e){"use strict";return e.extend({tagName:"div",className:"navbar",idPrefix:"toolbar-"})}),define("mockup-ui-url/views/buttongroup",["underscore","mockup-ui-url/views/container"],function(e,t){"use strict";return t.extend({tagName:"div",className:"btn-group",idPrefix:"btngroup-",disable:function(){e.each(this.items,function(e){e.disable()})},enable:function(){e.each(this.items,function(e){e.enable()})}})}),define("mockup-patterns-structure-url/js/navigation",["backbone","mockup-utils"],function(e,t){"use strict";return e.Model.extend({initialize:function(e){this.options=e,this.app=e.app,this.model=e.model},folderClicked:function(e){e.preventDefault();this.app.setCurrentPath(this.model.attributes.path),this.app.collection.goTo(this.app.collection.information.firstPage)}})}),define("mockup-patterns-structure-url/js/models/result",["backbone"],function(e){"use strict";return e.Model.extend({defaults:function(){return{is_folderish:!1,review_state:"",getURL:""}},uid:function(){return this.attributes.UID}})}),define("mockup-patterns-structure-url/js/actions",["jquery","underscore","backbone","mockup-patterns-structure-url/js/models/result","mockup-utils","translate"],function(s,a,e,l,t,r){"use strict";return e.Model.extend({initialize:function(e){this.options=e,this.app=e.app,this.model=e.model,this.selectedCollection=this.app.selectedCollection},selectAll:function(e){e.preventDefault();var n=this,o=1,i=0,r=function(){n.app.loading.show(),s.ajax({url:n.app.collection.url,type:"GET",dataType:"json",data:{query:n.app.collection.queryParser({searchPath:n.model.attributes.path}),batch:JSON.stringify({page:o,size:100}),attributes:JSON.stringify(n.app.collection.queryHelper.options.attributes)}}).done(function(e){var t=n.app.collection.parse(e,i);i+=t.length,a.each(t,function(e){n.app.selectedCollection.add(new l(e))}),o+=1,e.total>i?r():(n.app.loading.hide(),n.app.tableView.render())})};r()},doAction:function(e,n,o){var i=this;s.ajax({url:i.app.buttons.get(e).options.url,data:{selection:JSON.stringify([i.model.attributes.UID]),folder:i.model.attributes.path,_authenticator:t.getAuthenticator()},dataType:"json",type:"POST"}).done(function(e){var t;"success"===e.status?(t=r(n+' "'+i.model.attributes.Title+'"'),i.app.collection.pager(),i.app.updateButtons()):t=r("Error "+o+' "'+i.model.attributes.Title+'"'),i.app.clearStatus(),i.app.setStatus({text:t,type:e.status||"warning"})})},cutClicked:function(e){e.preventDefault(),this.doAction("cut",r("Cut"),r("cutting"))},copyClicked:function(e){e.preventDefault(),this.doAction("copy",r("Copied"),r("copying"))},pasteClicked:function(e){e.preventDefault(),this.doAction("paste",r("Pasted into"),r("Error pasting into"))},moveTopClicked:function(e){e.preventDefault(),this.app.moveItem(this.model.attributes.id,"top")},moveBottomClicked:function(e){e.preventDefault(),this.app.moveItem(this.model.attributes.id,"bottom")},setDefaultPageClicked:function(e){e.preventDefault();var t=this;s.ajax({url:t.app.getAjaxUrl(t.app.setDefaultPageUrl),type:"POST",data:{_authenticator:s('[name="_authenticator"]').val(),id:this.model.attributes.id},success:function(e){t.app.ajaxSuccessResponse.apply(t.app,[e])},error:function(e){t.app.ajaxErrorResponse.apply(t.app,[e])}})}})}),define("mockup-patterns-structure-url/js/actionmenu",["underscore","translate"],function(i,e){"use strict";var r={openItem:{url:"#",title:e("Open"),category:"button",iconCSS:"glyphicon glyphicon-eye-open",css:"",modal:!1},editItem:{url:"#",title:e("Edit"),category:"button",iconCSS:"glyphicon glyphicon-pencil",css:"",modal:!1},cutItem:{library:"mockup-patterns-structure-url/js/actions",method:"cutClicked",url:"#",title:e("Cut"),category:"dropdown",iconCSS:"glyphicon glyphicon-scissors",css:"",modal:!1},copyItem:{library:"mockup-patterns-structure-url/js/actions",method:"copyClicked",url:"#",title:e("Copy"),category:"dropdown",iconCSS:"glyphicon glyphicon-duplicate",css:"",modal:!1},pasteItem:{library:"mockup-patterns-structure-url/js/actions",method:"pasteClicked",url:"#",title:e("Paste"),category:"dropdown",iconCSS:"glyphicon glyphicon-open-file",css:"",modal:!1},"move-top":{library:"mockup-patterns-structure-url/js/actions",method:"moveTopClicked",url:"#",title:e("Move to top of folder"),category:"dropdown",iconCSS:"glyphicon glyphicon-step-backward rright",css:"",modal:!1},"move-bottom":{library:"mockup-patterns-structure-url/js/actions",method:"moveBottomClicked",url:"#",title:e("Move to bottom of folder"),category:"dropdown",iconCSS:"glyphicon glyphicon-step-backward rleft",css:"",modal:!1},"set-default-page":{library:"mockup-patterns-structure-url/js/actions",method:"setDefaultPageClicked",url:"#",title:e("Set as default page"),category:"dropdown",iconCSS:"glyphicon glyphicon-ok-circle",css:"",modal:!1},selectAll:{library:"mockup-patterns-structure-url/js/actions",method:"selectAll",url:"#",title:e("Select all contained items"),category:"dropdown",iconCSS:"glyphicon glyphicon-check",css:"",modal:!1}};return function(e){if(null!==e.menuOptions)return e.menuOptions;var t=e.model.attributes,n=e.app,o=i.clone(r);n.pasteAllowed()&&t.is_folderish||delete o.pasteItem,!n.inQueryMode()&&!1!==e.options.canMove||(delete o["move-top"],delete o["move-bottom"]),-1!=n.defaultPageTypes.indexOf(t.portal_type)&&n.setDefaultPageUrl||delete o["set-default-page"],t.is_folderish||delete o.selectAll;n=n.options.typeToViewAction,n=n&&n[t.portal_type]||"";return o.openItem.url=t.getURL+n,o.editItem.url=t.getURL+"/edit",o}}),define("text!mockup-patterns-structure-url/templates/actionmenu.xml",[],function(){return'<% _.each(menuOptions.button, function(menuOption){ %>\n<a class="action <%- menuOption.name %> <%- menuOption.idx %> pat-tooltip <%- menuOption.css %>"\n    href="<%- menuOption.url %>"\n    title="<%- _t(menuOption.title) %>"\n    aria-label="<%- _t(menuOption.title) %>">\n  <% if (menuOption.iconCSS) { %>\n  <span class="<%- menuOption.iconCSS %>"></span>\n  <% } else { %>\n  <%- _t(menuOption.title) %>\n  <% } %>\n</a>&nbsp;\n<% }); %>\n\n\n<% if (menuOptions.dropdown) { %>\n<a class="dropdown-toggle"\n    data-toggle="dropdown"\n    href="#"\n    aria-haspopup="true"\n    aria-expanded="true"\n    id="<%- id %>"\n    title=\'<%- _t("Actions") %>\'>\n  <span class="glyphicon glyphicon-cog"></span><span class="caret"></span>\n</a>\n<ul class="dropdown-menu pull-right" aria-labelledby="<%- id %>">\n  <% if (header) { %>\n    <li class="dropdown-header"><%- header %></li>\n    <li class="divider"></li>\n  <% } %>\n\n  <% _.each(menuOptions.dropdown, function(menuOption){ %>\n  <li>\n    <a class="action <%- menuOption.name %> <%- menuOption.idx %> <%- menuOption.css %>"\n        href="<%- menuOption.url %>">\n      <% if (menuOption.iconCSS) { %>\n      <span class="<%- menuOption.iconCSS %>"></span>\n      <% } %>\n      <%- _t(menuOption.title) %>\n    </a>\n  </li>\n  <% }); %>\n</ul>\n<% } %>\n'}),define("mockup-patterns-structure-url/js/views/actionmenu",["jquery","underscore","mockup-ui-url/views/base","mockup-utils","mockup-patterns-structure-url/js/models/result","mockup-patterns-structure-url/js/actions","mockup-patterns-structure-url/js/actionmenu","text!mockup-patterns-structure-url/templates/actionmenu.xml","pat-registry","translate","mockup-patterns-modal","mockup-patterns-tooltip","bootstrap-dropdown"],function(n,e,o,s,t,i,r,a,l,c){"use strict";return o.extend({className:"btn-group actionmenu",template:e.template(a),menuOptions:null,menuGenerator:"mockup-patterns-structure-url/js/actionmenu",eventConstructor:function(e){var n=this,o=e.library,i=e.method;if("string"!=typeof o||"string"!=typeof i)return!1;return function(e){var t=new(require(o))(n);return t[i]&&t[i](e)}},events:function(){var o=this,i={},r={};return e.each(o.menuOptions,function(e,t){var n=s.generateId();e.idx=n,e.name=t;t=e.category||"dropdown";void 0===r[t]&&(r[t]=[]),r[t].push(e),e.css=e.css||"",!0===e.modal&&(e.css+=" pat-plone-modal");e=o.eventConstructor(e);e&&(i["click a."+n]=e)}),o.menuOptionsCategorized=r,i},initialize:function(e){var t=this;o.prototype.initialize.apply(t,[e]),t.options=e,t.selectedCollection=t.app.selectedCollection;e=t.options.menuGenerator||t.menuGenerator;!e||"object"==typeof(e=require(e)(t))&&(t.menuOptions=e)},render:function(){var e=this;e.$el.empty();var t=this.model.toJSON();return t.header=e.options.header||null,t.menuOptions=e.menuOptionsCategorized,e.$el.html(e.template(n.extend({_t:c,id:s.generateId()},t))),t.menuOptions.dropdown&&(e.$dropdown=e.$(".dropdown-toggle"),e.$dropdown.dropdown()),e.options.className&&e.$el.addClass(e.options.className),l.scan(this.$el),this}})}),define("text!mockup-patterns-structure-url/templates/tablerow.xml",[],function(){return'<td class="selection" data-order="<%- attributes[\'_sort\'] %>"><label for="select<%- attributes[\'_sort\'] %>InputCheckbox" class="hiddenStructure" aria-label="<%- _t(\'Select\') %>"><%- _t(\'Select\') %></label><input id="select<%- attributes[\'_sort\'] %>InputCheckbox" <% if(selected){ %> checked="checked" <% } %> type="checkbox"/></td>\n\n<td class="title">\n  <div class="pull-left">\n    <a href="<%- viewURL %>"\n        class="manage state-<%- review_state %> contenttype-<%- contenttype %>"\n        title="<%- portal_type %>">\n        <% if(attributes["getMimeIcon"] && contenttype == \'file\'){ %>\n           <img class="mime-icon" src="<%- getMimeIcon %>"> <% } %>\n      <% if(Title){ %>\n        <%- Title %>\n      <% } else { %>\n        <em><%- id %></em>\n      <% } %>\n    </a>\n    <% if(expired){ %>\n      <span class="plone-item-expired"><%- _t(\'Expired\') %></span>\n    <% } %>\n    <% if(ineffective){ %>\n      <span class="plone-item-ineffective"><%- _t(\'Before publishing date\') %></span>\n    <% } %>\n    <% if(activeColumns.indexOf(\'Description\') !== -1 && _.has(availableColumns, \'Description\') && Description) { %>\n    <p class="Description">\n      <small>\n        <%- Description %>\n      </small>\n    </p>\n    <% } %>\n  </div>\n  <% if(attributes["getIcon"] && thumb_scale) { %>\n    <img class="thumb-<%- thumb_scale %> pull-right" src="<%- getURL %>/@@images/image/<%- thumb_scale %>">\n  <% } %>\n</td>\n\n<% _.each(activeColumns, function(column) { %>\n  <% if(column !== \'Description\' && _.has(availableColumns, column)) { %>\n    <td class="<%- column %>" data-order="<%- attributes[column] %>"><%- attributes[column] %></td>\n  <% } %>\n<% }); %>\n\n<td class="actionmenu-container"></td>\n'}),define("mockup-patterns-structure-url/js/views/tablerow",["jquery","underscore","backbone","mockup-patterns-structure-url/js/navigation","mockup-patterns-structure-url/js/views/actionmenu","text!mockup-patterns-structure-url/templates/tablerow.xml","mockup-utils","translate","moment"],function(a,e,t,n,o,i,r,s,l){"use strict";return t.View.extend({tagName:"tr",className:"itemRow",template:e.template(i),events:{"change input":"itemSelected","click td.title a.manage":"itemClicked"},initialize:function(e){this.options=e,this.app=e.app,this.selectedCollection=this.app.selectedCollection,this.table=this.options.table,this.now=l()},expired:function(e){return!!e.attributes.ExpirationDate&&l(e.attributes.ExpirationDate).diff(this.now,"seconds")<0},ineffective:function(e){return!!e.attributes.EffectiveDate&&0<l(e.attributes.EffectiveDate).diff(this.now,"seconds")},render:function(){var e=this,t=this.model.toJSON();t.selected=!1,this.selectedCollection.findWhere({UID:t.UID})&&(t.selected=!0),t.attributes=e.model.attributes,t.activeColumns=e.app.activeColumns,t.availableColumns=e.app.availableColumns,t.portal_type=t.portal_type||"",t.contenttype=t.portal_type.toLowerCase().replace(/\.| /g,"-"),t._authenticator=r.getAuthenticator(),t.thumb_scale=e.app.thumb_scale;var n=e.app.typeToViewAction&&e.app.typeToViewAction[t.attributes.portal_type]||"";t.viewURL=t.attributes.getURL+n,t._t=s,t.expired=this.expired(t),t.ineffective=this.ineffective(t),e.$el.html(e.template(t));n=e.model.attributes;e.$el.addClass("state-"+n.review_state).addClass("type-"+n.portal_type),n.is_folderish&&e.$el.addClass("folder"),e.$el.attr("data-path",t.path),e.$el.attr("data-UID",t.UID),e.$el.attr("data-id",t.id),e.$el.attr("data-type",t.portal_type),e.$el.attr("data-folderish",t.is_folderish),e.$el.removeClass("expired"),e.$el.removeClass("ineffective"),t.expired&&e.$el.addClass("expired"),t.ineffective&&e.$el.addClass("ineffective"),e.el.model=this.model;t=!!e.app.options.moveUrl;return e.menu=new o({app:e.app,model:e.model,menuOptions:e.app.menuOptions,menuGenerator:e.app.menuGenerator,canMove:t}),a(".actionmenu-container",e.$el).append(e.menu.render().el),this},itemClicked:function(e){var t=this.app.keyEvent,n=t&&t.ctrlKey||!this.model.attributes.is_folderish?"other":"folder",o=this.app.options.tableRowItemAction[n]||[],t=o[0],o=o[1];if("string"!=typeof t||"string"!=typeof n)return null;t=new(require(t))(this);return t[o]&&t[o](e)},itemSelected:function(){var n=this.$("input")[0];n.checked?this.app.selectedCollection.add(this.model.clone()):this.app.selectedCollection.removeResult(this.model);var o,i,r,s=this.selectedCollection,e=this.app.keyEvent;e&&e.shiftKey&&this.app.last_selected&&null!==this.app.last_selected.parentNode&&(o=a(this.app.last_selected),i=o.index(),r=this.$el.index(),this.app.tableView.$('input[type="checkbox"]').each(function(){var e,t=(o=a(this)).parents("tr").index();(i<t&&t<r||t<i&&r<t)&&(this.checked=n.checked,0<(e=a(this).closest("tr.itemRow")).length&&(t=e[0].model,e=s.getByUID(t.attributes.UID),this.checked?e||s.add(t.clone()):e&&s.removeResult(e)))})),this.app.last_selected=this.el}})}),define("text!mockup-patterns-structure-url/templates/table.xml",[],function(){return'<div class="fc-breadcrumbs-container">\n  <div class="fc-breadcrumbs" colspan="<%- activeColumns.length + 3 %>">\n    <a href="#" title="<%- _t(\'Root\') %>" aria-label="<%- _t(\'Root\') %>" data-path="/">\n      <span class="glyphicon glyphicon-home" aria-hidden="true"></span> /\n    </a>\n    <% _.each(pathParts, function(part, idx, list){\n      if(part){\n        if(idx > 0){ %>\n          /\n        <% } %>\n        <a href="#" class="crumb" data-path="<%- part %>"><%- part %></a>\n      <% }\n    }); %>\n  </div>\n</div>\n\n<table class="pat-datatables table table-striped table-bordered"\n       data-pat-datatables="<%- datatables_options %>">\n  <thead>\n    <tr>\n      <th class="selection"><label for="selectAllInputCheckbox" class="hiddenStructure" aria-label="<%- _t(\'Select all\') %>"><%- _t(\'Select all\') %></label><input id="selectAllInputCheckbox" type="checkbox" class="select-all" /></th>\n      <th class="title"><%- _t(\'Title\') %></th>\n      <% _.each(activeColumns, function(column){ %>\n        <% if(column !== \'Description\' && _.has(availableColumns, column)) { %>\n          <th><%- availableColumns[column] %></th>\n        <% } %>\n      <% }); %>\n      <th class="actions"><%- _t("Actions") %></th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n'}),function(n){"use strict";"function"==typeof define&&define.amd?define("datatables.net",["jquery"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t=t||("undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t,e,e.document)}:window.DataTable=n(jQuery,window,document)}(function(A,N,w,O){"use strict";function u(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null}function i(e,t){return o[t]||(o[t]=new RegExp(Te(t),"g")),"string"==typeof e&&"."!==t?e.replace(/\./g,"").replace(o[t],"."):e}function r(e,t,n){var o="string"==typeof e;return!!h(e)||(t&&o&&(e=i(e,t)),n&&o&&(e=e.replace(d,"")),!isNaN(parseFloat(e))&&isFinite(e))}function n(e,t,n){return!!h(e)||((h(o=e)||"string"==typeof o)&&!!r(m(e),t,n)||null);var o}function v(e,t,n,o){var i=[],r=0,s=t.length;if(o!==O)for(;r<s;r++)e[t[r]][n]&&i.push(e[t[r]][n][o]);else for(;r<s;r++)i.push(e[t[r]][n]);return i}function p(e,t){var n,o=[];t===O?(t=0,n=e):(n=t,t=e);for(var i=t;i<n;i++)o.push(i);return o}function b(e){for(var t=[],n=0,o=e.length;n<o;n++)e[n]&&t.push(e[n]);return t}var f,t,e,T=function(e,w){if(this instanceof T)return A(e).DataTable(w);w=e,this.$=function(e,t){return this.api(!0).$(e,t)},this._=function(e,t){return this.api(!0).rows(e,t).data()},this.api=function(e){return new yt(e?at(this[f.iApiIndex]):this)},this.fnAddData=function(e,t){var n=this.api(!0),e=(Array.isArray(e)&&(Array.isArray(e[0])||A.isPlainObject(e[0]))?n.rows:n.row).add(e);return t!==O&&!t||n.draw(),e.flatten().toArray()},this.fnAdjustColumnSizing=function(e){var t=this.api(!0).columns.adjust(),n=t.settings()[0],o=n.oScroll;e===O||e?t.draw(!1):""===o.sX&&""===o.sY||Ue(n)},this.fnClearTable=function(e){var t=this.api(!0).clear();e!==O&&!e||t.draw()},this.fnClose=function(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=function(e,t,n){var o=this.api(!0),i=o.rows(e),r=i.settings()[0],e=r.aoData[i[0][0]];return i.remove(),t&&t.call(this,r,e),n!==O&&!n||o.draw(),e},this.fnDestroy=function(e){this.api(!0).destroy(e)},this.fnDraw=function(e){this.api(!0).draw(e)},this.fnFilter=function(e,t,n,o,i,r){var s=this.api(!0);(null===t||t===O?s:s.column(t)).search(e,n,o,r),s.draw()},this.fnGetData=function(e,t){var n=this.api(!0);if(e===O)return n.data().toArray();var o=e.nodeName?e.nodeName.toLowerCase():"";return t!==O||"td"==o||"th"==o?n.cell(e,t).data():n.row(e).data()||null},this.fnGetNodes=function(e){var t=this.api(!0);return e!==O?t.row(e).node():t.rows().nodes().flatten().toArray()},this.fnGetPosition=function(e){var t=this.api(!0),n=e.nodeName.toUpperCase();if("TR"==n)return t.row(e).index();if("TD"!=n&&"TH"!=n)return null;e=t.cell(e).index();return[e.row,e.columnVisible,e.column]},this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()},this.fnOpen=function(e,t,n){return this.api(!0).row(e).child(t,n).show().child()[0]},this.fnPageChange=function(e,t){e=this.api(!0).page(e);t!==O&&!t||e.draw(!1)},this.fnSetColumnVis=function(e,t,n){t=this.api(!0).column(e).visible(t);n!==O&&!n||t.columns.adjust().draw()},this.fnSettings=function(){return at(this[f.iApiIndex])},this.fnSort=function(e){this.api(!0).order(e).draw()},this.fnSortListener=function(e,t,n){this.api(!0).order.listener(e,t,n)},this.fnUpdate=function(e,t,n,o,i){var r=this.api(!0);return(n===O||null===n?r.row(t):r.cell(t,n)).data(e),i!==O&&!i||r.columns.adjust(),o!==O&&!o||r.draw(),0},this.fnVersionCheck=f.fnVersionCheck;var t,x=this,C=w===O,S=this.length;for(t in C&&(w={}),this.oApi=this.internal=f.internal,T.ext.internal)t&&(this[t]=$t(t));return this.each(function(){var i=1<S?dt({},w,!0):w,r=0,e=this.getAttribute("id"),s=!1,t=T.defaults,a=A(this);if("table"==this.nodeName.toLowerCase()){F(t),D(t.column),_(t,t,!0),_(t.column,t.column,!0),_(t,A.extend(i,a.data()),!0);for(var n=T.settings,r=0,l=n.length;r<l;r++){var o=n[r];if(o.nTable==this||o.nTHead&&o.nTHead.parentNode==this||o.nTFoot&&o.nTFoot.parentNode==this){var c=(i.bRetrieve!==O?i:t).bRetrieve,d=(i.bDestroy!==O?i:t).bDestroy;if(C||c)return o.oInstance;if(d){o.oInstance.fnDestroy();break}return void lt(o,0,"Cannot reinitialise DataTable",3)}if(o.sTableId==this.id){n.splice(r,1);break}}null!==e&&""!==e||(e="DataTables_Table_"+T.ext._unique++,this.id=e);var u=A.extend(!0,{},T.models.oSettings,{sDestroyWidth:a[0].style.width,sInstance:e,sTableId:e});u.nTable=this,u.oApi=x.internal,u.oInit=i,n.push(u),u.oInstance=1===x.length?x:a.dataTable(),F(i),I(i.oLanguage),i.aLengthMenu&&!i.iDisplayLength&&(i.iDisplayLength=(Array.isArray(i.aLengthMenu[0])?i.aLengthMenu[0]:i.aLengthMenu)[0]),i=dt(A.extend(!0,{},t),i),ct(u.oFeatures,i,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),ct(u,i,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),ct(u.oScroll,i,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),ct(u.oLanguage,i,"fnInfoCallback"),pt(u,"aoDrawCallback",i.fnDrawCallback,"user"),pt(u,"aoServerParams",i.fnServerParams,"user"),pt(u,"aoStateSaveParams",i.fnStateSaveParams,"user"),pt(u,"aoStateLoadParams",i.fnStateLoadParams,"user"),pt(u,"aoStateLoaded",i.fnStateLoaded,"user"),pt(u,"aoRowCallback",i.fnRowCallback,"user"),pt(u,"aoRowCreatedCallback",i.fnCreatedRow,"user"),pt(u,"aoHeaderCallback",i.fnHeaderCallback,"user"),pt(u,"aoFooterCallback",i.fnFooterCallback,"user"),pt(u,"aoInitComplete",i.fnInitComplete,"user"),pt(u,"aoPreDrawCallback",i.fnPreDrawCallback,"user"),u.rowIdFn=J(i.rowId),k(u);var p=u.oClasses;A.extend(p,T.ext.classes,i.oClasses),a.addClass(p.sTable),u.iInitDisplayStart===O&&(u.iInitDisplayStart=i.iDisplayStart,u._iDisplayStart=i.iDisplayStart),null!==i.iDeferLoading&&(u.bDeferLoading=!0,f=Array.isArray(i.iDeferLoading),u._iRecordsDisplay=f?i.iDeferLoading[0]:i.iDeferLoading,u._iRecordsTotal=f?i.iDeferLoading[1]:i.iDeferLoading);var h=u.oLanguage;A.extend(!0,h,i.oLanguage),h.sUrl?(A.ajax({dataType:"json",url:h.sUrl,success:function(e){_(t.oLanguage,e),I(e),A.extend(!0,h,e),ht(u,null,"i18n",[u]),Ne(u)},error:function(){Ne(u)}}),s=!0):ht(u,null,"i18n",[u]),null===i.asStripeClasses&&(u.asStripeClasses=[p.sStripeOdd,p.sStripeEven]);var f=u.asStripeClasses,m=a.children("tbody").find("tr").eq(0);-1!==A.inArray(!0,A.map(f,function(e,t){return m.hasClass(e)}))&&(A("tbody tr",this).removeClass(f.join(" ")),u.asDestroyStripes=f.slice());var g,v,b=[],f=this.getElementsByTagName("thead");if(0!==f.length&&(ue(u.aoHeader,f[0]),b=pe(u)),null===i.aoColumns)for(g=[],r=0,l=b.length;r<l;r++)g.push(null);else g=i.aoColumns;for(r=0,l=g.length;r<l;r++)P(u,b?b[r]:null);z(u,i.aoColumnDefs,g,function(e,t){L(u,e,t)}),m.length&&(v=function(e,t){return null!==e.getAttribute("data-"+t)?t:null},A(m[0]).children("th, td").each(function(e,t){var n,o=u.aoColumns[e];o.mData===e&&(n=v(t,"sort")||v(t,"order"),t=v(t,"filter")||v(t,"search"),null===n&&null===t||(o.mData={_:e+".display",sort:null!==n?e+".@data-"+n:O,type:null!==n?e+".@data-"+n:O,filter:null!==t?e+".@data-"+t:O},L(u,e)))}));var y=u.oFeatures,f=function(){if(i.aaSorting===O){var e=u.aaSorting;for(r=0,l=e.length;r<l;r++)e[r][1]=u.aoColumns[r].asSorting[0]}nt(u),y.bSort&&pt(u,"aoDrawCallback",function(){var e,n;u.bSorted&&(e=Je(u),n={},A.each(e,function(e,t){n[t.src]=t.dir}),ht(u,null,"order",[u,e,n]),Ze(u))}),pt(u,"aoDrawCallback",function(){(u.bSorted||"ssp"===gt(u)||y.bDeferRender)&&nt(u)},"sc");var t=a.children("caption").each(function(){this._captionSide=A(this).css("caption-side")}),n=a.children("thead");0===n.length&&(n=A("<thead/>").appendTo(a)),u.nTHead=n[0];var o=a.children("tbody");0===o.length&&(o=A("<tbody/>").insertAfter(n)),u.nTBody=o[0];o=a.children("tfoot");if(0===o.length&&0<t.length&&(""!==u.oScroll.sX||""!==u.oScroll.sY)&&(o=A("<tfoot/>").appendTo(a)),0===o.length||0===o.children().length?a.addClass(p.sNoFooter):0<o.length&&(u.nTFoot=o[0],ue(u.aoFooter,u.nTFoot)),i.aaData)for(r=0;r<i.aaData.length;r++)q(u,i.aaData[r]);else!u.bDeferLoading&&"dom"!=gt(u)||W(u,A(u.nTBody).children("tr"));u.aiDisplay=u.aiDisplayMaster.slice(),!(u.bInitialised=!0)===s&&Ne(u)};pt(u,"aoDrawCallback",it,"state_save"),i.bStateSave?(y.bStateSave=!0,rt(u,0,f)):f()}else lt(null,0,"Non-table node initialisation ("+this.nodeName+")",2)}),x=null,this},o={},s=/[\r\n\u2028]/g,a=/<.*?>/g,l=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,c=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),d=/['\u00A0,$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfkɃΞ]/gi,h=function(e){return!e||!0===e||"-"===e},R=function(e,t,n){var o=[],i=0,r=e.length;if(n!==O)for(;i<r;i++)e[i]&&e[i][t]&&o.push(e[i][t][n]);else for(;i<r;i++)e[i]&&o.push(e[i][t]);return o},m=function(e){return e.replace(a,"")},g=function(e){if(function(e){if(e.length<2)return!0;for(var t=e.slice().sort(),n=t[0],o=1,i=t.length;o<i;o++){if(t[o]===n)return!1;n=t[o]}return!0}(e))return e.slice();var t,n,o,i=[],r=e.length,s=0;e:for(n=0;n<r;n++){for(t=e[n],o=0;o<s;o++)if(i[o]===t)continue e;i.push(t),s++}return i},y=function(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)y(e,t[n]);else e.push(t);return e},x=function(e,t){return t===O&&(t=0),-1!==this.indexOf(e,t)};function C(n){var o,i,r={};A.each(n,function(e,t){(o=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(o[1]+" ")&&(i=e.replace(o[0],o[2].toLowerCase()),r[i]=e,"o"===o[1]&&C(n[e]))}),n._hungarianMap=r}function _(n,o,i){var r;n._hungarianMap||C(n),A.each(o,function(e,t){(r=n._hungarianMap[e])===O||!i&&o[r]!==O||("o"===r.charAt(0)?(o[r]||(o[r]={}),A.extend(!0,o[r],o[e]),_(n[r],o[r],i)):o[r]=o[e])})}function I(e){var t,n=T.defaults.oLanguage,o=n.sDecimal;o&&Rt(o),e&&(t=e.sZeroRecords,!e.sEmptyTable&&t&&"No data available in table"===n.sEmptyTable&&ct(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&t&&"Loading..."===n.sLoadingRecords&&ct(e,e,"sZeroRecords","sLoadingRecords"),e.sInfoThousands&&(e.sThousands=e.sInfoThousands),(e=e.sDecimal)&&o!==e&&Rt(e))}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.includes||(Array.prototype.includes=x),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.includes||(String.prototype.includes=x),T.util={throttle:function(o,e){var i,r,s=e!==O?e:200;return function(){var e=this,t=+new Date,n=arguments;i&&t<i+s?(clearTimeout(r),r=setTimeout(function(){i=O,o.apply(e,n)},s)):(i=t,o.apply(e,n))}},escapeRegex:function(e){return e.replace(c,"\\$1")},set:function(o){if(A.isPlainObject(o))return T.util.set(o._);if(null===o)return function(){};if("function"==typeof o)return function(e,t,n){o(e,"set",t,n)};if("string"!=typeof o||-1===o.indexOf(".")&&-1===o.indexOf("[")&&-1===o.indexOf("("))return function(e,t){e[o]=t};var p=function(e,t,n){for(var o,i,r,s,a=K(n),n=a[a.length-1],l=0,c=a.length-1;l<c;l++){if("__proto__"===a[l]||"constructor"===a[l])throw new Error("Cannot set prototype values");if(o=a[l].match(G),i=a[l].match(Y),o){if(a[l]=a[l].replace(G,""),e[a[l]]=[],(o=a.slice()).splice(0,l+1),s=o.join("."),Array.isArray(t))for(var d=0,u=t.length;d<u;d++)p(r={},t[d],s),e[a[l]].push(r);else e[a[l]]=t;return}i&&(a[l]=a[l].replace(Y,""),e=e[a[l]](t)),null!==e[a[l]]&&e[a[l]]!==O||(e[a[l]]={}),e=e[a[l]]}n.match(Y)?e=e[n.replace(Y,"")](t):e[n.replace(G,"")]=t};return function(e,t){return p(e,t,o)}},get:function(i){if(A.isPlainObject(i)){var r={};return A.each(i,function(e,t){t&&(r[e]=T.util.get(t))}),function(e,t,n,o){var i=r[t]||r._;return i!==O?i(e,t,n,o):e}}if(null===i)return function(e){return e};if("function"==typeof i)return function(e,t,n,o){return i(e,t,n,o)};if("string"!=typeof i||-1===i.indexOf(".")&&-1===i.indexOf("[")&&-1===i.indexOf("("))return function(e,t){return e[i]};var p=function(e,t,n){var o,i,r;if(""!==n)for(var s=K(n),a=0,l=s.length;a<l;a++){if(u=s[a].match(G),o=s[a].match(Y),u){if(s[a]=s[a].replace(G,""),""!==s[a]&&(e=e[s[a]]),i=[],s.splice(0,a+1),r=s.join("."),Array.isArray(e))for(var c=0,d=e.length;c<d;c++)i.push(p(e[c],t,r));var u=u[0].substring(1,u[0].length-1);e=""===u?i:i.join(u);break}if(o)s[a]=s[a].replace(Y,""),e=e[s[a]]();else{if(null===e||e[s[a]]===O)return O;e=e[s[a]]}}return e};return function(e,t){return p(e,t,i)}}};var S=function(e,t,n){e[t]!==O&&(e[n]=e[t])};function F(e){S(e,"ordering","bSort"),S(e,"orderMulti","bSortMulti"),S(e,"orderClasses","bSortClasses"),S(e,"orderCellsTop","bSortCellsTop"),S(e,"order","aaSorting"),S(e,"orderFixed","aaSortingFixed"),S(e,"paging","bPaginate"),S(e,"pagingType","sPaginationType"),S(e,"pageLength","iDisplayLength"),S(e,"searching","bFilter"),"boolean"==typeof e.sScrollX&&(e.sScrollX=e.sScrollX?"100%":""),"boolean"==typeof e.scrollX&&(e.scrollX=e.scrollX?"100%":"");var t=e.aoSearchCols;if(t)for(var n=0,o=t.length;n<o;n++)t[n]&&_(T.models.oSearch,t[n])}function D(e){S(e,"orderable","bSortable"),S(e,"orderData","aDataSort"),S(e,"orderSequence","asSorting"),S(e,"orderDataType","sortDataType");var t=e.aDataSort;"number"!=typeof t||Array.isArray(t)||(e.aDataSort=[t])}function k(e){var t,n,o,i;T.__browser||(t={},T.__browser=t,i=(o=(n=A("<div/>").css({position:"fixed",top:0,left:-1*A(N).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(A("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(A("<div/>").css({width:"100%",height:10}))).appendTo("body")).children()).children(),t.barWidth=o[0].offsetWidth-o[0].clientWidth,t.bScrollOversize=100===i[0].offsetWidth&&100!==o[0].clientWidth,t.bScrollbarLeft=1!==Math.round(i.offset().left),t.bBounding=!!n[0].getBoundingClientRect().width,n.remove()),A.extend(e.oBrowser,T.__browser),e.oScroll.iBarWidth=T.__browser.barWidth}function E(e,t,n,o,i,r){var s,a=o,l=!1;for(n!==O&&(s=n,l=!0);a!==i;)e.hasOwnProperty(a)&&(s=l?t(s,e[a],a,e):e[a],l=!0,a+=r);return s}function P(e,t){var n=T.defaults.column,o=e.aoColumns.length,n=A.extend({},T.models.oColumn,n,{nTh:t||w.createElement("th"),sTitle:n.sTitle||(t?t.innerHTML:""),aDataSort:n.aDataSort||[o],mData:n.mData||o,idx:o});e.aoColumns.push(n);n=e.aoPreSearchCols;n[o]=A.extend({},T.models.oSearch,n[o]),L(e,o,A(t).data())}function L(e,t,n){var o=e.aoColumns[t],i=e.oClasses,r=A(o.nTh);o.sWidthOrig||(o.sWidthOrig=r.attr("width")||null,(t=(r.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/))&&(o.sWidthOrig=t[1])),n!==O&&null!==n&&(D(n),_(T.defaults.column,n,!0),n.mDataProp===O||n.mData||(n.mData=n.mDataProp),n.sType&&(o._sManualType=n.sType),n.className&&!n.sClass&&(n.sClass=n.className),n.sClass&&r.addClass(n.sClass),A.extend(o,n),ct(o,n,"sWidth","sWidthOrig"),n.iDataSort!==O&&(o.aDataSort=[n.iDataSort]),ct(o,n,"aDataSort"));var s=o.mData,a=J(s),l=o.mRender?J(o.mRender):null,n=function(e){return"string"==typeof e&&-1!==e.indexOf("@")};o._bAttrSrc=A.isPlainObject(s)&&(n(s.sort)||n(s.type)||n(s.filter)),o._setter=null,o.fnGetData=function(e,t,n){var o=a(e,t,O,n);return l&&t?l(o,t,e,n):o},o.fnSetData=function(e,t,n){return Q(s)(e,t,n)},"number"!=typeof s&&(e._rowReadObject=!0),e.oFeatures.bSort||(o.bSortable=!1,r.addClass(i.sSortableNone));e=-1!==A.inArray("asc",o.asSorting),r=-1!==A.inArray("desc",o.asSorting);o.bSortable&&(e||r)?e&&!r?(o.sSortingClass=i.sSortableAsc,o.sSortingClassJUI=i.sSortJUIAscAllowed):!e&&r?(o.sSortingClass=i.sSortableDesc,o.sSortingClassJUI=i.sSortJUIDescAllowed):(o.sSortingClass=i.sSortable,o.sSortingClassJUI=i.sSortJUI):(o.sSortingClass=i.sSortableNone,o.sSortingClassJUI="")}function $(e){if(!1!==e.oFeatures.bAutoWidth){var t=e.aoColumns;We(e);for(var n=0,o=t.length;n<o;n++)t[n].nTh.style.width=t[n].sWidth}var i=e.oScroll;""===i.sY&&""===i.sX||Ue(e),ht(e,null,"column-sizing",[e])}function B(e,t){e=H(e,"bVisible");return"number"==typeof e[t]?e[t]:null}function M(e,t){e=H(e,"bVisible"),e=A.inArray(t,e);return-1!==e?e:null}function j(e){var n=0;return A.each(e.aoColumns,function(e,t){t.bVisible&&"none"!==A(t.nTh).css("display")&&n++}),n}function H(e,n){var o=[];return A.map(e.aoColumns,function(e,t){e[n]&&o.push(t)}),o}function U(e){for(var t,n,o,i,r,s,a,l=e.aoColumns,c=e.aoData,d=T.ext.type.detect,u=0,p=l.length;u<p;u++)if(a=[],!(r=l[u]).sType&&r._sManualType)r.sType=r._sManualType;else if(!r.sType){for(t=0,n=d.length;t<n;t++){for(o=0,i=c.length;o<i&&(a[o]===O&&(a[o]=V(e,o,u,"type")),(s=d[t](a[o],e))||t===d.length-1)&&("html"!==s||h(a[o]));o++);if(s){r.sType=s;break}}r.sType||(r.sType="string")}}function z(e,t,n,o){var i,r,s,a,l,c,d,u=e.aoColumns;if(t)for(i=t.length-1;0<=i;i--){var p=(d=t[i]).targets!==O?d.targets:d.aTargets;for(Array.isArray(p)||(p=[p]),s=0,a=p.length;s<a;s++)if("number"==typeof p[s]&&0<=p[s]){for(;u.length<=p[s];)P(e);o(p[s],d)}else if("number"==typeof p[s]&&p[s]<0)o(u.length+p[s],d);else if("string"==typeof p[s])for(l=0,c=u.length;l<c;l++)"_all"!=p[s]&&!A(u[l].nTh).hasClass(p[s])||o(l,d)}if(n)for(i=0,r=n.length;i<r;i++)o(i,n[i])}function q(e,t,n,o){var i=e.aoData.length,r=A.extend(!0,{},T.models.oRow,{src:n?"dom":"data",idx:i});r._aData=t,e.aoData.push(r);for(var s=e.aoColumns,a=0,l=s.length;a<l;a++)s[a].sType=null;e.aiDisplayMaster.push(i);t=e.rowIdFn(t);return t!==O&&(e.aIds[t]=r),!n&&e.oFeatures.bDeferRender||ie(e,i,n,o),i}function W(n,e){var o;return e instanceof A||(e=A(e)),e.map(function(e,t){return o=oe(n,t),q(n,o.data,t,o.cells)})}function V(e,t,n,o){"search"===o?o="filter":"order"===o&&(o="sort");var i=e.iDraw,r=e.aoColumns[n],s=e.aoData[t]._aData,a=r.sDefaultContent,l=r.fnGetData(s,o,{settings:e,row:t,col:n});if(l===O)return e.iDrawError!=i&&null===a&&(lt(e,0,"Requested unknown parameter "+("function"==typeof r.mData?"{function}":"'"+r.mData+"'")+" for row "+t+", column "+n,4),e.iDrawError=i),a;if(l!==s&&null!==l||null===a||o===O){if("function"==typeof l)return l.call(s)}else l=a;return null===l&&"display"===o?"":("filter"!==o||(o=T.ext.type.search)[r.sType]&&(l=o[r.sType](l)),l)}function X(e,t,n,o){var i=e.aoColumns[n],r=e.aoData[t]._aData;i.fnSetData(r,o,{settings:e,row:t,col:n})}var G=/\[.*?\]$/,Y=/\(\)$/;function K(e){return A.map(e.match(/(\\.|[^\.])+/g)||[""],function(e){return e.replace(/\\\./g,".")})}var J=T.util.get,Q=T.util.set;function Z(e){return R(e.aoData,"_aData")}function ee(e){e.aoData.length=0,e.aiDisplayMaster.length=0,e.aiDisplay.length=0,e.aIds={}}function te(e,t,n){for(var o=-1,i=0,r=e.length;i<r;i++)e[i]==t?o=i:e[i]>t&&e[i]--;-1!=o&&n===O&&e.splice(o,1)}function ne(n,o,e,t){function i(e,t){for(;e.childNodes.length;)e.removeChild(e.firstChild);e.innerHTML=V(n,o,t,"display")}var r,s,a=n.aoData[o];if("dom"!==e&&(e&&"auto"!==e||"dom"!==a.src)){var l=a.anCells;if(l)if(t!==O)i(l[t],t);else for(r=0,s=l.length;r<s;r++)i(l[r],r)}else a._aData=oe(n,a,t,t===O?O:a._aData).data;a._aSortData=null,a._aFilterData=null;var c=n.aoColumns;if(t!==O)c[t].sType=null;else{for(r=0,s=c.length;r<s;r++)c[r].sType=null;re(n,a)}}function oe(e,t,n,o){var i,r,s,a=[],l=t.firstChild,c=0,d=e.aoColumns,u=e._rowReadObject;o=o!==O?o:u?{}:[];function p(e,t){var n;"string"!=typeof e||-1!==(n=e.indexOf("@"))&&(n=e.substring(n+1),Q(e)(o,t.getAttribute(n)))}function h(e){n!==O&&n!==c||(r=d[c],s=e.innerHTML.trim(),r&&r._bAttrSrc?(Q(r.mData._)(o,s),p(r.mData.sort,e),p(r.mData.type,e),p(r.mData.filter,e)):u?(r._setter||(r._setter=Q(r.mData)),r._setter(o,s)):o[c]=s),c++}if(l)for(;l;)"TD"!=(i=l.nodeName.toUpperCase())&&"TH"!=i||(h(l),a.push(l)),l=l.nextSibling;else for(var f=0,m=(a=t.anCells).length;f<m;f++)h(a[f]);t=t.firstChild?t:t.nTr;return!t||(t=t.getAttribute("id"))&&Q(e.rowId)(o,t),{data:o,cells:a}}function ie(e,t,n,o){var i,r,s,a,l,c,d=e.aoData[t],u=d._aData,p=[];if(null===d.nTr){for(i=n||w.createElement("tr"),d.nTr=i,d.anCells=p,i._DT_RowIndex=t,re(e,d),a=0,l=e.aoColumns.length;a<l;a++)s=e.aoColumns[a],(r=(c=!n)?w.createElement(s.sCellType):o[a])._DT_CellIndex={row:t,column:a},p.push(r),!c&&(!s.mRender&&s.mData===a||A.isPlainObject(s.mData)&&s.mData._===a+".display")||(r.innerHTML=V(e,t,a,"display")),s.sClass&&(r.className+=" "+s.sClass),s.bVisible&&!n?i.appendChild(r):!s.bVisible&&n&&r.parentNode.removeChild(r),s.fnCreatedCell&&s.fnCreatedCell.call(e.oInstance,r,V(e,t,a),u,t,a);ht(e,"aoRowCreatedCallback",null,[i,u,t,p])}}function re(e,t){var n=t.nTr,o=t._aData;n&&((e=e.rowIdFn(o))&&(n.id=e),o.DT_RowClass&&(e=o.DT_RowClass.split(" "),t.__rowc=t.__rowc?g(t.__rowc.concat(e)):e,A(n).removeClass(t.__rowc.join(" ")).addClass(o.DT_RowClass)),o.DT_RowAttr&&A(n).attr(o.DT_RowAttr),o.DT_RowData&&A(n).data(o.DT_RowData))}function se(e){var t,n,o,i=e.nTHead,r=e.nTFoot,s=0===A("th, td",i).length,a=e.oClasses,l=e.aoColumns;for(s&&(n=A("<tr/>").appendTo(i)),d=0,u=l.length;d<u;d++)o=l[d],t=A(o.nTh).addClass(o.sClass),s&&t.appendTo(n),e.oFeatures.bSort&&(t.addClass(o.sSortingClass),!1!==o.bSortable&&(t.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),tt(e,o.nTh,d))),o.sTitle!=t[0].innerHTML&&t.html(o.sTitle),mt(e,"header")(e,t,o,a);if(s&&ue(e.aoHeader,i),A(i).children("tr").children("th, td").addClass(a.sHeaderTH),A(r).children("tr").children("th, td").addClass(a.sFooterTH),null!==r)for(var c=e.aoFooter[0],d=0,u=c.length;d<u;d++)(o=l[d]).nTf=c[d].cell,o.sClass&&A(o.nTf).addClass(o.sClass)}function ae(e,t,n){var o,i,r,s,a,l,c,d,u,p=[],h=[],f=e.aoColumns.length;if(t){for(n===O&&(n=!1),o=0,i=t.length;o<i;o++){for(p[o]=t[o].slice(),p[o].nTr=t[o].nTr,r=f-1;0<=r;r--)e.aoColumns[r].bVisible||n||p[o].splice(r,1);h.push([])}for(o=0,i=p.length;o<i;o++){if(c=p[o].nTr)for(;l=c.firstChild;)c.removeChild(l);for(r=0,s=p[o].length;r<s;r++)if(u=d=1,h[o][r]===O){for(c.appendChild(p[o][r].cell),h[o][r]=1;p[o+d]!==O&&p[o][r].cell==p[o+d][r].cell;)h[o+d][r]=1,d++;for(;p[o][r+u]!==O&&p[o][r].cell==p[o][r+u].cell;){for(a=0;a<d;a++)h[o+a][r+u]=1;u++}A(p[o][r].cell).attr("rowspan",d).attr("colspan",u)}}}}function le(e,t){var n=ht(e,"aoPreDrawCallback","preDraw",[e]);if(-1===A.inArray(!1,n)){var o=[],i=0,r=e.asStripeClasses,s=r.length,a=(e.aoOpenRows.length,e.oLanguage),l=e.iInitDisplayStart,c="ssp"==gt(e),d=e.aiDisplay;e.bDrawing=!0,l!==O&&-1!==l&&(e._iDisplayStart=!c&&l>=e.fnRecordsDisplay()?0:l,e.iInitDisplayStart=-1);n=e._iDisplayStart,l=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,je(e,!1);else if(c){if(!e.bDestroying&&!t)return void fe(e)}else e.iDraw++;if(0!==d.length)for(var u=c?0:n,p=c?e.aoData.length:l,h=u;h<p;h++){var f=d[h],m=e.aoData[f];null===m.nTr&&ie(e,f);var g,v=m.nTr;0!==s&&(g=r[i%s],m._sRowStripe!=g&&(A(v).removeClass(m._sRowStripe).addClass(g),m._sRowStripe=g)),ht(e,"aoRowCallback",null,[v,m._aData,i,h,f]),o.push(v),i++}else{u=a.sZeroRecords;1==e.iDraw&&"ajax"==gt(e)?u=a.sLoadingRecords:a.sEmptyTable&&0===e.fnRecordsTotal()&&(u=a.sEmptyTable),o[0]=A("<tr/>",{class:s?r[0]:""}).append(A("<td />",{valign:"top",colSpan:j(e),class:e.oClasses.sRowEmpty}).html(u))[0]}ht(e,"aoHeaderCallback","header",[A(e.nTHead).children("tr")[0],Z(e),n,l,d]),ht(e,"aoFooterCallback","footer",[A(e.nTFoot).children("tr")[0],Z(e),n,l,d]);l=A(e.nTBody);l.children().detach(),l.append(A(o)),ht(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1}else je(e,!1)}function ce(e,t){var n=e.oFeatures,o=n.bSort,n=n.bFilter;o&&Qe(e),n?ye(e,e.oPreviousSearch):e.aiDisplay=e.aiDisplayMaster.slice(),!0!==t&&(e._iDisplayStart=0),e._drawHold=t,le(e),e._drawHold=!1}function de(e){var t=e.oClasses,n=A(e.nTable),n=A("<div/>").insertBefore(n),o=e.oFeatures,i=A("<div/>",{id:e.sTableId+"_wrapper",class:t.sWrapper+(e.nTFoot?"":" "+t.sNoFooter)});e.nHolding=n[0],e.nTableWrapper=i[0],e.nTableReinsertBefore=e.nTable.nextSibling;for(var r,s,a,l,c,d,u,p=e.sDom.split(""),h=0;h<p.length;h++){if(r=null,"<"==(s=p[h])){if(u=A("<div/>")[0],"'"==(a=p[h+1])||'"'==a){for(l="",c=2;p[h+c]!=a;)l+=p[h+c],c++;"H"==l?l=t.sJUIHeader:"F"==l&&(l=t.sJUIFooter),-1!=l.indexOf(".")?(d=l.split("."),u.id=d[0].substr(1,d[0].length-1),u.className=d[1]):"#"==l.charAt(0)?u.id=l.substr(1,l.length-1):u.className=l,h+=c}i.append(u),i=A(u)}else if(">"==s)i=i.parent();else if("l"==s&&o.bPaginate&&o.bLengthChange)r=Le(e);else if("f"==s&&o.bFilter)r=be(e);else if("r"==s&&o.bProcessing)r=Me(e);else if("t"==s)r=He(e);else if("i"==s&&o.bInfo)r=Ee(e);else if("p"==s&&o.bPaginate)r=$e(e);else if(0!==T.ext.feature.length)for(var f=T.ext.feature,m=0,g=f.length;m<g;m++)if(s==f[m].cFeature){r=f[m].fnInit(e);break}r&&((u=e.aanFeatures)[s]||(u[s]=[]),u[s].push(r),i.append(r))}n.replaceWith(i),e.nHolding=null}function ue(e,t){var n,o,i,r,s,a,l,c,d,u,p=A(t).children("tr");for(e.splice(0,e.length),i=0,a=p.length;i<a;i++)e.push([]);for(i=0,a=p.length;i<a;i++)for(o=(n=p[i]).firstChild;o;){if("TD"==o.nodeName.toUpperCase()||"TH"==o.nodeName.toUpperCase())for(c=(c=+o.getAttribute("colspan"))&&0!==c&&1!==c?c:1,d=(d=+o.getAttribute("rowspan"))&&0!==d&&1!==d?d:1,l=function(e,t,n){for(var o=e[t];o[n];)n++;return n}(e,i,0),u=1===c,s=0;s<c;s++)for(r=0;r<d;r++)e[i+r][l+s]={cell:o,unique:u},e[i+r].nTr=n;o=o.nextSibling}}function pe(e,t,n){var o=[];n||(n=e.aoHeader,t&&ue(n=[],t));for(var i=0,r=n.length;i<r;i++)for(var s=0,a=n[i].length;s<a;s++)!n[i][s].unique||o[s]&&e.bSortCellsTop||(o[s]=n[i][s].cell);return o}function he(i,e,n){var o,r,t;ht(i,"aoServerParams","serverParams",[e]),e&&Array.isArray(e)&&(o={},r=/(.*?)\[\]$/,A.each(e,function(e,t){var n=t.name.match(r);n?(n=n[0],o[n]||(o[n]=[]),o[n].push(t.value)):o[t.name]=t.value}),e=o);function s(e){var t=i.jqXhr?i.jqXhr.status:null;(null===e||"number"==typeof t&&204==t)&&ve(i,e={},[]),(t=e.error||e.sError)&&lt(i,0,t),i.json=e,ht(i,null,"xhr",[i,e,i.jqXHR]),n(e)}var a=i.ajax,l=i.oInstance;A.isPlainObject(a)&&a.data&&(c="function"==typeof(t=a.data)?t(e,i):t,e="function"==typeof t&&c?c:A.extend(!0,e,c),delete a.data);var c={data:e,success:s,dataType:"json",cache:!1,type:i.sServerMethod,error:function(e,t,n){var o=ht(i,null,"xhr",[i,null,i.jqXHR]);-1===A.inArray(!0,o)&&("parsererror"==t?lt(i,0,"Invalid JSON response",1):4===e.readyState&&lt(i,0,"Ajax error",7)),je(i,!1)}};i.oAjaxData=e,ht(i,null,"preXhr",[i,e]),i.fnServerData?i.fnServerData.call(l,i.sAjaxSource,A.map(e,function(e,t){return{name:t,value:e}}),s,i):i.sAjaxSource||"string"==typeof a?i.jqXHR=A.ajax(A.extend(c,{url:a||i.sAjaxSource})):"function"==typeof a?i.jqXHR=a.call(l,e,s,i):(i.jqXHR=A.ajax(A.extend(c,a)),a.data=t)}function fe(t){t.iDraw++,je(t,!0),he(t,me(t),function(e){ge(t,e)})}function me(e){function n(e,t){d.push({name:e,value:t})}var t,o,i,r=e.aoColumns,s=r.length,a=e.oFeatures,l=e.oPreviousSearch,c=e.aoPreSearchCols,d=[],u=Je(e),p=e._iDisplayStart,h=!1!==a.bPaginate?e._iDisplayLength:-1;n("sEcho",e.iDraw),n("iColumns",s),n("sColumns",R(r,"sName").join(",")),n("iDisplayStart",p),n("iDisplayLength",h);for(var f={draw:e.iDraw,columns:[],order:[],start:p,length:h,search:{value:l.sSearch,regex:l.bRegex}},m=0;m<s;m++)o=r[m],i=c[m],t="function"==typeof o.mData?"function":o.mData,f.columns.push({data:t,name:o.sName,searchable:o.bSearchable,orderable:o.bSortable,search:{value:i.sSearch,regex:i.bRegex}}),n("mDataProp_"+m,t),a.bFilter&&(n("sSearch_"+m,i.sSearch),n("bRegex_"+m,i.bRegex),n("bSearchable_"+m,o.bSearchable)),a.bSort&&n("bSortable_"+m,o.bSortable);a.bFilter&&(n("sSearch",l.sSearch),n("bRegex",l.bRegex)),a.bSort&&(A.each(u,function(e,t){f.order.push({column:t.col,dir:t.dir}),n("iSortCol_"+e,t.col),n("sSortDir_"+e,t.dir)}),n("iSortingCols",u.length));u=T.ext.legacy.ajax;return null===u?e.sAjaxSource?d:f:u?d:f}function ge(e,n){var t=function(e,t){return n[e]!==O?n[e]:n[t]},o=ve(e,n),i=t("sEcho","draw"),r=t("iTotalRecords","recordsTotal"),t=t("iTotalDisplayRecords","recordsFiltered");if(i!==O){if(+i<e.iDraw)return;e.iDraw=+i}o=o||[],ee(e),e._iRecordsTotal=parseInt(r,10),e._iRecordsDisplay=parseInt(t,10);for(var s=0,a=o.length;s<a;s++)q(e,o[s]);e.aiDisplay=e.aiDisplayMaster.slice(),le(e,!0),e._bInitComplete||Oe(e,n),je(e,!1)}function ve(e,t,n){e=A.isPlainObject(e.ajax)&&e.ajax.dataSrc!==O?e.ajax.dataSrc:e.sAjaxDataProp;if(!n)return"data"===e?t.aaData||t[e]:""!==e?J(e)(t):t;Q(e)(t,n)}function be(n){function t(e){s.f;var t=this.value||"";r.return&&"Enter"!==e.key||t!=r.sSearch&&(ye(n,{sSearch:t,bRegex:r.bRegex,bSmart:r.bSmart,bCaseInsensitive:r.bCaseInsensitive,return:r.return}),n._iDisplayStart=0,le(n))}var e=n.oClasses,o=n.sTableId,i=n.oLanguage,r=n.oPreviousSearch,s=n.aanFeatures,a='<input type="search" class="'+e.sFilterInput+'"/>',l=(l=i.sSearch).match(/_INPUT_/)?l.replace("_INPUT_",a):l+a,e=A("<div/>",{id:s.f?null:o+"_filter",class:e.sFilter}).append(A("<label/>").append(l)),l=null!==n.searchDelay?n.searchDelay:"ssp"===gt(n)?400:0,c=A("input",e).val(r.sSearch).attr("placeholder",i.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",l?Ve(t,l):t).on("mouseup",function(e){setTimeout(function(){t.call(c[0],e)},10)}).on("keypress.DT",function(e){if(13==e.keyCode)return!1}).attr("aria-controls",o);return A(n.nTable).on("search.dt.DT",function(e,t){if(n===t)try{c[0]!==w.activeElement&&c.val(r.sSearch)}catch(e){}}),e[0]}function ye(e,t,n){function o(e){r.sSearch=e.sSearch,r.bRegex=e.bRegex,r.bSmart=e.bSmart,r.bCaseInsensitive=e.bCaseInsensitive,r.return=e.return}function i(e){return e.bEscapeRegex!==O?!e.bEscapeRegex:e.bRegex}var r=e.oPreviousSearch,s=e.aoPreSearchCols;if(U(e),"ssp"!=gt(e)){Ce(e,t.sSearch,n,i(t),t.bSmart,t.bCaseInsensitive,t.return),o(t);for(var a=0;a<s.length;a++)xe(e,s[a].sSearch,a,i(s[a]),s[a].bSmart,s[a].bCaseInsensitive);we(e)}else o(t);e.bFiltered=!0,ht(e,null,"search",[e])}function we(e){for(var t,n,o=T.ext.search,i=e.aiDisplay,r=0,s=o.length;r<s;r++){for(var a=[],l=0,c=i.length;l<c;l++)n=i[l],t=e.aoData[n],o[r](e,t._aFilterData,n,t._aData,l)&&a.push(n);i.length=0,A.merge(i,a)}}function xe(e,t,n,o,i,r){if(""!==t){for(var s,a=[],l=e.aiDisplay,c=Se(t,o,i,r),d=0;d<l.length;d++)s=e.aoData[l[d]]._aFilterData[n],c.test(s)&&a.push(l[d]);e.aiDisplay=a}}function Ce(e,t,n,o,i,r){var s,a,l=Se(t,o,i,r),c=e.oPreviousSearch.sSearch,i=e.aiDisplayMaster,d=[];if(0!==T.ext.search.length&&(n=!0),r=Fe(e),t.length<=0)e.aiDisplay=i.slice();else{for((r||n||o||c.length>t.length||0!==t.indexOf(c)||e.bSorted)&&(e.aiDisplay=i.slice()),s=e.aiDisplay,a=0;a<s.length;a++)l.test(e.aoData[s[a]]._sFilterRow)&&d.push(s[a]);e.aiDisplay=d}}function Se(e,t,n,o){return e=t?e:Te(e),n&&(e="^(?=.*?"+A.map(e.match(/"[^"]+"|[^ ]+/g)||[""],function(e){var t;return'"'===e.charAt(0)&&(e=(t=e.match(/^"(.*)"$/))?t[1]:e),e.replace('"',"")}).join(")(?=.*?")+").*$"),new RegExp(e,o?"i":"")}var Te=T.util.escapeRegex,_e=A("<div>")[0],Ie=_e.textContent!==O;function Fe(e){for(var t,n,o,i,r,s=e.aoColumns,a=!1,l=0,c=e.aoData.length;l<c;l++)if(!(r=e.aoData[l])._aFilterData){for(o=[],t=0,n=s.length;t<n;t++)s[t].bSearchable?(null===(i=V(e,l,t,"filter"))&&(i=""),"string"!=typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&(_e.innerHTML=i,i=Ie?_e.textContent:_e.innerText),i.replace&&(i=i.replace(/[\r\n\u2028]/g,"")),o.push(i);r._aFilterData=o,r._sFilterRow=o.join("  "),a=!0}return a}function De(e){return{search:e.sSearch,smart:e.bSmart,regex:e.bRegex,caseInsensitive:e.bCaseInsensitive}}function ke(e){return{sSearch:e.search,bSmart:e.smart,bRegex:e.regex,bCaseInsensitive:e.caseInsensitive}}function Ee(e){var t=e.sTableId,n=e.aanFeatures.i,o=A("<div/>",{class:e.oClasses.sInfo,id:n?null:t+"_info"});return n||(e.aoDrawCallback.push({fn:Pe,sName:"information"}),o.attr("role","status").attr("aria-live","polite"),A(e.nTable).attr("aria-describedby",t+"_info")),o[0]}function Pe(e){var t,n,o,i,r,s,a=e.aanFeatures.i;0!==a.length&&(s=e.oLanguage,t=e._iDisplayStart+1,n=e.fnDisplayEnd(),o=e.fnRecordsTotal(),r=(i=e.fnRecordsDisplay())?s.sInfo:s.sInfoEmpty,i!==o&&(r+=" "+s.sInfoFiltered),r=Ae(e,r+=s.sInfoPostFix),null!==(s=s.fnInfoCallback)&&(r=s.call(e.oInstance,e,t,n,o,i,r)),A(a).html(r))}function Ae(e,t){var n=e.fnFormatNumber,o=e._iDisplayStart+1,i=e._iDisplayLength,r=e.fnRecordsDisplay(),s=-1===i;return t.replace(/_START_/g,n.call(e,o)).replace(/_END_/g,n.call(e,e.fnDisplayEnd())).replace(/_MAX_/g,n.call(e,e.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(e,r)).replace(/_PAGE_/g,n.call(e,s?1:Math.ceil(o/i))).replace(/_PAGES_/g,n.call(e,s?1:Math.ceil(r/i)))}function Ne(n){var o,e,t,i=n.iInitDisplayStart,r=n.aoColumns,s=n.oFeatures,a=n.bDeferLoading;if(n.bInitialised){for(de(n),se(n),ae(n,n.aoHeader),ae(n,n.aoFooter),je(n,!0),s.bAutoWidth&&We(n),o=0,e=r.length;o<e;o++)(t=r[o]).sWidth&&(t.nTh.style.width=Ke(t.sWidth));ht(n,null,"preInit",[n]),ce(n);s=gt(n);"ssp"==s&&!a||("ajax"==s?he(n,[],function(e){var t=ve(n,e);for(o=0;o<t.length;o++)q(n,t[o]);n.iInitDisplayStart=i,ce(n),je(n,!1),Oe(n,e)}):(je(n,!1),Oe(n)))}else setTimeout(function(){Ne(n)},200)}function Oe(e,t){e._bInitComplete=!0,(t||e.oInit.aaData)&&$(e),ht(e,null,"plugin-init",[e,t]),ht(e,"aoInitComplete","init",[e,t])}function Re(e,t){t=parseInt(t,10);e._iDisplayLength=t,ft(e),ht(e,null,"length",[e,t])}function Le(o){for(var e=o.oClasses,t=o.sTableId,n=o.aLengthMenu,i=Array.isArray(n[0]),r=i?n[0]:n,s=i?n[1]:n,a=A("<select/>",{name:t+"_length","aria-controls":t,class:e.sLengthSelect}),l=0,c=r.length;l<c;l++)a[0][l]=new Option("number"==typeof s[l]?o.fnFormatNumber(s[l]):s[l],r[l]);var d=A("<div><label/></div>").addClass(e.sLength);return o.aanFeatures.l||(d[0].id=t+"_length"),d.children().append(o.oLanguage.sLengthMenu.replace("_MENU_",a[0].outerHTML)),A("select",d).val(o._iDisplayLength).on("change.DT",function(e){Re(o,A(this).val()),le(o)}),A(o.nTable).on("length.dt.DT",function(e,t,n){o===t&&A("select",d).val(n)}),d[0]}function $e(e){function d(e){le(e)}var t=e.sPaginationType,u=T.ext.pager[t],p="function"==typeof u,t=A("<div/>").addClass(e.oClasses.sPaging+t)[0],h=e.aanFeatures;return p||u.fnInit(e,t,d),h.p||(t.id=e.sTableId+"_paginate",e.aoDrawCallback.push({fn:function(e){if(p)for(var t=e._iDisplayStart,n=e._iDisplayLength,o=e.fnRecordsDisplay(),i=-1===n,r=i?0:Math.ceil(t/n),s=i?1:Math.ceil(o/n),a=u(r,s),l=0,c=h.p.length;l<c;l++)mt(e,"pageButton")(e,h.p[l],l,a,r,s);else u.fnUpdate(e,d)},sName:"pagination"})),t}function Be(e,t,n){var o=e._iDisplayStart,i=e._iDisplayLength,r=e.fnRecordsDisplay();0===r||-1===i?o=0:"number"==typeof t?r<(o=t*i)&&(o=0):"first"==t?o=0:"previous"==t?(o=0<=i?o-i:0)<0&&(o=0):"next"==t?o+i<r&&(o+=i):"last"==t?o=Math.floor((r-1)/i)*i:lt(e,0,"Unknown paging action: "+t,5);t=e._iDisplayStart!==o;return e._iDisplayStart=o,t&&(ht(e,null,"page",[e]),n&&le(e)),t}function Me(e){return A("<div/>",{id:e.aanFeatures.r?null:e.sTableId+"_processing",class:e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function je(e,t){e.oFeatures.bProcessing&&A(e.aanFeatures.r).css("display",t?"block":"none"),ht(e,null,"processing",[e,t])}function He(e){var t=A(e.nTable),n=e.oScroll;if(""===n.sX&&""===n.sY)return e.nTable;function o(e){return e?Ke(e):null}var i=n.sX,r=n.sY,s=e.oClasses,a=t.children("caption"),l=a.length?a[0]._captionSide:null,c=A(t[0].cloneNode(!1)),d=A(t[0].cloneNode(!1)),u=t.children("tfoot"),p="<div/>";u.length||(u=null);c=A(p,{class:s.sScrollWrapper}).append(A(p,{class:s.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:i?o(i):"100%"}).append(A(p,{class:s.sScrollHeadInner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(c.removeAttr("id").css("margin-left",0).append("top"===l?a:null).append(t.children("thead"))))).append(A(p,{class:s.sScrollBody}).css({position:"relative",overflow:"auto",width:o(i)}).append(t));u&&c.append(A(p,{class:s.sScrollFoot}).css({overflow:"hidden",border:0,width:i?o(i):"100%"}).append(A(p,{class:s.sScrollFootInner}).append(d.removeAttr("id").css("margin-left",0).append("bottom"===l?a:null).append(t.children("tfoot")))));var a=c.children(),h=a[0],t=a[1],f=u?a[2]:null;return i&&A(t).on("scroll.DT",function(e){var t=this.scrollLeft;h.scrollLeft=t,u&&(f.scrollLeft=t)}),A(t).css("max-height",r),n.bCollapse||A(t).css("height",r),e.nScrollHead=h,e.nScrollBody=t,e.nScrollFoot=f,e.aoDrawCallback.push({fn:Ue,sName:"scrolling"}),c[0]}function Ue(n){var e,t,o,i,r,s=n.oScroll,a=s.sX,l=s.sXInner,c=s.sY,d=s.iBarWidth,u=A(n.nScrollHead),p=u[0].style,h=u.children("div"),f=h[0].style,m=h.children("table"),g=n.nScrollBody,v=A(g),b=g.style,y=A(n.nScrollFoot).children("div"),w=y.children("table"),x=A(n.nTHead),C=A(n.nTable),S=C[0],T=S.style,_=n.nTFoot?A(n.nTFoot):null,I=n.oBrowser,F=I.bScrollOversize,D=(R(n.aoColumns,"nTh"),[]),k=[],E=[],P=[],s=function(e){e=e.style;e.paddingTop="0",e.paddingBottom="0",e.borderTopWidth="0",e.borderBottomWidth="0",e.height=0},h=g.scrollHeight>g.clientHeight;if(n.scrollBarVis!==h&&n.scrollBarVis!==O)return n.scrollBarVis=h,void $(n);n.scrollBarVis=h,C.children("thead, tfoot").remove(),_&&(o=_.clone().prependTo(C),e=_.find("tr"),t=o.find("tr")),h=x.clone().prependTo(C),o=x.find("tr"),x=h.find("tr"),h.find("th, td").removeAttr("tabindex"),a||(b.width="100%",u[0].style.width="100%"),A.each(pe(n,h),function(e,t){i=B(n,e),t.style.width=n.aoColumns[i].sWidth}),_&&ze(function(e){e.style.width=""},t),h=C.outerWidth(),""===a?(T.width="100%",F&&(C.find("tbody").height()>g.offsetHeight||"scroll"==v.css("overflow-y"))&&(T.width=Ke(C.outerWidth()-d)),h=C.outerWidth()):""!==l&&(T.width=Ke(l),h=C.outerWidth()),ze(s,x),ze(function(e){var t=N.getComputedStyle?N.getComputedStyle(e).width:Ke(A(e).width());E.push(e.innerHTML),D.push(t)},x),ze(function(e,t){e.style.width=D[t]},o),A(x).height(0),_&&(ze(s,t),ze(function(e){P.push(e.innerHTML),k.push(Ke(A(e).css("width")))},t),ze(function(e,t){e.style.width=k[t]},e),A(t).height(0)),ze(function(e,t){e.innerHTML='<div class="dataTables_sizing">'+E[t]+"</div>",e.childNodes[0].style.height="0",e.childNodes[0].style.overflow="hidden",e.style.width=D[t]},x),_&&ze(function(e,t){e.innerHTML='<div class="dataTables_sizing">'+P[t]+"</div>",e.childNodes[0].style.height="0",e.childNodes[0].style.overflow="hidden",e.style.width=k[t]},t),C.outerWidth()<h?(r=g.scrollHeight>g.offsetHeight||"scroll"==v.css("overflow-y")?h+d:h,F&&(g.scrollHeight>g.offsetHeight||"scroll"==v.css("overflow-y"))&&(T.width=Ke(r-d)),""!==a&&""===l||lt(n,1,"Possible column misalignment",6)):r="100%",b.width=Ke(r),p.width=Ke(r),_&&(n.nScrollFoot.style.width=Ke(r)),c||F&&(b.height=Ke(S.offsetHeight+d));S=C.outerWidth();m[0].style.width=Ke(S),f.width=Ke(S);m=C.height()>g.clientHeight||"scroll"==v.css("overflow-y"),I="padding"+(I.bScrollbarLeft?"Left":"Right");f[I]=m?d+"px":"0px",_&&(w[0].style.width=Ke(S),y[0].style.width=Ke(S),y[0].style[I]=m?d+"px":"0px"),C.children("colgroup").insertBefore(C.children("thead")),v.trigger("scroll"),!n.bSorted&&!n.bFiltered||n._drawHold||(g.scrollTop=0)}function ze(e,t,n){for(var o,i,r=0,s=0,a=t.length;s<a;){for(o=t[s].firstChild,i=n?n[s].firstChild:null;o;)1===o.nodeType&&(n?e(o,i,r):e(o,r),r++),o=o.nextSibling,i=n?i.nextSibling:null;s++}}var qe=/<.*?>/g;function We(e){var t,n,o=e.nTable,i=e.aoColumns,r=e.oScroll,s=r.sY,a=r.sX,l=r.sXInner,c=i.length,d=H(e,"bVisible"),u=A("th",e.nTHead),p=o.getAttribute("width"),h=o.parentNode,f=!1,m=e.oBrowser,g=m.bScrollOversize,v=o.style.width;for(v&&-1!==v.indexOf("%")&&(p=v),x=0;x<d.length;x++)null!==(t=i[d[x]]).sWidth&&(t.sWidth=Xe(t.sWidthOrig,h),f=!0);if(g||!f&&!a&&!s&&c==j(e)&&c==u.length)for(x=0;x<c;x++){var b=B(e,x);null!==b&&(i[b].sWidth=Ke(u.eq(x).width()))}else{r=A(o).clone().css("visibility","hidden").removeAttr("id");r.find("tbody tr").remove();var y=A("<tr/>").appendTo(r.find("tbody"));for(r.find("thead, tfoot").remove(),r.append(A(e.nTHead).clone()).append(A(e.nTFoot).clone()),r.find("tfoot th, tfoot td").css("width",""),u=pe(e,r.find("thead")[0]),x=0;x<d.length;x++)t=i[d[x]],u[x].style.width=null!==t.sWidthOrig&&""!==t.sWidthOrig?Ke(t.sWidthOrig):"",t.sWidthOrig&&a&&A(u[x]).append(A("<div/>").css({width:t.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(e.aoData.length)for(x=0;x<d.length;x++)t=i[n=d[x]],A(Ge(e,n)).clone(!1).append(t.sContentPadding).appendTo(y);A("[name]",r).removeAttr("name");v=A("<div/>").css(a||s?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(r).appendTo(h);a&&l?r.width(l):a?(r.css("width","auto"),r.removeAttr("width"),r.width()<h.clientWidth&&p&&r.width(h.clientWidth)):s?r.width(h.clientWidth):p&&r.width(p);for(var w=0,x=0;x<d.length;x++){var C=A(u[x]),S=C.outerWidth()-C.width(),C=m.bBounding?Math.ceil(u[x].getBoundingClientRect().width):C.outerWidth();w+=C,i[d[x]].sWidth=Ke(C-S)}o.style.width=Ke(w),v.remove()}p&&(o.style.width=Ke(p)),!p&&!a||e._reszEvt||(p=function(){A(N).on("resize.DT-"+e.sInstance,Ve(function(){$(e)}))},g?setTimeout(p,1e3):p(),e._reszEvt=!0)}var Ve=T.util.throttle;function Xe(e,t){if(!e)return 0;e=A("<div/>").css("width",Ke(e)).appendTo(t||w.body),t=e[0].offsetWidth;return e.remove(),t}function Ge(e,t){var n=Ye(e,t);if(n<0)return null;var o=e.aoData[n];return o.nTr?o.anCells[t]:A("<td/>").html(V(e,n,t,"display"))[0]}function Ye(e,t){for(var n,o=-1,i=-1,r=0,s=e.aoData.length;r<s;r++)(n=(n=(n=V(e,r,t,"display")+"").replace(qe,"")).replace(/&nbsp;/g," ")).length>o&&(o=n.length,i=r);return i}function Ke(e){return null===e?"0px":"number"==typeof e?e<0?"0px":e+"px":e.match(/\d$/)?e+"px":e}function Je(e){function t(e){e.length&&!Array.isArray(e[0])?h.push(e):A.merge(h,e)}var n,o,i,r,s,a,l,c=[],d=e.aoColumns,u=e.aaSortingFixed,p=A.isPlainObject(u),h=[];for(Array.isArray(u)&&t(u),p&&u.pre&&t(u.pre),t(e.aaSorting),p&&u.post&&t(u.post),n=0;n<h.length;n++)for(o=0,i=(r=d[l=h[n][0]].aDataSort).length;o<i;o++)a=d[s=r[o]].sType||"string",h[n]._idx===O&&(h[n]._idx=A.inArray(h[n][1],d[s].asSorting)),c.push({src:l,col:s,dir:h[n][1],index:h[n]._idx,type:a,formatter:T.ext.type.order[a+"-pre"]});return c}function Qe(e){var t,n,o,i,d,u=[],c=T.ext.type.order,p=e.aoData,r=(e.aoColumns,0),s=e.aiDisplayMaster;for(U(e),t=0,n=(d=Je(e)).length;t<n;t++)(i=d[t]).formatter&&r++,ot(e,i.col);if("ssp"!=gt(e)&&0!==d.length){for(t=0,o=s.length;t<o;t++)u[s[t]]=t;r===d.length?s.sort(function(e,t){for(var n,o,i,r,s=d.length,a=p[e]._aSortData,l=p[t]._aSortData,c=0;c<s;c++)if(0!=(i=(n=a[(r=d[c]).col])<(o=l[r.col])?-1:o<n?1:0))return"asc"===r.dir?i:-i;return(n=u[e])<(o=u[t])?-1:o<n?1:0}):s.sort(function(e,t){for(var n,o,i,r=d.length,s=p[e]._aSortData,a=p[t]._aSortData,l=0;l<r;l++)if(n=s[(i=d[l]).col],o=a[i.col],0!==(i=(c[i.type+"-"+i.dir]||c["string-"+i.dir])(n,o)))return i;return(n=u[e])<(o=u[t])?-1:o<n?1:0})}e.bSorted=!0}function Ze(e){for(var t=e.aoColumns,n=Je(e),o=e.oLanguage.oAria,i=0,r=t.length;i<r;i++){var s=t[i],a=s.asSorting,l=s.ariaTitle||s.sTitle.replace(/<.*?>/g,""),c=s.nTh;c.removeAttribute("aria-sort"),l=s.bSortable?l+("asc"===(0<n.length&&n[0].col==i?(c.setAttribute("aria-sort","asc"==n[0].dir?"ascending":"descending"),a[n[0].index+1]||a[0]):a[0])?o.sSortAscending:o.sSortDescending):l,c.setAttribute("aria-label",l)}}function et(e,t,n,o){var i,r=e.aoColumns[t],s=e.aaSorting,a=r.asSorting,r=function(e,t){var n=e._idx;return n===O&&(n=A.inArray(e[1],a)),n+1<a.length?n+1:t?null:0};"number"==typeof s[0]&&(s=e.aaSorting=[s]),n&&e.oFeatures.bSortMulti?-1!==(n=A.inArray(t,R(s,"0")))?(null===(i=r(s[n],!0))&&1===s.length&&(i=0),null===i?s.splice(n,1):(s[n][1]=a[i],s[n]._idx=i)):(s.push([t,a[0],0]),s[s.length-1]._idx=0):s.length&&s[0][0]==t?(i=r(s[0]),s.length=1,s[0][1]=a[i],s[0]._idx=i):(s.length=0,s.push([t,a[0]]),s[0]._idx=0),ce(e),"function"==typeof o&&o(e)}function tt(t,e,n,o){var i=t.aoColumns[n];ut(e,{},function(e){!1!==i.bSortable&&(t.oFeatures.bProcessing?(je(t,!0),setTimeout(function(){et(t,n,e.shiftKey,o),"ssp"!==gt(t)&&je(t,!1)},0)):et(t,n,e.shiftKey,o))})}function nt(e){var t,n,o,i=e.aLastSort,r=e.oClasses.sSortColumn,s=Je(e),a=e.oFeatures;if(a.bSort&&a.bSortClasses){for(t=0,n=i.length;t<n;t++)o=i[t].src,A(R(e.aoData,"anCells",o)).removeClass(r+(t<2?t+1:3));for(t=0,n=s.length;t<n;t++)o=s[t].src,A(R(e.aoData,"anCells",o)).addClass(r+(t<2?t+1:3))}e.aLastSort=s}function ot(e,t){var n,o,i,r=e.aoColumns[t],s=T.ext.order[r.sSortDataType];s&&(n=s.call(e.oInstance,e,t,M(e,t)));for(var a=T.ext.type.order[r.sType+"-pre"],l=0,c=e.aoData.length;l<c;l++)(o=e.aoData[l])._aSortData||(o._aSortData=[]),o._aSortData[t]&&!s||(i=s?n[l]:V(e,l,t,"sort"),o._aSortData[t]=a?a(i):i)}function it(n){var e;n._bLoadingState||(e={time:+new Date,start:n._iDisplayStart,length:n._iDisplayLength,order:A.extend(!0,[],n.aaSorting),search:De(n.oPreviousSearch),columns:A.map(n.aoColumns,function(e,t){return{visible:e.bVisible,search:De(n.aoPreSearchCols[t])}})},n.oSavedState=e,ht(n,"aoStateSaveParams","stateSaveParams",[n,e]),n.oFeatures.bStateSave&&!n.bDestroying&&n.fnStateSaveCallback.call(n.oInstance,n,e))}function rt(t,e,n){if(t.oFeatures.bStateSave){var o=t.fnStateLoadCallback.call(t.oInstance,t,function(e){st(t,e,n)});return o!==O&&st(t,o,n),!0}n()}function st(n,e,t){var o,i,r=n.aoColumns;n._bLoadingState=!0;var s=n._bInitComplete?new T.Api(n):null;if(!e||!e.time)return n._bLoadingState=!1,void t();var a=ht(n,"aoStateLoadParams","stateLoadParams",[n,e]);if(-1!==A.inArray(!1,a))return n._bLoadingState=!1,void t();a=n.iStateDuration;if(0<a&&e.time<+new Date-1e3*a)return n._bLoadingState=!1,void t();if(e.columns&&r.length!==e.columns.length)return n._bLoadingState=!1,void t();if(n.oLoadedState=A.extend(!0,{},e),e.start!==O&&(n._iDisplayStart=e.start,null===s&&(n.iInitDisplayStart=e.start)),e.length!==O&&(n._iDisplayLength=e.length),e.order!==O&&(n.aaSorting=[],A.each(e.order,function(e,t){n.aaSorting.push(t[0]>=r.length?[0,t[1]]:t)})),e.search!==O&&A.extend(n.oPreviousSearch,ke(e.search)),e.columns){for(o=0,i=e.columns.length;o<i;o++){var l=e.columns[o];l.visible!==O&&(s?s.column(o).visible(l.visible,!1):r[o].bVisible=l.visible),l.search!==O&&A.extend(n.aoPreSearchCols[o],ke(l.search))}s&&s.columns.adjust()}n._bLoadingState=!1,ht(n,"aoStateLoaded","stateLoaded",[n,e]),t()}function at(e){var t=T.settings,e=A.inArray(e,R(t,"nTable"));return-1!==e?t[e]:null}function lt(e,t,n,o){if(n="DataTables warning: "+(e?"table id="+e.sTableId+" - ":"")+n,o&&(n+=". For more information about this error, please see http://datatables.net/tn/"+o),t)N.console&&console.log&&console.log(n);else{t=T.ext,t=t.sErrMode||t.errMode;if(e&&ht(e,null,"error",[e,o,n]),"alert"==t)alert(n);else{if("throw"==t)throw new Error(n);"function"==typeof t&&t(e,o,n)}}}function ct(n,o,e,t){Array.isArray(e)?A.each(e,function(e,t){Array.isArray(t)?ct(n,o,t[0],t[1]):ct(n,o,t)}):(t===O&&(t=e),o[e]!==O&&(n[t]=o[e]))}function dt(e,t,n){var o,i;for(i in t)t.hasOwnProperty(i)&&(o=t[i],A.isPlainObject(o)?(A.isPlainObject(e[i])||(e[i]={}),A.extend(!0,e[i],o)):n&&"data"!==i&&"aaData"!==i&&Array.isArray(o)?e[i]=o.slice():e[i]=o);return e}function ut(t,e,n){A(t).on("click.DT",e,function(e){A(t).trigger("blur"),n(e)}).on("keypress.DT",e,function(e){13===e.which&&(e.preventDefault(),n(e))}).on("selectstart.DT",function(){return!1})}function pt(e,t,n,o){n&&e[t].push({fn:n,sName:o})}function ht(n,e,t,o){var i=[];return e&&(i=A.map(n[e].slice().reverse(),function(e,t){return e.fn.apply(n.oInstance,o)})),null!==t&&(t=A.Event(t+".dt"),A(n.nTable).trigger(t,o),i.push(t.result)),i}function ft(e){var t=e._iDisplayStart,n=e.fnDisplayEnd(),o=e._iDisplayLength;n<=t&&(t=n-o),t-=t%o,(-1===o||t<0)&&(t=0),e._iDisplayStart=t}function mt(e,t){var n=e.renderer,e=T.ext.renderer[t];return A.isPlainObject(n)&&n[t]?e[n[t]]||e._:"string"==typeof n&&e[n]||e._}function gt(e){return e.oFeatures.bServerSide?"ssp":e.ajax||e.sAjaxSource?"ajax":"dom"}var vt=[],bt=Array.prototype,yt=function(e,t){if(!(this instanceof yt))return new yt(e,t);function n(e){var t,n,o,i=(e=e,n=T.settings,o=A.map(n,function(e,t){return e.nTable}),e?e.nTable&&e.oApi?[e]:e.nodeName&&"table"===e.nodeName.toLowerCase()?-1!==(t=A.inArray(e,o))?[n[t]]:null:e&&"function"==typeof e.settings?e.settings().toArray():("string"==typeof e?i=A(e):e instanceof A&&(i=e),i?i.map(function(e){return-1!==(t=A.inArray(this,o))?n[t]:null}).toArray():void 0):[]);i&&r.push.apply(r,i)}var r=[];if(Array.isArray(e))for(var o=0,i=e.length;o<i;o++)n(e[o]);else n(e);this.context=g(r),t&&A.merge(this,t),this.selector={rows:null,cols:null,opts:null},yt.extend(this,this,vt)};T.Api=yt,A.extend(yt.prototype,{any:function(){return 0!==this.count()},concat:bt.concat,context:[],count:function(){return this.flatten().length},each:function(e){for(var t=0,n=this.length;t<n;t++)e.call(this,this[t],t,this);return this},eq:function(e){var t=this.context;return t.length>e?new yt(t[e],this[e]):null},filter:function(e){var t=[];if(bt.filter)t=bt.filter.call(this,e,this);else for(var n=0,o=this.length;n<o;n++)e.call(this,this[n],n,this)&&t.push(this[n]);return new yt(this.context,t)},flatten:function(){var e=[];return new yt(this.context,e.concat.apply(e,this.toArray()))},join:bt.join,indexOf:bt.indexOf||function(e,t){for(var n=t||0,o=this.length;n<o;n++)if(this[n]===e)return n;return-1},iterator:function(e,t,n,o){var i,r,s,a,l,c,d,u,p=[],h=this.context,f=this.selector;for("string"==typeof e&&(o=n,n=t,t=e,e=!1),r=0,s=h.length;r<s;r++){var m=new yt(h[r]);if("table"===t)(i=n.call(m,h[r],r))!==O&&p.push(i);else if("columns"===t||"rows"===t)(i=n.call(m,h[r],this[r],r))!==O&&p.push(i);else if("column"===t||"column-rows"===t||"row"===t||"cell"===t)for(d=this[r],"column-rows"===t&&(c=_t(h[r],f.opts)),a=0,l=d.length;a<l;a++)u=d[a],(i="cell"===t?n.call(m,h[r],u.row,u.column,r,a):n.call(m,h[r],u,r,a,c))!==O&&p.push(i)}if(p.length||o){o=new yt(h,e?p.concat.apply([],p):p),e=o.selector;return e.rows=f.rows,e.cols=f.cols,e.opts=f.opts,o}return this},lastIndexOf:bt.lastIndexOf||function(e,t){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(e){var t=[];if(bt.map)t=bt.map.call(this,e,this);else for(var n=0,o=this.length;n<o;n++)t.push(e.call(this,this[n],n));return new yt(this.context,t)},pluck:function(t){return this.map(function(e){return e[t]})},pop:bt.pop,push:bt.push,reduce:bt.reduce||function(e,t){return E(this,e,t,0,this.length,1)},reduceRight:bt.reduceRight||function(e,t){return E(this,e,t,this.length-1,-1,-1)},reverse:bt.reverse,selector:null,shift:bt.shift,slice:function(){return new yt(this.context,this)},sort:bt.sort,splice:bt.splice,toArray:function(){return bt.slice.call(this)},to$:function(){return A(this)},toJQuery:function(){return A(this)},unique:function(){return new yt(this.context,g(this))},unshift:bt.unshift}),yt.extend=function(e,t,n){if(n.length&&t&&(t instanceof yt||t.__dt_wrapper))for(var o,i=0,r=n.length;i<r;i++)t[(o=n[i]).name]="function"===o.type?function(t,n,o){return function(){var e=n.apply(t,arguments);return yt.extend(e,e,o.methodExt),e}}(e,o.val,o):"object"===o.type?{}:o.val,t[o.name].__dt_wrapper=!0,yt.extend(e,t[o.name],o.propExt)},yt.register=t=function(e,t){if(Array.isArray(e))for(var n=0,o=e.length;n<o;n++)yt.register(e[n],t);else for(var i,r,s=e.split("."),a=vt,l=0,c=s.length;l<c;l++){var d=function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n].name===t)return e[n];return null}(a,i=(r=-1!==s[l].indexOf("()"))?s[l].replace("()",""):s[l]);d||(d={name:i,val:{},methodExt:[],propExt:[],type:"object"},a.push(d)),l===c-1?(d.val=t,d.type="function"==typeof t?"function":A.isPlainObject(t)?"object":"other"):a=r?d.methodExt:d.propExt}},yt.registerPlural=e=function(e,t,n){yt.register(e,n),yt.register(t,function(){var e=n.apply(this,arguments);return e===this?this:e instanceof yt?e.length?Array.isArray(e[0])?new yt(e.context,e[0]):e[0]:O:e})};var wt=function(e,n){if(Array.isArray(e))return A.map(e,function(e){return wt(e,n)});if("number"==typeof e)return[n[e]];var o=A.map(n,function(e,t){return e.nTable});return A(o).filter(e).map(function(e){var t=A.inArray(this,o);return n[t]}).toArray()};t("tables()",function(e){return e!==O&&null!==e?new yt(wt(e,this.context)):this}),t("table()",function(e){var t=this.tables(e),e=t.context;return e.length?new yt(e[0]):t}),e("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable},1)}),e("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody},1)}),e("tables().header()","table().header()",function(){return this.iterator("table",function(e){return e.nTHead},1)}),e("tables().footer()","table().footer()",function(){return this.iterator("table",function(e){return e.nTFoot},1)}),e("tables().containers()","table().container()",function(){return this.iterator("table",function(e){return e.nTableWrapper},1)}),t("draw()",function(t){return this.iterator("table",function(e){"page"===t?le(e):("string"==typeof t&&(t="full-hold"!==t),ce(e,!1===t))})}),t("page()",function(t){return t===O?this.page.info().page:this.iterator("table",function(e){Be(e,t)})}),t("page.info()",function(e){if(0===this.context.length)return O;var t=this.context[0],n=t._iDisplayStart,o=t.oFeatures.bPaginate?t._iDisplayLength:-1,i=t.fnRecordsDisplay(),r=-1===o;return{page:r?0:Math.floor(n/o),pages:r?1:Math.ceil(i/o),start:n,end:t.fnDisplayEnd(),length:o,recordsTotal:t.fnRecordsTotal(),recordsDisplay:i,serverSide:"ssp"===gt(t)}}),t("page.len()",function(t){return t===O?0!==this.context.length?this.context[0]._iDisplayLength:O:this.iterator("table",function(e){Re(e,t)})});function xt(i,r,e){var t,n;e&&(t=new yt(i)).one("draw",function(){e(t.ajax.json())}),"ssp"==gt(i)?ce(i,r):(je(i,!0),(n=i.jqXHR)&&4!==n.readyState&&n.abort(),he(i,[],function(e){ee(i);for(var t=ve(i,e),n=0,o=t.length;n<o;n++)q(i,t[n]);ce(i,r),je(i,!1)}))}t("ajax.json()",function(){var e=this.context;if(0<e.length)return e[0].json}),t("ajax.params()",function(){var e=this.context;if(0<e.length)return e[0].oAjaxData}),t("ajax.reload()",function(t,n){return this.iterator("table",function(e){xt(e,!1===n,t)})}),t("ajax.url()",function(t){var e=this.context;return t===O?0===e.length?O:(e=e[0]).ajax?A.isPlainObject(e.ajax)?e.ajax.url:e.ajax:e.sAjaxSource:this.iterator("table",function(e){A.isPlainObject(e.ajax)?e.ajax.url=t:e.ajax=t})}),t("ajax.url().load()",function(t,n){return this.iterator("table",function(e){xt(e,!1===n,t)})});function Ct(e,t,n,o,i){var r,s,a,l,c,d,u=[],p=typeof t;for(t&&"string"!=p&&"function"!=p&&t.length!==O||(t=[t]),a=0,l=t.length;a<l;a++)for(c=0,d=(s=t[a]&&t[a].split&&!t[a].match(/[\[\(:]/)?t[a].split(","):[t[a]]).length;c<d;c++)(r=n("string"==typeof s[c]?s[c].trim():s[c]))&&r.length&&(u=u.concat(r));var h=f.selector[e];if(h.length)for(a=0,l=h.length;a<l;a++)u=h[a](o,i,u);return g(u)}function St(e){return(e=e||{}).filter&&e.search===O&&(e.search=e.filter),A.extend({search:"none",order:"current",page:"all"},e)}function Tt(e){for(var t=0,n=e.length;t<n;t++)if(0<e[t].length)return e[0]=e[t],e[0].length=1,e.length=1,e.context=[e.context[t]],e;return e.length=0,e}var _t=function(e,t){var n,o=[],i=e.aiDisplay,r=e.aiDisplayMaster,s=t.search,a=t.order,t=t.page;if("ssp"==gt(e))return"removed"===s?[]:p(0,r.length);if("current"==t)for(c=e._iDisplayStart,d=e.fnDisplayEnd();c<d;c++)o.push(i[c]);else if("current"==a||"applied"==a){if("none"==s)o=r.slice();else if("applied"==s)o=i.slice();else if("removed"==s){for(var l={},c=0,d=i.length;c<d;c++)l[i[c]]=null;o=A.map(r,function(e){return l.hasOwnProperty(e)?null:e})}}else if("index"==a||"original"==a)for(c=0,d=e.aoData.length;c<d;c++)("none"==s||-1===(n=A.inArray(c,i))&&"removed"==s||0<=n&&"applied"==s)&&o.push(c);return o};t("rows()",function(t,n){t===O?t="":A.isPlainObject(t)&&(n=t,t=""),n=St(n);var e=this.iterator("table",function(e){return Ct("row",t,function(n){var e=u(n),o=r.aoData;if(null!==e&&!s)return[e];if(a=a||_t(r,s),null!==e&&-1!==A.inArray(e,a))return[e];if(null===n||n===O||""===n)return a;if("function"==typeof n)return A.map(a,function(e){var t=o[e];return n(e,t._aData,t.nTr)?e:null});if(n.nodeName){var t=n._DT_RowIndex,e=n._DT_CellIndex;if(t!==O)return o[t]&&o[t].nTr===n?[t]:[];if(e)return o[e.row]&&o[e.row].nTr===n.parentNode?[e.row]:[];e=A(n).closest("*[data-dt-row]");return e.length?[e.data("dt-row")]:[]}if("string"==typeof n&&"#"===n.charAt(0)){var i=r.aIds[n.replace(/^#/,"")];if(i!==O)return[i.idx]}i=b(v(r.aoData,a,"nTr"));return A(i).filter(n).map(function(){return this._DT_RowIndex}).toArray()},r=e,s=n);var r,s,a},1);return e.selector.rows=t,e.selector.opts=n,e}),t("rows().nodes()",function(){return this.iterator("row",function(e,t){return e.aoData[t].nTr||O},1)}),t("rows().data()",function(){return this.iterator(!0,"rows",function(e,t){return v(e.aoData,t,"_aData")},1)}),e("rows().cache()","row().cache()",function(n){return this.iterator("row",function(e,t){t=e.aoData[t];return"search"===n?t._aFilterData:t._aSortData},1)}),e("rows().invalidate()","row().invalidate()",function(n){return this.iterator("row",function(e,t){ne(e,t,n)})}),e("rows().indexes()","row().index()",function(){return this.iterator("row",function(e,t){return t},1)}),e("rows().ids()","row().id()",function(e){for(var t=[],n=this.context,o=0,i=n.length;o<i;o++)for(var r=0,s=this[o].length;r<s;r++){var a=n[o].rowIdFn(n[o].aoData[this[o][r]]._aData);t.push((!0===e?"#":"")+a)}return new yt(n,t)}),e("rows().remove()","row().remove()",function(){var u=this;return this.iterator("row",function(e,t,n){var o,i,r,s,a,l,c=e.aoData,d=c[t];for(c.splice(t,1),o=0,i=c.length;o<i;o++)if(l=(a=c[o]).anCells,null!==a.nTr&&(a.nTr._DT_RowIndex=o),null!==l)for(r=0,s=l.length;r<s;r++)l[r]._DT_CellIndex.row=o;te(e.aiDisplayMaster,t),te(e.aiDisplay,t),te(u[n],t,!1),0<e._iRecordsDisplay&&e._iRecordsDisplay--,ft(e);d=e.rowIdFn(d._aData);d!==O&&delete e.aIds[d]}),this.iterator("table",function(e){for(var t=0,n=e.aoData.length;t<n;t++)e.aoData[t].idx=t}),this}),t("rows.add()",function(r){var e=this.iterator("table",function(e){for(var t,n=[],o=0,i=r.length;o<i;o++)(t=r[o]).nodeName&&"TR"===t.nodeName.toUpperCase()?n.push(W(e,t)[0]):n.push(q(e,t));return n},1),t=this.rows(-1);return t.pop(),A.merge(t,e),t}),t("row()",function(e,t){return Tt(this.rows(e,t))}),t("row().data()",function(e){var t=this.context;if(e===O)return t.length&&this.length?t[0].aoData[this[0]]._aData:O;var n=t[0].aoData[this[0]];return n._aData=e,Array.isArray(e)&&n.nTr&&n.nTr.id&&Q(t[0].rowId)(e,n.nTr.id),ne(t[0],this[0],"data"),this}),t("row().node()",function(){var e=this.context;return e.length&&this.length&&e[0].aoData[this[0]].nTr||null}),t("row.add()",function(t){t instanceof A&&t.length&&(t=t[0]);var e=this.iterator("table",function(e){return t.nodeName&&"TR"===t.nodeName.toUpperCase()?W(e,t)[0]:q(e,t)});return this.row(e[0])}),A(w).on("plugin-init.dt",function(e,t){var i=new yt(t);i.on("stateSaveParams",function(e,t,n){var o=i.rows().iterator("row",function(e,t){return e.aoData[t]._detailsShow?t:O});n.childRows=i.rows(o).ids(!0).toArray()});var n=i.state.loaded();n&&n.childRows&&i.rows(n.childRows).every(function(){ht(t,null,"requestChild",[this])})});function It(e,t){var n=e.context;!n.length||(e=n[0].aoData[t!==O?t:e[0]])&&e._details&&(e._details.remove(),e._detailsShow=O,e._details=O,A(e.nTr).removeClass("dt-hasChild"),it(n[0]))}function Ft(e,t){var n,o=e.context;o.length&&e.length&&((n=o[0].aoData[e[0]])._details&&((n._detailsShow=t)?(n._details.insertAfter(n.nTr),A(n.nTr).addClass("dt-hasChild")):(n._details.detach(),A(n.nTr).removeClass("dt-hasChild")),ht(o[0],null,"childRow",[t,e.row(e[0])]),Dt(o[0]),it(o[0])))}var Dt=function(l){var i=new yt(l),e=".dt.DT_details",t="draw"+e,n="column-visibility"+e,e="destroy"+e,c=l.aoData;i.off(t+" "+n+" "+e),0<R(c,"_details").length&&(i.on(t,function(e,t){l===t&&i.rows({page:"current"}).eq(0).each(function(e){e=c[e];e._detailsShow&&e._details.insertAfter(e.nTr)})}),i.on(n,function(e,t,n,o){if(l===t)for(var i,r=j(t),s=0,a=c.length;s<a;s++)(i=c[s])._details&&i._details.children("td[colspan]").attr("colspan",r)}),i.on(e,function(e,t){if(l===t)for(var n=0,o=c.length;n<o;n++)c[n]._details&&It(i,n)}))},kt="row().child",x=kt+"()";t(x,function(e,t){var r,s,a,n=this.context;return e===O?n.length&&this.length?n[0].aoData[this[0]]._details:O:(!0===e?this.child.show():!1===e?It(this):n.length&&this.length&&(r=n[0],n=n[0].aoData[this[0]],s=[],(a=function(e,t){var n;if(Array.isArray(e)||e instanceof A)for(var o=0,i=e.length;o<i;o++)a(e[o],t);else e.nodeName&&"tr"===e.nodeName.toLowerCase()?s.push(e):(n=A("<tr><td></td></tr>").addClass(t),A("td",n).addClass(t).html(e)[0].colSpan=j(r),s.push(n[0]))})(e,t),n._details&&n._details.detach(),n._details=A(s),n._detailsShow&&n._details.insertAfter(n.nTr)),this)}),t([kt+".show()",x+".show()"],function(e){return Ft(this,!0),this}),t([kt+".hide()",x+".hide()"],function(){return Ft(this,!1),this}),t([kt+".remove()",x+".remove()"],function(){return It(this),this}),t(kt+".isShown()",function(){var e=this.context;return e.length&&this.length&&e[0].aoData[this[0]]._detailsShow||!1});function Et(e,t,n,o,i){for(var r=[],s=0,a=i.length;s<a;s++)r.push(V(e,i[s],t));return r}var Pt=/^([^:]+):(name|visIdx|visible)$/;t("columns()",function(n,o){n===O?n="":A.isPlainObject(n)&&(o=n,n=""),o=St(o);var e=this.iterator("table",function(e){return t=n,a=o,l=(s=e).aoColumns,c=R(l,"sName"),d=R(l,"nTh"),Ct("column",t,function(n){var e=u(n);if(""===n)return p(l.length);if(null!==e)return[0<=e?e:l.length+e];if("function"==typeof n){var o=_t(s,a);return A.map(l,function(e,t){return n(t,Et(s,t,0,0,o),d[t])?t:null})}var i="string"==typeof n?n.match(Pt):"";if(i)switch(i[2]){case"visIdx":case"visible":var t=parseInt(i[1],10);if(t<0){var r=A.map(l,function(e,t){return e.bVisible?t:null});return[r[r.length+t]]}return[B(s,t)];case"name":return A.map(c,function(e,t){return e===i[1]?t:null});default:return[]}if(n.nodeName&&n._DT_CellIndex)return[n._DT_CellIndex.column];e=A(d).filter(n).map(function(){return A.inArray(this,d)}).toArray();if(e.length||!n.nodeName)return e;e=A(n).closest("*[data-dt-column]");return e.length?[e.data("dt-column")]:[]},s,a);var s,t,a,l,c,d},1);return e.selector.cols=n,e.selector.opts=o,e}),e("columns().header()","column().header()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTh},1)}),e("columns().footer()","column().footer()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTf},1)}),e("columns().data()","column().data()",function(){return this.iterator("column-rows",Et,1)}),e("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].mData},1)}),e("columns().cache()","column().cache()",function(r){return this.iterator("column-rows",function(e,t,n,o,i){return v(e.aoData,i,"search"===r?"_aFilterData":"_aSortData",t)},1)}),e("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,n,o,i){return v(e.aoData,i,"anCells",t)},1)}),e("columns().visible()","column().visible()",function(n,o){var t=this,e=this.iterator("column",function(e,t){return n===O?e.aoColumns[t].bVisible:void function(e,t,n){var o,i,r=e.aoColumns,s=r[t],a=e.aoData;if(n===O)return s.bVisible;if(s.bVisible!==n){if(n)for(var l=A.inArray(!0,R(r,"bVisible"),t+1),c=0,d=a.length;c<d;c++)i=a[c].nTr,o=a[c].anCells,i&&i.insertBefore(o[t],o[l]||null);else A(R(e.aoData,"anCells",t)).detach();s.bVisible=n}}(e,t,n)});return n!==O&&this.iterator("table",function(e){ae(e,e.aoHeader),ae(e,e.aoFooter),e.aiDisplay.length||A(e.nTBody).find("td[colspan]").attr("colspan",j(e)),it(e),t.iterator("column",function(e,t){ht(e,null,"column-visibility",[e,t,n,o])}),o!==O&&!o||t.columns.adjust()}),e}),e("columns().indexes()","column().index()",function(n){return this.iterator("column",function(e,t){return"visible"===n?M(e,t):t},1)}),t("columns.adjust()",function(){return this.iterator("table",function(e){$(e)},1)}),t("column.index()",function(e,t){if(0!==this.context.length){var n=this.context[0];return"fromVisible"===e||"toData"===e?B(n,t):"fromData"===e||"toVisible"===e?M(n,t):void 0}}),t("column()",function(e,t){return Tt(this.columns(e,t))});t("cells()",function(m,e,g){if(A.isPlainObject(m)&&(m.row===O?(g=m,m=null):(g=e,e=null)),A.isPlainObject(e)&&(g=e,e=null),null===e||e===O)return this.iterator("table",function(e){return o=e,t=m,n=St(g),u=o.aoData,p=_t(o,n),e=b(v(u,p,"anCells")),h=A(y([],e)),f=o.aoColumns.length,Ct("cell",t,function(e){var t="function"==typeof e;if(null===e||e===O||t){for(r=[],s=0,a=p.length;s<a;s++)for(i=p[s],l=0;l<f;l++)c={row:i,column:l},t?(d=u[i],e(c,V(o,i,l),d.anCells?d.anCells[l]:null)&&r.push(c)):r.push(c);return r}if(A.isPlainObject(e))return e.column!==O&&e.row!==O&&-1!==A.inArray(e.row,p)?[e]:[];var n=h.filter(e).map(function(e,t){return{row:t._DT_CellIndex.row,column:t._DT_CellIndex.column}}).toArray();return n.length||!e.nodeName?n:(d=A(e).closest("*[data-dt-row]")).length?[{row:d.data("dt-row"),column:d.data("dt-column")}]:[]},o,n);var o,t,n,i,r,s,a,l,c,d,u,p,h,f});var o,i,r,s,t=g?{page:g.page,order:g.order,search:g.search}:{},a=this.columns(e,t),l=this.rows(m,t),t=this.iterator("table",function(e,t){var n=[];for(o=0,i=l[t].length;o<i;o++)for(r=0,s=a[t].length;r<s;r++)n.push({row:l[t][o],column:a[t][r]});return n},1),t=g&&g.selected?this.cells(t,g):t;return A.extend(t.selector,{cols:e,rows:m,opts:g}),t}),e("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(e,t,n){t=e.aoData[t];return t&&t.anCells?t.anCells[n]:O},1)}),t("cells().data()",function(){return this.iterator("cell",function(e,t,n){return V(e,t,n)},1)}),e("cells().cache()","cell().cache()",function(o){return o="search"===o?"_aFilterData":"_aSortData",this.iterator("cell",function(e,t,n){return e.aoData[t][o][n]},1)}),e("cells().render()","cell().render()",function(o){return this.iterator("cell",function(e,t,n){return V(e,t,n,o)},1)}),e("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(e,t,n){return{row:t,column:n,columnVisible:M(e,n)}},1)}),e("cells().invalidate()","cell().invalidate()",function(o){return this.iterator("cell",function(e,t,n){ne(e,t,o,n)})}),t("cell()",function(e,t,n){return Tt(this.cells(e,t,n))}),t("cell().data()",function(e){var t=this.context,n=this[0];return e===O?t.length&&n.length?V(t[0],n[0].row,n[0].column):O:(X(t[0],n[0].row,n[0].column,e),ne(t[0],n[0].row,"data",n[0].column),this)}),t("order()",function(t,e){var n=this.context;return t===O?0!==n.length?n[0].aaSorting:O:("number"==typeof t?t=[[t,e]]:t.length&&!Array.isArray(t[0])&&(t=Array.prototype.slice.call(arguments)),this.iterator("table",function(e){e.aaSorting=t.slice()}))}),t("order.listener()",function(t,n,o){return this.iterator("table",function(e){tt(e,t,n,o)})}),t("order.fixed()",function(t){if(t)return this.iterator("table",function(e){e.aaSortingFixed=A.extend(!0,{},t)});var e=this.context,e=e.length?e[0].aaSortingFixed:O;return Array.isArray(e)?{pre:e}:e}),t(["columns().order()","column().order()"],function(o){var i=this;return this.iterator("table",function(e,t){var n=[];A.each(i[t],function(e,t){n.push([t,o])}),e.aaSorting=n})}),t("search()",function(t,n,o,i){var e=this.context;return t===O?0!==e.length?e[0].oPreviousSearch.sSearch:O:this.iterator("table",function(e){e.oFeatures.bFilter&&ye(e,A.extend({},e.oPreviousSearch,{sSearch:t+"",bRegex:null!==n&&n,bSmart:null===o||o,bCaseInsensitive:null===i||i}),1)})}),e("columns().search()","column().search()",function(o,i,r,s){return this.iterator("column",function(e,t){var n=e.aoPreSearchCols;if(o===O)return n[t].sSearch;e.oFeatures.bFilter&&(A.extend(n[t],{sSearch:o+"",bRegex:null!==i&&i,bSmart:null===r||r,bCaseInsensitive:null===s||s}),ye(e,e.oPreviousSearch,1))})}),t("state()",function(){return this.context.length?this.context[0].oSavedState:null}),t("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,e,{})})}),t("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),t("state.save()",function(){return this.iterator("table",function(e){it(e)})}),T.versionCheck=T.fnVersionCheck=function(e){for(var t,n,o=T.version.split("."),i=e.split("."),r=0,s=i.length;r<s;r++)if((t=parseInt(o[r],10)||0)!==(n=parseInt(i[r],10)||0))return n<t;return!0},T.isDataTable=T.fnIsDataTable=function(e){var i=A(e).get(0),r=!1;return e instanceof T.Api||(A.each(T.settings,function(e,t){var n=t.nScrollHead?A("table",t.nScrollHead)[0]:null,o=t.nScrollFoot?A("table",t.nScrollFoot)[0]:null;t.nTable!==i&&n!==i&&o!==i||(r=!0)}),r)},T.tables=T.fnTables=function(t){var e=!1;A.isPlainObject(t)&&(e=t.api,t=t.visible);var n=A.map(T.settings,function(e){if(!t||t&&A(e.nTable).is(":visible"))return e.nTable});return e?new yt(n):n},T.camelToHungarian=_,t("$()",function(e,t){t=this.rows(t).nodes(),t=A(t);return A([].concat(t.filter(e).toArray(),t.find(e).toArray()))}),A.each(["on","one","off"],function(e,n){t(n+"()",function(){var e=Array.prototype.slice.call(arguments);e[0]=A.map(e[0].split(/\s/),function(e){return e.match(/\.dt\b/)?e:e+".dt"}).join(" ");var t=A(this.tables().nodes());return t[n].apply(t,e),this})}),t("clear()",function(){return this.iterator("table",function(e){ee(e)})}),t("settings()",function(){return new yt(this.context,this.context)}),t("init()",function(){var e=this.context;return e.length?e[0].oInit:null}),t("data()",function(){return this.iterator("table",function(e){return R(e.aoData,"_aData")}).flatten()}),t("destroy()",function(u){return u=u||!1,this.iterator("table",function(t){var n,e=t.nTableWrapper.parentNode,o=t.oClasses,i=t.nTable,r=t.nTBody,s=t.nTHead,a=t.nTFoot,l=A(i),c=A(r),d=A(t.nTableWrapper),r=A.map(t.aoData,function(e){return e.nTr});t.bDestroying=!0,ht(t,"aoDestroyCallback","destroy",[t]),u||new yt(t).columns().visible(!0),d.off(".DT").find(":not(tbody *)").off(".DT"),A(N).off(".DT-"+t.sInstance),i!=s.parentNode&&(l.children("thead").detach(),l.append(s)),a&&i!=a.parentNode&&(l.children("tfoot").detach(),l.append(a)),t.aaSorting=[],t.aaSortingFixed=[],nt(t),A(r).removeClass(t.asStripeClasses.join(" ")),A("th, td",s).removeClass(o.sSortable+" "+o.sSortableAsc+" "+o.sSortableDesc+" "+o.sSortableNone),c.children().detach(),c.append(r);r=u?"remove":"detach";l[r](),d[r](),!u&&e&&(e.insertBefore(i,t.nTableReinsertBefore),l.css("width",t.sDestroyWidth).removeClass(o.sTable),(n=t.asDestroyStripes.length)&&c.children().each(function(e){A(this).addClass(t.asDestroyStripes[e%n])}));c=A.inArray(t,T.settings);-1!==c&&T.settings.splice(c,1)})}),A.each(["column","row","cell"],function(e,l){t(l+"s().every()",function(r){var s=this.selector.opts,a=this;return this.iterator(l,function(e,t,n,o,i){r.call(a[l](t,"cell"===l?n:s,"cell"===l?s:O),t,n,o,i)})})}),t("i18n()",function(e,t,n){var o=this.context[0],o=J(e)(o.oLanguage);return o===O&&(o=t),n!==O&&A.isPlainObject(o)&&(o=o[n]!==O?o[n]:o._),o.replace("%d",n)}),T.version="1.11.3",T.settings=[],T.models={},T.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0,return:!1},T.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},T.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},T.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(e){try{return JSON.parse((-1===e.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+e.sInstance+"_"+location.pathname))}catch(e){return{}}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(e,t){try{(-1===e.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(e){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:A.extend({},T.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},C(T.defaults),T.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},C(T.defaults.column),T.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,jqXHR:null,json:O,oAjaxData:O,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==gt(this)?+this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==gt(this)?+this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var e=this._iDisplayLength,t=this._iDisplayStart,n=t+e,o=this.aiDisplay.length,i=this.oFeatures,r=i.bPaginate;return i.bServerSide?!1===r||-1===e?t+o:Math.min(t+e,this._iRecordsDisplay):!r||o<n||-1===e?o:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},T.ext=f={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:T.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:T.version},A.extend(f,{afnFiltering:f.search,aTypes:f.type.detect,ofnSearch:f.type.search,oSort:f.type.order,afnSortData:f.order,aoFeatures:f.feature,oApi:f.internal,oStdClasses:f.classes,oPagination:f.pager}),A.extend(T.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_desc_disabled",sSortableDesc:"sorting_asc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var At=T.ext.pager;function Nt(e,t){var n=[],o=At.numbers_length,i=Math.floor(o/2);return t<=o?n=p(0,t):e<=i?((n=p(0,o-2)).push("ellipsis"),n.push(t-1)):(t-1-i<=e?(n=p(t-(o-2),t)).splice(0,0,"ellipsis"):((n=p(e-i+2,e+i-1)).push("ellipsis"),n.push(t-1),n.splice(0,0,"ellipsis")),n.splice(0,0,0)),n.DT_el="span",n}A.extend(At,{simple:function(e,t){return["previous","next"]},full:function(e,t){return["first","previous","next","last"]},numbers:function(e,t){return[Nt(e,t)]},simple_numbers:function(e,t){return["previous",Nt(e,t),"next"]},full_numbers:function(e,t){return["first","previous",Nt(e,t),"next","last"]},first_last_numbers:function(e,t){return["first",Nt(e,t),"last"]},_numbers:Nt,numbers_length:7}),A.extend(!0,T.ext.renderer,{pageButton:{_:function(c,e,d,t,u,p){var h,f,n,m=c.oClasses,g=c.oLanguage.oPaginate,v=c.oLanguage.oAria.paginate||{},b=0,y=function(e,t){for(var n,o,i=m.sPageButtonDisabled,r=function(e){Be(c,e.data.action,!0)},s=0,a=t.length;s<a;s++)if(n=t[s],Array.isArray(n)){var l=A("<"+(n.DT_el||"div")+"/>").appendTo(e);y(l,n)}else{switch(h=null,f=n,o=c.iTabIndex,n){case"ellipsis":e.append('<span class="ellipsis">&#x2026;</span>');break;case"first":h=g.sFirst,0===u&&(o=-1,f+=" "+i);break;case"previous":h=g.sPrevious,0===u&&(o=-1,f+=" "+i);break;case"next":h=g.sNext,0!==p&&u!==p-1||(o=-1,f+=" "+i);break;case"last":h=g.sLast,0!==p&&u!==p-1||(o=-1,f+=" "+i);break;default:h=c.fnFormatNumber(n+1),f=u===n?m.sPageButtonActive:""}null!==h&&(ut(A("<a>",{class:m.sPageButton+" "+f,"aria-controls":c.sTableId,"aria-label":v[n],"data-dt-idx":b,tabindex:o,id:0===d&&"string"==typeof n?c.sTableId+"_"+n:null}).html(h).appendTo(e),{action:n},r),b++)}};try{n=A(e).find(w.activeElement).data("dt-idx")}catch(e){}y(A(e).empty(),t),n!==O&&A(e).find("[data-dt-idx="+n+"]").trigger("focus")}}}),A.extend(T.ext.type.detect,[function(e,t){t=t.oLanguage.sDecimal;return r(e,t)?"num"+t:null},function(e,t){if(e&&!(e instanceof Date)&&!l.test(e))return null;var n=Date.parse(e);return null!==n&&!isNaN(n)||h(e)?"date":null},function(e,t){t=t.oLanguage.sDecimal;return r(e,t,!0)?"num-fmt"+t:null},function(e,t){t=t.oLanguage.sDecimal;return n(e,t)?"html-num"+t:null},function(e,t){t=t.oLanguage.sDecimal;return n(e,t,!0)?"html-num-fmt"+t:null},function(e,t){return h(e)||"string"==typeof e&&-1!==e.indexOf("<")?"html":null}]),A.extend(T.ext.type.search,{html:function(e){return h(e)?e:"string"==typeof e?e.replace(s," ").replace(a,""):""},string:function(e){return!h(e)&&"string"==typeof e?e.replace(s," "):e}});var Ot=function(e,t,n,o){return 0===e||e&&"-"!==e?(t&&(e=i(e,t)),e.replace&&(n&&(e=e.replace(n,"")),o&&(e=e.replace(o,""))),+e):-1/0};function Rt(n){A.each({num:function(e){return Ot(e,n)},"num-fmt":function(e){return Ot(e,n,d)},"html-num":function(e){return Ot(e,n,a)},"html-num-fmt":function(e){return Ot(e,n,a,d)}},function(e,t){f.type.order[e+n+"-pre"]=t,e.match(/^html\-/)&&(f.type.search[e+n]=f.type.search.html)})}A.extend(f.type.order,{"date-pre":function(e){e=Date.parse(e);return isNaN(e)?-1/0:e},"html-pre":function(e){return h(e)?"":e.replace?e.replace(/<.*?>/g,"").toLowerCase():e+""},"string-pre":function(e){return h(e)?"":"string"==typeof e?e.toLowerCase():e.toString?e.toString():""},"string-asc":function(e,t){return e<t?-1:t<e?1:0},"string-desc":function(e,t){return e<t?1:t<e?-1:0}}),Rt(""),A.extend(!0,T.ext.renderer,{header:{_:function(i,r,s,a){A(i.nTable).on("order.dt.DT",function(e,t,n,o){i===t&&(t=s.idx,r.removeClass(a.sSortAsc+" "+a.sSortDesc).addClass("asc"==o[t]?a.sSortAsc:"desc"==o[t]?a.sSortDesc:s.sSortingClass))})},jqueryui:function(i,r,s,a){A("<div/>").addClass(a.sSortJUIWrapper).append(r.contents()).append(A("<span/>").addClass(a.sSortIcon+" "+s.sSortingClassJUI)).appendTo(r),A(i.nTable).on("order.dt.DT",function(e,t,n,o){i===t&&(t=s.idx,r.removeClass(a.sSortAsc+" "+a.sSortDesc).addClass("asc"==o[t]?a.sSortAsc:"desc"==o[t]?a.sSortDesc:s.sSortingClass),r.find("span."+a.sSortIcon).removeClass(a.sSortJUIAsc+" "+a.sSortJUIDesc+" "+a.sSortJUI+" "+a.sSortJUIAscAllowed+" "+a.sSortJUIDescAllowed).addClass("asc"==o[t]?a.sSortJUIAsc:"desc"==o[t]?a.sSortJUIDesc:s.sSortingClassJUI))})}}});function Lt(e){return Array.isArray(e)&&(e=e.join(",")),"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e}function $t(t){return function(){var e=[at(this[T.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return T.ext.internal[t].apply(this,e)}}return T.render={number:function(o,i,r,s,a){return{display:function(e){if("number"!=typeof e&&"string"!=typeof e)return e;var t=e<0?"-":"",n=parseFloat(e);if(isNaN(n))return Lt(e);n=n.toFixed(r),e=Math.abs(n);n=parseInt(e,10),e=r?i+(e-n).toFixed(r).substring(2):"";return 0===n&&0===parseFloat(e)&&(t=""),t+(s||"")+n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,o)+e+(a||"")}}},text:function(){return{display:Lt,filter:Lt}}},A.extend(T.ext.internal,{_fnExternApiFunc:$t,_fnBuildAjax:he,_fnAjaxUpdate:fe,_fnAjaxParameters:me,_fnAjaxUpdateDraw:ge,_fnAjaxDataSrc:ve,_fnAddColumn:P,_fnColumnOptions:L,_fnAdjustColumnSizing:$,_fnVisibleToColumnIndex:B,_fnColumnIndexToVisible:M,_fnVisbleColumns:j,_fnGetColumns:H,_fnColumnTypes:U,_fnApplyColumnDefs:z,_fnHungarianMap:C,_fnCamelToHungarian:_,_fnLanguageCompat:I,_fnBrowserDetect:k,_fnAddData:q,_fnAddTr:W,_fnNodeToDataIndex:function(e,t){return t._DT_RowIndex!==O?t._DT_RowIndex:null},_fnNodeToColumnIndex:function(e,t,n){return A.inArray(n,e.aoData[t].anCells)},_fnGetCellData:V,_fnSetCellData:X,_fnSplitObjNotation:K,_fnGetObjectDataFn:J,_fnSetObjectDataFn:Q,_fnGetDataMaster:Z,_fnClearTable:ee,_fnDeleteIndex:te,_fnInvalidate:ne,_fnGetRowElements:oe,_fnCreateTr:ie,_fnBuildHead:se,_fnDrawHead:ae,_fnDraw:le,_fnReDraw:ce,_fnAddOptionsHtml:de,_fnDetectHeader:ue,_fnGetUniqueThs:pe,_fnFeatureHtmlFilter:be,_fnFilterComplete:ye,_fnFilterCustom:we,_fnFilterColumn:xe,_fnFilter:Ce,_fnFilterCreateSearch:Se,_fnEscapeRegex:Te,_fnFilterData:Fe,_fnFeatureHtmlInfo:Ee,_fnUpdateInfo:Pe,_fnInfoMacros:Ae,_fnInitialise:Ne,_fnInitComplete:Oe,_fnLengthChange:Re,_fnFeatureHtmlLength:Le,_fnFeatureHtmlPaginate:$e,_fnPageChange:Be,_fnFeatureHtmlProcessing:Me,_fnProcessingDisplay:je,_fnFeatureHtmlTable:He,_fnScrollDraw:Ue,_fnApplyToChildren:ze,_fnCalculateColumnWidths:We,_fnThrottle:Ve,_fnConvertToWidth:Xe,_fnGetWidestNode:Ge,_fnGetMaxLenString:Ye,_fnStringToCss:Ke,_fnSortFlatten:Je,_fnSort:Qe,_fnSortAria:Ze,_fnSortListener:et,_fnSortAttachListener:tt,_fnSortingClasses:nt,_fnSortData:ot,_fnSaveState:it,_fnLoadState:rt,_fnImplementState:st,_fnSettingsFromNode:at,_fnLog:lt,_fnMap:ct,_fnBindAction:ut,_fnCallbackReg:pt,_fnCallbackFire:ht,_fnLengthOverflow:ft,_fnRenderer:mt,_fnDataSource:gt,_fnRowAttributes:re,_fnExtend:dt,_fnCalculateEnd:function(){}}),((A.fn.dataTable=T).$=A).fn.dataTableSettings=T.settings,A.fn.dataTableExt=T.ext,A.fn.DataTable=function(e){return A(this).dataTable(e).api()},A.each(T,function(e,t){A.fn.DataTable[e]=t}),T}),function(n){"function"==typeof define&&define.amd?define("datatables.net-bs",["jquery","datatables.net"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),n(t,0,e.document)}:n(jQuery,window,document)}(function(y,e,o,i){"use strict";var r=y.fn.dataTable;return y.extend(!0,r.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"}),y.extend(r.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm",sProcessing:"dataTables_processing panel panel-default"}),r.ext.renderer.pageButton.bootstrap=function(a,e,l,t,c,d){var u,p,n,h=new r.Api(a),f=a.oClasses,m=a.oLanguage.oPaginate,g=a.oLanguage.oAria.paginate||{},v=0,b=function(e,t){for(var n,o,i=function(e){e.preventDefault(),y(e.currentTarget).hasClass("disabled")||h.page()==e.data.action||h.page(e.data.action).draw("page")},r=0,s=t.length;r<s;r++)if(o=t[r],Array.isArray(o))b(e,o);else{switch(p=u="",o){case"ellipsis":u="&#x2026;",p="disabled";break;case"first":u=m.sFirst,p=o+(0<c?"":" disabled");break;case"previous":u=m.sPrevious,p=o+(0<c?"":" disabled");break;case"next":u=m.sNext,p=o+(c<d-1?"":" disabled");break;case"last":u=m.sLast,p=o+(c<d-1?"":" disabled");break;default:u=o+1,p=c===o?"active":""}u&&(n=y("<li>",{class:f.sPageButton+" "+p,id:0===l&&"string"==typeof o?a.sTableId+"_"+o:null}).append(y("<a>",{href:"#","aria-controls":a.sTableId,"aria-label":g[o],"data-dt-idx":v,tabindex:a.iTabIndex}).html(u)).appendTo(e),a.oApi._fnBindAction(n,{action:o},i),v++)}};try{n=y(e).find(o.activeElement).data("dt-idx")}catch(e){}b(y(e).empty().html('<ul class="pagination"/>').children("ul"),t),n!==i&&y(e).find("[data-dt-idx="+n+"]").trigger("focus")},r}),function(n){"function"==typeof define&&define.amd?define("datatables.net-buttons",["jquery","datatables.net"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),n(t,e,e.document)}:n(jQuery,window,document)}(function(f,a,r,d){var i,m=f.fn.dataTable,n=0,c=0,l=m.ext.buttons,u=function(e,t){void 0===t&&(t={}),!0===t&&(t={}),f.isArray(t)&&(t={buttons:t}),this.c=f.extend(!0,{},u.defaults,t),t.buttons&&(this.c.buttons=t.buttons),this.s={dt:new m.Api(e),buttons:[],listenKeys:"",namespace:"dtb"+n++},this.dom={container:f("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};f.extend(u.prototype,{action:function(e,t){e=this._nodeToButton(e);return t===d?e.conf.action:(e.conf.action=t,this)},active:function(e,t){var n=this._nodeToButton(e),e=this.c.dom.button.active,n=f(n.node);return t===d?n.hasClass(e):(n.toggleClass(e,t===d||t),this)},add:function(e,t){var n=this.s.buttons;if("string"==typeof t){for(var o=t.split("-"),n=this.s,i=0,r=o.length-1;i<r;i++)n=n.buttons[+o[i]];n=n.buttons,t=+o[o.length-1]}return this._expandButton(n,e,!1,t),this._draw(),this},container:function(){return this.dom.container},disable:function(e){return e=this._nodeToButton(e),f(e.node).addClass(this.c.dom.button.disabled),this},destroy:function(){f("body").off("keyup."+this.s.namespace);for(var e=this.s.buttons.slice(),t=0,n=e.length;t<n;t++)this.remove(e[t].node);for(this.dom.container.remove(),t=0,n=(e=this.s.dt.settings()[0]).length;t<n;t++)if(e.inst===this){e.splice(t,1);break}return this},enable:function(e,t){if(!1===t)return this.disable(e);e=this._nodeToButton(e);return f(e.node).removeClass(this.c.dom.button.disabled),this},name:function(){return this.c.name},node:function(e){return e=this._nodeToButton(e),f(e.node)},processing:function(e,t){e=this._nodeToButton(e);return t===d?f(e.node).hasClass("processing"):(f(e.node).toggleClass("processing",t),this)},remove:function(e){var t=this._nodeToButton(e),n=this._nodeToHost(e),o=this.s.dt;if(t.buttons.length)for(var i=t.buttons.length-1;0<=i;i--)this.remove(t.buttons[i].node);return t.conf.destroy&&t.conf.destroy.call(o.button(e),o,f(e),t.conf),this._removeKey(t.conf),f(t.node).remove(),e=f.inArray(t,n),n.splice(e,1),this},text:function(e,t){var n=this._nodeToButton(e),o=this.c.dom.collection.buttonLiner,o=(n.inCollection&&o&&o.tag?o:this.c.dom.buttonLiner).tag,i=this.s.dt,r=f(n.node),e=function(e){return"function"==typeof e?e(i,r,n.conf):e};return t===d?e(n.conf.text):(n.conf.text=t,(o?r.children(o):r).html(e(t)),this)},_constructor:function(){var n=this,e=this.s.dt,t=e.settings()[0],o=this.c.buttons;t._buttons||(t._buttons=[]),t._buttons.push({inst:this,name:this.c.name});for(var t=0,i=o.length;t<i;t++)this.add(o[t]);e.on("destroy",function(){n.destroy()}),f("body").on("keyup."+this.s.namespace,function(e){var t;r.activeElement&&r.activeElement!==r.body||(t=String.fromCharCode(e.keyCode).toLowerCase(),-1!==n.s.listenKeys.toLowerCase().indexOf(t)&&n._keypress(t,e))})},_addKey:function(e){e.key&&(this.s.listenKeys+=(f.isPlainObject(e.key)?e.key:e).key)},_draw:function(e,t){e||(e=this.dom.container,t=this.s.buttons),e.children().detach();for(var n=0,o=t.length;n<o;n++)e.append(t[n].inserter),e.append(" "),t[n].buttons&&t[n].buttons.length&&this._draw(t[n].collection,t[n].buttons)},_expandButton:function(e,t,n,o){for(var i=this.s.dt,r=0,s=(t=f.isArray(t)?t:[t]).length;r<s;r++){var a,l,c=this._resolveExtends(t[r]);c&&(f.isArray(c)?this._expandButton(e,c,n,o):(a=this._buildButton(c,n))&&(o!==d?(e.splice(o,0,a),o++):e.push(a),a.conf.buttons&&(l=this.c.dom.collection,a.collection=f("<"+l.tag+"/>").addClass(l.className).attr("role","menu"),a.conf._collection=a.collection,this._expandButton(a.buttons,a.conf.buttons,!0,o)),c.init&&c.init.call(i.button(a.node),i,f(a.node),c),0))}},_buildButton:function(t,e){function n(e){return"function"==typeof e?e(s,l,t):e}var o=this.c.dom.button,i=this.c.dom.buttonLiner,r=this.c.dom.collection,s=this.s.dt;if(e&&r.button&&(o=r.button),e&&r.buttonLiner&&(i=r.buttonLiner),t.available&&!t.available(s,t))return!1;function a(e,t,n,o){o.action.call(t.button(n),e,t,n,o),f(t.table().node()).triggerHandler("buttons-action.dt",[t.button(n),t,n,o])}var l=f("<"+o.tag+"/>").addClass(o.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(e){e.preventDefault(),!l.hasClass(o.disabled)&&t.action&&a(e,s,l,t),l.blur()}).on("keyup.dtb",function(e){13===e.keyCode&&!l.hasClass(o.disabled)&&t.action&&a(e,s,l,t)});return"a"===o.tag.toLowerCase()&&l.attr("href","#"),i.tag?(r=f("<"+i.tag+"/>").html(n(t.text)).addClass(i.className),"a"===i.tag.toLowerCase()&&r.attr("href","#"),l.append(r)):l.html(n(t.text)),!1===t.enabled&&l.addClass(o.disabled),t.className&&l.addClass(t.className),t.titleAttr&&l.attr("title",n(t.titleAttr)),t.namespace||(t.namespace=".dt-button-"+c++),i=(i=this.c.dom.buttonContainer)&&i.tag?f("<"+i.tag+"/>").addClass(i.className).append(l):l,this._addKey(t),{conf:t,node:l.get(0),inserter:i,buttons:[],inCollection:e,collection:null}},_nodeToButton:function(e,t){for(var n=0,o=(t=t||this.s.buttons).length;n<o;n++){if(t[n].node===e)return t[n];if(t[n].buttons.length){var i=this._nodeToButton(e,t[n].buttons);if(i)return i}}},_nodeToHost:function(e,t){for(var n=0,o=(t=t||this.s.buttons).length;n<o;n++){if(t[n].node===e)return t;if(t[n].buttons.length){var i=this._nodeToHost(e,t[n].buttons);if(i)return i}}},_keypress:function(r,s){var a=function(e){for(var t=0,n=e.length;t<n;t++){var o=e[t].conf,i=e[t].node;o.key&&(o.key!==r&&(!f.isPlainObject(o.key)||o.key.key!==r||o.key.shiftKey&&!s.shiftKey||o.key.altKey&&!s.altKey||o.key.ctrlKey&&!s.ctrlKey||o.key.metaKey&&!s.metaKey)||f(i).click()),e[t].buttons.length&&a(e[t].buttons)}};a(this.s.buttons)},_removeKey:function(e){var t;e.key&&(t=(f.isPlainObject(e.key)?e.key:e).key,e=this.s.listenKeys.split(""),t=f.inArray(t,e),e.splice(t,1),this.s.listenKeys=e.join(""))},_resolveExtends:function(n){function e(e){for(var t=0;!f.isPlainObject(e)&&!f.isArray(e);){if(e===d)return;if("function"==typeof e){if(!(e=e(i,n)))return!1}else if("string"==typeof e){if(!l[e])throw"Unknown button type: "+e;e=l[e]}if(30<++t)throw"Buttons: Too many iterations"}return f.isArray(e)?e:f.extend({},e)}for(var t,o,i=this.s.dt,n=e(n);n&&n.extend;){if(!l[n.extend])throw"Cannot extend unknown button type: "+n.extend;var r=e(l[n.extend]);if(f.isArray(r))return r;if(!r)return!1;t=r.className,n=f.extend({},r,n),t&&n.className!==t&&(n.className=t+" "+n.className);var s=n.postfixButtons;if(s){for(n.buttons||(n.buttons=[]),t=0,o=s.length;t<o;t++)n.buttons.push(s[t]);n.postfixButtons=null}if(s=n.prefixButtons){for(n.buttons||(n.buttons=[]),t=0,o=s.length;t<o;t++)n.buttons.splice(t,0,s[t]);n.prefixButtons=null}n.extend=r.extend}return n}}),u.background=function(e,t,n){n===d&&(n=400),e?f("<div/>").addClass(t).css("display","none").appendTo("body").fadeIn(n):f("body > div."+t).fadeOut(n,function(){f(this).removeClass(t).remove()})},u.instanceSelector=function(e,o){if(!e)return f.map(o,function(e){return e.inst});var i=[],r=f.map(o,function(e){return e.name}),s=function(e){if(f.isArray(e))for(var t=0,n=e.length;t<n;t++)s(e[t]);else"string"==typeof e?-1!==e.indexOf(",")?s(e.split(",")):-1!==(e=f.inArray(f.trim(e),r))&&i.push(o[e].inst):"number"==typeof e&&i.push(o[e].inst)};return s(e),i},u.buttonSelector=function(e,t){for(var s=[],a=function(e,t,n){for(var o,i,r=0,s=t.length;r<s;r++)(o=t[r])&&(i=n!==d?n+r:r+"",e.push({node:o.node,name:o.conf.name,idx:i}),o.buttons&&a(e,o.buttons,i+"-"))},l=function(e,t){var n=[];if(a(n,t.s.buttons),i=f.map(n,function(e){return e.node}),f.isArray(e)||e instanceof f)for(i=0,r=e.length;i<r;i++)l(e[i],t);else if(null===e||e===d||"*"===e)for(i=0,r=n.length;i<r;i++)s.push({inst:t,node:n[i].node});else if("number"==typeof e)s.push({inst:t,node:t.s.buttons[e].node});else if("string"==typeof e)if(-1!==e.indexOf(","))for(i=0,r=(n=e.split(",")).length;i<r;i++)l(f.trim(n[i]),t);else if(e.match(/^\d+(\-\d+)*$/))i=f.map(n,function(e){return e.idx}),s.push({inst:t,node:n[f.inArray(e,i)].node});else if(-1!==e.indexOf(":name"))for(var o=e.replace(":name",""),i=0,r=n.length;i<r;i++)n[i].name===o&&s.push({inst:t,node:n[i].node});else f(i).filter(e).each(function(){s.push({inst:t,node:this})});else"object"==typeof e&&e.nodeName&&(-1!==(n=f.inArray(e,i))&&s.push({inst:t,node:i[n]}))},n=0,o=e.length;n<o;n++)l(t,e[n]);return s},u.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},u.version="1.4.2",f.extend(l,{collection:{text:function(e){return e.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(e,n,t,o){var e=t.offset(),i=f(n.table().container()),r=!1;f("div.dt-button-background").length&&(r=f(".dt-button-collection").offset(),f("body").trigger("click.dtb-collection")),o._collection.addClass(o.collectionLayout).css("display","none").appendTo("body").fadeIn(o.fade);var s=o._collection.css("position");r&&"absolute"===s?o._collection.css({top:r.top,left:r.left}):"absolute"===s?(o._collection.css({top:e.top+t.outerHeight(),left:e.left}),r=i.offset().top+i.height(),t=e.top+t.outerHeight()+o._collection.outerHeight()-r,r=e.top-o._collection.outerHeight(),(r=i.offset().top-r)<t&&o._collection.css("top",e.top-o._collection.outerHeight()-5),t=e.left+o._collection.outerWidth(),(i=i.offset().left+i.width())<t&&o._collection.css("left",e.left-(t-i))):((e=o._collection.height()/2)>f(a).height()/2&&(e=f(a).height()/2),o._collection.css("marginTop",-1*e)),o.background&&u.background(!0,o.backgroundClassName,o.fade),setTimeout(function(){f("div.dt-button-background").on("click.dtb-collection",function(){}),f("body").on("click.dtb-collection",function(e){var t=f.fn.addBack?"addBack":"andSelf";f(e.target).parents()[t]().filter(o._collection).length||(o._collection.fadeOut(o.fade,function(){o._collection.detach()}),f("div.dt-button-background").off("click.dtb-collection"),u.background(!1,o.backgroundClassName,o.fade),f("body").off("click.dtb-collection"),n.off("buttons-action.b-internal"))})},10),o.autoClose&&n.on("buttons-action.b-internal",function(){f("div.dt-button-background").click()})},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:!1,fade:400},copy:function(e,t){return l.copyHtml5?"copyHtml5":l.copyFlash&&l.copyFlash.available(e,t)?"copyFlash":void 0},csv:function(e,t){return l.csvHtml5&&l.csvHtml5.available(e,t)?"csvHtml5":l.csvFlash&&l.csvFlash.available(e,t)?"csvFlash":void 0},excel:function(e,t){return l.excelHtml5&&l.excelHtml5.available(e,t)?"excelHtml5":l.excelFlash&&l.excelFlash.available(e,t)?"excelFlash":void 0},pdf:function(e,t){return l.pdfHtml5&&l.pdfHtml5.available(e,t)?"pdfHtml5":l.pdfFlash&&l.pdfFlash.available(e,t)?"pdfFlash":void 0},pageLength:function(e){function i(e){return e.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},e.page.len())}var e=e.settings()[0].aLengthMenu,t=f.isArray(e[0])?e[0]:e,n=f.isArray(e[0])?e[1]:e;return{extend:"collection",text:i,className:"buttons-page-length",autoClose:!0,buttons:f.map(t,function(i,e){return{text:n[e],className:"button-page-length",action:function(e,t){t.page.len(i).draw()},init:function(e,t,n){var o=this,t=function(){o.active(e.page.len()===i)};e.on("length.dt"+n.namespace,t),t()},destroy:function(e,t,n){e.off("length.dt"+n.namespace)}}}),init:function(e,t,n){var o=this;e.on("length.dt"+n.namespace,function(){o.text(i(e))})},destroy:function(e,t,n){e.off("length.dt"+n.namespace)}}}}),m.Api.register("buttons()",function(t,n){n===d&&(n=t,t=d),this.selector.buttonGroup=t;var e=this.iterator(!0,"table",function(e){if(e._buttons)return u.buttonSelector(u.instanceSelector(t,e._buttons),n)},!0);return e._groupSelector=t,e}),m.Api.register("button()",function(e,t){t=this.buttons(e,t);return 1<t.length&&t.splice(1,t.length),t}),m.Api.registerPlural("buttons().active()","button().active()",function(t){return t===d?this.map(function(e){return e.inst.active(e.node)}):this.each(function(e){e.inst.active(e.node,t)})}),m.Api.registerPlural("buttons().action()","button().action()",function(t){return t===d?this.map(function(e){return e.inst.action(e.node)}):this.each(function(e){e.inst.action(e.node,t)})}),m.Api.register(["buttons().enable()","button().enable()"],function(t){return this.each(function(e){e.inst.enable(e.node,t)})}),m.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(e){e.inst.disable(e.node)})}),m.Api.registerPlural("buttons().nodes()","button().node()",function(){var t=f();return f(this.each(function(e){t=t.add(e.inst.node(e.node))})),t}),m.Api.registerPlural("buttons().processing()","button().processing()",function(t){return t===d?this.map(function(e){return e.inst.processing(e.node)}):this.each(function(e){e.inst.processing(e.node,t)})}),m.Api.registerPlural("buttons().text()","button().text()",function(t){return t===d?this.map(function(e){return e.inst.text(e.node)}):this.each(function(e){e.inst.text(e.node,t)})}),m.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(e){e.inst.node(e.node).trigger("click")})}),m.Api.registerPlural("buttons().containers()","buttons().container()",function(){var o=f(),i=this._groupSelector;return this.iterator(!0,"table",function(e){if(e._buttons)for(var t=0,n=(e=u.instanceSelector(i,e._buttons)).length;t<n;t++)o=o.add(e[t].container())}),o}),m.Api.register("button().add()",function(e,t){var n=this.context;return n.length&&((n=u.instanceSelector(this._groupSelector,n[0]._buttons)).length&&n[0].add(t,e)),this.button(this._groupSelector,e)}),m.Api.register("buttons().destroy()",function(){return this.pluck("inst").unique().each(function(e){e.destroy()}),this}),m.Api.registerPlural("buttons().remove()","buttons().remove()",function(){return this.each(function(e){e.inst.remove(e.node)}),this}),m.Api.register("buttons.info()",function(e,t,n){var o=this;return!1===e?(f("#datatables_buttons_info").fadeOut(function(){f(this).remove()}),clearTimeout(i),i=null):(i&&clearTimeout(i),f("#datatables_buttons_info").length&&f("#datatables_buttons_info").remove(),f('<div id="datatables_buttons_info" class="dt-button-info"/>').html(e?"<h2>"+e+"</h2>":"").append(f("<div/>")["string"==typeof t?"html":"append"](t)).css("display","none").appendTo("body").fadeIn(),n!==d&&0!==n&&(i=setTimeout(function(){o.buttons.info(!1)},n))),this}),m.Api.register("buttons.exportData()",function(e){if(this.context.length){for(var n=new m.Api(this.context[0]),o=f.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(e){return t(e)},footer:function(e){return t(e)},body:function(e){return t(e)}}},e),t=function(e){return"string"!=typeof e||(e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),o.stripHtml&&(e=e.replace(/<[^>]*>/g,"")),o.trim&&(e=e.replace(/^\s+|\s+$/g,"")),o.stripNewlines&&(e=e.replace(/\n/g," ")),o.decodeEntities&&(g.innerHTML=e,e=g.value)),e},e=n.columns(o.columns).indexes().map(function(e){var t=n.column(e).header();return o.format.header(t.innerHTML,e,t)}).toArray(),i=n.table().footer()?n.columns(o.columns).indexes().map(function(e){var t=n.column(e).footer();return o.format.footer(t?t.innerHTML:"",e,t)}).toArray():null,r=n.rows(o.rows,o.modifier).indexes().toArray(),r=(s=n.cells(r,o.columns)).render(o.orthogonal).toArray(),s=s.nodes().toArray(),a=e.length,l=0<a?r.length/a:0,c=Array(l),d=0,u=0;u<l;u++){for(var p=Array(a),h=0;h<a;h++)p[h]=o.format.body(r[d],u,h,s[d]),d++;c[u]=p}return{header:e,footer:i,body:c}}}),m.Api.register("buttons.exportInfo()",function(e){var t,n=e=e||{};return"function"==typeof(t="*"===n.filename&&"*"!==n.title&&n.title!==d?n.title:n.filename)&&(t=t()),t===d||null===t?t=null:(-1!==t.indexOf("*")&&(t=f.trim(t.replace("*",f("title").text()))),t=t.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""),(n=o(n.extension))||(n=""),t+=n),{filename:t,title:n=null===(n=o(e.title))?null:-1!==n.indexOf("*")?n.replace("*",f("title").text()||"Exported data"):n,messageTop:s(this,e.messageTop||e.message,"top"),messageBottom:s(this,e.messageBottom,"bottom")}});var o=function(e){return null===e||e===d?null:"function"==typeof e?e():e},s=function(e,t,n){return null===(t=o(t))?null:(e=f("caption",e.table().container()).eq(0),"*"===t?e.css("caption-side")!==n?null:e.length?e.text():"":t)},g=f("<textarea/>")[0];return f.fn.dataTable.Buttons=u,f.fn.DataTable.Buttons=u,f(r).on("init.dt plugin-init.dt",function(e,t){"dt"!==e.namespace||(e=t.oInit.buttons||m.defaults.buttons)&&!t._buttons&&new u(t,e).container()}),m.ext.feature.push({fnInit:function(e){var t=(e=new m.Api(e)).init().buttons||m.defaults.buttons;return new u(e,t).container()},cFeature:"B"}),u}),function(n){"function"==typeof define&&define.amd?define("datatables.net-buttons-colvis",["jquery","datatables.net","datatables.net-buttons"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),t.fn.dataTable.Buttons||require("datatables.net-buttons")(e,t),n(t,0,e.document)}:n(jQuery,window,document)}(function(e,t,n,i){return t=e.fn.dataTable,e.extend(t.ext.buttons,{colvis:function(e,t){return{extend:"collection",text:function(e){return e.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",buttons:[{extend:"columnsToggle",columns:t.columns,columnText:t.columnText}]}},columnsToggle:function(e,t){return e.columns(t.columns).indexes().map(function(e){return{extend:"columnToggle",columns:e,columnText:t.columnText}}).toArray()},columnToggle:function(e,t){return{extend:"columnVisibility",columns:t.columns,columnText:t.columnText}},columnsVisibility:function(e,t){return e.columns(t.columns).indexes().map(function(e){return{extend:"columnVisibility",columns:e,visibility:t.visibility,columnText:t.columnText}}).toArray()},columnVisibility:{columns:i,text:function(e,t,n){return n._columnText(e,n)},className:"buttons-columnVisibility",action:function(e,t,n,o){t=(e=t.columns(o.columns)).visible(),e.visible(o.visibility!==i?o.visibility:!(t.length&&t[0]))},init:function(o,e,i){var r=this;o.on("column-visibility.dt"+i.namespace,function(e,t){t.bDestroying||t.nTable!=o.settings()[0].nTable||r.active(o.column(i.columns).visible())}).on("column-reorder.dt"+i.namespace,function(e,t,n){1===o.columns(i.columns).count()&&("number"==typeof i.columns&&(i.columns=n.mapping[i.columns]),e=o.column(i.columns),r.text(i._columnText(o,i)),r.active(e.visible()))}),this.active(o.column(i.columns).visible())},destroy:function(e,t,n){e.off("column-visibility.dt"+n.namespace).off("column-reorder.dt"+n.namespace)},_columnText:function(e,t){var n=e.column(t.columns).index(),o=e.settings()[0].aoColumns[n].sTitle.replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");return t.columnText?t.columnText(e,n,o):o}},colvisRestore:{className:"buttons-colvisRestore",text:function(e){return e.i18n("buttons.colvisRestore","Restore visibility")},init:function(t,e,n){n._visOriginal=t.columns().indexes().map(function(e){return t.column(e).visible()}).toArray()},action:function(e,t,n,o){t.columns().every(function(e){e=t.colReorder&&t.colReorder.transpose?t.colReorder.transpose(e,"toOriginal"):e,this.visible(o._visOriginal[e])})}},colvisGroup:{className:"buttons-colvisGroup",action:function(e,t,n,o){t.columns(o.show).visible(!0,!1),t.columns(o.hide).visible(!1,!1),t.columns.adjust()},show:[],hide:[]}}),t.Buttons}),function(n){"function"==typeof define&&define.amd?define("datatables.net-buttons-flash",["jquery","datatables.net","datatables.net-buttons"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),t.fn.dataTable.Buttons||require("datatables.net-buttons")(e,t),n(t,e,e.document)}:n(jQuery,window,document)}(function(g,s,a,v){function b(e){for(var t="";0<=e;)t=String.fromCharCode(e%26+65)+t,e=Math.floor(e/26)-1;return t}function y(e,t,n){var o=e.createElement(t);return n&&(n.attr&&g(o).attr(n.attr),n.children&&g.each(n.children,function(e,t){o.appendChild(t)}),null!==n.text&&n.text!==v&&o.appendChild(e.createTextNode(n.text))),o}var i=g.fn.dataTable,r={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(e){return"string"==typeof e&&(e=a.getElementById(e)),e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(e){this.removeClass(e),this.className+=" "+e},e.removeClass=function(e){this.className=this.className.replace(RegExp("\\s*"+e+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},e.hasClass=function(e){return!!this.className.match(RegExp("\\s*"+e+"\\s*"))}),e},setMoviePath:function(e){this.moviePath=e},dispatch:function(e,t,n){(e=this.clients[e])&&e.receiveEvent(t,n)},log:function(e){console.log("Flash: "+e)},register:function(e,t){this.clients[e]=t},getDOMObjectPosition:function(e){var t={left:0,top:0,width:e.width||e.offsetWidth,height:e.height||e.offsetHeight};for(""!==e.style.width&&(t.width=e.style.width.replace("px","")),""!==e.style.height&&(t.height=e.style.height.replace("px",""));e;)t.left+=e.offsetLeft,t.top+=e.offsetTop,e=e.offsetParent;return t},Client:function(e){this.handlers={},this.id=r.nextId++,this.movieId="ZeroClipboard_TableToolsMovie_"+this.id,r.register(this.id,this),e&&this.glue(e)}};r.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,sheetName:"",glue:function(e,t){this.domElement=r.$(e);var n=99;this.domElement.style.zIndex&&(n=parseInt(this.domElement.style.zIndex,10)+1);var o=r.getDOMObjectPosition(this.domElement);this.div=a.createElement("div");e=this.div.style;e.position="absolute",e.left="0px",e.top="0px",e.width=o.width+"px",e.height=o.height+"px",e.zIndex=n,void 0!==t&&""!==t&&(this.div.title=t),0!==o.width&&0!==o.height&&(this.sized=!0),this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(o.width,o.height).replace(/&/g,"&amp;"))},positionElement:function(){var e=r.getDOMObjectPosition(this.domElement),t=this.div.style;t.position="absolute",t.width=e.width+"px",t.height=e.height+"px",0!==e.width&&0!==e.height&&(this.sized=!0,(t=this.div.childNodes[0]).width=e.width,t.height=e.height)},getHTML:function(e,t){var n="",o="id="+this.id+"&width="+e+"&height="+t;return navigator.userAgent.match(/MSIE/)?n=n+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+(location.href.match(/^https/i)?"https://":"http://")+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+e+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+r.moviePath)+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+o+'"/><param name="wmode" value="transparent"/></object>':n+='<embed id="'+this.movieId+'" src="'+r.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+o+'" wmode="transparent" />',n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){var n=this;this.domElement&&this.div&&(g(this.div).remove(),this.div=this.domElement=null,g.each(r.clients,function(e,t){t===n&&delete r.clients[e]}))},reposition:function(e){var t;e&&((this.domElement=r.$(e))||this.hide()),this.domElement&&this.div&&(e=r.getDOMObjectPosition(this.domElement),(t=this.div.style).left=e.left+"px",t.top=e.top+"px")},clearText:function(){this.clipText="",this.ready&&this.movie.clearText()},appendText:function(e){this.clipText+=e,this.ready&&this.movie.appendText(e)},setText:function(e){this.clipText=e,this.ready&&this.movie.setText(e)},setFileName:function(e){this.fileName=e,this.ready&&this.movie.setFileName(e)},setSheetData:function(e){this.ready&&this.movie.setSheetData(JSON.stringify(e))},setAction:function(e){this.action=e,this.ready&&this.movie.setAction(e)},addEventListener:function(e,t){e=e.toString().toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},setHandCursor:function(e){this.handCursorEnabled=e,this.ready&&this.movie.setHandCursor(e)},setCSSEffects:function(e){this.cssEffects=!!e},receiveEvent:function(e,t){var n;switch(e=e.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=a.getElementById(this.movieId),!this.movie)return n=this,void setTimeout(function(){n.receiveEvent("load",null)},1);if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/))return n=this,setTimeout(function(){n.receiveEvent("load",null)},100),void(this.ready=!0);this.ready=!0,this.movie.clearText(),this.movie.appendText(this.clipText),this.movie.setFileName(this.fileName),this.movie.setAction(this.action),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[e])for(var o=0,i=this.handlers[e].length;o<i;o++){var r=this.handlers[e][o];"function"==typeof r?r(this,t):"object"==typeof r&&2==r.length?r[0][r[1]](this,t):"string"==typeof r&&s[r](this,t)}}},r.hasFlash=function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(e){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==v&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},s.ZeroClipboard_TableTools=r;function w(e,t){var n=t.match(/[\s\S]{1,8192}/g)||[];e.clearText();for(var o=0,i=n.length;o<i;o++)e.appendText(n[o])}function p(e){return e.newline||(navigator.userAgent.match(/Windows/)?"\r\n":"\n")}function l(e,t){function n(e){for(var t="",n=0,o=e.length;n<o;n++)0<n&&(t+=s),t+=r?r+(""+e[n]).replace(a,l+r)+r:e[n];return t}for(var o=p(t),i=e.buttons.exportData(t.exportOptions),r=t.fieldBoundary,s=t.fieldSeparator,a=RegExp(r,"g"),l=t.escapeChar!==v?t.escapeChar:"\\",e=t.header?n(i.header)+o:"",t=t.footer&&i.footer?o+n(i.footer):"",c=[],d=0,u=i.body.length;d<u;d++)c.push(n(i.body[d]));return{str:e+c.join(o)+t,rows:c.length}}var x,c=function(e,t){t.attr("id"),t.parents("html").length?e.glue(t[0],""):setTimeout(function(){c(e,t)},500)},e={available:function(){return r.hasFlash()},init:function(e,t,n){r.moviePath=i.Buttons.swfPath;var o=new r.Client;o.setHandCursor(!0),o.addEventListener("mouseDown",function(){n._fromFlash=!0,e.button(t[0]).trigger(),n._fromFlash=!1}),c(o,t),n._flash=o},destroy:function(e,t,n){n._flash.destroy()},fieldSeparator:",",fieldBoundary:'"',exportOptions:{},title:"*",messageTop:"*",messageBottom:"*",filename:"*",extension:".csv",header:!0,footer:!1},C="",C=new(void 0===s.XMLSerializer?function(){this.serializeToString=function(e){return e.xml}}:XMLSerializer),S={"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><mergeCells count="0"/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="6"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$€-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="61"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'},T=[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(e){return e/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(e){return e/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?£[\d,]+.?\d*$/,style:58},{match:/^\-?€[\d,]+.?\d*$/,style:59},{match:/^\([\d,]+\)$/,style:61,fmt:function(e){return-1*e.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(e){return-1*e.replace(/[\(\)]/g,"")}},{match:/^[\d,]+$/,style:63},{match:/^[\d,]+\.\d{2}$/,style:64}];return i.Buttons.swfPath="//cdn.datatables.net/buttons/"+i.Buttons.version+"/swf/flashExport.swf",i.Api.register("buttons.resize()",function(){g.each(r.clients,function(e,t){t.domElement!==v&&t.domElement.parentNode&&t.positionElement()})}),i.ext.buttons.copyFlash=g.extend({},e,{className:"buttons-copy buttons-flash",text:function(e){return e.i18n("buttons.copy","Copy")},action:function(e,t,n,o){var i,r;o._fromFlash&&(this.processing(!0),e=o._flash,r=l(t,o),n=t.buttons.exportInfo(o),i=p(o),r=r.str,n.title&&(r=n.title+i+i+r),n.messageTop&&(r=n.messageTop+i+i+r),n.messageBottom&&(r=r+i+i+n.messageBottom),o.customize&&(r=o.customize(r,o)),e.setAction("copy"),w(e,r),this.processing(!1),t.buttons.info(t.i18n("buttons.copyTitle","Copy to clipboard"),t.i18n("buttons.copySuccess",{_:"Copied %d rows to clipboard",1:"Copied 1 row to clipboard"},data.rows),3e3))},fieldSeparator:"\t",fieldBoundary:""}),i.ext.buttons.csvFlash=g.extend({},e,{className:"buttons-csv buttons-flash",text:function(e){return e.i18n("buttons.csv","CSV")},action:function(e,t,n,o){e=o._flash,t=l(t,o),t=o.customize?o.customize(t.str,o):t.str,e.setAction("csv"),e.setFileName(_filename(o)),w(e,t)},escapeChar:'"'}),i.ext.buttons.excelFlash=g.extend({},e,{className:"buttons-excel buttons-flash",text:function(e){return e.i18n("buttons.excel","Excel")},action:function(e,t,n,o){this.processing(!0);var l,c,i,r,e=o._flash,d=0,u=g.parseXML(S["xl/worksheets/sheet1.xml"]),p=u.getElementsByTagName("sheetData")[0],n={_rels:{".rels":g.parseXML(S["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":g.parseXML(S["xl/_rels/workbook.xml.rels"])},"workbook.xml":g.parseXML(S["xl/workbook.xml"]),"styles.xml":g.parseXML(S["xl/styles.xml"]),worksheets:{"sheet1.xml":u}},"[Content_Types].xml":g.parseXML(S["[Content_Types].xml"])},s=t.buttons.exportData(o.exportOptions),a=function(e){c=y(u,"row",{attr:{r:l=d+1}});for(var t=0,n=e.length;t<n;t++){var o=b(t)+""+l,i=null;if(null!==e[t]&&e[t]!==v&&""!==e[t]){e[t]=g.trim(e[t]);for(var r=0,s=T.length;r<s;r++){var a=T[r];if(e[t].match&&!e[t].match(/^0\d+/)&&e[t].match(a.match)){i=e[t].replace(/[^\d\.\-]/g,""),a.fmt&&(i=a.fmt(i)),i=y(u,"c",{attr:{r:o,s:a.style},children:[y(u,"v",{text:i})]});break}}i=i||("number"==typeof e[t]||e[t].match&&e[t].match(/^-?\d+(\.\d+)?$/)&&!e[t].match(/^0\d+/)?y(u,"c",{attr:{t:"n",r:o},children:[y(u,"v",{text:e[t]})]}):(a=e[t].replace?e[t].replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""):e[t],y(u,"c",{attr:{t:"inlineStr",r:o},children:{row:y(u,"is",{children:{row:y(u,"t",{text:a})}})}}))),c.appendChild(i)}}p.appendChild(c),d++};g("sheets sheet",n.xl["workbook.xml"]).attr("name",(r="Sheet1",(i=o).sheetName&&(r=i.sheetName.replace(/[\[\]\*\/\\\?\:]/g,"")),r)),o.customizeData&&o.customizeData(s);var h=function(e,t){var n=g("mergeCells",u);n[0].appendChild(y(u,"mergeCell",{attr:{ref:"A"+e+":"+b(t)+e}})),n.attr("count",n.attr("count")+1),g("row:eq("+(e-1)+") c",u).attr("s","51")};(t=t.buttons.exportInfo(o)).title&&(a([t.title],d),h(d,s.header.length-1)),t.messageTop&&(a([t.messageTop],d),h(d,s.header.length-1)),o.header&&(a(s.header,d),g("row:last c",u).attr("s","2"));for(var f=0,m=s.body.length;f<m;f++)a(s.body[f],d);for(o.footer&&s.footer&&(a(s.footer,d),g("row:last c",u).attr("s","2")),t.messageBottom&&(a([t.messageBottom],d),h(d,s.header.length-1)),a=y(u,"cols"),g("worksheet",u).prepend(a),h=0,f=s.header.length;h<f;h++)a.appendChild(y(u,"col",{attr:{min:h+1,max:h+1,width:function(e,t){var n,o=e.header[t].length;e.footer&&e.footer[t].length>o&&(o=e.footer[t].length);for(var i=0,r=e.body.length;i<r;i++)if(o<(n=-1!==(n=null!==(n=e.body[i][t])&&n!==v?n.toString():"").indexOf("\n")?((n=n.split("\n")).sort(function(e,t){return t.length-e.length}),n[0].length):n.length)&&(o=n),40<o)return 52;return 6<(o*=1.3)?o:6}(s,h),customWidth:1}}));o.customize&&o.customize(n),function a(l){x===v&&(x=-1===C.serializeToString(g.parseXML(S["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")),g.each(l,function(e,t){if(g.isPlainObject(t))a(t);else{if(x){for(var n,o=t.childNodes[0],i=[],r=o.attributes.length-1;0<=r;r--){n=o.attributes[r].nodeName;var s=o.attributes[r].nodeValue;-1!==n.indexOf(":")&&(i.push({name:n,value:s}),o.removeAttribute(n))}for(r=0,n=i.length;r<n;r++)(s=t.createAttribute(i[r].name.replace(":","_dt_b_namespace_token_"))).value=i[r].value,o.setAttributeNode(s)}o=C.serializeToString(t),x&&(-1===o.indexOf("<?xml")&&(o='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+o),o=o.replace(/_dt_b_namespace_token_/g,":")),o=o.replace(/<([^<>]*?) xmlns=""([^<>]*?)>/g,"<$1 $2>"),l[e]=o}})}(n),e.setAction("excel"),e.setFileName(t.filename),e.setSheetData(n),w(e,""),this.processing(!1)},extension:".xlsx"}),i.ext.buttons.pdfFlash=g.extend({},e,{className:"buttons-pdf buttons-flash",text:function(e){return e.i18n("buttons.pdf","PDF")},action:function(e,t,n,o){this.processing(!0);var e=o._flash,n=t.buttons.exportData(o.exportOptions),i=t.buttons.exportInfo(o),r=t.table().node().offsetWidth,s=t.columns(o.columns).indexes().map(function(e){return t.column(e).header().offsetWidth/r});e.setAction("pdf"),e.setFileName(i.filename),w(e,JSON.stringify({title:i.title||"",messageTop:i.messageTop||"",messageBottom:i.messageBottom||"",colWidth:s.toArray(),orientation:o.orientation,size:o.pageSize,header:o.header?n.header:null,footer:o.footer?n.footer:null,body:n.body})),this.processing(!1)},extension:".pdf",orientation:"portrait",pageSize:"A4",newline:"\n"}),i.Buttons}),function(i){"function"==typeof define&&define.amd?define("datatables.net-buttons-html5",["jquery","datatables.net","datatables.net-buttons"],function(e){return i(e,window,document)}):"object"==typeof exports?module.exports=function(e,t,n,o){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),t.fn.dataTable.Buttons||require("datatables.net-buttons")(e,t),i(t,e,e.document,n,o)}:i(jQuery,window,document)}(function(g,v,u,b,a,y){function w(e){for(var t="";0<=e;)t=String.fromCharCode(e%26+65)+t,e=Math.floor(e/26)-1;return t}function x(e,t,n){var o=e.createElement(t);return n&&(n.attr&&g(o).attr(n.attr),n.children&&g.each(n.children,function(e,t){o.appendChild(t)}),null!==n.text&&n.text!==y&&o.appendChild(e.createTextNode(n.text))),o}var l,c,d,p,h,f,o,e,C,t=g.fn.dataTable,m="undefined"!=typeof self&&self||void 0!==v&&v||this.content;C=void 0===m||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)?void 0:(l=m.document.createElementNS("http://www.w3.org/1999/xhtml","a"),c="download"in l,d=/constructor/i.test(m.HTMLElement)||m.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent),h=function(e){setTimeout(function(){"string"==typeof e?(m.URL||m.webkitURL||m).revokeObjectURL(e):e.remove()},4e4)},f=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},e=(o=function(e,t,n){n||(e=f(e));function o(){for(var e=["writestart","progress","write","writeend"],t=(e=[].concat(e)).length;t--;){var n=s["on"+e[t]];if("function"==typeof n)try{n.call(s,s)}catch(e){!function(e){(m.setImmediate||m.setTimeout)(function(){throw e},0)}(e)}}}var i,r,s=this,n="application/octet-stream"===e.type;s.readyState=s.INIT,c?(i=(m.URL||m.webkitURL||m).createObjectURL(e),setTimeout(function(){l.href=i,l.download=t;var e=new MouseEvent("click");l.dispatchEvent(e),o(),h(i),s.readyState=s.DONE})):(p||n&&d)&&m.FileReader?((r=new FileReader).onloadend=function(){var e=p?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");m.open(e,"_blank")||(m.location.href=e),s.readyState=s.DONE,o()},r.readAsDataURL(e),s.readyState=s.INIT):(i=i||(m.URL||m.webkitURL||m).createObjectURL(e),!n&&m.open(i,"_blank")||(m.location.href=i),s.readyState=s.DONE,o(),h(i))}).prototype,"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=f(e)),navigator.msSaveOrOpenBlob(e,t)}:(e.abort=function(){},e.readyState=e.INIT=0,e.WRITING=1,e.DONE=2,e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null,function(e,t,n){return new o(e,t||e.name||"download",n)})),t.fileSave=C;function S(e){return e.newline||(navigator.userAgent.match(/Windows/)?"\r\n":"\n")}function T(e,t){function n(e){for(var t="",n=0,o=e.length;n<o;n++)0<n&&(t+=s),t+=r?r+(""+e[n]).replace(a,l+r)+r:e[n];return t}for(var o=S(t),i=e.buttons.exportData(t.exportOptions),r=t.fieldBoundary,s=t.fieldSeparator,a=RegExp(r,"g"),l=t.escapeChar!==y?t.escapeChar:"\\",e=t.header?n(i.header)+o:"",t=t.footer&&i.footer?o+n(i.footer):"",c=[],d=0,u=i.body.length;d<u;d++)c.push(n(i.body[d]));return{str:e+c.join(o)+t,rows:c.length}}function _(){if(-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Opera")){var e=navigator.userAgent.match(/AppleWebKit\/(\d+\.\d+)/);return!!(e&&1<e.length&&+e[1]<603.1)}}try{var I,F=new XMLSerializer}catch(e){}var D={"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><mergeCells count="0"/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="6"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$€-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="67"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="1" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="2" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'},k=[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(e){return e/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(e){return e/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?£[\d,]+.?\d*$/,style:58},{match:/^\-?€[\d,]+.?\d*$/,style:59},{match:/^\-?\d+$/,style:65},{match:/^\-?\d+\.\d{2}$/,style:66},{match:/^\([\d,]+\)$/,style:61,fmt:function(e){return-1*e.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(e){return-1*e.replace(/[\(\)]/g,"")}},{match:/^\-?[\d,]+$/,style:63},{match:/^\-?[\d,]+\.\d{2}$/,style:64}];return t.ext.buttons.copyHtml5={className:"buttons-copy buttons-html5",text:function(e){return e.i18n("buttons.copy","Copy")},action:function(e,t,n,o){this.processing(!0);var i=this,e=T(t,o),r=t.buttons.exportInfo(o),s=S(o),a=e.str,n=g("<div/>").css({height:1,width:1,overflow:"hidden",position:"fixed",top:0,left:0});if(r.title&&(a=r.title+s+s+a),r.messageTop&&(a=r.messageTop+s+s+a),r.messageBottom&&(a=a+s+s+r.messageBottom),o.customize&&(a=o.customize(a,o)),o=g("<textarea readonly/>").val(a).appendTo(n),u.queryCommandSupported("copy")){n.appendTo(t.table().container()),o[0].focus(),o[0].select();try{var l=u.execCommand("copy");if(n.remove(),l)return t.buttons.info(t.i18n("buttons.copyTitle","Copy to clipboard"),t.i18n("buttons.copySuccess",{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},e.rows),2e3),void this.processing(!1)}catch(e){}}l=g("<span>"+t.i18n("buttons.copyKeys","Press <i>ctrl</i> or <i>⌘</i> + <i>C</i> to copy the table data<br>to your system clipboard.<br><br>To cancel, click this message or press escape.")+"</span>").append(n),t.buttons.info(t.i18n("buttons.copyTitle","Copy to clipboard"),l,0),o[0].focus(),o[0].select();function c(){d.off("click.buttons-copy"),g(u).off(".buttons-copy"),t.buttons.info(!1)}var d=g(l).closest(".dt-button-info");d.on("click.buttons-copy",c),g(u).on("keydown.buttons-copy",function(e){27===e.keyCode&&(c(),i.processing(!1))}).on("copy.buttons-copy cut.buttons-copy",function(){c(),i.processing(!1)})},exportOptions:{},fieldSeparator:"\t",fieldBoundary:"",header:!0,footer:!1,title:"*",messageTop:"*",messageBottom:"*"},t.ext.buttons.csvHtml5={bom:!1,className:"buttons-csv buttons-html5",available:function(){return v.FileReader!==y&&v.Blob},text:function(e){return e.i18n("buttons.csv","CSV")},action:function(e,t,n,o){this.processing(!0),e=T(t,o).str,t=t.buttons.exportInfo(o),n=o.charset,o.customize&&(e=o.customize(e,o)),n=!1!==n?(n=n||(u.characterSet||u.charset))&&";charset="+n:"",o.bom&&(e="\ufeff"+e),C(new Blob([e],{type:"text/csv"+n}),t.filename,!0),this.processing(!1)},filename:"*",extension:".csv",exportOptions:{},fieldSeparator:",",fieldBoundary:'"',escapeChar:'"',charset:null,header:!0,footer:!1},t.ext.buttons.excelHtml5={className:"buttons-excel buttons-html5",available:function(){return v.FileReader!==y&&(b||v.JSZip)!==y&&!_()&&F},text:function(e){return e.i18n("buttons.excel","Excel")},action:function(e,t,n,o){this.processing(!0);var l,c,i,r,s=this,d=0,u=(e=function(e){return g.parseXML(D[e])})("xl/worksheets/sheet1.xml"),p=u.getElementsByTagName("sheetData")[0],e={_rels:{".rels":e("_rels/.rels")},xl:{_rels:{"workbook.xml.rels":e("xl/_rels/workbook.xml.rels")},"workbook.xml":e("xl/workbook.xml"),"styles.xml":e("xl/styles.xml"),worksheets:{"sheet1.xml":u}},"[Content_Types].xml":e("[Content_Types].xml")},n=t.buttons.exportData(o.exportOptions),a=function(e){c=x(u,"row",{attr:{r:l=d+1}});for(var t=0,n=e.length;t<n;t++){var o=w(t)+""+l,i=null;if(null!==e[t]&&e[t]!==y&&""!==e[t]){e[t]=g.trim(e[t]);for(var r=0,s=k.length;r<s;r++){var a=k[r];if(e[t].match&&!e[t].match(/^0\d+/)&&e[t].match(a.match)){i=e[t].replace(/[^\d\.\-]/g,""),a.fmt&&(i=a.fmt(i)),i=x(u,"c",{attr:{r:o,s:a.style},children:[x(u,"v",{text:i})]});break}}i=i||("number"==typeof e[t]||e[t].match&&e[t].match(/^-?\d+(\.\d+)?$/)&&!e[t].match(/^0\d+/)?x(u,"c",{attr:{t:"n",r:o},children:[x(u,"v",{text:e[t]})]}):(a=e[t].replace?e[t].replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""):e[t],x(u,"c",{attr:{t:"inlineStr",r:o},children:{row:x(u,"is",{children:{row:x(u,"t",{text:a})}})}}))),c.appendChild(i)}}p.appendChild(c),d++};g("sheets sheet",e.xl["workbook.xml"]).attr("name",(r="Sheet1",(i=o).sheetName&&(r=i.sheetName.replace(/[\[\]\*\/\\\?\:]/g,"")),r)),o.customizeData&&o.customizeData(n);var h=function(e,t){var n=g("mergeCells",u);n[0].appendChild(x(u,"mergeCell",{attr:{ref:"A"+e+":"+w(t)+e}})),n.attr("count",n.attr("count")+1),g("row:eq("+(e-1)+") c",u).attr("s","51")},f=t.buttons.exportInfo(o);f.title&&(a([f.title],d),h(d,n.header.length-1)),f.messageTop&&(a([f.messageTop],d),h(d,n.header.length-1)),o.header&&(a(n.header,d),g("row:last c",u).attr("s","2"));for(var t=0,m=n.body.length;t<m;t++)a(n.body[t],d);for(o.footer&&n.footer&&(a(n.footer,d),g("row:last c",u).attr("s","2")),f.messageBottom&&(a([f.messageBottom],d),h(d,n.header.length-1)),t=x(u,"cols"),g("worksheet",u).prepend(t),a=0,h=n.header.length;a<h;a++)t.appendChild(x(u,"col",{attr:{min:a+1,max:a+1,width:function(e,t){var n,o=e.header[t].length;e.footer&&e.footer[t].length>o&&(o=e.footer[t].length);for(var i=0,r=e.body.length;i<r;i++)if(o<(n=-1!==(n=null!==(n=e.body[i][t])&&n!==y?n.toString():"").indexOf("\n")?((n=n.split("\n")).sort(function(e,t){return t.length-e.length}),n[0].length):n.length)&&(o=n),40<o)return 52;return 6<(o*=1.3)?o:6}(n,a),customWidth:1}}));o.customize&&o.customize(e),n={type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},function a(l,e){I===y&&(I=-1===F.serializeToString(g.parseXML(D["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")),g.each(e,function(e,t){if(g.isPlainObject(t))a(n=l.folder(e),t);else{if(I){for(var n,o,i=[],r=(n=t.childNodes[0]).attributes.length-1;0<=r;r--){o=n.attributes[r].nodeName;var s=n.attributes[r].nodeValue;-1!==o.indexOf(":")&&(i.push({name:o,value:s}),n.removeAttribute(o))}for(r=0,o=i.length;r<o;r++)(s=t.createAttribute(i[r].name.replace(":","_dt_b_namespace_token_"))).value=i[r].value,n.setAttributeNode(s)}n=F.serializeToString(t),I&&(-1===n.indexOf("<?xml")&&(n='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+n),n=n.replace(/_dt_b_namespace_token_/g,":")),n=n.replace(/<([^<>]*?) xmlns=""([^<>]*?)>/g,"<$1 $2>"),l.file(e,n)}})}(o=new(b||v.JSZip),e),o.generateAsync?o.generateAsync(n).then(function(e){C(e,f.filename),s.processing(!1)}):(C(o.generate(n),f.filename),this.processing(!1))},filename:"*",extension:".xlsx",exportOptions:{},header:!0,footer:!1,title:"*",messageTop:"*",messageBottom:"*"},t.ext.buttons.pdfHtml5={className:"buttons-pdf buttons-html5",available:function(){return v.FileReader!==y&&(a||v.pdfMake)},text:function(e){return e.i18n("buttons.pdf","PDF")},action:function(e,t,n,o){this.processing(!0);var i=this,e=t.buttons.exportData(o.exportOptions),r=t.buttons.exportInfo(o),t=[];o.header&&t.push(g.map(e.header,function(e){return{text:"string"==typeof e?e:e+"",style:"tableHeader"}}));for(var s=0,n=e.body.length;s<n;s++)t.push(g.map(e.body[s],function(e){return{text:"string"==typeof e?e:e+"",style:s%2?"tableBodyEven":"tableBodyOdd"}}));o.footer&&e.footer&&t.push(g.map(e.footer,function(e){return{text:"string"==typeof e?e:e+"",style:"tableFooter"}})),t={pageSize:o.pageSize,pageOrientation:o.orientation,content:[{table:{headerRows:1,body:t},layout:"noBorders"}],styles:{tableHeader:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154",alignment:"center"},tableBodyEven:{},tableBodyOdd:{fillColor:"#f3f3f3"},tableFooter:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154"},title:{alignment:"center",fontSize:15},message:{}},defaultStyle:{fontSize:10}},r.messageTop&&t.content.unshift({text:r.messageTop,style:"message",margin:[0,0,0,12]}),r.messageBottom&&t.content.push({text:r.messageBottom,style:"message",margin:[0,0,0,12]}),r.title&&t.content.unshift({text:r.title,style:"title",margin:[0,0,0,12]}),o.customize&&o.customize(t,o),t=(a||v.pdfMake).createPdf(t),"open"!==o.download||_()?t.getBuffer(function(e){e=new Blob([e],{type:"application/pdf"}),C(e,r.filename),i.processing(!1)}):(t.open(),this.processing(!1))},title:"*",filename:"*",extension:".pdf",exportOptions:{},orientation:"portrait",pageSize:"A4",header:!0,footer:!1,messageTop:"*",messageBottom:"*",customize:null,download:"download"},t.Buttons}),function(n){"function"==typeof define&&define.amd?define("datatables.net-buttons-print",["jquery","datatables.net","datatables.net-buttons"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),t.fn.dataTable.Buttons||require("datatables.net-buttons")(e,t),n(t,e,e.document)}:n(jQuery,window,document)}(function(c,d,e){function u(e){return n.href=e,-1===(e=n.host).indexOf("/")&&0!==n.pathname.indexOf("/")&&(e+="/"),n.protocol+"//"+e+n.pathname+n.search}var t=c.fn.dataTable,n=e.createElement("a");return t.ext.buttons.print={className:"buttons-print",text:function(e){return e.i18n("buttons.print","Print")},action:function(e,t,n,o){function i(e,t){for(var n="<tr>",o=0,i=e.length;o<i;o++)n+="<"+t+">"+e[o]+"</"+t+">";return n+"</tr>"}e=t.buttons.exportData(c.extend({decodeEntities:!1},o.exportOptions)),n=t.buttons.exportInfo(o),t='<table class="'+t.table().node().className+'">';o.header&&(t+="<thead>"+i(e.header,"th")+"</thead>");for(var t=t+"<tbody>",r=0,s=e.body.length;r<s;r++)t+=i(e.body[r],"td");t+="</tbody>",o.footer&&e.footer&&(t+="<tfoot>"+i(e.footer,"th")+"</tfoot>");var t=t+"</table>",a=d.open("","");a.document.close();var l="<title>"+n.title+"</title>";c("style, link").each(function(){var e=l,t=c(this).clone()[0];"link"===t.nodeName.toLowerCase()&&(t.href=u(t.href)),l=e+t.outerHTML});try{a.document.head.innerHTML=l}catch(e){c(a.document.head).html(l)}a.document.body.innerHTML="<h1>"+n.title+"</h1><div>"+(n.messageTop||"")+"</div>"+t+"<div>"+(n.messageBottom||"")+"</div>",c(a.document.body).addClass("dt-print-view"),c("img",a.document.body).each(function(e,t){t.setAttribute("src",u(t.getAttribute("src")))}),o.customize&&o.customize(a),setTimeout(function(){o.autoPrint&&(a.print(),a.close())},1e3)},title:"*",messageTop:"*",messageBottom:"*",exportOptions:{},header:!0,footer:!1,autoPrint:!0,customize:null},t.Buttons}),function(n){"function"==typeof define&&define.amd?define("datatables.net-buttons-bs",["jquery","datatables.net-bs","datatables.net-buttons"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net-bs")(e,t).$),t.fn.dataTable.Buttons||require("datatables.net-buttons")(e,t),n(t,e.document)}:n(jQuery,window,document)}(function(e){var t=e.fn.dataTable;return e.extend(!0,t.Buttons.defaults,{dom:{container:{className:"dt-buttons btn-group"},button:{className:"btn btn-default"},collection:{tag:"ul",className:"dt-button-collection dropdown-menu",button:{tag:"li",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"a",className:""}}}}),t.ext.buttons.collection.text=function(e){return e.i18n("buttons.collection",'Collection <span class="caret"/>')},t.Buttons}),function(n){"function"==typeof define&&define.amd?define("datatables.net-colreorder",["jquery","datatables.net"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),n(t,0,e.document)}:n(jQuery,window,document)}(function(h,e,i,f){function m(e){for(var t=[],n=0,o=e.length;n<o;n++)t[e[n]]=n;return t}function g(e,t,n){t=e.splice(t,1)[0],e.splice(n,0,t)}function v(e,t,n){for(var o=[],i=0,r=e.childNodes.length;i<r;i++)1==e.childNodes[i].nodeType&&o.push(e.childNodes[i]);t=o[t],null!==n?e.insertBefore(t,o[n]):e.appendChild(t)}var o=h.fn.dataTable;h.fn.dataTableExt.oApi.fnColReorder=function(n,e,t,o,i){var r,s,a,l=n.aoColumns.length,c=function(e,t,n){var o,i;e[t]&&"function"!=typeof e[t]&&(i=(o=e[t].split(".")).shift(),isNaN(+i)||(e[t]=n[+i]+"."+o.join(".")))};if(e!=t)if(e<0||l<=e)this.oApi._fnLog(n,1,"ColReorder 'from' index is out of bounds: "+e);else if(t<0||l<=t)this.oApi._fnLog(n,1,"ColReorder 'to' index is out of bounds: "+t);else{for(r=[],u=0,p=l;u<p;u++)r[u]=u;g(r,e,t);for(var d=m(r),u=0,p=n.aaSorting.length;u<p;u++)n.aaSorting[u][0]=d[n.aaSorting[u][0]];if(null!==n.aaSortingFixed)for(u=0,p=n.aaSortingFixed.length;u<p;u++)n.aaSortingFixed[u][0]=d[n.aaSortingFixed[u][0]];for(u=0,p=l;u<p;u++){for(r=0,s=(a=n.aoColumns[u]).aDataSort.length;r<s;r++)a.aDataSort[r]=d[a.aDataSort[r]];a.idx=d[a.idx]}for(h.each(n.aLastSort,function(e,t){n.aLastSort[e].src=d[t.src]}),u=0,p=l;u<p;u++)"number"==typeof(a=n.aoColumns[u]).mData?a.mData=d[a.mData]:h.isPlainObject(a.mData)&&(c(a.mData,"_",d),c(a.mData,"filter",d),c(a.mData,"sort",d),c(a.mData,"type",d));if(n.aoColumns[e].bVisible){for(c=this.oApi._fnColumnIndexToVisible(n,e),s=null,u=t<e?t:t+1;null===s&&u<l;)s=this.oApi._fnColumnIndexToVisible(n,u),u++;for(u=0,p=(r=n.nTHead.getElementsByTagName("tr")).length;u<p;u++)v(r[u],c,s);if(null!==n.nTFoot)for(u=0,p=(r=n.nTFoot.getElementsByTagName("tr")).length;u<p;u++)v(r[u],c,s);for(u=0,p=n.aoData.length;u<p;u++)null!==n.aoData[u].nTr&&v(n.aoData[u].nTr,c,s)}for(g(n.aoColumns,e,t),u=0,p=l;u<p;u++)n.oApi._fnColumnOptions(n,u,{});for(g(n.aoPreSearchCols,e,t),u=0,p=n.aoData.length;u<p;u++){if(a=(s=n.aoData[u]).anCells)for(g(a,e,t),r=0,c=a.length;r<c;r++)a[r]&&a[r]._DT_CellIndex&&(a[r]._DT_CellIndex.column=r);"dom"!==s.src&&h.isArray(s._aData)&&g(s._aData,e,t)}for(u=0,p=n.aoHeader.length;u<p;u++)g(n.aoHeader[u],e,t);if(null!==n.aoFooter)for(u=0,p=n.aoFooter.length;u<p;u++)g(n.aoFooter[u],e,t);for(!i&&i!==f||h.fn.dataTable.Api(n).rows().invalidate(),u=0,p=l;u<p;u++)h(n.aoColumns[u].nTh).off("click.DT"),this.oApi._fnSortAttachListener(n,n.aoColumns[u].nTh,u);h(n.oInstance).trigger("column-reorder.dt",[n,{from:e,to:t,mapping:d,drop:o,iFrom:e,iTo:t,aiInvertMapping:d}])}};var r=function(e,t){var n=new h.fn.dataTable.Api(e).settings()[0];if(n._colReorder)return n._colReorder;!0===t&&(t={});e=h.fn.dataTable.camelToHungarian;return e&&(e(r.defaults,r.defaults,!0),e(r.defaults,t||{})),this.s={dt:null,init:h.extend(!0,{},r.defaults,t),fixed:0,fixedRight:0,reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=n,(this.s.dt._colReorder=this)._fnConstruct(),this};return h.extend(r.prototype,{fnReset:function(){return this._fnOrderColumns(this.fnOrder()),this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(e,t){var n,o,i=[],r=this.s.dt.aoColumns;if(e===f){for(n=0,o=r.length;n<o;n++)i.push(r[n]._ColReorder_iOrigCol);return i}if(t){for(r=this.fnOrder(),n=0,o=e.length;n<o;n++)i.push(h.inArray(e[n],r));e=i}return this._fnOrderColumns(m(e)),this},fnTranspose:function(e,t){t=t||"toCurrent";var n=this.fnOrder(),o=this.s.dt.aoColumns;return"toCurrent"===t?h.isArray(e)?h.map(e,function(e){return h.inArray(e,n)}):h.inArray(e,n):h.isArray(e)?h.map(e,function(e){return o[e]._ColReorder_iOrigCol}):o[e]._ColReorder_iOrigCol},_fnConstruct:function(){var e,n=this,t=this.s.dt.aoColumns.length,o=this.s.dt.nTable;for(this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),this.s.init.iFixedColumnsLeft&&(this.s.fixed=this.s.init.iFixedColumnsLeft),this.s.fixedRight=this.s.init.iFixedColumnsRight||0,this.s.init.fnReorderCallback&&(this.s.reorderCallback=this.s.init.fnReorderCallback),e=0;e<t;e++)e>this.s.fixed-1&&e<t-this.s.fixedRight&&this._fnMouseListener(e,this.s.dt.aoColumns[e].nTh),this.s.dt.aoColumns[e]._ColReorder_iOrigCol=e;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(e,t){n._fnStateSave.call(n,t)},"ColReorder_State");var i,r=null;this.s.init.aiOrder&&(r=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&void 0!==this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(r=this.s.dt.oLoadedState.ColReorder),r?n.s.dt._bInitComplete?(t=m(r),n._fnOrderColumns.call(n,t)):(i=!1,h(o).on("draw.dt.colReorder",function(){var e;n.s.dt._bInitComplete||i||(i=!0,e=m(r),n._fnOrderColumns.call(n,e))})):this._fnSetColumnIndexes(),h(o).on("destroy.dt.colReorder",function(){h(o).off("destroy.dt.colReorder draw.dt.colReorder"),h(n.s.dt.nTHead).find("*").off(".ColReorder"),h.each(n.s.dt.aoColumns,function(e,t){h(t.nTh).removeAttr("data-column-index")}),n.s.dt._colReorder=null,n.s=null})},_fnOrderColumns:function(e){var t=!1;if(e.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");else{for(var n=0,o=e.length;n<o;n++){var i=h.inArray(n,e);n!=i&&(g(e,i,n),this.s.dt.oInstance.fnColReorder(i,n,!0,!1),t=!0)}h.fn.dataTable.Api(this.s.dt).rows().invalidate(),this._fnSetColumnIndexes(),t&&(""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))}},_fnStateSave:function(e){var t,n=this.s.dt.aoColumns;if(e.ColReorder=[],e.aaSorting){for(i=0;i<e.aaSorting.length;i++)e.aaSorting[i][0]=n[e.aaSorting[i][0]]._ColReorder_iOrigCol;for(var o=h.extend(!0,[],e.aoSearchCols),i=0,r=n.length;i<r;i++)t=n[i]._ColReorder_iOrigCol,e.aoSearchCols[t]=o[i],e.abVisCols[t]=n[i].bVisible,e.ColReorder.push(t)}else if(e.order){for(i=0;i<e.order.length;i++)e.order[i][0]=n[e.order[i][0]]._ColReorder_iOrigCol;for(o=h.extend(!0,[],e.columns),i=0,r=n.length;i<r;i++)t=n[i]._ColReorder_iOrigCol,e.columns[t]=o[i],e.ColReorder.push(t)}},_fnMouseListener:function(e,t){var n=this;h(t).on("mousedown.ColReorder",function(e){n._fnMouseDown.call(n,e,t)}).on("touchstart.ColReorder",function(e){n._fnMouseDown.call(n,e,t)})},_fnMouseDown:function(e,t){var n=this,o=h(e.target).closest("th, td").offset(),t=parseInt(h(t).attr("data-column-index"),10);t!==f&&(this.s.mouse.startX=this._fnCursorPosition(e,"pageX"),this.s.mouse.startY=this._fnCursorPosition(e,"pageY"),this.s.mouse.offsetX=this._fnCursorPosition(e,"pageX")-o.left,this.s.mouse.offsetY=this._fnCursorPosition(e,"pageY")-o.top,this.s.mouse.target=this.s.dt.aoColumns[t].nTh,this.s.mouse.targetIndex=t,this.s.mouse.fromIndex=t,this._fnRegions(),h(i).on("mousemove.ColReorder touchmove.ColReorder",function(e){n._fnMouseMove.call(n,e)}).on("mouseup.ColReorder touchend.ColReorder",function(e){n._fnMouseUp.call(n,e)}))},_fnMouseMove:function(e){if(null===this.dom.drag){if(Math.pow(Math.pow(this._fnCursorPosition(e,"pageX")-this.s.mouse.startX,2)+Math.pow(this._fnCursorPosition(e,"pageY")-this.s.mouse.startY,2),.5)<5)return;this._fnCreateDragNode()}this.dom.drag.css({left:this._fnCursorPosition(e,"pageX")-this.s.mouse.offsetX,top:this._fnCursorPosition(e,"pageY")-this.s.mouse.offsetY});for(var t=!1,n=this.s.mouse.toIndex,o=1,i=this.s.aoTargets.length;o<i;o++)if(this._fnCursorPosition(e,"pageX")<this.s.aoTargets[o-1].x+(this.s.aoTargets[o].x-this.s.aoTargets[o-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[o-1].x),this.s.mouse.toIndex=this.s.aoTargets[o-1].to,t=!0;break}t||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to),this.s.init.bRealtime&&n!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!1),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(){h(i).off(".ColReorder"),null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!0),this._fnSetColumnIndexes(),""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnRegions:function(){var e=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:h(this.s.dt.nTable).offset().left,to:0});for(var t=0,n=this.s.aoTargets[0].x,o=0,i=e.length;o<i;o++)o!=this.s.mouse.fromIndex&&t++,e[o].bVisible&&"none"!==e[o].nTh.style.display&&(n+=h(e[o].nTh).outerWidth(),this.s.aoTargets.push({x:n,to:t}));0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight),0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var e=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,t=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,n=t.parentNode,o=n.parentNode,i=o.parentNode,r=h(t).clone();this.dom.drag=h(i.cloneNode(!1)).addClass("DTCR_clonedTable").append(h(o.cloneNode(!1)).append(h(n.cloneNode(!1)).append(r[0]))).css({position:"absolute",top:0,left:0,width:h(t).outerWidth(),height:h(t).outerHeight()}).appendTo("body"),this.dom.pointer=h("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:(e?h("div.dataTables_scroll",this.s.dt.nTableWrapper):h(this.s.dt.nTable)).offset().top,height:(e?h("div.dataTables_scroll",this.s.dt.nTableWrapper):h(this.s.dt.nTable)).height()}).appendTo("body")},_fnSetColumnIndexes:function(){h.each(this.s.dt.aoColumns,function(e,t){h(t.nTh).attr("data-column-index",e)})},_fnCursorPosition:function(e,t){return(-1!==e.type.indexOf("touch")?e.originalEvent.touches[0]:e)[t]}}),r.defaults={aiOrder:null,bRealtime:!0,iFixedColumnsLeft:0,iFixedColumnsRight:0,fnReorderCallback:null},r.version="1.4.1",h.fn.dataTable.ColReorder=r,h.fn.DataTable.ColReorder=r,"function"==typeof h.fn.dataTable&&"function"==typeof h.fn.dataTableExt.fnVersionCheck&&h.fn.dataTableExt.fnVersionCheck("1.10.8")?h.fn.dataTableExt.aoFeatures.push({fnInit:function(e){var t=e.oInstance;return e._colReorder?t.oApi._fnLog(e,1,"ColReorder attempted to initialise twice. Ignoring second"):(t=e.oInit,new r(e,t.colReorder||t.oColReorder||{})),null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.10.8 or greater - www.datatables.net/download"),h(i).on("preInit.dt.colReorder",function(e,t){var n;"dt"===e.namespace&&(n=t.oInit.colReorder,e=o.defaults.colReorder,(n||e)&&(e=h.extend({},n,e),!1!==n&&new r(t,e)))}),h.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(e){e._colReorder.fnReset()})}),h.fn.dataTable.Api.register("colReorder.order()",function(t,n){return t?this.iterator("table",function(e){e._colReorder.fnOrder(t,n)}):this.context.length?this.context[0]._colReorder.fnOrder():null}),h.fn.dataTable.Api.register("colReorder.transpose()",function(e,t){return this.context.length&&this.context[0]._colReorder?this.context[0]._colReorder.fnTranspose(e,t):e}),h.fn.dataTable.Api.register("colReorder.move()",function(e,t,n,o){return this.context.length&&this.context[0]._colReorder.s.dt.oInstance.fnColReorder(e,t,n,o),this}),r}),function(n){"function"==typeof define&&define.amd?define("datatables.net-rowreorder",["jquery","datatables.net"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),n(t,e,e.document)}:n(jQuery,window,document)}(function(v,s,b,e){var o=v.fn.dataTable,i=function(e,t){if(!o.versionCheck||!o.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=v.extend(!0,{},o.defaults.rowReorder,i.defaults,t),this.s={bodyTop:null,dt:new o.Api(e),getDataFn:o.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,scroll:{},scrollInterval:null,setDataFn:o.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0,documentOuterHeight:0,domCloneOuterHeight:0},this.dom={clone:null,dtScroll:v("div.dataTables_scrollBody",this.s.dt.table().container())};t=this.s.dt.settings()[0],e=t.rowreorder;if(e)return e;(t.rowreorder=this)._constructor()};v.extend(i.prototype,{_constructor:function(){var o=this,i=this.s.dt,e=v(i.table().node());"static"===e.css("position")&&e.css("position","relative"),v(i.table().container()).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(e){if(o.c.enable){var t=v(this).closest("tr"),n=i.row(t);if(n.any())return o._emitEvent("pre-row-reorder",{node:n.node(),index:n.index()}),o._mouseDown(e,t),!1}}),i.on("destroy.rowReorder",function(){v(i.table().container()).off(".rowReorder"),i.off(".rowReorder")})},_cachePositions:function(){var n=this.s.dt,t=v(n.table().node()).find("thead").outerHeight(),e=v.unique(n.rows({page:"current"}).nodes().toArray()),o=v.map(e,function(e){return v(e).position().top-t}),e=v.map(o,function(e,t){return o.length<t-1?(e+o[t+1])/2:(e+e+v(n.row(":last-child").node()).outerHeight())/2});this.s.middles=e,this.s.bodyTop=v(n.table().body()).offset().top,this.s.windowHeight=v(s).height(),this.s.documentOuterHeight=v(b).outerHeight()},_clone:function(e){var t=v(this.s.dt.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(e.clone(!1)),n=e.outerWidth(),o=e.outerHeight(),i=e.children().map(function(){return v(this).width()});t.width(n).height(o).find("tr").children().each(function(e){this.style.width=i[e]+"px"}),t.appendTo("body"),this.dom.clone=t,this.s.domCloneOuterHeight=t.outerHeight()},_clonePosition:function(e){var t=this.s.start,n=this._eventToPage(e,"Y")-t.top,e=this._eventToPage(e,"X")-t.left,o=this.c.snapX,n=n+t.offsetTop,t=!0===o?t.offsetLeft:"number"==typeof o?t.offsetLeft+o:e+t.offsetLeft;n<0?n=0:n+this.s.domCloneOuterHeight>this.s.documentOuterHeight&&(n=this.s.documentOuterHeight-this.s.domCloneOuterHeight),this.dom.clone.css({top:n,left:t})},_emitEvent:function(t,n){this.s.dt.iterator("table",function(e){v(e.nTable).triggerHandler(t+".dt",n)})},_eventToPage:function(e,t){return(-1!==e.type.indexOf("touch")?e.originalEvent.touches[0]:e)["page"+t]},_mouseDown:function(e,t){var n=this,o=this.s.dt,i=this.s.start,r=t.offset();i.top=this._eventToPage(e,"Y"),i.left=this._eventToPage(e,"X"),i.offsetTop=r.top,i.offsetLeft=r.left,i.nodes=v.unique(o.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(t),this._clonePosition(e),(this.dom.target=t).addClass("dt-rowReorder-moving"),v(b).on("mouseup.rowReorder touchend.rowReorder",function(e){n._mouseUp(e)}).on("mousemove.rowReorder touchmove.rowReorder",function(e){n._mouseMove(e)}),v(s).width()===v(b).width()&&v(b.body).addClass("dt-rowReorder-noOverflow"),o=this.dom.dtScroll,this.s.scroll={windowHeight:v(s).height(),windowWidth:v(s).width(),dtTop:o.length?o.offset().top:null,dtLeft:o.length?o.offset().left:null,dtHeight:o.length?o.outerHeight():null,dtWidth:o.length?o.outerWidth():null}},_mouseMove:function(e){this._clonePosition(e);for(var t=this._eventToPage(e,"Y")-this.s.bodyTop,n=this.s.middles,o=null,i=this.s.dt,r=i.table().body(),s=0,a=n.length;s<a;s++)if(t<n[s]){o=s;break}null===o&&(o=n.length),null!==this.s.lastInsert&&this.s.lastInsert===o||(0===o?this.dom.target.prependTo(r):(t=v.unique(i.rows({page:"current"}).nodes().toArray()),o>this.s.lastInsert?this.dom.target.insertAfter(t[o-1]):this.dom.target.insertBefore(t[o])),this._cachePositions(),this.s.lastInsert=o),this._shiftScroll(e)},_mouseUp:function(){var t=this,n=this.s.dt,o=this.c.dataSrc;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),v(b).off(".rowReorder"),v(b.body).removeClass("dt-rowReorder-noOverflow"),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null;for(var e,i,r,s=this.s.start.nodes,a=v.unique(n.rows({page:"current"}).nodes().toArray()),l={},c=[],d=[],u=this.s.getDataFn,p=this.s.setDataFn,h=0,f=s.length;h<f;h++)s[h]!==a[h]&&(e=n.row(a[h]).id(),i=n.row(a[h]).data(),r=n.row(s[h]).data(),e&&(l[e]=u(r)),c.push({node:a[h],oldData:u(i),newData:u(r),newPosition:h,oldPosition:v.inArray(a[h],s)}),d.push(a[h]));var m=[c,{dataSrc:o,nodes:d,values:l,triggerRow:n.row(this.dom.target)}];this._emitEvent("row-reorder",m);function g(){if(t.c.update){for(h=0,f=c.length;h<f;h++){var e=n.row(c[h].node).data();p(e,c[h].newData),n.columns().every(function(){this.dataSrc()===o&&n.cell(c[h].node,this.index()).invalidate("data")})}t._emitEvent("row-reordered",m),n.draw(!1)}}this.c.editor?(this.c.enable=!1,this.c.editor.edit(d,!1,v.extend({submit:"changed"},this.c.formOptions)).multiSet(o,l).one("submitUnsuccessful.rowReorder",function(){n.draw(!1)}).one("submitSuccess.rowReorder",function(){g()}).one("submitComplete",function(){t.c.enable=!0,t.c.editor.off(".rowReorder")}).submit()):g()},_shiftScroll:function(e){var t,n,o=this,i=this.s.scroll,r=!1,s=e.pageY-b.body.scrollTop;s<65?t=-5:s>i.windowHeight-65&&(t=5),null!==i.dtTop&&e.pageY<i.dtTop+65?n=-5:null!==i.dtTop&&e.pageY>i.dtTop+i.dtHeight-65&&(n=5),t||n?(i.windowVert=t,i.dtVert=n,r=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&r&&(this.s.scrollInterval=setInterval(function(){var e;i.windowVert&&(b.body.scrollTop=b.body.scrollTop+i.windowVert),i.dtVert&&(e=o.dom.dtScroll[0],i.dtVert&&(e.scrollTop=e.scrollTop+i.dtVert))},20))}}),i.defaults={dataSrc:0,editor:null,enable:!0,formOptions:{},selector:"td:first-child",snapX:!1,update:!0};var t=v.fn.dataTable.Api;return t.register("rowReorder()",function(){return this}),t.register("rowReorder.enable()",function(t){return t===e&&(t=!0),this.iterator("table",function(e){e.rowreorder&&(e.rowreorder.c.enable=t)})}),t.register("rowReorder.disable()",function(){return this.iterator("table",function(e){e.rowreorder&&(e.rowreorder.c.enable=!1)})}),i.version="1.2.3",v.fn.dataTable.RowReorder=i,v.fn.DataTable.RowReorder=i,v(b).on("init.dt.dtr",function(e,t){var n;"dt"===e.namespace&&(n=t.oInit.rowReorder,e=o.defaults.rowReorder,(n||e)&&(e=v.extend({},n,e),!1!==n&&new i(t,e)))}),i}),function(n){"function"==typeof define&&define.amd?define("datatables.net-fixedcolumns",["jquery","datatables.net"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),n(t,e,e.document)}:n(jQuery,window,document)}(function(g,a,l,v){var t,o=g.fn.dataTable,c=function(e,t){var n=this;if(this instanceof c){t!==v&&!0!==t||(t={});var o=g.fn.dataTable.camelToHungarian;if(o&&(o(c.defaults,c.defaults,!0),o(c.defaults,t)),o=new g.fn.dataTable.Api(e).settings()[0],this.s={dt:o,iTableColumns:o.aoColumns.length,aiOuterWidths:[],aiInnerWidths:[],rtl:"rtl"===g(o.nTable).css("direction")},this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}},o._oFixedColumns)throw"FixedColumns already initialised on this table";o._oFixedColumns=this,o._bInitComplete?this._fnConstruct(t):o.oApi._fnCallbackReg(o,"aoInitComplete",function(){n._fnConstruct(t)},"FixedColumns")}else alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.")};return g.extend(c.prototype,{fnUpdate:function(){this._fnDraw(!0)},fnRedrawLayout:function(){this._fnColCalc(),this._fnGridLayout(),this.fnUpdate()},fnRecalculateHeight:function(e){delete e._DTTC_iHeight,e.style.height="auto"},fnSetRowHeight:function(e,t){e.style.height=t+"px"},fnGetPosition:function(e){var t=this.s.dt.oInstance;if(g(e).parents(".DTFC_Cloned").length){if("tr"===e.nodeName.toLowerCase())return e=g(e).index(),t.fnGetPosition(g("tr",this.s.dt.nTBody)[e]);var n=g(e).index(),e=g(e.parentNode).index();return[t.fnGetPosition(g("tr",this.s.dt.nTBody)[e]),n,t.oApi._fnVisibleToColumnIndex(this.s.dt,n)]}return t.fnGetPosition(e)},_fnConstruct:function(e){var t,n,o,i,r,s=this;"function"!=typeof this.s.dt.oInstance.fnVersionCheck||!0!==this.s.dt.oInstance.fnVersionCheck("1.8.0")?alert("FixedColumns "+c.VERSION+" required DataTables 1.8.0 or later. Please upgrade your DataTables installation"):""===this.s.dt.oScroll.sX?this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"FixedColumns is not needed (no x-scrolling in DataTables enabled), so no action will be taken. Use 'FixedHeader' for column fixing when scrolling is not enabled"):(this.s=g.extend(!0,this.s,c.defaults,e),e=this.s.dt.oClasses,this.dom.grid.dt=g(this.s.dt.nTable).parents("div."+e.sScrollWrapper)[0],this.dom.scroller=g("div."+e.sScrollBody,this.dom.grid.dt)[0],this._fnColCalc(),this._fnGridSetup(),n=!1,g(this.s.dt.nTableWrapper).on("mousedown.DTFC",function(){n=!0,g(l).one("mouseup",function(){n=!1})}),g(this.dom.scroller).on("mouseover.DTFC touchstart.DTFC",function(){n||(t="main")}).on("scroll.DTFC",function(e){!t&&e.originalEvent&&(t="main"),"main"===t&&(0<s.s.iLeftColumns&&(s.dom.grid.left.liner.scrollTop=s.dom.scroller.scrollTop),0<s.s.iRightColumns)&&(s.dom.grid.right.liner.scrollTop=s.dom.scroller.scrollTop)}),o="onwheel"in l.createElement("div")?"wheel.DTFC":"mousewheel.DTFC",0<s.s.iLeftColumns&&g(s.dom.grid.left.liner).on("mouseover.DTFC touchstart.DTFC",function(){n||(t="left")}).on("scroll.DTFC",function(e){!t&&e.originalEvent&&(t="left"),"left"===t&&(s.dom.scroller.scrollTop=s.dom.grid.left.liner.scrollTop,0<s.s.iRightColumns&&(s.dom.grid.right.liner.scrollTop=s.dom.grid.left.liner.scrollTop))}).on(o,function(e){s.dom.scroller.scrollLeft-="wheel"===e.type?-e.originalEvent.deltaX:e.originalEvent.wheelDeltaX}),0<s.s.iRightColumns&&g(s.dom.grid.right.liner).on("mouseover.DTFC touchstart.DTFC",function(){n||(t="right")}).on("scroll.DTFC",function(e){!t&&e.originalEvent&&(t="right"),"right"===t&&(s.dom.scroller.scrollTop=s.dom.grid.right.liner.scrollTop,0<s.s.iLeftColumns&&(s.dom.grid.left.liner.scrollTop=s.dom.grid.right.liner.scrollTop))}).on(o,function(e){s.dom.scroller.scrollLeft-="wheel"===e.type?-e.originalEvent.deltaX:e.originalEvent.wheelDeltaX}),g(a).on("resize.DTFC",function(){s._fnGridLayout.call(s)}),i=!0,(r=g(this.s.dt.nTable)).on("draw.dt.DTFC",function(){s._fnColCalc(),s._fnDraw.call(s,i),i=!1}).on("column-sizing.dt.DTFC",function(){s._fnColCalc(),s._fnGridLayout(s)}).on("column-visibility.dt.DTFC",function(e,t,n,o,i){i!==v&&!i||(s._fnColCalc(),s._fnGridLayout(s),s._fnDraw(!0))}).on("select.dt.DTFC deselect.dt.DTFC",function(e){"dt"===e.namespace&&s._fnDraw(!1)}).on("destroy.dt.DTFC",function(){r.off(".DTFC"),g(s.dom.scroller).off(".DTFC"),g(a).off(".DTFC"),g(s.s.dt.nTableWrapper).off(".DTFC"),g(s.dom.grid.left.liner).off(".DTFC "+o),g(s.dom.grid.left.wrapper).remove(),g(s.dom.grid.right.liner).off(".DTFC "+o),g(s.dom.grid.right.wrapper).remove()}),this._fnGridLayout(),this.s.dt.oInstance.fnDraw(!1))},_fnColCalc:function(){var i=this,r=0,s=0;this.s.aiInnerWidths=[],this.s.aiOuterWidths=[],g.each(this.s.dt.aoColumns,function(e,t){var n,o=g(t.nTh);o.filter(":visible").length?(t=o.outerWidth(),0===i.s.aiOuterWidths.length&&(t+="string"==typeof(n=g(i.s.dt.nTable).css("border-left-width"))?1:parseInt(n,10)),i.s.aiOuterWidths.length===i.s.dt.aoColumns.length-1&&(t+="string"==typeof(n=g(i.s.dt.nTable).css("border-right-width"))?1:parseInt(n,10)),i.s.aiOuterWidths.push(t),i.s.aiInnerWidths.push(o.width()),e<i.s.iLeftColumns&&(r+=t),i.s.iTableColumns-i.s.iRightColumns<=e&&(s+=t)):(i.s.aiInnerWidths.push(0),i.s.aiOuterWidths.push(0))}),this.s.iLeftWidth=r,this.s.iRightWidth=s},_fnGridSetup:function(){var e,t=this._fnDTOverflow();this.dom.body=this.s.dt.nTable,this.dom.header=this.s.dt.nTHead.parentNode,this.dom.header.parentNode.parentNode.style.position="relative";var n=g('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;"><div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_LeftBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div><div class="DTFC_RightWrapper" style="position:absolute; top:0; right:0;"><div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightHeadBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div><div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_RightBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightFootBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div></div></div>')[0],o=n.childNodes[0],i=n.childNodes[1];this.dom.grid.dt.parentNode.insertBefore(n,this.dom.grid.dt),n.appendChild(this.dom.grid.dt),this.dom.grid.wrapper=n,0<this.s.iLeftColumns&&(this.dom.grid.left.wrapper=o,this.dom.grid.left.head=o.childNodes[0],this.dom.grid.left.body=o.childNodes[1],this.dom.grid.left.liner=g("div.DTFC_LeftBodyLiner",n)[0],n.appendChild(o)),0<this.s.iRightColumns&&(this.dom.grid.right.wrapper=i,this.dom.grid.right.head=i.childNodes[0],this.dom.grid.right.body=i.childNodes[1],this.dom.grid.right.liner=g("div.DTFC_RightBodyLiner",n)[0],i.style.right=t.bar+"px",(e=g("div.DTFC_RightHeadBlocker",n)[0]).style.width=t.bar+"px",e.style.right=-t.bar+"px",this.dom.grid.right.headBlock=e,(e=g("div.DTFC_RightFootBlocker",n)[0]).style.width=t.bar+"px",e.style.right=-t.bar+"px",this.dom.grid.right.footBlock=e,n.appendChild(i)),this.s.dt.nTFoot&&(this.dom.footer=this.s.dt.nTFoot.parentNode,0<this.s.iLeftColumns&&(this.dom.grid.left.foot=o.childNodes[2]),0<this.s.iRightColumns)&&(this.dom.grid.right.foot=i.childNodes[2]),this.s.rtl&&g("div.DTFC_RightHeadBlocker",n).css({left:-t.bar+"px",right:""})},_fnGridLayout:function(){var n=this,e=this.dom.grid;g(e.wrapper).width();function t(e,t){r.bar?(!n._firefoxScrollError()||34<g(e).height())&&(e.style.width=t+r.bar+"px"):(e.style.width=t+20+"px",e.style.paddingRight="20px",e.style.boxSizing="border-box")}var o=g(this.s.dt.nTable.parentNode).outerHeight(),i=g(this.s.dt.nTable.parentNode.parentNode).outerHeight(),r=this._fnDTOverflow(),s=this.s.iLeftWidth,a=this.s.iRightWidth,l="rtl"===g(this.dom.body).css("direction");r.x&&(o-=r.bar),e.wrapper.style.height=i+"px",0<this.s.iLeftColumns&&((i=e.left.wrapper).style.width=s+"px",i.style.height="1px",l?(i.style.left="",i.style.right=0):(i.style.left=0,i.style.right=""),e.left.body.style.height=o+"px",e.left.foot&&(e.left.foot.style.top=(r.x?r.bar:0)+"px"),t(e.left.liner,s),e.left.liner.style.height=o+"px",e.left.liner.style.maxHeight=o+"px"),0<this.s.iRightColumns&&((i=e.right.wrapper).style.width=a+"px",i.style.height="1px",this.s.rtl?(i.style.left=r.y?r.bar+"px":0,i.style.right=""):(i.style.left="",i.style.right=r.y?r.bar+"px":0),e.right.body.style.height=o+"px",e.right.foot&&(e.right.foot.style.top=(r.x?r.bar:0)+"px"),t(e.right.liner,a),e.right.liner.style.height=o+"px",e.right.liner.style.maxHeight=o+"px",e.right.headBlock.style.display=r.y?"block":"none",e.right.footBlock.style.display=r.y?"block":"none")},_fnDTOverflow:function(){var e=this.s.dt.nTable,t=e.parentNode,n={x:!1,y:!1,bar:this.s.dt.oScroll.iBarWidth};return e.offsetWidth>t.clientWidth&&(n.x=!0),e.offsetHeight>t.clientHeight&&(n.y=!0),n},_fnDraw:function(e){this._fnGridLayout(),this._fnCloneLeft(e),this._fnCloneRight(e),null!==this.s.fnDrawCallback&&this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right),g(this).trigger("draw.dtfc",{leftClone:this.dom.clone.left,rightClone:this.dom.clone.right})},_fnCloneRight:function(e){if(!(this.s.iRightColumns<=0)){for(var t=[],n=this.s.iTableColumns-this.s.iRightColumns;n<this.s.iTableColumns;n++)this.s.dt.aoColumns[n].bVisible&&t.push(n);this._fnClone(this.dom.clone.right,this.dom.grid.right,t,e)}},_fnCloneLeft:function(e){if(!(this.s.iLeftColumns<=0)){for(var t=[],n=0;n<this.s.iLeftColumns;n++)this.s.dt.aoColumns[n].bVisible&&t.push(n);this._fnClone(this.dom.clone.left,this.dom.grid.left,t,e)}},_fnCopyLayout:function(e,t,n){for(var o=[],i=[],r=[],s=0,a=e.length;s<a;s++){var l=[];l.nTr=g(e[s].nTr).clone(n,!1)[0];for(var c,d=0,u=this.s.iTableColumns;d<u;d++)-1!==g.inArray(d,t)&&(-1===(c=g.inArray(e[s][d].cell,r))?(c=g(e[s][d].cell).clone(n,!1)[0],i.push(c),r.push(e[s][d].cell),l.push({cell:c,unique:e[s][d].unique})):l.push({cell:i[c],unique:e[s][d].unique}));o.push(l)}return o},_fnClone:function(e,t,o,n){var i,r,s,a,l,c,d,u,p,h=this,f=this.s.dt;if(n){for(g(e.header).remove(),e.header=g(this.dom.header).clone(!0,!1)[0],e.header.className+=" DTFC_Cloned",e.header.style.width="100%",t.head.appendChild(e.header),u=this._fnCopyLayout(f.aoHeader,o,!0),(a=g(">thead",e.header)).empty(),i=0,r=u.length;i<r;i++)a[0].appendChild(u[i].nTr);f.oApi._fnDrawHead(f,u,!0)}else for(u=this._fnCopyLayout(f.aoHeader,o,!1),p=[],f.oApi._fnDetectHeader(p,g(">thead",e.header)[0]),i=0,r=u.length;i<r;i++)for(s=0,a=u[i].length;s<a;s++)p[i][s].cell.className=u[i][s].cell.className,g("span.DataTables_sort_icon",p[i][s].cell).each(function(){this.className=g("span.DataTables_sort_icon",u[i][s].cell)[0].className});this._fnEqualiseHeights("thead",this.dom.header,e.header),"auto"==this.s.sHeightMatch&&g(">tbody>tr",h.dom.body).css("height","auto"),null!==e.body&&(g(e.body).remove(),e.body=null),e.body=g(this.dom.body).clone(!0)[0],e.body.className+=" DTFC_Cloned",e.body.style.paddingBottom=f.oScroll.iBarWidth+"px",e.body.style.marginBottom=2*f.oScroll.iBarWidth+"px",null!==e.body.getAttribute("id")&&e.body.removeAttribute("id"),g(">thead>tr",e.body).empty(),g(">tfoot",e.body).remove();var m=g("tbody",e.body)[0];if(g(m).empty(),0<f.aiDisplay.length){for(r=g(">thead>tr",e.body)[0],d=0;d<o.length;d++)l=o[d],(c=g(f.aoColumns[l].nTh).clone(!0)[0]).innerHTML="",(a=c.style).paddingTop="0",a.paddingBottom="0",a.borderTopWidth="0",a.borderBottomWidth="0",a.height=0,a.width=h.s.aiInnerWidths[l]+"px",r.appendChild(c);g(">tbody>tr",h.dom.body).each(function(e){var e=!1===h.s.dt.oFeatures.bServerSide?h.s.dt.aiDisplay[h.s.dt._iDisplayStart+e]:e,t=h.s.dt.aoData[e].anCells||g(this).children("td, th"),n=this.cloneNode(!1);for(n.removeAttribute("id"),n.setAttribute("data-dt-row",e),d=0;d<o.length;d++)l=o[d],0<t.length&&((c=g(t[l]).clone(!0,!0)[0]).removeAttribute("id"),c.setAttribute("data-dt-row",e),c.setAttribute("data-dt-column",f.oApi._fnVisibleToColumnIndex(f,l)),n.appendChild(c));m.appendChild(n)})}else g(">tbody>tr",h.dom.body).each(function(){(c=this.cloneNode(!0)).className=c.className+" DTFC_NoData",g("td",c).html(""),m.appendChild(c)});if(e.body.style.width="100%",e.body.style.margin="0",e.body.style.padding="0",f.oScroller!==v&&(r=f.oScroller.dom.force,t.forcer?t.forcer.style.height=r.style.height:(t.forcer=r.cloneNode(!0),t.liner.appendChild(t.forcer))),t.liner.appendChild(e.body),this._fnEqualiseHeights("tbody",h.dom.body,e.body),null!==f.nTFoot){if(n){for(null!==e.footer&&e.footer.parentNode.removeChild(e.footer),e.footer=g(this.dom.footer).clone(!0,!0)[0],e.footer.className+=" DTFC_Cloned",e.footer.style.width="100%",t.foot.appendChild(e.footer),u=this._fnCopyLayout(f.aoFooter,o,!0),(t=g(">tfoot",e.footer)).empty(),i=0,r=u.length;i<r;i++)t[0].appendChild(u[i].nTr);f.oApi._fnDrawHead(f,u,!0)}else for(u=this._fnCopyLayout(f.aoFooter,o,!1),t=[],f.oApi._fnDetectHeader(t,g(">tfoot",e.footer)[0]),i=0,r=u.length;i<r;i++)for(s=0,a=u[i].length;s<a;s++)t[i][s].cell.className=u[i][s].cell.className;this._fnEqualiseHeights("tfoot",this.dom.footer,e.footer)}t=f.oApi._fnGetUniqueThs(f,g(">thead",e.header)[0]),g(t).each(function(e){l=o[e],this.style.width=h.s.aiInnerWidths[l]+"px"}),null!==h.s.dt.nTFoot&&(t=f.oApi._fnGetUniqueThs(f,g(">tfoot",e.footer)[0]),g(t).each(function(e){l=o[e],this.style.width=h.s.aiInnerWidths[l]+"px"}))},_fnGetTrNodes:function(e){for(var t=[],n=0,o=e.childNodes.length;n<o;n++)"TR"==e.childNodes[n].nodeName.toUpperCase()&&t.push(e.childNodes[n]);return t},_fnEqualiseHeights:function(e,t,n){if("none"!=this.s.sHeightMatch||"thead"===e||"tfoot"===e){var o,i,r=t.getElementsByTagName(e)[0],n=n.getElementsByTagName(e)[0];(e=g(">"+e+">tr:eq(0)",t).children(":first")).outerHeight(),e.height();for(var r=this._fnGetTrNodes(r),t=this._fnGetTrNodes(n),s=[],n=0,e=t.length;n<e;n++)o=(o=r[n].offsetHeight)<(i=t[n].offsetHeight)?i:o,"semiauto"==this.s.sHeightMatch&&(r[n]._DTTC_iHeight=o),s.push(o);for(n=0,e=t.length;n<e;n++)t[n].style.height=s[n]+"px",r[n].style.height=s[n]+"px"}},_firefoxScrollError:function(){var e;return t===v&&(e=g("<div/>").css({position:"absolute",top:0,left:0,height:10,width:50,overflow:"scroll"}).appendTo("body"),t=e[0].clientWidth===e[0].offsetWidth&&0!==this._fnDTOverflow().bar,e.remove()),t}}),c.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,sHeightMatch:"semiauto"},c.version="3.2.3",o.Api.register("fixedColumns()",function(){return this}),o.Api.register("fixedColumns().update()",function(){return this.iterator("table",function(e){e._oFixedColumns&&e._oFixedColumns.fnUpdate()})}),o.Api.register("fixedColumns().relayout()",function(){return this.iterator("table",function(e){e._oFixedColumns&&e._oFixedColumns.fnRedrawLayout()})}),o.Api.register("rows().recalcHeight()",function(){return this.iterator("row",function(e,t){e._oFixedColumns&&e._oFixedColumns.fnRecalculateHeight(this.row(t).node())})}),o.Api.register("fixedColumns().rowIndex()",function(e){return(e=g(e)).parents(".DTFC_Cloned").length?this.rows({page:"current"}).indexes()[e.index()]:this.row(e).index()}),o.Api.register("fixedColumns().cellIndex()",function(e){if((e=g(e)).parents(".DTFC_Cloned").length){var t=e.parent().index(),t=this.rows({page:"current"}).indexes()[t],e=e.parents(".DTFC_LeftWrapper").length?e.index():this.columns().flatten().length-this.context[0]._oFixedColumns.s.iRightColumns+e.index();return{row:t,column:this.column.index("toData",e),columnVisible:e}}return this.cell(e).index()}),g(l).on("init.dt.fixedColumns",function(e,t){var n;"dt"===e.namespace&&(n=t.oInit.fixedColumns,e=o.defaults.fixedColumns,(n||e)&&(e=g.extend({},n,e),!1!==n&&new c(t,e)))}),g.fn.dataTable.FixedColumns=c,g.fn.DataTable.FixedColumns=c}),function(n){"function"==typeof define&&define.amd?define("datatables.net-fixedheader",["jquery","datatables.net"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),n(t,e,e.document)}:n(jQuery,window,document)}(function(s,o,a,i){var r=s.fn.dataTable,n=0,l=function(e,t){if(!(this instanceof l))throw"FixedHeader must be initialised with the 'new' keyword.";!0===t&&(t={}),e=new r.Api(e),this.c=s.extend(!0,{},l.defaults,t),this.s={dt:e,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:s(o).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:e.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+n++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:s(e.table().header()),tbody:s(e.table().body()),tfoot:s(e.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();e=e.settings()[0];if(e._fixedHeader)throw"FixedHeader already initialised on table "+e.nTable.id;(e._fixedHeader=this)._constructor()};return s.extend(l.prototype,{enable:function(e){this.s.enable=e,this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0),this.update()},headerOffset:function(e){return e!==i&&(this.c.headerOffset=e,this.update()),this.c.headerOffset},footerOffset:function(e){return e!==i&&(this.c.footerOffset=e,this.update()),this.c.footerOffset},update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var e=this,t=this.s.dt;s(o).on("scroll"+this.s.namespace,function(){e._scroll()}).on("resize"+this.s.namespace,function(){e.s.position.windowHeight=s(o).height(),e.update()});var n=s(".fh-fixedHeader");!this.c.headerOffset&&n.length&&(this.c.headerOffset=n.outerHeight()),n=s(".fh-fixedFooter"),!this.c.footerOffset&&n.length&&(this.c.footerOffset=n.outerHeight()),t.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc column-sizing.dt.dtfc",function(){e.update()}),t.on("destroy.dtfc",function(){t.off(".dtfc"),s(o).off(e.s.namespace)}),this._positions(),this._scroll()},_clone:function(e,t){var n=this.s.dt,o=this.dom[e],i="header"===e?this.dom.thead:this.dom.tfoot;!t&&o.floating?o.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(o.floating&&(o.placeholder.remove(),this._unsize(e),o.floating.children().detach(),o.floating.remove()),o.floating=s(n.table().node().cloneNode(!1)).css("table-layout","fixed").removeAttr("id").append(i).appendTo("body"),o.placeholder=i.clone(!1),o.placeholder.find("*[id]").removeAttr("id"),o.host.prepend(o.placeholder),this._matchWidths(o.placeholder,o.floating))},_matchWidths:function(t,n){function e(e,t){s(e,n).each(function(e){s(this).css({width:t[e],minWidth:t[e]})})}var o=(i=function(e){return s(e,t).map(function(){return s(this).width()}).toArray()})("th"),i=i("td");e("th",o),e("td",i)},_unsize:function(e){var t=this.dom[e].floating;t&&("footer"===e||"header"===e&&!this.s.autoWidth)?s("th, td",t).css({width:"",minWidth:""}):t&&"header"===e&&s("th, td",t).css("min-width","")},_horizontal:function(e,t){var n=this.dom[e],o=this.s.position,i=this.s.scrollLeft;n.floating&&i[e]!==t&&(n.floating.css("left",o.left-t),i[e]=t)},_modeChange:function(e,t,n){var o=this.dom[t],i=this.s.position,r=s.contains(this.dom["footer"===t?"tfoot":"thead"][0],a.activeElement)?a.activeElement:null;"in-place"===e?(o.placeholder&&(o.placeholder.remove(),o.placeholder=null),this._unsize(t),"header"===t?o.host.prepend(this.dom.thead):o.host.append(this.dom.tfoot),o.floating&&(o.floating.remove(),o.floating=null)):"in"===e?(this._clone(t,n),o.floating.addClass("fixedHeader-floating").css("header"===t?"top":"bottom",this.c[t+"Offset"]).css("left",i.left+"px").css("width",i.width+"px"),"footer"===t&&o.floating.css("top","")):"below"===e?(this._clone(t,n),o.floating.addClass("fixedHeader-locked").css("top",i.tfootTop-i.theadHeight).css("left",i.left+"px").css("width",i.width+"px")):"above"===e&&(this._clone(t,n),o.floating.addClass("fixedHeader-locked").css("top",i.tbodyTop).css("left",i.left+"px").css("width",i.width+"px")),r&&r!==a.activeElement&&r.focus(),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[t+"Mode"]=e},_positions:function(){var e=this.s.dt.table(),t=this.s.position,n=this.dom,o=(e=s(e.node())).children("thead"),i=e.children("tfoot"),n=n.tbody;t.visible=e.is(":visible"),t.width=e.outerWidth(),t.left=e.offset().left,t.theadTop=o.offset().top,t.tbodyTop=n.offset().top,t.theadHeight=t.tbodyTop-t.theadTop,i.length?(t.tfootTop=i.offset().top,t.tfootBottom=t.tfootTop+i.outerHeight(),t.tfootHeight=t.tfootBottom-t.tfootTop):(t.tfootTop=t.tbodyTop+n.outerHeight(),t.tfootBottom=t.tfootTop,t.tfootHeight=t.tfootTop)},_scroll:function(e){var t,n=s(a).scrollTop(),o=s(a).scrollLeft(),i=this.s.position;this.s.enable&&(this.c.header&&(t=!i.visible||n<=i.theadTop-this.c.headerOffset?"in-place":n<=i.tfootTop-i.theadHeight-this.c.headerOffset?"in":"below",!e&&t===this.s.headerMode||this._modeChange(t,"header",e),this._horizontal("header",o)),this.c.footer&&this.dom.tfoot.length)&&(n=!i.visible||n+i.windowHeight>=i.tfootBottom+this.c.footerOffset?"in-place":i.windowHeight+n>i.tbodyTop+i.tfootHeight+this.c.footerOffset?"in":"above",!e&&n===this.s.footerMode||this._modeChange(n,"footer",e),this._horizontal("footer",o))}}),l.version="3.1.3",l.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},s.fn.dataTable.FixedHeader=l,s.fn.DataTable.FixedHeader=l,s(a).on("init.dt.dtfh",function(e,t){var n;"dt"===e.namespace&&(n=t.oInit.fixedHeader,e=r.defaults.fixedHeader,!n&&!e||t._fixedHeader||(e=s.extend({},e,n),!1!==n&&new l(t,e)))}),r.Api.register("fixedHeader()",function(){}),r.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(e){(e=e._fixedHeader)&&e.update()})}),r.Api.register("fixedHeader.enable()",function(t){return this.iterator("table",function(e){e=e._fixedHeader,t=t===i||t,e&&t!==e.s.enable&&e.enable(t)})}),r.Api.register("fixedHeader.disable()",function(){return this.iterator("table",function(e){(e=e._fixedHeader)&&e.s.enable&&e.enable(!1)})}),s.each(["header","footer"],function(e,n){r.Api.register("fixedHeader."+n+"Offset()",function(t){var e=this.context;return t===i?e.length&&e[0]._fixedHeader?e[0]._fixedHeader[n+"Offset"]():i:this.iterator("table",function(e){(e=e._fixedHeader)&&e[n+"Offset"](t)})})}),l}),function(n){"function"==typeof define&&define.amd?define("datatables.net-select",["jquery","datatables.net"],function(e){return n(e,window,document)}):"object"==typeof exports?module.exports=function(e,t){return e=e||window,t&&t.fn.dataTable||(t=require("datatables.net")(e,t).$),n(t,e,e.document)}:n(jQuery,window,document)}(function(d,s,e,u){function a(r,e,t){function n(t,n){var e,o=r.rows({search:"applied"}).indexes();o.indexOf(t)>o.indexOf(n)&&(e=n,n=t,t=e);var i=!1;return o.filter(function(e){return e===t&&(i=!0),e===n?!(i=!1):i})}var o=function(t,n){var e;n<t&&(e=n,n=t,t=e);var o=!1;return r.columns(":visible").indexes().filter(function(e){return e===t&&(o=!0),e===n?!(o=!1):o})};t=r.cells({selected:!0}).any()||t?(o=o(t.column,e.column),n(t.row,e.row)):(o=o(0,e.column),n(0,e.row)),t=r.cells(t,o).flatten(),r.cells(e,{selected:!0}).any()?r.cells(t).deselect():r.cells(t).select()}function i(e){var t=e.settings()[0]._select.selector;d(e.table().container()).off("mousedown.dtSelect",t).off("mouseup.dtSelect",t).off("click.dtSelect",t),d("body").off("click.dtSelect"+e.table().node().id)}function r(r){var t=d(r.table().container()),n=r.settings()[0],o=n._select.selector;t.on("mousedown.dtSelect",o,function(e){(e.shiftKey||e.metaKey||e.ctrlKey)&&t.css("-moz-user-select","none").one("selectstart.dtSelect",o,function(){return!1})}).on("mouseup.dtSelect",o,function(){t.css("-moz-user-select","")}).on("click.dtSelect",o,function(e){var t,n,o,i=r.select.items();s.getSelection&&d.trim(s.getSelection().toString())||(t=r.settings()[0],d(e.target).closest("div.dataTables_wrapper")[0]!=r.table().container()||(n=r.cell(d(e.target).closest("td, th"))).any()&&(o=d.Event("user-select.dt"),l(r,o,[i,n,e]),o.isDefaultPrevented()||(o=n.index(),"row"===i?(i=o.row,f(e,r,t,"row",i)):"column"===i?(i=n.index().column,f(e,r,t,"column",i)):"cell"===i&&(i=n.index(),f(e,r,t,"cell",i)),t._select_lastCell=o)))}),d("body").on("click.dtSelect"+r.table().node().id,function(e){!n._select.blurable||d(e.target).parents().filter(r.table().container()).length||0===d(e.target).parents("html").length||d(e.target).parents("div.DTE").length||h(n,!0)})}function l(e,t,n,o){o&&!e.flatten().length||("string"==typeof t&&(t+=".dt"),n.unshift(e),d(e.table().node()).trigger(t,n))}function c(o){var i,r,s,a,e=o.settings()[0];e._select.info&&e.aanFeatures.i&&"api"!==o.select.style()&&(i=o.rows({selected:!0}).flatten().length,r=o.columns({selected:!0}).flatten().length,s=o.cells({selected:!0}).flatten().length,a=function(e,t,n){e.append(d('<span class="select-item"/>').append(o.i18n("select."+t+"s",{_:"%d "+t+"s selected",0:"",1:"1 "+t+" selected"},n)))},d.each(e.aanFeatures.i,function(e,t){var t=d(t),n=d('<span class="select-info"/>');a(n,"row",i),a(n,"column",r),a(n,"cell",s);var o=t.children("span.select-info");o.length&&o.remove(),""!==n.text()&&t.append(n)}))}function p(e,t,n,o){var i,r=e[t+"s"]({search:"applied"}).indexes(),o=d.inArray(o,r),s=d.inArray(n,r);e[t+"s"]({selected:!0}).any()||-1!==o?(s<o&&(i=s,s=o,o=i),r.splice(s+1,r.length),r.splice(0,o)):r.splice(d.inArray(n,r)+1,r.length),e[t](n,{selected:!0}).any()?(r.splice(d.inArray(n,r),1),e[t+"s"](r).deselect()):e[t+"s"](r).select()}function h(e,t){!t&&"single"!==e._select.style||((e=new g.Api(e)).rows({selected:!0}).deselect(),e.columns({selected:!0}).deselect(),e.cells({selected:!0}).deselect())}function f(e,t,n,o,i){var r=t.select.style(),s=t[o](i,{selected:!0}).any();"os"===r?e.ctrlKey||e.metaKey?t[o](i).select(!s):e.shiftKey?"cell"===o?a(t,i,n._select_lastCell||null):p(t,o,i,n._select_lastCell?n._select_lastCell[o]:null):(e=t[o+"s"]({selected:!0}),s&&1===e.flatten().length?t[o](i).deselect():(e.deselect(),t[o](i).select())):"multi+shift"==r&&e.shiftKey?"cell"===o?a(t,i,n._select_lastCell||null):p(t,o,i,n._select_lastCell?n._select_lastCell[o]:null):t[o](i).select(!s)}function n(t,n){return function(e){return e.i18n("buttons."+t,n)}}function m(e){return"draw.dt.DT"+(e=e._eventNamespace)+" select.dt.DT"+e+" deselect.dt.DT"+e}var g=d.fn.dataTable;g.select={},g.select.version="1.2.3",g.select.init=function(e){var t=e.settings()[0],n=t.oInit.select,o=g.defaults.select,n=n===u?o:n,o="row",i="api",r=!1,s=!0,a="td, th",l="selected",c=!1;t._select={},!0===n?(i="os",c=!0):"string"==typeof n?(i=n,c=!0):d.isPlainObject(n)&&(n.blurable!==u&&(r=n.blurable),n.info!==u&&(s=n.info),n.items!==u&&(o=n.items),n.style!==u&&(i=n.style,c=!0),n.selector!==u&&(a=n.selector),n.className!==u)&&(l=n.className),e.select.selector(a),e.select.items(o),e.select.style(i),e.select.blurable(r),e.select.info(s),t._select.className=l,d.fn.dataTable.ext.order["select-checkbox"]=function(t,e){return this.api().column(e,{order:"index"}).nodes().map(function(e){return"row"===t._select.items?d(e).parent().hasClass(t._select.className):"cell"===t._select.items&&d(e).hasClass(t._select.className)})},!c&&d(e.table().node()).hasClass("selectable")&&e.select.style("os")},d.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(e,a){g.ext.selector[a.type].push(function(e,t,n){var o,i=[];if((t=t.selected)===u)return n;for(var r=0,s=n.length;r<s;r++)o=e[a.prop][n[r]],(!0===t&&!0===o._select_selected||!1===t&&!o._select_selected)&&i.push(n[r]);return i})}),g.ext.selector.cell.push(function(e,t,n){var o,i=[];if((t=t.selected)===u)return n;for(var r=0,s=n.length;r<s;r++)o=e.aoData[n[r].row],(!0!==t||!o._selected_cells||!0!==o._selected_cells[n[r].column])&&(!1!==t||o._selected_cells&&o._selected_cells[n[r].column])||i.push(n[r]);return i});var t=g.Api.register,o=g.Api.registerPlural;t("select()",function(){return this.iterator("table",function(e){g.select.init(new g.Api(e))})}),t("select.blurable()",function(t){return t===u?this.context[0]._select.blurable:this.iterator("table",function(e){e._select.blurable=t})}),t("select.info()",function(t){return c===u?this.context[0]._select.info:this.iterator("table",function(e){e._select.info=t})}),t("select.items()",function(t){return t===u?this.context[0]._select.items:this.iterator("table",function(e){e._select.items=t,l(new g.Api(e),"selectItems",[t])})}),t("select.style()",function(t){return t===u?this.context[0]._select.style:this.iterator("table",function(o){var n;o._select.style=t,o._select_init||(n=new g.Api(o),o.aoRowCreatedCallback.push({fn:function(e,t,n){for((t=o.aoData[n])._select_selected&&d(e).addClass(o._select.className),e=0,n=o.aoColumns.length;e<n;e++)(o.aoColumns[e]._select_selected||t._selected_cells&&t._selected_cells[e])&&d(t.anCells[e]).addClass(o._select.className)},sName:"select-deferRender"}),n.on("preXhr.dt.dtSelect",function(){var e=n.rows({selected:!0}).ids(!0).filter(function(e){return e!==u}),t=n.cells({selected:!0}).eq(0).map(function(e){var t=n.row(e.row).id(!0);return t?{row:t,column:e.column}:u}).filter(function(e){return e!==u});n.one("draw.dt.dtSelect",function(){n.rows(e).select(),t.any()&&t.each(function(e){n.cells(e.row,e.column).select()})})}),n.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){c(n)}),n.on("destroy.dtSelect",function(){i(n),n.off(".dtSelect")}));var e=new g.Api(o);i(e),"api"!==t&&r(e),l(new g.Api(o),"selectStyle",[t])})}),t("select.selector()",function(t){return t===u?this.context[0]._select.selector:this.iterator("table",function(e){i(new g.Api(e)),e._select.selector=t,"api"!==e._select.style&&r(new g.Api(e))})}),o("rows().select()","row().select()",function(e){var n=this;return!1===e?this.deselect():(this.iterator("row",function(e,t){h(e),e.aoData[t]._select_selected=!0,d(e.aoData[t].nTr).addClass(e._select.className)}),this.iterator("table",function(e,t){l(n,"select",["row",n[t]],!0)}),this)}),o("columns().select()","column().select()",function(e){var n=this;return!1===e?this.deselect():(this.iterator("column",function(e,t){h(e),e.aoColumns[t]._select_selected=!0;t=new g.Api(e).column(t);d(t.header()).addClass(e._select.className),d(t.footer()).addClass(e._select.className),t.nodes().to$().addClass(e._select.className)}),this.iterator("table",function(e,t){l(n,"select",["column",n[t]],!0)}),this)}),o("cells().select()","cell().select()",function(e){var n=this;return!1===e?this.deselect():(this.iterator("cell",function(e,t,n){h(e),(t=e.aoData[t])._selected_cells===u&&(t._selected_cells=[]),t._selected_cells[n]=!0,t.anCells&&d(t.anCells[n]).addClass(e._select.className)}),this.iterator("table",function(e,t){l(n,"select",["cell",n[t]],!0)}),this)}),o("rows().deselect()","row().deselect()",function(){var n=this;return this.iterator("row",function(e,t){e.aoData[t]._select_selected=!1,d(e.aoData[t].nTr).removeClass(e._select.className)}),this.iterator("table",function(e,t){l(n,"deselect",["row",n[t]],!0)}),this}),o("columns().deselect()","column().deselect()",function(){var n=this;return this.iterator("column",function(o,e){o.aoColumns[e]._select_selected=!1;var t=new g.Api(o),n=t.column(e);d(n.header()).removeClass(o._select.className),d(n.footer()).removeClass(o._select.className),t.cells(null,e).indexes().each(function(e){var t=o.aoData[e.row],n=t._selected_cells;!t.anCells||n&&n[e.column]||d(t.anCells[e.column]).removeClass(o._select.className)})}),this.iterator("table",function(e,t){l(n,"deselect",["column",n[t]],!0)}),this}),o("cells().deselect()","cell().deselect()",function(){var n=this;return this.iterator("cell",function(e,t,n){(t=e.aoData[t])._selected_cells[n]=!1,t.anCells&&!e.aoColumns[n]._select_selected&&d(t.anCells[n]).removeClass(e._select.className)}),this.iterator("table",function(e,t){l(n,"deselect",["cell",n[t]],!0)}),this});var v=0;return d.extend(g.ext.buttons,{selected:{text:n("selected","Selected"),className:"buttons-selected",init:function(e,t,n){var o=this;n._eventNamespace=".select"+v++,e.on(m(n),function(){var e=o.rows({selected:!0}).any()||o.columns({selected:!0}).any()||o.cells({selected:!0}).any();o.enable(e)}),this.disable()},destroy:function(e,t,n){e.off(n._eventNamespace)}},selectedSingle:{text:n("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(t,e,n){var o=this;n._eventNamespace=".select"+v++,t.on(m(n),function(){var e=t.rows({selected:!0}).flatten().length+t.columns({selected:!0}).flatten().length+t.cells({selected:!0}).flatten().length;o.enable(1===e)}),this.disable()},destroy:function(e,t,n){e.off(n._eventNamespace)}},selectAll:{text:n("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:n("selectNone","Deselect all"),className:"buttons-select-none",action:function(){h(this.settings()[0],!0)},init:function(t,e,n){var o=this;n._eventNamespace=".select"+v++,t.on(m(n),function(){var e=t.rows({selected:!0}).flatten().length+t.columns({selected:!0}).flatten().length+t.cells({selected:!0}).flatten().length;o.enable(0<e)}),this.disable()},destroy:function(e,t,n){e.off(n._eventNamespace)}}}),d.each(["Row","Column","Cell"],function(e,t){var i=t.toLowerCase();g.ext.buttons["select"+t+"s"]={text:n("select"+t+"s","Select "+i+"s"),className:"buttons-select-"+i+"s",action:function(){this.select.items(i)},init:function(e){var o=this;e.on("selectItems.dt.DT",function(e,t,n){o.active(n===i)})}}}),d(e).on("preInit.dt.dtSelect",function(e,t){"dt"===e.namespace&&g.select.init(new g.Api(t))}),g.select}),define("mockup-patterns-datatables",["jquery","pat-base","datatables.net","datatables.net-bs","datatables.net-buttons","datatables.net-buttons-colvis","datatables.net-buttons-flash","datatables.net-buttons-html5","datatables.net-buttons-print","datatables.net-buttons-bs","datatables.net-colreorder","datatables.net-rowreorder","datatables.net-fixedcolumns","datatables.net-fixedheader","datatables.net-select"],function(e,t,n){"use strict";return t.extend({name:"datatables",trigger:".pat-datatables",parser:"mockup",table:null,defaults:{},init:function(){this.table=this.$el.DataTable(this.options)}})}),define("mockup-patterns-sortable",["jquery","pat-base","sortable"],function(n,e,t){"use strict";return e.extend({name:"sortable",trigger:".pat-sortable",parser:"mockup",defaults:{selector:"li",dragClass:"item-dragging",cloneClass:"dragging",drop:void 0},init:function(){new t(this.$el[0],{draggable:this.options.selector,chosenClass:this.options.dragClass,dragClass:this.options.cloneClass,onEnd:function(e){var t=this.options.drop;t&&("string"==typeof t&&(t=window[this.options.drop]),t(n(e.item),e.newIndex-e.oldIndex))}.bind(this)})}})}),function(e){define("bootstrap-alert",["jquery"],function(){return function(){!function(r){"use strict";function s(e){r(e).on("click",t,this.close)}var t='[data-dismiss="alert"]';s.VERSION="3.4.1",s.TRANSITION_DURATION=150,s.prototype.close=function(e){var t=r(this),n=t.attr("data-target");n="#"===(n=n||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,""))?[]:n;var o=r(document).find(n);function i(){o.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),o.length||(o=t.closest(".alert")),o.trigger(e=r.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),r.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(s.TRANSITION_DURATION):i())};var e=r.fn.alert;r.fn.alert=function(n){return this.each(function(){var e=r(this),t=e.data("bs.alert");t||e.data("bs.alert",t=new s(this)),"string"==typeof n&&t[n].call(e)})},r.fn.alert.Constructor=s,r.fn.alert.noConflict=function(){return r.fn.alert=e,this},r(document).on("click.bs.alert.data-api",t,s.prototype.close)}(jQuery)}.apply(e,arguments)})}(this),define("mockup-patterns-structure-url/js/views/table",["jquery","underscore","mockup-patterns-structure-url/js/views/tablerow","text!mockup-patterns-structure-url/templates/table.xml","mockup-ui-url/views/base","mockup-patterns-datatables","mockup-patterns-sortable","mockup-patterns-moment","mockup-patterns-structure-url/js/models/result","mockup-patterns-structure-url/js/views/actionmenu","translate","pat-registry","bootstrap-alert"],function(r,o,s,e,t,n,i,a,l,c,d,u){"use strict";return t.extend({tagName:"div",template:o.template(e),initialize:function(e){var n=this;t.prototype.initialize.apply(n,[e]),n.collection=n.app.collection,n.selectedCollection=n.app.selectedCollection,n.listenTo(n.collection,"sync",n.render),n.listenTo(n.selectedCollection,"remove",n.render),n.listenTo(n.selectedCollection,"reset",n.render),n.collection.pager(),n.subsetIds=[],n.contextInfo=null,r("body").on("context-info-loaded",function(e,t){n.contextInfo=t,n.setContextInfo()}),n.dateColumns=["ModificationDate","EffectiveDate","CreationDate","ExpirationDate","start","end","last_comment_date"]},events:{"click .fc-breadcrumbs a":"breadcrumbClicked","change .select-all":"selectAll"},setContextInfo:function(){var e=this.contextInfo,t=this.$('[data-id="'+e.defaultPage+'"]');0<t.length&&t.addClass("default-page");var n,e=e.breadcrumbs;e&&e.length&&(n=this.$(".fc-breadcrumbs a.crumb"),o.each(e,function(e,t){n.eq(t).html(e.title)}))},render:function(){var n,i=this,e={aaSorting:[],aoColumnDefs:[{bSortable:!1,aTargets:[0,i.app.activeColumns.length+2]}],paging:!1,searching:!1,info:!1};return r.extend(e,i.app.options.datatables_options),i.$el.html(i.template({_t:d,pathParts:o.filter(i.app.getCurrentPath().split("/").slice(1),function(e){return 0<e.length}),activeColumns:i.app.activeColumns,availableColumns:i.app.availableColumns,datatables_options:JSON.stringify(e)})),i.collection.length&&(n=i.$("tbody"),i.collection.each(function(t){i.dateColumns.map(function(e){!t.attributes.hasOwnProperty(e)||"None"!==t.attributes[e]&&t.attributes[e]||(t.attributes[e]="")});var e=new s({model:t,app:i.app,table:i}).render();n.append(e.el)})),i.moment=new a(i.$el,{selector:"."+i.dateColumns.join(",."),format:i.options.app.momentFormat}),i.app.options.moveUrl&&i.addReordering(),i.storeOrder(),u.scan(i.$el),i.$el.find("table").on("order.dt",function(e,t,n){var o=r('<button type="button" class="btn btn-danger btn-xs"></button>').text(d("Reset column sorting")).on("click",function(e){i.$el.find("table.pat-datatables").data("patternDatatables").table.order([0,"asc"]).draw().order([]).draw(),i.addReordering(),i.app.clearStatus()});i.app.setStatus({text:d("Notice: Drag and drop reordering is disabled when viewing the contents sorted by a column."),type:"warning"},o,!1,"sorting_dndreordering_disabled"),r(".pat-datatables tbody").find("tr").off("drag"),i.$el.removeClass("order-support")}),this},breadcrumbClicked:function(e){e.preventDefault();e=r(e.target);"A"!==e[0].tagName&&(e=e.parent("a"));var t="";r(e.prevAll("a").get().reverse()).each(function(){var e=r(this).attr("data-path");t+=e,"/"!==e&&(t+="/")}),t+=e.attr("data-path"),this.app.setCurrentPath(t),this.collection.currentPage=1,this.collection.pager()},selectAll:function(e){r(e.target).is(":checked")?r('input[type="checkbox"]',this.$("tbody")).prop("checked",!0).change():(this.selectedCollection.remove(this.collection.models,{silent:!0}),this.selectedCollection.trigger("remove")),this.setContextInfo()},toggleSelectAll:function(e){r(e.target).is(":checked")||this.$(".select-all").prop("checked",!1)},addReordering:function(){var n=this;n.app.inQueryMode()?n.$el.removeClass("order-support"):(n.$el.addClass("order-support"),new i(n.$("tbody"),{selector:"tr",createDragItem:function(e,t){var n=t.clone(),o=r("<table><tbody></tbody></table>");return r("tbody",o).append(n),o.addClass("structure-dragging").css({opacity:.85,position:"absolute"}),o.width(t.width()),o.height(t.height()),o.appendTo(document.body),o},drop:function(e,t){0!==t&&(n.app.moveItem(e.attr("data-id"),t,n.subsetIds),n.storeOrder())}}))},storeOrder:function(){var e=[];this.$("tbody tr.itemRow").each(function(){e.push(r(this).attr("data-id"))}),this.subsetIds=e}})}),define("text!mockup-ui-url/templates/popover.xml",[],function(){return'<div class="arrow"></div>\n<div class="popover-title">\n</div>\n<div class="items popover-content">\n</div>\n\n'}),define("mockup-ui-url/views/popover",["jquery","underscore","mockup-ui-url/views/container","mockup-patterns-backdrop","text!mockup-ui-url/templates/popover.xml"],function(n,e,o,i,t){"use strict";return o.extend({tagName:"div",className:"popover",eventPrefix:"popover",template:t,content:null,title:null,triggerView:null,idPrefix:"popover-",triggerEvents:{"button:click":"toggle"},placement:"bottom",events:{},opened:!1,closeOnOutClick:!0,appendInContainer:!0,backdrop:void 0,$backdrop:null,useBackdrop:!0,backdropOptions:{zIndex:"1009",opacity:"0.4",className:"backdrop backdrop-popover",classActiveName:"backdrop-active",closeOnEsc:!1,closeOnClick:!0},initialize:function(e){var t=this;o.prototype.initialize.apply(this,[e]),this.bindTriggerEvents(),this.on("render",function(){this.$el.attr("role","tooltip").attr("aria-hidden","false"),this.renderTitle(),this.renderContent()},this),this.$el.on("keyup",function(e){27===e.keyCode&&t.hide()})},afterRender:function(){},getTemplateOptions:function(){return this.options},renderTitle:function(){var e=this.title;"function"==typeof e&&(e=e(this.getTemplateOptions())),this.$(".popover-title").empty().append(e)},renderContent:function(){this.$(".popover-content").empty().append(this.content(this.getTemplateOptions()))},bindTriggerEvents:function(){this.triggerView&&e.each(this.triggerEvents,function(e,t){e=this[e];e||n.error("Function not found."),this.stopListening(this.triggerView,t),this.listenTo(this.triggerView,t,e)},this)},getPosition:function(){var e=this.triggerView.$el;return n.extend({},{width:e[0].offsetWidth,height:e[0].offsetHeight},e.offset())},getBodyClassName:function(){var e="popover-";return this.options.id&&(e+=this.options.id+"-"),e+="active"},show:function(){n(".popover:visible").each(function(){var e=n(this).data("component");e&&e.hide()}),this.position(),this.setBackdrop(),!0===this.useBackdrop&&this.backdrop.show(),this.opened=!0,this.triggerView&&this.triggerView.$el.addClass("active"),this.uiEventTrigger("show",this),this.$el.attr("aria-hidden","false"),n("body").addClass(this.getBodyClassName())},position:function(){var e,t,n,o=this.getPosition(),i=this.$el,r=this.placement;switch(i.css({top:0,left:0}).addClass("active"),t=i[0].offsetWidth,n=i[0].offsetHeight,r){case"bottom-right":e={top:o.top+o.height,left:o.left+o.width-40};break;case"bottom":e={top:o.top+o.height,left:o.left+o.width/2-t/2};break;case"top":e={top:o.top-n,left:o.left+o.width/2-t/2};break;case"left":e={top:o.top+o.height/2-n/2,left:o.left-t};break;case"right":e={top:o.top+o.height/2-n/2,left:o.left+o.width}}this.applyPlacement(e,r)},applyPlacement:function(e,t){var n,o,i,r,s=this.$el,a=this.$el,l=a[0].offsetWidth,c=a[0].offsetHeight;s.removeClass(t),s.offset(e).addClass(t).addClass("active"),n=a[0].offsetWidth,o=a[0].offsetHeight,"top"===t&&o!==c&&(e.top=e.top+c-o,r=!0),"bottom"===t||"top"===t?(i=0,e.left<0&&(i=-2*e.left,e.left=0,s.removeClass(t),s.offset(e).addClass(t),n=a[0].offsetWidth,o=a[0].offsetHeight),this.positionArrow(i-l+n,n,"left")):"bottom-right"!==t&&this.positionArrow(o-c,o,"top"),r&&s.offset(e)},positionArrow:function(e,t,n){this.$(".arrow").css(n,e?50*(1-e/t)+"%":"")},hide:function(){this.opened=!1,this.$el.removeClass("active"),this.triggerView&&(this.triggerView.$el.removeClass("active"),this.triggerView.$el.attr("aria-hidden","true")),this.uiEventTrigger("hide",this),this.$el.attr("aria-hidden","true"),n("body").removeClass(this.getBodyClassName())},toggle:function(e,t){this.opened?this.hide():this.show()},setBackdrop:function(){var t;!0===this.useBackdrop&&void 0===this.backdrop&&((t=this).$backdrop=this.$el.closest(".ui-backdrop-element"),0===this.$backdrop.length&&(this.$backdrop=n("body")),this.backdrop=new i(this.$backdrop,this.backdropOptions),this.backdrop.$el.on("hidden.backdrop.patterns",function(e){"backdrop.patterns"===e.namespace&&(e.stopPropagation(),!0===t.opened&&t.hide())}),this.on("popover:hide",function(){this.backdrop.hide()},this))}})}),define("text!mockup-patterns-structure-url/templates/selection_item.xml",[],function(){return'<span class="selected-item">\n  <a href="#" data-uid="<%- UID %>" title="remove" class="remove">\n    <span class="glyphicon glyphicon-remove-circle"></span>\n  </a>\n  <%- Title %>\n</span>\n'}),define("mockup-patterns-structure-url/js/views/selectionwell",["jquery","underscore","mockup-ui-url/views/popover","text!mockup-patterns-structure-url/templates/selection_item.xml"],function(n,o,i,r){"use strict";return i.extend({className:"popover selected-items",title:o.template('<input type="text" class="filter" placeholder="<%- _t("Filter") %>" /><a href="#" class=" remove-all"><span class="glyphicon glyphicon-remove-circle"></span> <%- _t("remove all") %></a>'),content:o.template("<% collection.each(function(item) { %><%= item_template(item.toJSON()) %><% }); %>"),events:{"click a.remove":"itemRemoved","keyup input.filter":"filterSelected","click .remove-all":"removeAll"},initialize:function(e){i.prototype.initialize.apply(this,[e]);var t=this,n=0;this.listenTo(this.collection,"reset all add remove",function(){clearTimeout(n),n=setTimeout(function(){t.render()},50)}),this.options.item_template=o.template(r)},render:function(){return i.prototype.render.call(this),0===this.collection.length&&this.$el.removeClass("active"),this},itemRemoved:function(e){e.preventDefault();e=n(e.currentTarget).data("uid");this.collection.removeByUID(e),0!==this.collection.length&&this.show()},filterSelected:function(e){var t=n(e.target).val().toLowerCase();n(".selected-item",this.$el).each(function(){var e=n(this);-1===e.text().toLowerCase().indexOf(t)?e.hide():e.show()})},removeAll:function(e){e.preventDefault(),this.collection.reset(),this.hide()}})}),define("mockup-patterns-structure-url/js/views/generic-popover",["jquery","underscore","mockup-ui-url/views/popover","translate","pat-registry"],function(n,o,i,r,s){"use strict";return i.extend({events:{"click button.applyBtn":"applyButtonClicked","click button.closeBtn":"toggle"},submitText:r("Apply"),initialize:function(e){this.app=e.app,this.className="popover "+e.id,this.title=e.form.title||e.title,this.submitText=e.form.submitText||r("Apply"),this.submitContext=e.form.submitContext||"primary",this.data={},this.options=e,this.setContent(e.form.template),i.prototype.initialize.apply(this,[e])},setContent:function(e){e="<form>"+e+"</form>";e+='<button class="btn btn-block btn-'+this.submitContext+' applyBtn">'+this.submitText+" </button>",this.options.form.closeText&&(e+='<button class="btn btn-block btn-default closeBtn">'+this.options.form.closeText+" </button>"),this.content=o.template(e)},getTemplateOptions:function(){var t=[];return this.app.selectedCollection.each(function(e){t.push(e.toJSON())}),n.extend({},!0,this.options,{items:t,data:this.data})},applyButtonClicked:function(){var t={};o.each(this.$el.find("form").serializeArray(),function(e){e.name in t?t[e.name]+=","+e.value:t[e.name]=e.value}),this.app.buttonClickEvent(this.triggerView,t),this.hide()},afterRender:function(){var e,t=this;t.options.form.dataUrl?(t.$(".popover-content").html(r("Loading...")),t.app.loading.show(),e=t.app.getAjaxUrl(t.options.form.dataUrl),n.ajax({url:e,dataType:"json",type:"POST",cache:!1,data:{selection:JSON.stringify(t.app.getSelectedUids()),transitions:!0,render:"yes"}}).done(function(e){t.data=e.data||e,t.renderContent(),s.scan(t.$el)}).fail(function(){var e=t.content;t.setContent("<p>"+r("Error loading popover from server.")+"</p>",!1),t.renderContent(),t.content=e}).always(function(){t.app.loading.hide(),t.position()})):(s.scan(t.$el),t.position())},toggle:function(e,t){i.prototype.toggle.apply(this,[e,t]);this.opened&&(this.$el.replaceWith(this.render().el),this.position())}})}),define("mockup-patterns-structure-url/js/views/rearrange",["underscore","mockup-ui-url/views/popover","translate"],function(e,t,n){"use strict";return t.extend({className:"popover rearrange",title:e.template('<%- _t("Rearrange items in this folder") %>'),content:e.template('<div class="form-group"><label><%- _t("What to rearrange on") %></label><select name="rearrange_on" class="form-control"><% _.each(rearrangeProperties, function(title, property) { %><option value="<%- property %>"><%- title %></option><% }); %></select><p class="help-block"><b><%- _t("This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.") %></b></p></div><div><label> <input type="checkbox" name="reversed" /> <%- _t("Reverse") %></label></div><button class="btn btn-block btn-primary"><%- _t("Rearrange") %></button>'),events:{"click button":"rearrangeButtonClicked"},initialize:function(e){this.app=e.app,t.prototype.initialize.apply(this,[e]),this.options.rearrangeProperties=this.app.options.rearrange.properties},render:function(){return t.prototype.render.call(this),this.$rearrangeOn=this.$('[name="rearrange_on"]'),this.$reversed=this.$('[name="reversed"]'),this},rearrangeButtonClicked:function(){var e;"/"===this.app.collection.queryHelper.getCurrentPath()&&!window.confirm(n("Sorting the content on the base of the site could affect your navigation order. Are you certain you want to do this?"))||(e={rearrange_on:this.$rearrangeOn.val(),reversed:!1},this.$reversed[0].checked&&(e.reversed=!0),this.app.buttonClickEvent(this.triggerView,e),this.hide())}})}),define("text!mockup-patterns-structure-url/templates/selection_button.xml",[],function(){return'<span class="glyphicon glyphicon-list"></span>\n<%- title %>\n<span class="label<% if (length > 0) { %> label-success<% } else { %> label-default<% } %>">\n  <%- length %>\n</span>\n'}),define("mockup-patterns-structure-url/js/views/selectionbutton",["mockup-ui-url/views/button","text!mockup-patterns-structure-url/templates/selection_button.xml"],function(n,e){"use strict";return n.extend({collection:null,template:e,initialize:function(e){n.prototype.initialize.apply(this,[e]);var t=this;t.timeout=0,null!==this.collection&&this.collection.on("add remove reset",function(){clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.render(),0===t.collection.length&&t.$el.removeClass("active")},50)},this)},serializedModel:function(){var e={icon:"",title:this.options.title,length:0};return null!==this.collection&&(e.length=this.collection.length),e}})}),define("text!mockup-patterns-structure-url/templates/paging.xml",[],function(){return'  <ul class="pagination pagination-sm pagination-centered">\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverfirst">\n        &laquo;\n      </a>\n    </li>\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverprevious">\n        &lt;\n      </a>\n    </li>\n    <% _.each(pages, function(p){ %>\n    <li class="<% if (currentPage == p) { %>active<% } else if ( p == \'...\' ) { %>disabled<% }%>">\n      <a href="#" class="page"><%- p %></a>\n    </li>\n    <% }); %>\n    <li class="<% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="servernext">\n        &gt;\n      </a>\n    </li>\n    <li class="<% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="serverlast">\n        &raquo;\n      </a>\n    </li>\n  </ul>\n\n  <div class="pagination pagination-sm"><%- _t("Show:") %></div>\n  <ul class="pagination pagination-sm">\n    <li class="serverhowmany serverhowmany15 <% if(perPage == 15){ %>disabled<% } %>">\n      <a href="#" class="">15</a>\n    </li>\n    <li class="serverhowmany serverhowmany30 <% if(perPage == 30){ %>disabled<% } %>">\n      <a href="#" class="">30</a>\n    </li>\n    <li class="serverhowmany serverhowmany50 <% if(perPage == 50){ %>disabled<% } %>">\n      <a href="#" class="">50</a>\n    </li>\n    <li class="serverhowmany serverhowmany250 <% if(perPage == 250){ %>disabled<% } %>">\n      <a href="#" class="">250</a>\n    </li>\n  </ul>\n\n  <div class="pagination pagination-sm">\n    <%- _t("Page:") %> <span class="current"><%- currentPage %></span>\n    <%- _t("of") %>\n    <span class="total"><%- totalPages %></span>\n          <%- _t("shown") %>\n  </div>\n'}),define("mockup-patterns-structure-url/js/views/paging",["jquery","underscore","backbone","text!mockup-patterns-structure-url/templates/paging.xml","translate"],function(t,e,n,o,i){"use strict";return n.View.extend({events:{"click a.servernext":"nextResultPage","click a.serverprevious":"previousResultPage","click a.serverlast":"gotoLast","click a.page":"gotoPage","click a.serverfirst":"gotoFirst","click a.serverpage":"gotoPage","click .serverhowmany a":"changeCount"},tagName:"aside",template:e.template(o),maxPages:7,initialize:function(e){this.options=e,this.app=this.options.app,this.collection=this.app.collection,this.collection.on("reset",this.render,this),this.collection.on("sync",this.render,this),this.$el.appendTo("#pagination")},render:function(){var e=this.collection.info();e.pages=this.getPages(e);e=this.template(t.extend({_t:i},e));return this.$el.html(e),this},getPages:function(e){var t=e.totalPages;if(!t)return[];var n=e.currentPage,e=1,o=t;t>this.maxPages&&(e=Math.max(1,Math.floor(n-this.maxPages/2)),(o=Math.min(e+this.maxPages,t))-e<this.maxPages&&(e-=Math.floor(this.maxPages/2)));for(var i=[],r=e;r<=o;r+=1)i.push(r);return 1<i[0]&&(2<i[0]&&(i=["..."].concat(i)),i=[1].concat(i)),i[i.length-1]<t-1&&(i[i.length-2]<t-2&&i.push("..."),i.push(t)),i},nextResultPage:function(e){e.preventDefault(),this.app.clearStatus(),this.collection.requestNextPage()},previousResultPage:function(e){e.preventDefault(),this.app.clearStatus(),this.collection.requestPreviousPage()},gotoFirst:function(e){e.preventDefault(),this.app.clearStatus(),this.collection.goTo(this.collection.information.firstPage)},gotoLast:function(e){e.preventDefault(),this.app.clearStatus(),this.collection.goTo(this.collection.information.totalPages)},gotoPage:function(e){e.preventDefault(),this.app.clearStatus();e=t(e.target).text();this.collection.goTo(e)},changeCount:function(e){e.preventDefault(),this.app.clearStatus();e=t(e.target).text();this.collection.howManyPer(e),this.app.setCookieSetting("perPage",e)}})}),define("mockup-patterns-structure-url/js/views/columns",["jquery","underscore","mockup-ui-url/views/popover","mockup-patterns-sortable"],function(t,o,n,i){"use strict";return n.extend({className:"popover attribute-columns",title:o.template('<%- _t("Columns") %>'),content:o.template('<label><%- _t("Select columns to show, drag and drop to reorder") %></label><ul></ul><button class="btn btn-block btn-success"><%- _t("Save") %></button>'),itemTemplate:o.template('<li><label><input type="checkbox" value="<%- id %>"/><%- title %></label></li>'),events:{"click button":"applyButtonClicked"},initialize:function(e){this.app=e.app,n.prototype.initialize.apply(this,[e])},afterRender:function(){var n=this;n.$container=n.$("ul"),o.each(n.app.activeColumns,function(e){e=t(n.itemTemplate({title:n.app.availableColumns[e],id:e}));e.find("input")[0].checked=!0,n.$container.append(e)});var e=o.keys(o.omit(n.app.availableColumns,n.app.activeColumns)).sort(function(e,t){e=n.app.availableColumns[e],t=n.app.availableColumns[t];return e<t?-1:e==t?0:1});o.each(e,function(e){e=t(n.itemTemplate({title:n.app.availableColumns[e],id:e}));n.$container.append(e)});new i(n.$container,{selector:"li"});return this},applyButtonClicked:function(){var e=this;this.hide(),e.app.activeColumns=[],e.$("input:checked").each(function(){e.app.activeColumns.push(t(this).val())}),e.app.setCookieSetting(e.app.activeColumnsCookie,this.app.activeColumns),e.app.tableView.render()}})}),define("mockup-patterns-structure-url/js/views/textfilter",["jquery","underscore","mockup-ui-url/views/base","mockup-ui-url/views/button","mockup-ui-url/views/popover","mockup-patterns-querystring","translate"],function(o,t,n,i,r,s,a){"use strict";return n.extend({tagName:"div",className:"navbar-search form-search ui-offset-parent",template:t.template('<div class="input-group"><label class="hiddenStructure" for="textFilterInput" aria-label="<%- _t("Search") %>"><%- _t("Search") %>"</label><input id="textFilterInput" type="text" class="form-control search-query" placeholder="<%- _t("Search") %>"><span class="input-group-btn"></span></div>'),popoverContent:t.template('<input class="pat-querystring" />'),events:{"keyup .search-query":"filter"},term:null,timeoutId:null,keyupDelay:300,statusKeyFilter:"textfilter_status_message_filter",statusKeySorting:"textfilter_status_message_sorting",initialize:function(e){n.prototype.initialize.apply(this,[e]),this.app=this.options.app},setFilterStatusMessage:function(){var e=o('<button type="button" class="btn btn-primary btn-xs"></button>').text(a("Clear")).on("click",function(){this.clearFilter()}.bind(this)),t=a("This listing has filters applied. Not all items are shown.");this.app.setStatus({text:t,type:"success"},e,!0,this.statusKeyFilter);e=a("Drag and drop reordering is disabled while filters are applied.");this.app.setStatus({text:e,type:"warning"},null,!0,this.statusKeySorting)},clearFilterStatusMessage:function(){this.term||this.app.additionalCriterias.length||(this.app.clearStatus(this.statusKeyFilter),this.app.clearStatus(this.statusKeySorting))},setTerm:function(e,t){var n=this.$el[0].querySelector(".search-query");if(this.term=encodeURIComponent(e),t&&(n.value=e),this.app.collection.currentPage=1,this.app.collection.pager(),e)n.classList.add("has-filter"),this.setFilterStatusMessage();else{var o=!1;try{var i=this.$queryString.val();i&&0<JSON.parse(i).length&&(o=!0)}finally{o||(n.classList.remove("has-filter"),this.clearFilterStatusMessage())}}},setQuery:function(e,t){var n=null,o=null;try{"string"==typeof e?(o=JSON.parse(e),n=e):(n=JSON.stringify(e),o=e)}catch(e){o=[],n="[]"}t&&this.$queryString.val(n),this.app.additionalCriterias=o,this.app.collection.currentPage=1,this.app.collection.pager(),o.length?(this.button.$el[0].classList.add("has-filter"),this.setFilterStatusMessage()):this.term||(this.button.$el[0].classList.remove("has-filter"),this.clearFilterStatusMessage())},clearTerm:function(){this.setTerm("",!0)},clearFilter:function(){this.setTerm("",!0),this.setQuery([],!0)},render:function(){this.$el.html(this.template({_t:a})),this.button=new i({title:a("Filter"),icon:"filter",extraClasses:["btn-queryfilter"]}),this.popover=new r({triggerView:this.button,id:"structure-query",title:t.template(a("Filter")),content:this.popoverContent,placement:"left"}),this.$(".input-group-btn").append(this.button.render().el),this.$el.append(this.popover.render().el),this.popover.$el.addClass("query"),this.$queryString=this.popover.$("input.pat-querystring"),this.queryString=new s(this.$queryString,{indexOptionsUrl:this.app.options.indexOptionsUrl,showPreviews:!1});var e=this;return e.queryString.$el.on("change",function(){e.timeoutId&&clearTimeout(e.timeoutId),e.timeoutId=setTimeout(function(){e.setQuery(e.$queryString.val(),!1)},this.keyupDelay)}),e.queryString.$el.on("initialized",function(){e.queryString.$sortOn.on("change",function(){e.app.sort_on=e.queryString.$sortOn.val(),e.app.collection.currentPage=1,e.app.collection.pager()}),e.queryString.$sortOrder.change(function(){e.queryString.$sortOrder[0].checked?e.app.sort_order="reverse":e.app.sort_order="ascending",e.app.collection.currentPage=1,e.app.collection.pager()})}),this},filter:function(t){var n=this;n.timeoutId&&clearTimeout(n.timeoutId),n.timeoutId=setTimeout(function(){var e=o(t.currentTarget);n.setTerm(e.val(),!1)},this.keyupDelay)}})}),function(e){"function"==typeof define&&define.amd?define("dropzone",["jquery"],e):e(jQuery)}(function(c){var d={exports:{}};return function(){var s,t,e,u,a,n,o,R,L,l=[].slice,i={}.hasOwnProperty;function r(){}function $(e,t){if(this.element=e,this.version=$.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if($.instances.push(this),this.element.dropzone=this,e=null!=(e=$.optionsForElement(this.element))?e:{},this.options=R({},this.defaultOptions,e,null!=t?t:{}),this.options.forceFallback||!$.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(t=this.getExistingFallback())&&t.parentNode&&t.parentNode.removeChild(t),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=$.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=$.getElements(this.options.clickable,"clickable")),this.init()}n=function(){},r.prototype.addEventListener=r.prototype.on,r.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},r.prototype.emit=function(){var e,t,n,o=arguments[0],i=2<=arguments.length?l.call(arguments,1):[];if(this._callbacks=this._callbacks||{},e=this._callbacks[o])for(t=0,n=e.length;t<n;t++)e[t].apply(this,i);return this},r.prototype.removeListener=r.prototype.off,r.prototype.removeAllListeners=r.prototype.off,r.prototype.removeEventListener=r.prototype.off,r.prototype.off=function(e,t){var n,o,i,r;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(!(n=this._callbacks[e]))return this;if(1===arguments.length)return delete this._callbacks[e],this;for(o=i=0,r=n.length;i<r;o=++i)if(n[o]===t){n.splice(o,1);break}return this},function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}($,e=r),$.prototype.Emitter=e,$.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],$.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return n},forceFallback:!1,fallback:function(){var e,t,n,o,i,r;for(this.element.className=this.element.className+" dz-browser-not-supported",o=0,i=(r=this.element.getElementsByTagName("div")).length;o<i;o++)e=r[o],/(^| )dz-message($| )/.test(e.className)&&((t=e).className="dz-message");return t||(t=$.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),(n=t.getElementsByTagName("span")[0])&&(null!=n.textContent?n.textContent=this.options.dictFallbackMessage:null!=n.innerText&&(n.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},o=e.width/e.height;return n.optWidth=this.options.thumbnailWidth,n.optHeight=this.options.thumbnailHeight,null==n.optWidth&&null==n.optHeight?(n.optWidth=n.srcWidth,n.optHeight=n.srcHeight):null==n.optWidth?n.optWidth=o*n.optHeight:null==n.optHeight&&(n.optHeight=1/o*n.optWidth),t=n.optWidth/n.optHeight,e.height<n.optHeight||e.width<n.optWidth?(n.trgHeight=n.srcHeight,n.trgWidth=n.srcWidth):t<o?(n.srcHeight=e.height,n.srcWidth=n.srcHeight*t):(n.srcWidth=e.width,n.srcHeight=n.srcWidth/t),n.srcX=(e.width-n.srcWidth)/2,n.srcY=(e.height-n.srcHeight)/2,n},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:n,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:n,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var e,n,o,i,r,s,a,l,c,d,u,p,h;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(t.previewElement=$.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),o=0,s=(c=t.previewElement.querySelectorAll("[data-dz-name]")).length;o<s;o++)c[o].textContent=this._renameFilename(t.name);for(i=0,a=(d=t.previewElement.querySelectorAll("[data-dz-size]")).length;i<a;i++)d[i].innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=$.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),h=this,e=function(e){return e.preventDefault(),e.stopPropagation(),t.status===$.UPLOADING?$.confirm(h.options.dictCancelUploadConfirmation,function(){return h.removeFile(t)}):h.options.dictRemoveFileConfirmation?$.confirm(h.options.dictRemoveFileConfirmation,function(){return h.removeFile(t)}):h.removeFile(t)},p=[],r=0,l=(u=t.previewElement.querySelectorAll("[data-dz-remove]")).length;r<l;r++)n=u[r],p.push(n.addEventListener("click",e));return p}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,o,i,r;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),o=0,i=(r=e.previewElement.querySelectorAll("[data-dz-thumbnail]")).length;o<i;o++)(n=r[o]).alt=e.name,n.src=t;return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){var n,o,i,r,s;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),s=[],o=0,i=(r=e.previewElement.querySelectorAll("[data-dz-errormessage]")).length;o<i;o++)n=r[o],s.push(n.textContent=t);return s}},errormultiple:n,processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:n,uploadprogress:function(e,t,n){var o,i,r,s,a;if(e.previewElement){for(a=[],i=0,r=(s=e.previewElement.querySelectorAll("[data-dz-uploadprogress]")).length;i<r;i++)"PROGRESS"===(o=s[i]).nodeName?a.push(o.value=t):a.push(o.style.width=t+"%");return a}},totaluploadprogress:n,sending:n,sendingmultiple:n,success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:n,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:n,complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:n,maxfilesexceeded:n,maxfilesreached:n,queuecomplete:n,addedfiles:n,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},R=function(){for(var e,t,n,o=arguments[0],i=2<=arguments.length?l.call(arguments,1):[],r=0,s=i.length;r<s;r++)for(e in t=i[r])n=t[e],o[e]=n;return o},$.prototype.getAcceptedFiles=function(){for(var e,t=this.files,n=[],o=0,i=t.length;o<i;o++)(e=t[o]).accepted&&n.push(e);return n},$.prototype.getRejectedFiles=function(){for(var e,t=this.files,n=[],o=0,i=t.length;o<i;o++)(e=t[o]).accepted||n.push(e);return n},$.prototype.getFilesWithStatus=function(e){for(var t,n=this.files,o=[],i=0,r=n.length;i<r;i++)(t=n[i]).status===e&&o.push(t);return o},$.prototype.getQueuedFiles=function(){return this.getFilesWithStatus($.QUEUED)},$.prototype.getUploadingFiles=function(){return this.getFilesWithStatus($.UPLOADING)},$.prototype.getAddedFiles=function(){return this.getFilesWithStatus($.ADDED)},$.prototype.getActiveFiles=function(){for(var e,t=this.files,n=[],o=0,i=t.length;o<i;o++)(e=t[o]).status!==$.UPLOADING&&e.status!==$.QUEUED||n.push(e);return n},$.prototype.init=function(){var e,n,i,t,o,r,s,a,l,c,d,u,p,h,f,m,g,v,b;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild($.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(a=this,(i=function(){return a.hiddenFileInput&&a.hiddenFileInput.parentNode.removeChild(a.hiddenFileInput),a.hiddenFileInput=document.createElement("input"),a.hiddenFileInput.setAttribute("type","file"),(null==a.options.maxFiles||1<a.options.maxFiles)&&a.hiddenFileInput.setAttribute("multiple","multiple"),a.hiddenFileInput.className="dz-hidden-input",null!=a.options.acceptedFiles&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles),null!=a.options.capture&&a.hiddenFileInput.setAttribute("capture",a.options.capture),a.hiddenFileInput.style.visibility="hidden",a.hiddenFileInput.style.position="absolute",a.hiddenFileInput.style.top="0",a.hiddenFileInput.style.left="0",a.hiddenFileInput.style.height="0",a.hiddenFileInput.style.width="0",document.querySelector(a.options.hiddenInputContainer).appendChild(a.hiddenFileInput),a.hiddenFileInput.addEventListener("change",function(){var e,t,n,o=a.hiddenFileInput.files;if(o.length)for(t=0,n=o.length;t<n;t++)e=o[t],a.addFile(e);return a.emit("addedfiles",o),i()})})()),this.URL=null!=(r=window.URL)?r:window.webkitURL,t=0,o=(s=this.events).length;t<o;t++)e=s[t],this.on(e,this.options[e]);return this.on("uploadprogress",(l=this,function(){return l.updateTotalUploadProgress()})),this.on("removedfile",(c=this,function(){return c.updateTotalUploadProgress()})),this.on("canceled",(d=this,function(e){return d.emit("complete",e)})),this.on("complete",(u=this,function(e){if(0===u.getAddedFiles().length&&0===u.getUploadingFiles().length&&0===u.getQueuedFiles().length)return setTimeout(function(){return u.emit("queuecomplete")},0)})),n=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return v.emit("dragstart",e)},dragenter:function(e){return n(e),g.emit("dragenter",e)},dragover:function(e){var t;try{t=e.dataTransfer.effectAllowed}catch(e){}return e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",n(e),m.emit("dragover",e)},dragleave:function(e){return f.emit("dragleave",e)},drop:function(e){return n(e),h.drop(e)},dragend:(p=h=f=m=g=v=this,function(e){return p.emit("dragend",e)})}}],this.clickableElements.forEach((b=this,function(t){return b.listeners.push({element:t,events:{click:function(e){return t===b.element&&e.target!==b.element&&!$.elementInside(e.target,b.element.querySelector(".dz-message"))||b.hiddenFileInput.click(),!0}}})})),this.enable(),this.options.init.call(this)},$.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),null!=(e=this.hiddenFileInput)&&e.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,$.instances.splice($.instances.indexOf(this),1)},$.prototype.updateTotalUploadProgress=function(){var e,t,n,o,i,r=0,s=0;if(this.getActiveFiles().length){for(n=0,o=(i=this.getActiveFiles()).length;n<o;n++)r+=(e=i[n]).upload.bytesSent,s+=e.upload.total;t=100*r/s}else t=100;return this.emit("totaluploadprogress",t,s,r)},$.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},$.prototype._renameFilename=function(e){return"function"!=typeof this.options.renameFilename?e:this.options.renameFilename(e)},$.prototype.getFallbackForm=function(){var e,t;return(e=this.getExistingFallback())?e:(e='<div class="dz-fallback">',this.options.dictFallbackText&&(e+="<p>"+this.options.dictFallbackText+"</p>"),e+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',e=$.createElement(e),"FORM"!==this.element.tagName?(t=$.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(e):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:e)},$.prototype.getExistingFallback=function(){for(var e,t=function(e){for(var t,n=0,o=e.length;n<o;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},n=["div","form"],o=0,i=n.length;o<i;o++)if(e=n[o],e=t(this.element.getElementsByTagName(e)))return e},$.prototype.setupEventListeners=function(){for(var n,o,i,e=this.listeners,t=[],r=0,s=e.length;r<s;r++)n=e[r],t.push(function(){var e=n.events,t=[];for(o in e)i=e[o],t.push(n.element.addEventListener(o,i,!1));return t}());return t},$.prototype.removeEventListeners=function(){for(var n,o,i,e=this.listeners,t=[],r=0,s=e.length;r<s;r++)n=e[r],t.push(function(){var e=n.events,t=[];for(o in e)i=e[o],t.push(n.element.removeEventListener(o,i,!1));return t}());return t},$.prototype.disable=function(){var e,t,n,o,i;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),i=[],t=0,n=(o=this.files).length;t<n;t++)e=o[t],i.push(this.cancelUpload(e));return i},$.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},$.prototype.filesize=function(e){var t,n,o,i,r,s=0,a="b";if(0<e){for(t=i=0,r=(o=["TB","GB","MB","KB","b"]).length;i<r;t=++i)if(n=o[t],Math.pow(this.options.filesizeBase,4-t)/10<=e){s=e/Math.pow(this.options.filesizeBase,4-t),a=n;break}s=Math.round(10*s)/10}return"<strong>"+s+"</strong> "+a},$.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},$.prototype.drop=function(e){var t;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&((e=e.dataTransfer.items)&&e.length&&null!=e[0].webkitGetAsEntry?this._addFilesFromItems(e):this.handleFiles(t)))},$.prototype.paste=function(e){var t;if(null!=(null!=e&&null!=(t=e.clipboardData)?t.items:void 0))return this.emit("paste",e),(e=e.clipboardData.items).length?this._addFilesFromItems(e):void 0},$.prototype.handleFiles=function(e){for(var t,n=[],o=0,i=e.length;o<i;o++)t=e[o],n.push(this.addFile(t));return n},$.prototype._addFilesFromItems=function(e){for(var t,n,o=[],i=0,r=e.length;i<r;i++)null!=(n=e[i]).webkitGetAsEntry&&(t=n.webkitGetAsEntry())?t.isFile?o.push(this.addFile(n.getAsFile())):t.isDirectory?o.push(this._addFilesFromDirectory(t,t.name)):o.push(void 0):null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?o.push(this.addFile(n.getAsFile())):o.push(void 0);return o},$.prototype._addFilesFromDirectory=function(e,i){var r,s,t=e.createReader(),n=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0};return s=this,(r=function(){return t.readEntries(function(e){var t,n,o;if(0<e.length){for(n=0,o=e.length;n<o;n++)(t=e[n]).isFile?t.file(function(e){if(!s.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=i+"/"+e.name,s.addFile(e)}):t.isDirectory&&s._addFilesFromDirectory(t,i+"/"+t.name);r()}return null},n)})()},$.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):$.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},$.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=$.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,(n=this,function(e){return e?(t.accepted=!1,n._errorProcessing([t],e)):(t.accepted=!0,n.options.autoQueue&&n.enqueueFile(t)),n._updateMaxFilesReachedClass()}));var n},$.prototype.enqueueFiles=function(e){for(var t,n=0,o=e.length;n<o;n++)t=e[n],this.enqueueFile(t);return null},$.prototype.enqueueFile=function(e){if(e.status!==$.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=$.QUEUED,this.options.autoProcessQueue)return setTimeout((t=this,function(){return t.processQueue()}),0);var t},$.prototype._thumbnailQueue=[],$.prototype._processingThumbnail=!1,$.prototype._enqueueThumbnail=function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout((t=this,function(){return t._processThumbnailQueue()}),0);var t},$.prototype._processThumbnailQueue=function(){var e;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),(e=this,function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}))},$.prototype.removeFile=function(e){if(e.status===$.UPLOADING&&this.cancelUpload(e),this.files=o(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},$.prototype.removeAllFiles=function(e){var t,n,o,i;for(null==e&&(e=!1),n=0,o=(i=this.files.slice()).length;n<o;n++)(t=i[n]).status===$.UPLOADING&&!e||this.removeFile(t);return null},$.prototype.createThumbnail=function(e,t){var n,o=new FileReader;return o.onload=(n=this,function(){return"image/svg+xml"===e.type?(n.emit("thumbnail",e,o.result),void(null!=t&&t())):n.createThumbnailFromUrl(e,o.result,t)}),o.readAsDataURL(e)},$.prototype.createThumbnailFromUrl=function(o,e,i,t){var r,s=document.createElement("img");return t&&(s.crossOrigin=t),s.onload=(r=this,function(){var e,t,n;if(o.width=s.width,o.height=s.height,null==(e=r.options.resize.call(r,o)).trgWidth&&(e.trgWidth=e.optWidth),null==e.trgHeight&&(e.trgHeight=e.optHeight),n=(t=document.createElement("canvas")).getContext("2d"),t.width=e.trgWidth,t.height=e.trgHeight,a(n,s,null!=(n=e.srcX)?n:0,null!=(n=e.srcY)?n:0,e.srcWidth,e.srcHeight,null!=(n=e.trgX)?n:0,null!=(n=e.trgY)?n:0,e.trgWidth,e.trgHeight),t=t.toDataURL("image/png"),r.emit("thumbnail",o,t),null!=i)return i()}),null!=i&&(s.onerror=i),s.src=e},$.prototype.processQueue=function(){var e,t=this.options.parallelUploads,n=this.getUploadingFiles().length,o=n;if(!(t<=n)&&0<(e=this.getQueuedFiles()).length){if(this.options.uploadMultiple)return this.processFiles(e.slice(0,t-n));for(;o<t;){if(!e.length)return;this.processFile(e.shift()),o++}}},$.prototype.processFile=function(e){return this.processFiles([e])},$.prototype.processFiles=function(e){for(var t,n=0,o=e.length;n<o;n++)(t=e[n]).processing=!0,t.status=$.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},$.prototype._getFilesWithXhr=function(i){var r;return function(){for(var e=this.files,t=[],n=0,o=e.length;n<o;n++)(r=e[n]).xhr===i&&t.push(r);return t}.call(this)},$.prototype.cancelUpload=function(e){var t,n,o,i,r,s,a;if(e.status===$.UPLOADING){for(o=0,r=(n=this._getFilesWithXhr(e.xhr)).length;o<r;o++)(t=n[o]).status=$.CANCELED;for(e.xhr.abort(),i=0,s=n.length;i<s;i++)t=n[i],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else(a=e.status)!==$.ADDED&&a!==$.QUEUED||(e.status=$.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()},L=function(){var e=arguments[0],t=2<=arguments.length?l.call(arguments,1):[];return"function"==typeof e?e.apply(this,t):e},$.prototype.uploadFile=function(e){return this.uploadFiles([e])},$.prototype.uploadFiles=function(d){for(var u,e,n,t,o,i,r,s,a,l,c,p,h,f,m,g,v,b,y,w,x,C,S,T,_,I,F,D,k,E,P,A=new XMLHttpRequest,N=0,O=d.length;N<O;N++)(u=d[N]).xhr=A;for(t in c=L(this.options.method,d),S=L(this.options.url,d),A.open(c,S,!0),A.withCredentials=!!this.options.withCredentials,h=null,n=function(){for(var e=[],t=0,n=d.length;t<n;t++)u=d[t],e.push(k._errorProcessing(d,h||k.options.dictResponseError.replace("{{statusCode}}",A.status),A));return e},E=k=this,f=function(e){var t,n,o,i,r,s,a,l,c;if(null!=e)for(n=100*e.loaded/e.total,o=0,s=d.length;o<s;o++)(u=d[o]).upload={progress:n,total:e.total,bytesSent:e.loaded};else{for(t=!0,n=100,i=0,a=d.length;i<a;i++)100===(u=d[i]).upload.progress&&u.upload.bytesSent===u.upload.total||(t=!1),u.upload.progress=n,u.upload.bytesSent=u.upload.total;if(t)return}for(c=[],r=0,l=d.length;r<l;r++)u=d[r],c.push(E.emit("uploadprogress",u,n,u.upload.bytesSent));return c},A.onload=(P=this,function(t){var e;if(d[0].status!==$.CANCELED&&4===A.readyState){if(h=A.responseText,A.getResponseHeader("content-type")&&~A.getResponseHeader("content-type").indexOf("application/json"))try{h=JSON.parse(h)}catch(e){t=e,h="Invalid JSON response from server."}return f(),200<=(e=A.status)&&e<300?P._finished(d,h,t):n()}}),A.onerror=function(){if(d[0].status!==$.CANCELED)return n()},(null!=(S=A.upload)?S:A).onprogress=f,i={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&R(i,this.options.headers),i)(o=i[t])&&A.setRequestHeader(t,o);if(e=new FormData,this.options.params)for(l in T=this.options.params)m=T[l],e.append(l,m);for(g=0,y=d.length;g<y;g++)u=d[g],this.emit("sending",u,A,e);if(this.options.uploadMultiple&&this.emit("sendingmultiple",d,A,e),"FORM"===this.element.tagName)for(v=0,w=(_=this.element.querySelectorAll("input, textarea, select, button")).length;v<w;v++)if(a=(s=_[v]).getAttribute("name"),F=s.getAttribute("type"),"SELECT"===s.tagName&&s.hasAttribute("multiple"))for(b=0,x=(I=s.options).length;b<x;b++)(p=I[b]).selected&&e.append(a,p.value);else(!F||"checkbox"!==(F=F.toLowerCase())&&"radio"!==F||s.checked)&&e.append(a,s.value);for(r=C=0,D=d.length-1;0<=D?C<=D:D<=C;r=0<=D?++C:--C)e.append(this._getParamName(r),d[r],this._renameFilename(d[r].name));return this.submitRequest(A,e,d)},$.prototype.submitRequest=function(e,t,n){return e.send(t)},$.prototype._finished=function(e,t,n){for(var o,i=0,r=e.length;i<r;i++)(o=e[i]).status=$.SUCCESS,this.emit("success",o,t,n),this.emit("complete",o);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},$.prototype._errorProcessing=function(e,t,n){for(var o,i=0,r=e.length;i<r;i++)(o=e[i]).status=$.ERROR,this.emit("error",o,t,n),this.emit("complete",o);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},(s=$).version="4.3.0",s.options={},s.optionsForElement=function(e){if(e.getAttribute("id"))return s.options[t(e.getAttribute("id"))]},s.instances=[],s.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},s.autoDiscover=!0,s.discover=function(){var e,t,r,n,o,i;for(document.querySelectorAll?r=document.querySelectorAll(".dropzone"):(r=[],(e=function(e){for(var t,n=[],o=0,i=e.length;o<i;o++)t=e[o],/(^| )dropzone($| )/.test(t.className)?n.push(r.push(t)):n.push(void 0);return n})(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),i=[],n=0,o=r.length;n<o;n++)t=r[n],!1!==s.optionsForElement(t)?i.push(new s(t)):i.push(void 0);return i},s.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],s.isBrowserSupported=function(){var e,t,n,o=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(e=0,t=(n=s.blacklistedBrowsers).length;e<t;e++)n[e].test(navigator.userAgent)&&(o=!1);else o=!1;else o=!1;return o},o=function(e,t){for(var n,o=[],i=0,r=e.length;i<r;i++)(n=e[i])!==t&&o.push(n);return o},t=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},s.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},s.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},s.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},s.getElements=function(e,t){var n,o,i,r,s,a,l;if(e instanceof Array){o=[];try{for(i=0,s=e.length;i<s;i++)n=e[i],o.push(this.getElement(n,t))}catch(e){o=null}}else if("string"==typeof e)for(o=[],r=0,a=(l=document.querySelectorAll(e)).length;r<a;r++)n=l[r],o.push(n);else null!=e.nodeType&&(o=[e]);if(null==o||!o.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return o},s.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},s.isValidFile=function(e,t){var n,o,i,r,s;if(!t)return!0;for(t=t.split(","),n=(o=e.type).replace(/\/.*$/,""),r=0,s=t.length;r<s;r++)if("."===(i=(i=t[r]).trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(i.toLowerCase(),e.name.length-i.length))return!0}else if(/\/\*$/.test(i)){if(n===i.replace(/\/.*$/,""))return!0}else if(o===i)return!0;return!1},null!=c&&(c.fn.dropzone=function(e){return this.each(function(){return new s(this,e)})}),null!=d?d.exports=s:window.Dropzone=s,s.ADDED="added",s.QUEUED="queued",s.ACCEPTED=s.QUEUED,s.UPLOADING="uploading",s.PROCESSING=s.UPLOADING,s.CANCELED="canceled",s.ERROR="error",s.SUCCESS="success",u=function(e){e.naturalWidth;var t,n,o,i,r=e.naturalHeight,s=document.createElement("canvas");for(s.width=1,s.height=r,(s=s.getContext("2d")).drawImage(e,0,0),t=s.getImageData(0,0,1,r).data,i=0,o=n=r;i<o;)0===t[4*(o-1)+3]?n=o:i=o,o=n+i>>1;return 0==(r=o/r)?1:r},a=function(e,t,n,o,i,r,s,a,l,c){var d=u(t);return e.drawImage(t,n,o,i,r,s,a,l,c/d)},e=function(t,n){var o=!1,e=!0,i=t.document,r=i.documentElement,s=i.addEventListener?"addEventListener":"attachEvent",a=i.addEventListener?"removeEventListener":"detachEvent",l=i.addEventListener?"":"on",c=function(e){if("readystatechange"!==e.type||"complete"===i.readyState)return("load"===e.type?t:i)[a](l+e.type,c,!1),!o&&(o=!0)?n.call(t,e.type||e):void 0},d=function(){try{r.doScroll("left")}catch(e){return void setTimeout(d,50)}return c("poll")};if("complete"!==i.readyState){if(i.createEventObject&&r.doScroll){try{e=!t.frameElement}catch(e){}e&&d()}return i[s](l+"DOMContentLoaded",c,!1),i[s](l+"readystatechange",c,!1),t[s](l+"load",c,!1)}},s._autoDiscoverFunction=function(){if(s.autoDiscover)return s.discover()},e(window,s._autoDiscoverFunction)}.call(this),d.exports}),define("text!mockup-patterns-upload-url/templates/upload.xml",[],function(){return'<div class="upload-container upload-multiple">\n    <h2 class="title"><%- _t("Upload here") %></h2>\n    <p class="help">\n        <%- _t(\'Drag and drop files from your computer onto the area below or click the Browse button.\') %>\n    </p>\n    <div class="upload-area">\n        <div class="fallback">\n            <input name="file" type="file" multiple />\n        </div>\n        <div class="dz-message"><p><%-_t("Drop files here...")%></p></div>\n        <div class="row browse-select">\n            <div class="col-md-9">\n                <input\n                    id="fakeUploadFile"\n                    placeholder="<%- _t("Choose File") %>"\n                    disabled\n                    />\n            </div>\n            <div class="col-md-3">\n                <button\n                    type="button"\n                    class="btn btn-primary browse">\n                    <%- _t("Browse") %>\n                </button>\n            </div>\n        </div>\n        <div class="upload-queue">\n            <div class="previews">\n            </div>\n            <div class="controls">\n                <% if (allowPathSelection) { %>\n                <div class="path">\n                    <label><%- _t("Upload to...") %></label>\n                    <p class="form-help">\n                        <%- _t("Select another destination folder or leave blank to add files to the current location.") %>\n                    </p>\n                    <input\n                        type="text"\n                        name="location"\n                        />\n                </div>\n                <% } %>\n                <div class="actions row">\n                    <div class="col-md-9">\n                        <div class="progress progress-striped active">\n                            <div class="progress-bar progress-bar-success"\n                                 role="progressbar"\n                                 aria-valuenow="0"\n                                 aria-valuemin="0"\n                                 aria-valuemax="100"\n                                 style="width: 0%">\n                                <span class="sr-only">40% Complete (success)</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-3 align-right">\n                        <button\n                            type="button"\n                            class="btn btn-primary upload-all">\n                            <%- _t("Upload") %>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!mockup-patterns-upload-url/templates/preview.xml",[],function(){return'<div class="row item form-inline">\n    <div class="col-xs-2 action">\n        <button\n            type="button"\n            class="btn btn-danger btn-xs remove-item"\n            data-dz-remove=""\n            href="javascript:undefined;">\n            <span class="glyphicon glyphicon-remove"></span>\n        </button>\n    </div>\n    <div class="col-xs-7 title">\n        <div class="dz-preview">\n          <div class="dz-details">\n            <div class="dz-filename"><span data-dz-name></span></div>\n          </div>\n          <div class="dz-error-message"><span data-dz-errormessage></span></div>\n        </div>\n        <div class="dz-progress">\n            <span class="dz-upload" data-dz-uploadprogress></span>\n        </div>\n    </div>\n    <div class="col-xs-3 info">\n        <div class="dz-size" data-dz-size></div>\n        <img data-dz-thumbnail />\n    </div>\n</div>\n'}),define("mockup-patterns-upload",["jquery","underscore","pat-base","mockup-patterns-relateditems","dropzone","text!mockup-patterns-upload-url/templates/upload.xml","text!mockup-patterns-upload-url/templates/preview.xml","mockup-utils","translate"],function(o,n,e,i,a,r,s,l,c){"use strict";return a.autoDiscover=!1,e.extend({name:"upload",trigger:".pat-upload",parser:"mockup",defaults:{showTitle:!0,url:null,className:"upload",wrap:!1,wrapperTemplate:'<div class="upload-wrapper"/>',fileaddedClassName:"dropping",useTus:!1,container:"",ajaxUpload:!0,paramName:"file",addRemoveLinks:!1,autoCleanResults:!0,previewsContainer:".previews",previewTemplate:null,maxFiles:null,maxFilesize:99999999,allowPathSelection:void 0,relatedItems:{attributes:["UID","Title","Description","getURL","portal_type","path","ModificationDate"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,selectableTypes:["Folder"]}},init:function(){var i=this,e=r;void 0===i.options.allowPathSelection&&(i.options.allowPathSelection=i.options.baseUrl&&i.options.relativePath),o(document).bind("paste",function(e){var t=e.originalEvent.clipboardData.items;if(t)for(var n,o=0;o<t.length;o++)-1!==t[o].type.indexOf("image")&&(n=t[o].getAsFile(),i.dropzone.addFile(n))}),i.currentPath=i.options.currentPath,i.currentFile=0,e=n.template(e)({_t:c,allowPathSelection:i.options.allowPathSelection}),i.$el.addClass(i.options.className),i.$el.append(e),i.$progress=o(".progress-bar-success",i.$el),i.options.showTitle||i.$el.find("h2.title").hide(),i.options.ajaxUpload||(o(".fallback",this.$el).remove(),(this.$el.hasClass(".upload-container")?this.$el:this.$el.closest(".upload-container")).addClass("no-ajax-upload")),i.options.wrap&&(i.$el.wrap(i.options.wrapperTemplate),i.$el=i.$el.parent()),i.options.allowPathSelection?(i.$pathInput=o('input[name="location"]',i.$el),i.relatedItems=i.setupRelatedItems(i.$pathInput)):(o('input[name="location"]',i.$el).parent().remove(),i.relatedItems=null),i.$dropzone=o(".upload-area",i.$el),o("div.browse-select button.browse",i.$el).click(function(e){e.preventDefault(),e.stopPropagation(),(!i.options.maxFiles||i.dropzone.files.length<i.options.maxFiles)&&i.dropzone.hiddenFileInput.click()});var t=this.getDzoneOptions();try{i.dropzone=new a(i.$dropzone[0],t)}catch(e){throw window.DEBUG&&console.log(e),e}i.dropzone.on("maxfilesreached",function(){i.showHideControls()}),i.dropzone.on("addedfile",function(){i.showHideControls()}),i.dropzone.on("removedfile",function(){i.showHideControls()}),i.dropzone.on("success",function(e,t){var n;try{n=o.parseJSON(t)}catch(e){n=t}i.$el.trigger("uploadAllCompleted",{data:n,path_uid:i.$pathInput?i.$pathInput.val():null})}),i.options.autoCleanResults&&i.dropzone.on("complete",function(e){e.status===a.SUCCESS&&setTimeout(function(){o(e.previewElement).fadeOut()},3e3)}),i.dropzone.on("complete",function(e){e.status===a.SUCCESS&&1===i.dropzone.files.length&&i.showHideControls()}),i.dropzone.on("error",function(e,t,n){void 0!==n&&403!==n.status&&o(".dz-error-message span",e.previewElement).html(c("The file transfer failed"))}),i.dropzone.on("totaluploadprogress",function(e){e=(100*(i.currentFile-1)+e)/(100*i.dropzone.files.length)*100,i.$progress.attr("aria-valuenow",e).css("width",e+"%")}),o(".upload-all",i.$el).click(function(e){e.preventDefault(),e.stopPropagation(),i.processUpload({finished:function(){i.$progress.attr("aria-valuenow",0).css("width","0%")}})}),i.options.clipboardfile&&i.dropzone.addFile(i.options.clipboardfile)},showHideControls:function(){var e=this;e._showHideTimeout&&clearTimeout(e._showHideTimeout),e._showHideTimeout=setTimeout(function(){e._showHideControls()},50)},_showHideControls:function(){var e=o(".controls",this.$el),t=o(".browse-select",this.$el),n=o(".dz-hidden-input");this.options.maxFiles&&(this.dropzone.files.length<this.options.maxFiles?(t.show(),n.prop("disabled",!1)):(t.hide(),n.prop("disabled",!0))),0<this.dropzone.files.length?(e.fadeIn("slow"),n=this.dropzone.files[0],o(".dz-error-message span",n.previewElement).html("")):e.fadeOut("slow")},pathJoin:function(){var t=[];return n.each(arguments,function(e){e&&("/"===e[0]&&(e=e.substring(1)),"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),t.push(e))}),t.join("/")},getUrl:function(){var e,t=this.options.url;return t||(this.options.baseUrl&&this.options.relativePath?("/"!==(t=this.options.baseUrl)[t.length-1]&&(t+="/"),t+=this.pathJoin(this.currentPath,this.options.relativePath)):t=0<(e=this.$el.parents("form")).length?e.attr("action"):window.location.href),t},getDzoneOptions:function(){this.options.clickable=!0;var e,t=o.extend({},this.options);return t.url=this.getUrl(),t.headers={"X-CSRF-TOKEN":l.getAuthenticator()},t.uploadMultiple=!1,delete t.wrap,delete t.wrapperTemplate,delete t.resultTemplate,delete t.autoCleanResults,delete t.fileaddedClassName,delete t.useTus,!this.options.previewsContainer||0<(e=this.$el.find(this.options.previewsContainer)).length&&(t.previewsContainer=e[0]),t.autoProcessQueue=!1,t.previewTemplate=s,t},processUpload:function(e){e=e||{};var n=this,o=!1,i=n.options.useTus,r=n.options.fileaddedClassName,s=e.finished;n.currentFile=0,function e(){o=!0,0===n.dropzone.files.length&&(o=!1);var t=n.dropzone.files[0];if(o&&t.status===a.ERROR&&(t.status=a.QUEUED,o=!1),!o)return n.$el.removeClass(r),void(void 0!==s&&"function"==typeof s&&s());-1!==[a.SUCCESS,a.CANCELED].indexOf(t.status)?(n.dropzone.removeFile(t),e()):(t.status!==a.UPLOADING&&(i&&window.tus?n.handleTusUpload(t):(n.currentFile+=1,n.dropzone.processFile(t))),setTimeout(e,100))}()},handleTusUpload:function(e){var i=this;o(e.previewElement);e.status=a.UPLOADING,window.tus.upload(e,{endpoint:i.dropzone.options.url,headers:{FILENAME:e.name,"X-CSRF-TOKEN":l.getAuthenticator()},chunkSize:5242880}).fail(function(){window.DEBUG&&console.alert(c("Error uploading with TUS resumable uploads")),e.status=a.ERROR}).progress(function(e,t,n){var o=t/n*100;i.$progress.attr("aria-valuenow",o).css("width",o+"%"),i.$progress.html(c("uploading...")+"<br />"+i.formatBytes(t)+" / "+i.formatBytes(n))}).done(function(e,t){t.status=a.SUCCESS,i.dropzone.emit("success",t),i.dropzone.emit("complete",t)})},formatBytes:function(e){e=Math.round(e/1024);if(e<1024)return e+" KiB";e=Math.round(e/1024);return e<1024?e+" MB":Math.round(e/1024)+" GB"},setPath:function(e){this.currentPath=e,this.options.url=null,this.options.url=this.dropzone.options.url=this.getUrl()},setupRelatedItems:function(e){var n=this,t=n.options.relatedItems;t.upload=!1,n.options.initialFolder&&e.attr("value",n.options.initialFolder);t=new i(e,t);return t.$el.on("change",function(){var e=o(this).select2("data"),t=null;0<e.length&&(t=e[0].path),n.setPath(t)}),t}})}),define("mockup-patterns-structure-url/js/views/upload",["underscore","mockup-ui-url/views/popover","mockup-patterns-upload"],function(e,o,n){"use strict";return o.extend({className:"popover upload",title:e.template('<%- _t("Upload files") %>'),content:e.template('<input type="text" name="upload" style="display:none" /><div class="uploadify-me"></div>'),initialize:function(e){var n=this;n.app=e.app,o.prototype.initialize.apply(n,[e]),n.currentPathData=null,$("body").on("context-info-loaded",function(e,t){n.currentPathData=t})},render:function(){var e=this;o.prototype.render.call(this);var t=e.app.options.upload;return t.success=function(){e.app.collection.pager()},t.currentPath=e.app.getCurrentPath(),t.allowPathSelection=!1,e.upload=new n(e.$(".uploadify-me").addClass("pat-upload"),t),this},toggle:function(e,t){o.prototype.toggle.apply(this,[e,t]);this.opened&&(t=this.app.getCurrentPath(),this.currentPathData&&t!==this.upload.currentPath&&this.upload.setPath(t))}})}),function(e){define("backbone.paginator",["backbone"],function(){return function(){return Backbone.Paginator=function(u,p,d){"use strict";var h=p.map(u.VERSION.split("."),function(e){return parseInt(e,10)}),e={version:"<%= pkg.version %>"};e.clientPager=u.Collection.extend({useDiacriticsPlugin:!0,useLevenshteinPlugin:!0,sortColumn:"",sortDirection:"desc",lastSortColumn:"",fieldFilterRules:[],lastFieldFilterRules:[],filterFields:"",filterExpression:"",lastFilterExpression:"",defaults_ui:{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4},initialize:function(){this.on("add",this.addModel,this),this.on("remove",this.removeModel,this),this.setDefaults()},setDefaults:function(){var e=p.defaults(this.paginator_ui,this.defaults_ui);p.defaults(this,e)},addModel:function(e){this.origModels.push(e)},removeModel:function(e){e=p.indexOf(this.origModels,e);this.origModels.splice(e,1)},sync:function(e,o,t){var n=this;this.setDefaults();var i={};p.each(p.result(n,"server_api"),function(e,t){p.isFunction(e)&&(e=(e=p.bind(e,n))()),i[t]=e});var r=p.clone(n.paginator_core);p.each(r,function(e,t){p.isFunction(e)&&(e=(e=p.bind(e,n))()),r[t]=e}),r=p.defaults(r,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),r=p.extend(r,{data:decodeURIComponent(d.param(i)),processData:!1,url:p.result(r,"url")},t);var s=!(0===h[0]&&9===h[1]&&10===h[2]),a=0===h[0],l=r.success;r.success=function(e,t,n){l&&(s?l(e,t,n):l(o,e,r)),a&&o&&o.trigger&&o.trigger("sync",o,e,r)};var c=r.error;r.error=function(e){c&&c(e),a&&o&&o.trigger&&o.trigger("error",o,e,r)};t=r.xhr=u.ajax(r);return o&&o.trigger&&o.trigger("request",o,t,r),t},nextPage:function(e){this.currentPage<this.information.totalPages&&(this.currentPage=++this.currentPage,this.pager(e))},previousPage:function(e){1<this.currentPage&&(this.currentPage=--this.currentPage,this.pager(e))},goTo:function(e,t){void 0!==e&&(this.currentPage=parseInt(e,10),this.pager(t))},howManyPer:function(e){var t;void 0!==e&&(t=this.perPage,this.perPage=parseInt(e,10),this.currentPage=Math.ceil((t*(this.currentPage-1)+1)/e),this.pager())},setSort:function(e,t){void 0!==e&&void 0!==t&&(this.lastSortColumn=this.sortColumn,this.sortColumn=e,this.sortDirection=t,this.pager(),this.info())},setFieldFilter:function(e){p.isEmpty(e)?(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=""):(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=e),this.pager(),this.info()},doFakeFieldFilter:function(e){if(!p.isEmpty(e)){var t=this.origModels;return void 0===t&&(t=this.models),t=this._fieldFilter(t,e),""!==this.filterExpression&&(t=this._filter(t,this.filterFields,this.filterExpression)),t.length}},setFilter:function(e,t){void 0!==e&&void 0!==t&&(this.filterFields=e,this.lastFilterExpression=this.filterExpression,this.filterExpression=t,this.pager(),this.info())},doFakeFilter:function(e,t){if(void 0!==e&&void 0!==t){var n=this.origModels;return void 0===n&&(n=this.models),p.isEmpty(this.fieldFilterRules)||(n=this._fieldFilter(n,this.fieldFilterRules)),(n=this._filter(n,e,t)).length}},pager:function(e){var t=this,n=this.perPage,o=(t.currentPage-1)*n,i=o+n;void 0===t.origModels&&(t.origModels=t.models),t.models=t.origModels.slice(),""!==this.sortColumn&&(t.models=t._sort(t.models,this.sortColumn,this.sortDirection)),p.isEmpty(this.fieldFilterRules)||(t.models=t._fieldFilter(t.models,this.fieldFilterRules)),""!==this.filterExpression&&(t.models=t._filter(t.models,this.filterFields,this.filterExpression)),this.lastSortColumn===this.sortColumn&&this.lastFilterExpression===this.filterExpression&&p.isEqual(this.fieldFilterRules,this.lastFieldFilterRules)||(i=(o=0)+n,t.currentPage=1,this.lastSortColumn=this.sortColumn,this.lastFieldFilterRules=this.fieldFilterRules,this.lastFilterExpression=this.filterExpression),t.sortedAndFilteredModels=t.models.slice(),t.info(),t.reset(t.models.slice(o,i)),p.result(e,"success")},_sort:function(e,i,r){return e=e.sort(function(e,t){var n=e.get(i),o=t.get(i);if(p.isUndefined(n)||p.isUndefined(o)||null===n||null===o)return 0;if(n=n.toString().toLowerCase(),o=o.toString().toLowerCase(),"desc"===r)if(!n.match(/[^\-\d\.]/)&&n.match(/-?[\d\.]+/)&&!o.match(/[^\-\d\.]/)&&o.match(/-?[\d\.]+/)){if(+n<+o)return 1;if(+o<+n)return-1}else{if(n<o)return 1;if(o<n)return-1}else if(!n.match(/[^\-\d\.]/)&&n.match(/-?[\d\.]+/)&&!o.match(/[^\-\d\.]/)&&o.match(/-?[\d\.]+/)){if(+n<+o)return-1;if(+o<+n)return 1}else{if(n<o)return-1;if(o<n)return 1}if(e.cid&&t.cid){e=e.cid,t=t.cid;if(e<t)return-1;if(t<e)return 1}return 0})},_fieldFilter:function(e,t){if(p.isEmpty(t))return e;var n=[];return p.each(e,function(o){var e=!0;p.each(t,function(t){return!!e&&(e=!1,void("function"===t.type?p.wrap(t.value,function(e){return e(o.get(t.field))})()&&(e=!0):"required"===t.type?p.isEmpty(o.get(t.field).toString())||(e=!0):"min"===t.type?!p.isNaN(Number(o.get(t.field)))&&!p.isNaN(Number(t.value))&&Number(o.get(t.field))>=Number(t.value)&&(e=!0):"max"===t.type?!p.isNaN(Number(o.get(t.field)))&&!p.isNaN(Number(t.value))&&Number(o.get(t.field))<=Number(t.value)&&(e=!0):"range"===t.type?!p.isNaN(Number(o.get(t.field)))&&p.isObject(t.value)&&!p.isNaN(Number(t.value.min))&&!p.isNaN(Number(t.value.max))&&Number(o.get(t.field))>=Number(t.value.min)&&Number(o.get(t.field))<=Number(t.value.max)&&(e=!0):"minLength"===t.type?o.get(t.field).toString().length>=t.value&&(e=!0):"maxLength"===t.type?o.get(t.field).toString().length<=t.value&&(e=!0):"rangeLength"===t.type?p.isObject(t.value)&&!p.isNaN(Number(t.value.min))&&!p.isNaN(Number(t.value.max))&&o.get(t.field).toString().length>=t.value.min&&o.get(t.field).toString().length<=t.value.max&&(e=!0):"oneOf"===t.type?p.isArray(t.value)&&p.include(t.value,o.get(t.field))&&(e=!0):"equalTo"===t.type?t.value===o.get(t.field)&&(e=!0):"containsAllOf"===t.type?p.isArray(t.value)&&p.isArray(o.get(t.field))&&p.intersection(t.value,o.get(t.field)).length===t.value.length&&(e=!0):"pattern"===t.type?o.get(t.field).toString().match(t.value)&&(e=!0):"custom"===t.type?(n=o.toJSON(),p.wrap(t.value,function(e){return e(n)})()&&(e=!0)):e=!1));var n}),e&&n.push(o)}),n},_filter:function(e,t,s){var a=this,n={};if(p.isString(t)?n[t]={cmp_method:"regexp"}:p.isArray(t)?p.each(t,function(e){n[e]={cmp_method:"regexp"}}):p.each(t,function(e,t){n[t]=p.defaults(e,{cmp_method:"regexp"})}),t=n,p.has(u.Paginator,"removeDiacritics")&&a.useDiacriticsPlugin&&(s=u.Paginator.removeDiacritics(s)),""===s||!p.isString(s))return e;var l=p.map(s.match(/\w+/gi),function(e){return e.toLowerCase()}),o="("+p.uniq(l).join("|")+")",c=new RegExp(o,"igm"),d=[];return p.each(e,function(i){var r=[];p.each(t,function(e,t){var n,o=i.get(t);o&&(n=[],o=p.has(u.Paginator,"removeDiacritics")&&a.useDiacriticsPlugin?u.Paginator.removeDiacritics(o.toString()):o.toString(),"levenshtein"===e.cmp_method&&p.has(u.Paginator,"levenshtein")&&a.useLevenshteinPlugin?(t=u.Paginator.levenshtein(o,s),p.defaults(e,{max_distance:0}),t<=e.max_distance&&(n=p.uniq(l))):n=o.match(c),n=p.map(n,function(e){return e.toString().toLowerCase()}),p.each(n,function(e){r.push(e)}))}),r=p.uniq(p.without(r,"")),p.isEmpty(p.difference(l,r))&&d.push(i)}),d},info:function(){var e=this,t={},n=(e.sortedAndFilteredModels||e).length,o=Math.ceil(n/e.perPage),t={totalUnfilteredRecords:e.origModels.length,totalRecords:n,currentPage:e.currentPage,perPage:this.perPage,totalPages:o,lastPage:o,previous:!1,next:!1,startRecord:0===n?0:(e.currentPage-1)*this.perPage+1,endRecord:Math.min(n,e.currentPage*this.perPage)};return 1<e.currentPage&&(t.previous=e.currentPage-1),e.currentPage<t.totalPages&&(t.next=e.currentPage+1),t.pageSet=e.setPagination(t),e.information=t},setPagination:function(e){var t=[],n=0,o=0,i=2*this.pagesInRange,r=Math.ceil(e.totalRecords/e.perPage);if(1<r)if(r<=1+i)for(n=1,o=r;n<=o;n++)t.push(n);else if(e.currentPage<=this.pagesInRange+1)for(n=1,o=2+i;n<o;n++)t.push(n);else if(r-this.pagesInRange>e.currentPage&&e.currentPage>this.pagesInRange)for(n=e.currentPage-this.pagesInRange;n<=e.currentPage+this.pagesInRange;n++)t.push(n);else for(n=r-i;n<=r;n++)t.push(n);return t},bootstrap:function(e){return p.extend(this,e),this.goTo(1),this.info(),this}}),e.clientPager.prototype.prevPage=e.clientPager.prototype.previousPage;function n(){var e=new d.Deferred;return e.reject(),e.promise()}return e.requestPager=u.Collection.extend({sync:function(e,o,t){var n=this;n.setDefaults();var i={};p.each(p.result(n,"server_api"),function(e,t){p.isFunction(e)&&(e=(e=p.bind(e,n))()),i[t]=e});var r=p.clone(n.paginator_core);p.each(r,function(e,t){p.isFunction(e)&&(e=(e=p.bind(e,n))()),r[t]=e}),r=p.defaults(r,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp",url:n.url}),t.data?t.data=decodeURIComponent(d.param(p.extend(i,t.data))):t.data=decodeURIComponent(d.param(i)),r=p.extend(r,{data:decodeURIComponent(d.param(i)),processData:!1,url:p.result(r,"url")},t);var s=!(0===h[0]&&9===h[1]&&10===h[2]),a=0===h[0],l=r.success;r.success=function(e,t,n){l&&(s?l(e,t,n):l(o,e,r)),a&&o&&o.trigger&&o.trigger("sync",o,e,r)};var c=r.error;r.error=function(e){c&&c(e),a&&o&&o.trigger&&o.trigger("error",o,e,r)};t=r.xhr=u.ajax(r);return o&&o.trigger&&o.trigger("request",o,t,r),t},setDefaults:function(){var n=this;p.defaults(n.paginator_ui,{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4}),p.each(n.paginator_ui,function(e,t){p.isUndefined(n[t])&&(n[t]=n.paginator_ui[t])})},requestNextPage:function(e){return void 0!==this.currentPage?(this.currentPage+=1,this.pager(e)):n()},requestPreviousPage:function(e){return void 0!==this.currentPage?(--this.currentPage,this.pager(e)):n()},updateOrder:function(e,t){return void 0!==e?(this.sortField=e,this.pager(t)):n()},goTo:function(e,t){return void 0!==e?(this.currentPage=parseInt(e,10),this.pager(t)):n()},howManyPer:function(e,t){return void 0!==e?(this.currentPage=this.firstPage,this.perPage=e,this.pager(t)):n()},info:function(){var e={totalRecords:this.totalRecords||0,currentPage:this.currentPage,firstPage:this.firstPage,totalPages:Math.ceil(this.totalRecords/this.perPage),lastPage:this.totalPages,perPage:this.perPage,previous:!1,next:!1};return 1<this.currentPage&&(e.previous=this.currentPage-1),this.currentPage<e.totalPages&&(e.next=this.currentPage+1),e.hasNext=e.next,e.hasPrevious=e.next,e.pageSet=this.setPagination(e),this.information=e},setPagination:function(e){var t=[],n=0,o=0,i=2*this.pagesInRange,r=Math.ceil(e.totalRecords/e.perPage);if(1<r)if(r<=1+i)for(n=1,o=r;n<=o;n++)t.push(n);else if(e.currentPage<=this.pagesInRange+1)for(n=1,o=2+i;n<o;n++)t.push(n);else if(r-this.pagesInRange>e.currentPage&&e.currentPage>this.pagesInRange)for(n=e.currentPage-this.pagesInRange;n<=e.currentPage+this.pagesInRange;n++)t.push(n);else for(n=r-i;n<=r;n++)t.push(n);return t},pager:function(e){return p.isObject(e)||(e={}),this.fetch(e)},url:function(){return void 0!==this.paginator_core&&void 0!==this.paginator_core.url?this.paginator_core.url:null},bootstrap:function(e){return p.extend(this,e),this.setDefaults(),this.info(),this}}),e.requestPager.prototype.nextPage=e.requestPager.prototype.requestNextPage,e.requestPager.prototype.prevPage=e.requestPager.prototype.requestPreviousPage,e}(Backbone,_,jQuery),window.Backbone.Paginator}.apply(e,arguments)})}(this),define("mockup-patterns-structure-url/js/collections/result",["jquery","underscore","backbone","mockup-patterns-structure-url/js/models/result","mockup-utils","backbone.paginator"],function(i,n,o,e,r){"use strict";return o.Paginator.requestPager.extend({model:e,initialize:function(e,t){this.options=t,this.view=t.view,this.url=t.url,this.queryHelper=r.QueryHelper(i.extend(!0,{},this.view.options,{attributes:this.view.options.queryHelperAttributes})),this.queryParser=function(e){void 0===e&&(e={});var t=null;this.view.toolbar&&(t=this.view.toolbar.get("filter").term);var n=this.view.sort_on,o=this.view.sort_order,n=n||"getObjPositionInParent";return JSON.stringify({criteria:this.queryHelper.getCriterias(t,i.extend({},e,{additionalCriterias:this.view.additionalCriterias})),sort_on:n,sort_order:o})},"#/"===window.location.hash.substring(0,2)&&(this.queryHelper.currentPath=window.location.hash.substring(1)),o.Paginator.requestPager.prototype.initialize.apply(this,[e,t])},getCurrentPath:function(){return this.queryHelper.getCurrentPath()},setCurrentPath:function(e){this.queryHelper.currentPath=e},pager:function(){this.trigger("pager"),o.Paginator.requestPager.prototype.pager.apply(this,[])},paginator_core:{type:"GET",dataType:"json",url:function(){return this.url}},paginator_ui:{firstPage:1,currentPage:1,perPage:15},server_api:{query:function(){return this.queryParser()},batch:function(){return this.queryHelper.options.batchSize=this.perPage,JSON.stringify(this.queryHelper.getBatch(this.currentPage))},attributes:function(){return JSON.stringify(this.queryHelper.options.attributes)}},parse:function(e,t){void 0===t&&(t=0),this.totalRecords=e.total;e=e.results;return n.each(e,function(e,t){e._sort=t}),e},comparator:"_sort"})}),define("mockup-patterns-structure-url/js/collections/selected",["backbone","mockup-patterns-structure-url/js/models/result"],function(e,t){"use strict";return e.Collection.extend({model:t,removeResult:function(e){return this.removeByUID(e.uid())},removeByUID:function(e){e=this.getByUID(e);return e&&this.remove(e),e},getByUID:function(e){return this.findWhere({UID:e})}})}),define("text!mockup-patterns-structure-url/templates/status.xml",[],function(){return'<div class="alert alert-<%- type %> status fc-status">\n  <strong class="fc-status-label"><%- label %></strong>\n  <span class="fc-status-text"><%- text %></span>&nbsp;<% // &nbsp; to get correct height for empty alerts %>\n</div>\n'}),define("mockup-patterns-structure-url/js/views/app",["jquery","underscore","mockup-ui-url/views/toolbar","mockup-ui-url/views/buttongroup","mockup-ui-url/views/button","mockup-ui-url/views/base","mockup-patterns-structure-url/js/views/table","mockup-patterns-structure-url/js/views/selectionwell","mockup-patterns-structure-url/js/views/generic-popover","mockup-patterns-structure-url/js/views/rearrange","mockup-patterns-structure-url/js/views/selectionbutton","mockup-patterns-structure-url/js/views/paging","mockup-patterns-structure-url/js/views/columns","mockup-patterns-structure-url/js/views/textfilter","mockup-patterns-structure-url/js/views/upload","mockup-patterns-structure-url/js/collections/result","mockup-patterns-structure-url/js/collections/selected","text!mockup-patterns-structure-url/templates/status.xml","mockup-utils","translate","pat-logger","jquery.cookie"],function(s,r,a,l,c,n,i,d,u,p,h,f,m,g,v,e,b,t,y,w,o){"use strict";var x=o.getLogger("pat-structure");return n.extend({tagName:"div",statusTemplate:r.template(t),statusMessages:[],sort_on:"getObjPositionInParent",sort_order:"ascending",additionalCriterias:[],cookieSettingPrefix:"_fc_",buttons:null,textfilter:null,forms:[],pasteAllowed:function(){return!!s.cookie("__cp")},initialize:function(e){var o=this;n.prototype.initialize.apply(o,[e]),o.loading=new y.Loading,o.loading.show(),s(document).click(function(e){var t=s(e.target);t.is(":visible")&&"hidden"!==t.css("visibility")&&"0"!==t.css("opacity")&&(t.is("a")||t.parent().is("a")||0<(e=s(".popover:visible")).length&&!s.contains(e[0],t[0])&&((e=e.data("component"))&&e.hide()))});e=require(e.collectionConstructor);o.collection=new e([],{view:o,url:o.options.collectionUrl}),o.setAllCookieSettings(),o.selectedCollection=new b,o.tableView=new i({app:o}),o.pagingView=new f({app:o}),o.setupButtons(),o.wellView=new d({collection:o.selectedCollection,triggerView:o.toolbar.get("selected-items"),app:o,id:"selected-items"}),o.toolbar.get("selected-items").disable(),o.buttons.disable();var t=0;o.selectedCollection.on("add remove reset",function(){clearTimeout(t),t=setTimeout(function(){o.updateButtons()},100)},o),o.collection.on("sync",function(){o.contextInfoUrl&&s.ajax({url:o.getAjaxUrl(o.contextInfoUrl),dataType:"json",success:function(e){s("body").trigger("context-info-loaded",[e])},error:function(e){404===e.status&&x.info("context info url not found")}}),o.loading.hide()}),o.collection.on("pager",function(){var e,t;o.loading.show(),o.updateButtons(),window.history&&window.history.pushState&&(o.doNotPushState?o.doNotPushState=!1:("/"===(e=o.getCurrentPath())&&(e=""),o.options.pushStateUrl?(t=o.options.pushStateUrl.replace("/{path}","{path}").replace("{path}",e),window.history.pushState(null,null,t)):o.options.urlStructure&&(t=o.options.urlStructure.base+e+o.options.urlStructure.appended,window.history.pushState(null,null,t)),o.options.traverseView&&(e=""),s("body").trigger("structure-url-changed",[e])))}),(o.options.pushStateUrl||o.options.urlStructure)&&y.featureSupport.history()&&(s(window).bind("popstate",function(){var e,t=y.getWindow().location.href;-1!==t.indexOf("?")&&(t=t.split("?")[0]),-1!==t.indexOf("#")&&(t=t.split("#")[0]),e=o.options.pushStateUrl?(n=(e=o.options.pushStateUrl.split("{path}"))[0],e[1]):(n=o.options.urlStructure.base,o.options.urlStructure.appended);var n=t.substring(n.length);n.substring(n.length-e.length)===e&&(n=n.substring(0,n.length-e.length)),n=n||"/",o.setCurrentPath(n),s("body").trigger("structure-url-changed",[n]),o.doNotPushState=!0,o.collection.goTo(o.collection.information.firstPage)}),s(document).bind("keyup keydown",function(e){o.keyEvent=e})),o.togglePasteBtn()},updateButtons:function(){this.selectedCollection.length?(this.toolbar.get("selected-items").enable(),this.buttons.enable()):(this.toolbar.get("selected-items").disable(),this.buttons.disable()),this.togglePasteBtn()},togglePasteBtn:function(){r.find(this.buttons.items,function(e){return"paste"===e.id})&&(this.pasteAllowed()?this.buttons.get("paste").enable():this.buttons.get("paste").disable())},inQueryMode:function(){if(this.toolbar&&this.toolbar.get("filter").term)return!0;return 0<this.additionalCriterias.length||(!(!this.sort_on||"getObjPositionInParent"===this.sort_on)||"ascending"!==this.sort_order)},getSelectedUids:function(e){void 0===e&&(e=this.selectedCollection);var t=[];return e.each(function(e){t.push(e.uid())}),t},getCurrentPath:function(){return this.collection.getCurrentPath()},setCurrentPath:function(e){this.collection.setCurrentPath(e),this.textfilter.clearTerm(),this.clearStatus()},getAjaxUrl:function(e){return e.replace("{path}",this.getCurrentPath())},buttonClickEvent:function(e){var t,n,o=this,i=null,r=null;e.url&&(o.loading.show(),1<arguments.length&&((t=arguments[1]).preventDefault||(i=t)),2<arguments.length&&("function"==typeof(t=arguments[2])&&(r=t)),null===i&&(i={}),void 0===i.selection&&(i.selection=JSON.stringify(o.getSelectedUids())),i._authenticator=y.getAuthenticator(),void 0===i.folder&&(i.folder=o.getCurrentPath()),n=o.getAjaxUrl(e.url),s.ajax({url:n,type:"POST",data:i,success:function(e){o.ajaxSuccessResponse.apply(o,[e,r]),o.loading.hide()},error:function(e){o.ajaxErrorResponse.apply(o,[e,n]),o.loading.hide()}},o))},ajaxSuccessResponse:function(e,t){this.clearStatus(),this.selectedCollection.reset(),"success"===e.status&&this.collection.reset(),e.msg&&this.setStatus({text:e.msg,type:e.status||"warning"}),null!=t&&t(e),this.collection.pager()},ajaxErrorResponse:function(e,t){404===e.status?window.alert(w("operation url ${url} is not valid",{url:t})):window.alert(w("there was an error performing the action"))},setupButtons:function(){var e,o=this,t=[],n=new c({id:"structure-columns",tooltip:w("Configure displayed columns"),icon:"th"});o.columnsView=new m({app:o,triggerView:n,id:"structure-columns",placement:"bottom-right"}),t.push(n),t.push(new h({title:w("Selected"),id:"selected-items",tooltip:w("Manage selection"),collection:this.selectedCollection})),o.options.rearrange&&(e=new c({id:"structure-rearrange",title:w("Rearrange"),icon:"sort-by-attributes",tooltip:w("Rearrange folder contents"),url:o.options.rearrange.url}),o.rearrangeView=new p({triggerView:e,app:o,id:"structure-rearrange"}),t.push(e)),o.options.upload&&y.featureSupport.dragAndDrop()&&y.featureSupport.fileApi()&&(e=new c({id:"upload",title:w("Upload"),tooltip:w("Upload files"),icon:"upload"}),o.uploadView=new v({triggerView:e,app:o,id:"upload"}),t.push(e));var i=[];r.each(o.options.buttons,function(t){try{var e,n=new c(t);i.push(n),n.form?(t.triggerView=n,t.app=o,e=new u(t),o.forms.push(e.el)):n.on("button:click",o.buttonClickEvent,o)}catch(e){x.error("Error initializing button "+t.title+" "+e)}}),o.buttons=new l({items:i,id:"mainbuttons",app:o}),t.push(o.buttons),o.textfilter=new g({id:"filter",app:this}),t.push(o.textfilter),this.toolbar=new a({items:t})},moveItem:function(e,t,n){var o=this;s.ajax({url:this.getAjaxUrl(this.options.moveUrl),type:"POST",data:{delta:t,id:e,_authenticator:y.getAuthenticator(),subsetIds:JSON.stringify(n)},dataType:"json",success:function(e){o.clearStatus(),e.msg?o.setStatus({text:e.msg}):"success"!==e.status&&o.setStatus({text:"error moving item",type:"error"}),o.collection.pager()},error:function(){o.clearStatus(),o.setStatus({text:"error moving item",type:"error"})}})},clearStatus:function(t){var n=this.$el[0].querySelector(".fc-status-container"),o=[];t?((o=this.statusMessages.filter(function(e){return e.key===t})).forEach(function(e){try{n.removeChild(e.el)}catch(e){}}),this.statusMessages=this.statusMessages.filter(function(e){return e.key!==t})):(this.statusMessages.forEach(function(e){if(!e.fixed)try{n.removeChild(e.el),o.push(e)}catch(e){}}.bind(this)),this.statusMessages=this.statusMessages.filter(function(e){return-1===o.indexOf(e)}))},setStatus:function(e,t,n,o){if(!(o&&0<this.statusMessages.filter(function(e){return e.key===o}).length)){var i=this.statusTemplate({label:e.label||"",text:e.text,type:e.type||"warning"}),i=y.createElementFromHTML(i);t&&(t=s(t)[0],i.appendChild(t));e={el:i,fixed:n,key:o};return this.$el[0].querySelector(".fc-status-container").appendChild(e.el),this.statusMessages.push(e),e}},render:function(){var n=this;return n.$el.append(n.toolbar.render().el),n.wellView&&n.$el.find("#btn-"+n.wellView.id).after(n.wellView.render().el),n.forms.forEach(function(e){var t=s(e).attr("id");n.$el.find("#btn-"+t).after(e)}),n.$el.append(y.createElementFromHTML('<div class="fc-status-container"></div>')),n.columnsView&&n.$el.find("#btn-"+n.columnsView.id).after(n.columnsView.render().el),n.rearrangeView&&n.$el.find("#btn-"+n.rearrangeView.id).after(n.rearrangeView.render().el),n.uploadView&&n.$el.find("#btn-"+n.uploadView.id).after(n.uploadView.render().el),n.$el.append(n.tableView.render().el),n.$el.append(n.pagingView.render().el),(null!==n.options.backdropSelector?s(n.options.backdropSelector):n.$el).addClass("ui-backdrop-element"),n},getCookieSetting:function(e,t){var n;void 0===t&&(t=null);try{n=s.cookie(this.cookieSettingPrefix+e),n=s.parseJSON(n).value}catch(e){return t}return null==n?t:n},setCookieSetting:function(e,t){s.cookie(this.cookieSettingPrefix+e,JSON.stringify({value:t}))},setAllCookieSettings:function(){this.activeColumns=this.getCookieSetting(this.activeColumnsCookie,this.activeColumns);var e=this.getCookieSetting("perPage",15);"string"==typeof e&&(e=parseInt(e)),this.collection.howManyPer(e)}})}),define("mockup-patterns-structure",["jquery","underscore","pat-base","mockup-patterns-structure-url/js/views/app"],function(o,e,t,i){"use strict";return t.extend({name:"structure",trigger:".pat-structure",parser:"mockup",defaults:{urlStructure:null,vocabularyUrl:null,indexOptionsUrl:null,contextInfoUrl:null,setDefaultPageUrl:null,menuOptions:null,menuGenerator:"mockup-patterns-structure-url/js/actionmenu",backdropSelector:".plone-modal",activeColumnsCookie:"activeColumns",attributes:null,_default_attributes:["CreationDate","EffectiveDate","ExpirationDate","exclude_from_nav","getIcon","getMimeIcon","getObjSize","getURL","id","is_folderish","last_comment_date","ModificationDate","path","portal_type","review_state","Subject","Title","total_comments","UID"],activeColumns:null,_default_activeColumns:["ModificationDate","EffectiveDate","review_state"],availableColumns:null,_default_availableColumns:{id:"ID",ModificationDate:"Last modified",EffectiveDate:"Published",ExpirationDate:"Expiration",CreationDate:"Created",review_state:"Review state",Subject:"Tags",portal_type:"Type",is_folderish:"Folder",exclude_from_nav:"Excluded from navigation",getObjSize:"Object Size",last_comment_date:"Last comment date",total_comments:"Total comments"},tableRowItemAction:null,_default_tableRowItemAction:{folder:["mockup-patterns-structure-url/js/navigation","folderClicked"],other:[]},typeToViewAction:null,_default_typeToViewAction:{File:"/view",Image:"/view",Blob:"/view"},defaultPageTypes:null,_default_defaultPageTypes:["Document","Event","News Item","Collection"],collectionConstructor:"mockup-patterns-structure-url/js/collections/result",momentFormat:"L LT",rearrange:{properties:{id:"ID",sortable_title:"Title"},url:"/rearrange"},moveUrl:null,buttons:null,_default_buttons:[{tooltip:"Cut",title:"Cut",url:"/cut"},{tooltip:"Copy",title:"Copy",url:"/copy"},{tooltip:"Paste",title:"Paste",url:"/paste"},{tooltip:"Delete",title:"Delete",url:"/delete",context:"danger",icon:"trash"},{tooltip:"Workflow",title:"Workflow",url:"/workflow"},{tooltip:"Tags",title:"Tags",url:"/tags"},{tooltip:"Properties",title:"Properties",url:"/properties"},{tooltip:"Rename",title:"Rename",url:"/rename"}],datatables_options:{},upload:{uploadMultiple:!0,showTitle:!0}},init:function(){var n=this;e.each(["attributes","activeColumns","availableColumns","buttons","typeToViewAction","defaultPageTypes"],function(e){null===n.options[e]&&(n.options[e]=n.options["_default_"+e])});e.each(["tableRowItemAction"],function(e){var t=n.options[e];n.options[e]=o.extend(!1,n.options["_default_"+e],t)}),n.browsing=!0,n.options.collectionUrl=n.options.vocabularyUrl,(n.options.pattern=n).options.queryHelperAttributes=n.options.attributes,delete n.options.attributes,n.view=new i(n.options),n.$el.append(n.view.render().$el)}})}),define("mockup-patterns-structureupdater",["jquery","pat-base"],function(n,e){"use strict";return e.extend({name:"structureupdater",trigger:".template-folder_contents",parser:"mockup",defaults:{titleSelector:"",descriptionSelector:""},init:function(){n("body").on("context-info-loaded",function(e,t){this.options.titleSelector&&n(this.options.titleSelector,this.$el).html(t.object&&t.object.Title||"&nbsp;"),this.options.descriptionSelector&&n(this.options.descriptionSelector,this.$el).html(t.object&&t.object.Description||"&nbsp;")}.bind(this))}})}),require(["plone-patterns-toolbar","plone-patterns-portletmanager","mockup-patterns-querystring","mockup-patterns-structure","mockup-patterns-structureupdater"],function(){}),define("/home/_thet/data/dev/plone/buildout.coredev-60/src/plone.staticresources/src/plone/staticresources/static/plone-editor-tools.js",function(){});
//# sourceMappingURL=plone-editor-tools-compiled.min.js.map