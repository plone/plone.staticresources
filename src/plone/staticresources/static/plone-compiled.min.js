define("mockup-patterns-autotoc",["jquery","pat-base"],function(a,t){"use strict";return t.extend({name:"autotoc",trigger:".pat-autotoc",parser:"mockup",defaults:{section:"section",levels:"h1,h2,h3",IDPrefix:"autotoc-item-",classTOCName:"autotoc-nav",classSectionName:"autotoc-section",classLevelPrefixName:"autotoc-level-",classActiveName:"active",scrollDuration:"slow",scrollEasing:"swing"},init:function(){var o=this;o.$toc=a("<nav/>").addClass(o.options.classTOCName),o.options.prependTo?o.$toc.prependTo(o.options.prependTo):o.options.appendTo?o.$toc.appendTo(o.options.appendTo):o.$toc.prependTo(o.$el),o.options.className&&o.$el.addClass(o.options.className),a(o.options.section,o.$el).addClass(o.options.classSectionName);var r=o.$el.hasClass("autotabs"),n=null;a(o.options.levels,o.$el).each(function(t){var i=a(this),e=i.prop("id")?i.prop("id"):i.parents(o.options.section).prop("id");(!e||0<a("#"+e).length)&&(e=o.options.IDPrefix+o.name+"-"+t),window.location.hash==="#"+e&&(n=e),null===n&&i.hasClass(o.options.classActiveName)&&(n=e),i.data("navref",e),a("<a/>").appendTo(o.$toc).text(i.text()).attr("id",e).attr("href","#"+e).addClass(o.options.classLevelPrefixName+o.getLevel(i)).on("click",function(t,e){t.stopPropagation(),t.preventDefault(),e=e||{doScroll:!0,skipHash:!1};var n=a(this);o.$toc.children("."+o.options.classActiveName).removeClass(o.options.classActiveName),o.$el.children("."+o.options.classActiveName).removeClass(o.options.classActiveName),a(t.target).addClass(o.options.classActiveName),i.parents(o.options.section).addClass(o.options.classActiveName),!1!==e.doScroll&&o.options.scrollDuration&&i&&!r&&a("body,html").animate({scrollTop:i.offset().top},o.options.scrollDuration,o.options.scrollEasing),0!==o.$el.parents(".plone-modal").size()&&o.$el.trigger("resize.plone-modal.patterns"),a(this).trigger("clicked"),e.skipHash||window.history&&window.history.pushState&&window.history.pushState({},"","#"+n.attr("id"))}),i.data("autotoc-trigger-id",e)}),n?a("a#"+n).trigger("click",{doScroll:!0,skipHash:!0}):o.$toc.find("a").first().trigger("click",{doScroll:!1,skipHash:!0})},getLevel:function(n){var i=0;return a.each(this.options.levels.split(","),function(t,e){if(1===n.filter(e).size())return i=t+1,!1}),i}})}),define("mockup-utils",["jquery"],function(c){"use strict";function t(t){var n=this;return n.className="plone-loader",t=t||{},n.options=c.extend({},{backdrop:null,zIndex:10005},t),n.init=function(){n.$el=c("."+n.className),0===n.$el.length&&(n.$el=c("<div><div></div></div>"),n.$el.addClass(n.className).hide().appendTo("body"))},n.show=function(t){n.init(),n.$el.show();var e=n.options.zIndex;"function"==typeof e?e=Math.max(e(),10005):(e=10005,c(".plone-modal-wrapper,.plone-modal-backdrop").each(function(){e=Math.max(e,c(this).css("zIndex")||10005)}),e+=1),n.$el.css("zIndex",e),void 0===t&&(t=!0),n.options.backdrop&&(n.options.backdrop.closeOnClick=t,n.options.backdrop.closeOnEsc=t,n.options.backdrop.init(),n.options.backdrop.show())},n.hide=function(){n.init(),n.$el.hide()},n}function i(t){return void 0===t&&(t="id"),t+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var e={get:function(t){if(window.localStorage){var e=window.localStorage[t];return"string"==typeof e?JSON.parse(e):void 0}},set:function(t,e){window.localStorage&&(window.localStorage[t]=JSON.stringify(e))}};return{bool:function(t){return"string"==typeof t&&(t=c.trim(t).toLowerCase()),-1===["false",!1,"0",0,"",void 0,null].indexOf(t)},escapeHTML:function(t){return c("<div/>").text(t).html()},removeHTML:function(t){return t.replace(/<[^>]+>/gi,"")},featureSupport:{dragAndDrop:function(){return"draggable"in document.createElement("span")},fileApi:function(){return"undefined"!=typeof FileReader},history:function(){return!(!window.history||!window.history.pushState)}},generateId:i,getAuthenticator:function(){var t=c('input[name="_authenticator"]');return 0===t.length?0<(t=c('a[href*="_authenticator"]')).length?t.attr("href").split("_authenticator=")[1]:"":t.val()},getWindow:function(){var t=window;return t.parent!==window&&(t=t.parent),t},Loading:t,loading:new t,parseBodyTag:function(t){return c(/<body[^>]*>[^]*<\/body>/im.exec(t)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},QueryHelper:function(t){var l=this;return l.options=c.extend({},{pattern:null,vocabularyUrl:null,searchParam:"SearchableText",pathOperator:"plone.app.querystring.operation.string.path",attributes:["UID","Title","Description","getURL","portal_type"],batchSize:10,baseCriteria:[],sort_on:"is_folderish",sort_order:"reverse",pathDepth:1},t),l.pattern=l.options.pattern,void 0!==l.pattern&&null!==l.pattern||(l.pattern={browsing:!1,basePath:"/"}),l.options.url&&!l.options.vocabularyUrl?l.options.vocabularyUrl=l.options.url:l.pattern.vocabularyUrl&&(l.options.vocabularyUrl=l.pattern.vocabularyUrl),l.valid=Boolean(l.options.vocabularyUrl),l.getBatch=function(t){return{page:t||1,size:l.options.batchSize}},l.getCurrentPath=function(){var t,e=l.pattern;"function"==typeof(t=l.currentPath?l.currentPath:e.currentPath)&&(t=t());var n=t;return n=n||(e.basePath?e.basePath:e.options.basePath?e.options.basePath:"/")},l.getCriterias=function(t,e){void 0===e&&(e={});var n=[];return(e=c.extend({},{useBaseCriteria:!0,additionalCriterias:[]},e)).useBaseCriteria&&(n=l.options.baseCriteria.slice(0)),t&&(t+="*",n.push({i:l.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:t})),e.searchPath?n.push({i:"path",o:l.options.pathOperator,v:e.searchPath+"::"+l.options.pathDepth}):l.pattern.browsing&&n.push({i:"path",o:l.options.pathOperator,v:l.getCurrentPath()+"::"+l.options.pathDepth}),n=n.concat(e.additionalCriterias)},l.getQueryData=function(t,e){var n={query:JSON.stringify({criteria:l.getCriterias(t),sort_on:l.options.sort_on,sort_order:l.options.sort_order}),attributes:JSON.stringify(l.options.attributes)};return e&&(n.batch=JSON.stringify(l.getBatch(e))),n},l.getUrl=function(){var t=l.options.vocabularyUrl;return-1===t.indexOf("?")?t+="?":t+="&",t+c.param(l.getQueryData())},l.selectAjax=function(){return{url:l.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(t,e){return l.getQueryData(t,e)},results:function(t,e){var n=10*e<t.total;return{results:t.results,more:n}}}},l.search=function(t,e,n,i,o,r){void 0===o&&(o=!0),void 0===r&&(r="GET");var a=[];o&&(a=l.options.baseCriteria.slice(0)),a.push({i:t,o:e,v:n});var s={query:JSON.stringify({criteria:a}),attributes:JSON.stringify(l.options.attributes)};c.ajax({url:l.options.vocabularyUrl,dataType:"JSON",data:s,type:r,success:i})},l},setId:function(t,e){void 0===e&&(e="id");var n=t.attr("id");return n=void 0===n?i(e):n.replace(/\./g,"-"),t.attr("id",n),n},storage:e,createElementFromHTML:function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}}}),define("mockup-patterns-contentloader",["jquery","pat-base","pat-logger","pat-registry","mockup-utils","underscore"],function(i,t,e,o,r,a){"use strict";var s=e.getLogger("pat-contentloader");return t.extend({name:"contentloader",trigger:".pat-contentloader",parser:"mockup",defaults:{url:null,content:null,trigger:"click",target:null,template:null,dataType:"html"},init:function(){var e=this;"el"===e.options.url&&"A"===e.$el[0].tagName&&(e.options.url=e.$el.attr("href")),e.$el.removeClass("loading-content"),e.$el.removeClass("content-load-error"),"immediate"===e.options.trigger?e._load():e.$el.on(e.options.trigger,function(t){t.preventDefault(),e._load()})},_load:function(){this.$el.addClass("loading-content"),this.options.url?this.loadRemote():this.loadLocal()},loadRemote:function(){var n=this;i.ajax({url:n.options.url,dataType:n.options.dataType,success:function(t){var e;if("html"===n.options.dataType)-1!==t.indexOf("<html")&&(t=r.parseBodyTag(t)),e=i("<div>"+t+"</div>");else if(-1!==n.options.dataType.indexOf("json")){t.constructor===Array&&1===t.length&&(t=t[0]);try{e=i(a.template(n.options.template)(t))}catch(t){return n.$el.removeClass("loading-content"),n.$el.addClass("content-load-error"),void s.warn("error rendering template. pat-contentloader will not work")}}null!==n.options.content&&(e=e.find(n.options.content)),n.loadLocal(e)},error:function(){n.$el.removeClass("loading-content"),n.$el.addClass("content-load-error")}})},loadLocal:function(t){var e=this;if(!t&&null===e.options.content)return e.$el.removeClass("loading-content"),e.$el.addClass("content-load-error"),void s.warn("No selector configured");var n=e.$el;if(null!==e.options.target&&0===(n=i(e.options.target)).size())return e.$el.removeClass("loading-content"),e.$el.addClass("content-load-error"),void s.warn("No target nodes found");(t=t||i(e.options.content).clone()).length?(t.show(),n.replaceWith(t),o.scan(t)):n.empty(),e.$el.removeClass("loading-content"),e.emit("loading-done")}})}),define("mockup-patterns-cookietrigger",["pat-base"],function(t){"use strict";return t.extend({name:"cookietrigger",trigger:".pat-cookietrigger",parser:"mockup",isCookiesEnabled:function(){var t="areYourCookiesEnabled=0";document.cookie=t;var e=document.cookie;return-1===e.indexOf(t)?0:(t="areYourCookiesEnabled=1",document.cookie=t,-1===(e=document.cookie).indexOf(t)?0:(document.cookie="areYourCookiesEnabled=; expires=Thu, 01-Jan-70 00:00:01 GMT",1))},showIfCookiesDisabled:function(){this.isCookiesEnabled()?this.$el.hide():this.$el.show()},init:function(){this.showIfCookiesDisabled()}})}),define("mockup-patterns-formautofocus",["jquery","pat-base"],function(e,t,n){"use strict";return t.extend({name:"formautofocus",trigger:".pat-formautofocus",parser:"mockup",defaults:{condition:"div.error",target:"div.error :input:not(.formTabs):visible:first",always:":input:not(.formTabs):visible:first"},init:function(){var t=this;0!==e(t.options.condition,t.$el).size()?e(t.options.target,t.$el).focus():e(t.options.always,t.$el).focus()}})}),define("mockup-i18n",["jquery"],function(o){"use strict";return function(){var s=this;s.baseUrl=o("body").attr("data-i18ncatalogurl"),s.currentLanguage=o("html").attr("lang")||"en",1<s.currentLanguage.split("-").length&&(s.currentLanguage=s.currentLanguage.split("-")[0]+"_"+s.currentLanguage.split("-")[1].toUpperCase()),s.storage=null,s.catalogs={},s.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(s.storage=window.localStorage)}catch(t){}s.configure=function(t){for(var e in t)s[e]=t[e]},s._setCatalog=function(t,e,n){t in s.catalogs||(s.catalogs[t]={}),s.catalogs[t][e]=n},s._storeCatalog=function(t,e,n){var i=t+"-"+e;null!==s.storage&&null!==n&&(s.storage.setItem(i,JSON.stringify(n)),s.storage.setItem(i+"-updated",Date.now()))},s.getUrl=function(t,e){return s.baseUrl+"?domain="+t+"&language="+e},s.loadCatalog=function(e,n){if(void 0===n&&(n=s.currentLanguage),null!==s.storage){var t=e+"-"+n;if(t in s.storage&&Date.now()-parseInt(s.storage.getItem(t+"-updated"),10)<s.ttl){var i=JSON.parse(s.storage.getItem(t));return void s._setCatalog(e,n,i)}}s.baseUrl&&o.getJSON(s.getUrl(e,n),function(t){null!==t&&(s._setCatalog(e,n,t),s._storeCatalog(e,n,t))})},s.MessageFactory=function(r,a){return a=a||s.currentLanguage,function(t,e){var n,i,o;if(n=r in s.catalogs&&a in s.catalogs[r]&&t in s.catalogs[r][a]?s.catalogs[r][a][t]:t,e)for(o in e)e.hasOwnProperty(o)&&(i=new RegExp("\\$\\{"+o+"\\}","g"),n=n.replace(i,e[o]));return n}}}}),define("translate",["mockup-i18n"],function(i){"use strict";var o=null;return function(t,e){if(null===o){var n=new i;n.loadCatalog("widgets"),o=n.MessageFactory("widgets")}return o(t,e)}}),define("mockup-patterns-formunloadalert",["jquery","pat-base","translate"],function(o,t,e){"use strict";return t.extend({name:"formunloadalert",trigger:".pat-formunloadalert",parser:"mockup",_changed:!1,_suppressed:!1,defaults:{message:e("Discard changes? If you click OK, any changes you have made will be lost."),changingEvents:"change keyup paste",changingFields:"input,select,textarea,fileupload"},init:function(){var n=this;if(n.$el.is("form")){o(n.options.changingFields,n.$el).on(n.options.changingEvents,function(t){n._changed=!0});var i=n.$el.parents(".plone-modal");0!==i.size()?i.data("patternPloneModal").on("hide",function(t){var e=i.data("patternPloneModal");e&&(e._suppressHide=n._handleUnload.call(n,t))}):o(window).on("beforeunload",function(t){return n._handleUnload(t)}),n.$el.on("submit",function(t){n._suppressed=!0})}},_handleUnload:function(t){var e=this;if(e._suppressed)e._suppressed=!1;else if(e._changed){var n=e.options.message;return e._handleMsg(t,n),o(window).trigger("messageset"),n}},_handleMsg:function(t,e){(t||window.event).returnValue=e}})}),define("mockup-patterns-livesearch",["jquery","pat-base","underscore","translate"],function(a,t,s,l){"use strict";return t.extend({name:"livesearch",trigger:".pat-livesearch",parser:"mockup",timeout:null,active:!1,results:null,selectedItem:-1,resultsClass:"livesearch-results",defaults:{ajaxUrl:null,defaultSortOn:"",perPage:7,quietMillis:350,minimumInputLength:4,inputSelector:'input[type="text"]',itemTemplate:'<li class="search-result <%- state %>"><h4 class="title"><a href="<%- url %>"><%- title %></a></h4><p class="description"><%- description %></p></li>'},doSearch:function(e){var o=this;o.active=!0,o.render(),o.$el.addClass("searching");var n=o.$el.serialize();void 0===e&&(e=1);var t=function(){var t=location.search,e=t.indexOf("sort_on");if(-1===e){var n=a("#search-results");return 0<n.length?n.attr("data-default-sort"):o.options.defaultSortOn}var i=t.substring(e);return i=(i=i.split("&")[0]).split("=")[1]}();a.ajax({url:o.options.ajaxUrl+"?"+n+"&page="+e+"&perPage="+o.options.perPage+"&sort_on="+t,dataType:"json"}).done(function(t){o.results=t,o.page=e,n!==o.$el.serialize()&&o.doSearch()}).fail(function(){o.results={items:[{url:"",title:l("Error"),description:l("There was an error searching…"),state:"error",error:!1}],total:1},o.page=1}).always(function(){o.active=!1,o.selectedItem=-1,o.$el.removeClass("searching"),o.render()})},render:function(){var i=this;if(i.$results.empty(),i.active?i.$results.append(a('<li class="searching">'+l("searching…")+"</li>")):null===i.results?i.$results.append(a('<li class="no-results no-search">'+l("enter search phrase")+"</li>")):0===i.results.total?i.$results.append(a('<li class="no-results">'+l("no results found")+"</li>")):i.$results.append(a('<li class="results-summary">'+l("found")+" "+i.results.total+" "+l("results")+"</li>")),null!==i.results){var o=s.template(i.options.itemTemplate);s.each(i.results.items,function(t,e){var n=a(o(a.extend({_t:l},t)));n.attr("data-url",t.url).on("click",function(){t.error||(window.location=t.url)}),e===i.selectedItem&&n.addClass("selected"),i.$results.append(n)});var t=[];if(1<i.page){var e=a('<a href="#" class="prev">'+l("Previous")+"</a>");e.click(function(t){i.disableHiding=!0,t.preventDefault(),i.doSearch(i.page-1)}),t.push(e)}if(i.page*i.options.perPage<i.results.total){var n=a('<a href="#" class="next">'+l("Next")+"</a>");n.click(function(t){i.disableHiding=!0,t.preventDefault(),i.doSearch(i.page+1)}),t.push(n)}if(0<t.length){var r=a('<li class="load-more"><div class="page">'+i.page+"</div></li>");r.prepend(t),i.$results.append(r)}}i.position()},position:function(){var t=this;t.$el.addClass("livesearch-active");var e=t.$input.position();t.$results.width(t.$el.outerWidth()),t.$results.css({top:e.top+t.$input.outerHeight(),left:e.left}),t.$results.show()},hide:function(){this.$results.hide(),this.$el.removeClass("livesearch-active")},init:function(){var n=this;n.$input=n.$el.find(n.options.inputSelector),n.$input.off("focusout").on("focusout",function(){setTimeout(function(){n.disableHiding?(n.disableHiding=!1,n.$input.focus()):n.hide()},200)}).off("focusin").on("focusin",function(){n.onceFocused?n.$results.is(":visible")||n.render():(n.onceFocused=!0,n.$input.val().length>=n.options.minimumInputLength&&n.doSearch())}).attr("autocomplete","off").off("keyup").on("keyup",function(t){var e=t.keyCode||t.which;if(27===e)return n.$input.val(""),void n.hide();if(n.results&&n.results.items&&0<n.results.items.length){if(13===e)return void(-1!==n.selectedItem&&(window.location=n.results.items[n.selectedItem].url));if(38===e)return void(-1!==n.selectedItem&&(n.selectedItem-=1,n.render()));if(40===e)return void(n.selectedItem<n.results.items.length&&(n.selectedItem+=1,n.render()))}null!==n.timeout&&(clearTimeout(n.timeout),n.timeout=null),n.active||(n.$input.val().length>=n.options.minimumInputLength?n.timeout=setTimeout(function(){n.doSearch()},n.options.quietMillis):(n.results=null,n.render()))}),a("#sorting-options a").click(function(t){t.preventDefault(),n.onceFocused=!1}),n.$results=a('<ul class="'+n.resultsClass+'"></ul>').hide().insertAfter(n.$input)}})}),define("mockup-patterns-markspeciallinks",["pat-base","jquery"],function(t,l){"use strict";return t.extend({name:"markspeciallinks",trigger:".pat-markspeciallinks",parser:"mockup",defaults:{external_links_open_new_window:!1,mark_special_links:!0},init:function(){var t,e,n,i,o,r,a=this,s=a.$el;"string"==typeof a.options.external_links_open_new_window?t="true"===a.options.external_links_open_new_window.toLowerCase():"boolean"==typeof a.options.external_links_open_new_window&&(t=a.options.external_links_open_new_window),"string"==typeof a.options.mark_special_links?e="true"===a.options.mark_special_links.toLowerCase():"boolean"==typeof a.options.mark_special_links&&(e=a.options.mark_special_links),n=window.location.protocol+"//"+window.location.host,i=/^(mailto|ftp|news|irc|h323|sip|callto|https|feed|webcal)/,o=s,t&&o.find('a[href^="http"]:not(.link-plain):not([href^="'+n+'"])').attr("target","_blank").attr("rel","noopener"),e&&(o.find('a[href^="http:"]:not(.link-plain):not([href^="'+n+'"]):not(:has(img))').before('<i class="glyphicon link-external"></i>'),o.find('a[href]:not([href^="http:"]):not(.link-plain):not([href^="'+n+'"]):not(:has(img)):not([href^="#"])').each(function(){if(r=i.exec(l(this).attr("href"))){var t="glyphicon link-"+r[0];l(this).before('<i class="'+t+'"></i>')}}))}})}),define("mockup-patterns-backdrop",["jquery","pat-base"],function(t,e){"use strict";return e.extend({name:"backdrop",trigger:".pat-backdrop",parser:"mockup",defaults:{zIndex:null,opacity:.8,className:"plone-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var n=this;n.$backdrop=t("> ."+n.options.className,n.$el),0===n.$backdrop.size()&&(n.$backdrop=t("<div/>").hide().appendTo(n.$el).addClass(n.options.className),null!==n.options.zIndex&&n.$backdrop.css("z-index",n.options.zIndex)),!0===n.options.closeOnEsc&&t(document).on("keydown",function(t,e){n.$el.is("."+n.options.classActiveName)&&27===t.keyCode&&n.hide()}),!0===n.options.closeOnClick&&n.$backdrop.on("click",function(){n.$el.is("."+n.options.classActiveName)&&n.hide()})},show:function(){var t=this;t.$el.hasClass(t.options.classActiveName)||(t.emit("show"),t.$backdrop.css("opacity","0").show(),t.$el.addClass(t.options.classActiveName),t.$backdrop.animate({opacity:t.options.opacity},500),t.emit("shown"))},hide:function(){var t=this;t.$el.hasClass(t.options.classActiveName)&&(t.emit("hide"),t.$backdrop.animate({opacity:"0"},500).hide(),t.$el.removeClass(t.options.classActiveName),t.emit("hidden"))}})}),function(i,o){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(t,e,n){i.Backbone=o(i,n,t,e)});else if("undefined"!=typeof exports){var t=require("underscore");o(i,exports,t)}else i.Backbone=o(i,{},i._,i.jQuery||i.Zepto||i.ender||i.$)}(this,function(t,s,k,e){var n=t.Backbone,i=[],o=i.slice;s.VERSION="1.1.2",s.$=e,s.noConflict=function(){return t.Backbone=n,this},s.emulateHTTP=!1,s.emulateJSON=!1;var r=s.Events={on:function(t,e,n){return p(this,"on",t,[e,n])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this})),this},once:function(t,e,n){if(!p(this,"once",t,[e,n])||!e)return this;var i=this,o=k.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var i,o,r,a,s,l,c,u;if(!this._events||!p(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(s=0,l=(a=t?[t]:k.keys(this._events)).length;s<l;s++)if(t=a[s],r=this._events[t]){if(this._events[t]=i=[],e||n)for(c=0,u=r.length;c<u;c++)o=r[c],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!p(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&a(n,e),i&&a(i,arguments),this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var o=!e&&!n;for(var r in n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t),i)(t=i[r]).off(e,n,this),(o||k.isEmpty(t._events))&&delete this._listeningTo[r];return this}},l=/\s+/,p=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var r=n.split(l),a=0,s=r.length;a<s;a++)t[e].apply(t,[r[a]].concat(i));return!1}return!0},a=function(t,e){var n,i=-1,o=t.length,r=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,a);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,a,s);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e);return}};k.each({listenTo:"on",listenToOnce:"once"},function(o,t){r[t]=function(t,e,n){var i=this._listeningTo||(this._listeningTo={});return n||"object"!=typeof e||(n=this),(i[t._listenId||(t._listenId=k.uniqueId("l"))]=t)[o](e,n,this),this}}),r.bind=r.on,r.unbind=r.off,k.extend(s,r);var $=s.Model=function(t,e){var n=t||{};e=e||{},this.cid=k.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=k.defaults({},n,k.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};k.extend($.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return k.clone(this.attributes)},sync:function(){return s.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return k.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,o,r,a,s,l,c,u;if(null==t)return this;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n=n||{},!this._validate(o,n))return!1;for(i in r=n.unset,s=n.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=k.clone(this.attributes),this.changed={}),u=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)e=o[i],k.isEqual(u[i],e)||a.push(i),k.isEqual(c[i],e)?delete this.changed[i]:this.changed[i]=e,r?delete u[i]:u[i]=e;if(!s){a.length&&(this._pending=n);for(var p=0,d=a.length;p<d;p++)this.trigger("change:"+a[p],this,u[a[p]],n)}if(l)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,k.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,k.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!k.isEmpty(this.changed):k.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&k.clone(this.changed);var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)k.isEqual(i[o],e=t[o])||((n=n||{})[o]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return k.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?k.clone(e):{}).parse&&(e.parse=!0);var n=this,i=e.success;return e.success=function(t){if(!n.set(n.parse(t,e),e))return!1;i&&i(n,t,e),n.trigger("sync",n,t,e)},j(this,e),this.sync("read",this,e)},save:function(t,e,n){var i,o,r,a=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,n=k.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=k.extend({},a,i)),void 0===n.parse&&(n.parse=!0);var s=this,l=n.success;return n.success=function(t){s.attributes=a;var e=s.parse(t,n);if(n.wait&&(e=k.extend(i||{},e)),k.isObject(e)&&!s.set(e,n))return!1;l&&l(s,t,n),s.trigger("sync",s,t,n)},j(this,n),"patch"==(o=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=i),r=this.sync(o,this,n),i&&n.wait&&(this.attributes=a),r},destroy:function(e){e=e?k.clone(e):{};function n(){i.trigger("destroy",i,i.collection,e)}var i=this,o=e.success;if(e.success=function(t){(e.wait||i.isNew())&&n(),o&&o(i,t,e),i.isNew()||i.trigger("sync",i,t,e)},this.isNew())return e.success(),!1;j(this,e);var t=this.sync("delete",this,e);return e.wait||n(),t},url:function(){var t=k.result(this,"urlRoot")||k.result(this.collection,"url")||A();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},k.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=k.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,k.extend(e,{validationError:n})),!1)}});k.each(["keys","values","pairs","invert","pick","omit"],function(e){$.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),k[e].apply(k,t)}});var c=s.Collection=function(t,e){(e=e||{}).model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,k.extend({silent:!0},e))},T={add:!0,remove:!0,merge:!0},u={add:!0,remove:!1};k.extend(c.prototype,r,{model:$,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return s.sync.apply(this,arguments)},add:function(t,e){return this.set(t,k.extend({merge:!1},e,u))},remove:function(t,e){var n,i,o,r,a=!k.isArray(t);for(e=e||{},n=0,i=(t=a?[t]:k.clone(t)).length;n<i;n++)(r=t[n]=this.get(t[n]))&&(delete this._byId[r.id],delete this._byId[r.cid],o=this.indexOf(r),this.models.splice(o,1),this.length--,e.silent||(e.index=o,r.trigger("remove",r,this,e)),this._removeReference(r,e));return a?t[0]:t},set:function(t,e){(e=k.defaults({},e,T)).parse&&(t=this.parse(t,e));var n,i,o,r,a,s,l,c=!k.isArray(t);t=c?t?[t]:[]:k.clone(t);var u=e.at,p=this.model,d=this.comparator&&null==u&&!1!==e.sort,h=k.isString(this.comparator)?this.comparator:null,f=[],m=[],g={},v=e.add,y=e.merge,b=e.remove,w=!(d||!v||!b)&&[];for(n=0,i=t.length;n<i;n++){if(o=(a=t[n]||{})instanceof $?r=a:a[p.prototype.idAttribute||"id"],s=this.get(o))b&&(g[s.cid]=!0),y&&(a=a===r?r.attributes:a,e.parse&&(a=s.parse(a,e)),s.set(a,e),d&&!l&&s.hasChanged(h)&&(l=!0)),t[n]=s;else if(v){if(!(r=t[n]=this._prepareModel(a,e)))continue;f.push(r),this._addReference(r,e)}r=s||r,!w||!r.isNew()&&g[r.id]||w.push(r),g[r.id]=!0}if(b){for(n=0,i=this.length;n<i;++n)g[(r=this.models[n]).cid]||m.push(r);m.length&&this.remove(m,e)}if(f.length||w&&w.length)if(d&&(l=!0),this.length+=f.length,null!=u)for(n=0,i=f.length;n<i;n++)this.models.splice(u+n,0,f[n]);else{w&&(this.models.length=0);var x=w||f;for(n=0,i=x.length;n<i;n++)this.models.push(x[n])}if(l&&this.sort({silent:!0}),!e.silent){for(n=0,i=f.length;n<i;n++)(r=f[n]).trigger("add",r,this,e);(l||w&&w.length)&&this.trigger("sort",this,e)}return c?t[0]:t},reset:function(t,e){e=e||{};for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,k.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,k.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,k.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(n,t){return k.isEmpty(n)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var e in n)if(n[e]!==t.get(e))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t=t||{},k.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(k.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return k.invoke(this.models,"get",t)},fetch:function(n){void 0===(n=n?k.clone(n):{}).parse&&(n.parse=!0);var i=n.success,o=this;return n.success=function(t){var e=n.reset?"reset":"set";o[e](t,n),i&&i(o,t,n),o.trigger("sync",o,t,n)},j(this,n),this.sync("read",this,n)},create:function(t,n){if(n=n?k.clone(n):{},!(t=this._prepareModel(t,n)))return!1;n.wait||this.add(t,n);var i=this,o=n.success;return n.success=function(t,e){n.wait&&i.add(t,n),o&&o(t,e,n)},t.save(null,n),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof $)return t;var n=new(((e=e?k.clone(e):{}).collection=this).model)(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){null!=(this._byId[t.cid]=t).id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});k.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(e){c.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),k[e].apply(k,t)}});k.each(["groupBy","countBy","sortBy","indexBy"],function(i){c.prototype[i]=function(e,t){var n=k.isFunction(e)?e:function(t){return t.get(e)};return k[i](this.models,n,t)}});var d=s.View=function(t){this.cid=k.uniqueId("view"),t=t||{},k.extend(this,k.pick(t,f)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},h=/^(\S+)\s*(.*)$/,f=["model","collection","el","id","attributes","className","tagName","events"];k.extend(d.prototype,r,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof s.$?t:s.$(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},delegateEvents:function(t){if(!(t=t||k.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(k.isFunction(n)||(n=this[t[e]]),n){var i=e.match(h),o=i[1],r=i[2];n=k.bind(n,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,n):this.$el.on(o,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(k.result(this,"el"),!1);else{var t=k.extend({},k.result(this,"attributes"));this.id&&(t.id=k.result(this,"id")),this.className&&(t.class=k.result(this,"className"));var e=s.$("<"+k.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}}}),s.sync=function(t,e,n){var i=g[t];k.defaults(n=n||{},{emulateHTTP:s.emulateHTTP,emulateJSON:s.emulateJSON});var o={type:i,dataType:"json"};if(n.url||(o.url=k.result(e,"url")||A()),null!=n.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(n.attrs||e.toJSON(n))),n.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),n.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){o.type="POST",n.emulateJSON&&(o.data._method=i);var r=n.beforeSend;n.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",i),r)return r.apply(this,arguments)}}"GET"===o.type||n.emulateJSON||(o.processData=!1),"PATCH"===o.type&&m&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=s.ajax(k.extend(o,n));return e.trigger("request",e,a,n),a};var m=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),g={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};s.ajax=function(){return s.$.ajax.apply(s.$,arguments)};var v=s.Router=function(t){(t=t||{}).routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},y=/\((.*?)\)/g,b=/(\(\?)?:\w+/g,w=/\*\w+/g,x=/[\-{}\[\]+?.,\\\^$|#\s]/g;k.extend(v.prototype,r,{initialize:function(){},route:function(n,i,o){k.isRegExp(n)||(n=this._routeToRegExp(n)),k.isFunction(i)&&(o=i,i=""),o=o||this[i];var r=this;return s.history.route(n,function(t){var e=r._extractParameters(n,t);r.execute(o,e),r.trigger.apply(r,["route:"+i].concat(e)),r.trigger("route",i,e),s.history.trigger("route",r,i,e)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,e){return s.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=k.result(this,"routes");for(var t,e=k.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(x,"\\$&").replace(y,"(?:$1)?").replace(b,function(t,e){return e?t:"([^/?]+)"}).replace(w,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return k.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var _=s.History=function(){this.handlers=[],k.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},C=/^[#\/]|\s+$/g,S=/^\/+|\/+$/g,N=/msie [\w.]+/,E=/\/$/,O=/#.*$/;_.started=!1,k.extend(_.prototype,r,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(E,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(C,"")},start:function(t){if(_.started)throw new Error("Backbone.history has already been started");_.started=!0,this.options=k.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),n=document.documentMode,i=N.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);if(this.root=("/"+this.root+"/").replace(S,"/"),i&&this._wantsHashChange){var o=s.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(e)}this._hasPushState?s.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?s.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var r=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&r.hash&&(this.fragment=this.getHash().replace(C,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){s.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),_.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),k.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(t,e){if(!_.started)return!1;e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(O,""),this.fragment!==t){if(""===(this.fragment=t)&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),s.history=new _;$.extend=c.extend=v.extend=d.extend=_.extend=function(t,e){var n,i=this;n=t&&k.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},k.extend(n,i,e);function o(){this.constructor=n}return o.prototype=i.prototype,n.prototype=new o,t&&k.extend(n.prototype,t),n.__super__=i.prototype,n};var A=function(){throw new Error('A "url" property or function must be specified')},j=function(e,n){var i=n.error;n.error=function(t){i&&i(e,t,n),e.trigger("error",e,t,n)}};return s}),define("mockup-router",["underscore","backbone"],function(s,t){"use strict";function l(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}return new(t.Router.extend({actions:[],redirects:{},addRoute:function(t,e,n,i,o,r){void 0===s.findWhere(this.patterns,{patternName:t,id:e})&&this.actions.push({patternName:t,id:e,callback:n,context:i,pathExp:o,expReplace:r});var a=new RegExp("("+l(t)+":"+l(e)+")");this.route(a,"handleRoute")},addRedirect:function(t,e){this.redirects[t]=e},handleRoute:function(t){var e=t.split(":"),n=e[0],i=e[1],o=s.findWhere(this.actions,{patternName:n,id:i});o&&o.callback.call(o.context)},redirect:function(){var n,i,o,r=window.parent.location.pathname;if(s.some(this.actions,function(t){if(t.pathExp&&(i=new RegExp(t.pathExp),r.match(i))){o="!/"+t.patternName+":"+t.id;var e="";return t.expReplace&&(e=t.expReplace),n=r.replace(i,e),!0}},this),void 0===o)for(var t in this.redirects)if(i=new RegExp(t),r.match(i)){o="!/"+this.redirects[t],n=r.replace(i,"");break}void 0!==o&&this._changeLocation.apply(this,[n,o])},_changeLocation:function(t,e){window.parent.location.hash=e,window.parent.location.pathname=t},start:function(){t.history.start()},reset:function(){this.actions=[]}}))}),function(n){"function"==typeof define&&define.amd?define("jquery.form",["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(t,e){return void 0===e&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),n(e),e}:n(jQuery)}(function(M){"use strict";var h=/\r?\n/g,$={};$.fileapi=void 0!==M('<input type="file">').get(0).files,$.formdata=void 0!==window.FormData;var P=!!M.fn.prop;function r(t){var e=t.data;t.isDefaultPrevented()||(t.preventDefault(),M(t.target).closest("form").ajaxSubmit(e))}function a(t){var e=t.target,n=M(e);if(!n.is("[type=submit],[type=image]")){var i=n.closest("[type=submit]");if(0===i.length)return;e=i[0]}var o=e.form;if("image"===(o.clk=e).type)if(void 0!==t.offsetX)o.clk_x=t.offsetX,o.clk_y=t.offsetY;else if("function"==typeof M.fn.offset){var r=n.offset();o.clk_x=t.pageX-r.left,o.clk_y=t.pageY-r.top}else o.clk_x=t.pageX-e.offsetLeft,o.clk_y=t.pageY-e.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function L(){if(M.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}M.fn.attr2=function(){if(!P)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},M.fn.ajaxSubmit=function(A,t,e,n){if(!this.length)return L("ajaxSubmit: skipping submit process - no element selected"),this;var j,i,o,D=this;"function"==typeof A?A={success:A}:"string"==typeof A||!1===A&&0<arguments.length?(A={url:A,data:t,dataType:e},"function"==typeof n&&(A.success=n)):void 0===A&&(A={}),j=A.method||A.type||this.attr2("method"),o=(o=(o="string"==typeof(i=A.url||this.attr2("action"))?M.trim(i):"")||window.location.href||"")&&(o.match(/^([^#]+)/)||[])[1],A=M.extend(!0,{url:o,success:M.ajaxSettings.success,type:j||M.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},A);var r={};if(this.trigger("form-pre-serialize",[this,A,r]),r.veto)return L("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(A.beforeSerialize&&!1===A.beforeSerialize(this,A))return L("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var a=A.traditional;void 0===a&&(a=M.ajaxSettings.traditional);var s,I=[],l=this.formToArray(A.semantic,I,A.filtering);if(A.data){var c=M.isFunction(A.data)?A.data(l):A.data;A.extraData=c,s=M.param(c,a)}if(A.beforeSubmit&&!1===A.beforeSubmit(l,this,A))return L("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[l,this,A,r]),r.veto)return L("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var u=M.param(l,a);s&&(u=u?u+"&"+s:s),"GET"===A.type.toUpperCase()?(A.url+=(0<=A.url.indexOf("?")?"&":"?")+u,A.data=null):A.data=u;var p=[];if(A.resetForm&&p.push(function(){D.resetForm()}),A.clearForm&&p.push(function(){D.clearForm(A.includeHidden)}),!A.dataType&&A.target){var d=A.success||function(){};p.push(function(t,e,n){var i=arguments,o=A.replaceTarget?"replaceWith":"html";M(A.target)[o](t).each(function(){d.apply(this,i)})})}else A.success&&(M.isArray(A.success)?M.merge(p,A.success):p.push(A.success));if(A.success=function(t,e,n){for(var i=A.context||this,o=0,r=p.length;o<r;o++)p[o].apply(i,[t,e,n||D,D])},A.error){var h=A.error;A.error=function(t,e,n){var i=A.context||this;h.apply(i,[t,e,n,D])}}if(A.complete){var f=A.complete;A.complete=function(t,e){var n=A.context||this;f.apply(n,[t,e,D])}}var m=0<M("input[type=file]:enabled",this).filter(function(){return""!==M(this).val()}).length,g="multipart/form-data",v=D.attr("enctype")===g||D.attr("encoding")===g,y=$.fileapi&&$.formdata;L("fileAPI :"+y);var b,w=(m||v)&&!y;!1!==A.iframe&&(A.iframe||w)?A.closeKeepAlive?M.get(A.closeKeepAlive,function(){b=k(l)}):b=k(l):b=(m||v)&&y?function(t){for(var n=new FormData,e=0;e<t.length;e++)n.append(t[e].name,t[e].value);if(A.extraData){var i=function(t){var e,n,i=M.param(t,A.traditional).split("&"),o=i.length,r=[];for(e=0;e<o;e++)i[e]=i[e].replace(/\+/g," "),n=i[e].split("="),r.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return r}(A.extraData);for(e=0;e<i.length;e++)i[e]&&n.append(i[e][0],i[e][1])}A.data=null;var o=M.extend(!0,{},M.ajaxSettings,A,{contentType:!1,processData:!1,cache:!1,type:j||"POST"});A.uploadProgress&&(o.xhr=function(){var t=M.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(t){var e=0,n=t.loaded||t.position,i=t.total;t.lengthComputable&&(e=Math.ceil(n/i*100)),A.uploadProgress(t,n,i,e)},!1),t});o.data=null;var r=o.beforeSend;return o.beforeSend=function(t,e){A.formData?e.data=A.formData:e.data=n,r&&r.call(this,t,e)},M.ajax(o)}(l):M.ajax(A),D.removeData("jqxhr").data("jqxhr",b);for(var x=0;x<I.length;x++)I[x]=null;return this.trigger("form-submit-notify",[this,A]),this;function k(t){var e,n,u,p,r,d,h,f,i,o,m,g,a=D[0],v=M.Deferred();if(v.abort=function(t){f.abort(t)},t)for(n=0;n<I.length;n++)e=M(I[n]),P?e.prop("disabled",!1):e.removeAttr("disabled");(u=M.extend(!0,{},M.ajaxSettings,A)).context=u.context||u,r="jqFormIO"+(new Date).getTime();var s=a.ownerDocument,l=D.closest("body");if(u.iframeTarget?(o=(d=M(u.iframeTarget,s)).attr2("name"))?r=o:d.attr2("name",r):(d=M('<iframe name="'+r+'" src="'+u.iframeSrc+'" />',s)).css({position:"absolute",top:"-1000px",left:"-1000px"}),h=d[0],f={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var e="timeout"===t?"timeout":"aborted";L("aborting upload... "+e),this.aborted=1;try{h.contentWindow.document.execCommand&&h.contentWindow.document.execCommand("Stop")}catch(t){}d.attr("src",u.iframeSrc),f.error=e,u.error&&u.error.call(u.context,f,e,t),p&&M.event.trigger("ajaxError",[f,u,e]),u.complete&&u.complete.call(u.context,f,e)}},(p=u.global)&&0==M.active++&&M.event.trigger("ajaxStart"),p&&M.event.trigger("ajaxSend",[f,u]),u.beforeSend&&!1===u.beforeSend.call(u.context,f,u))return u.global&&M.active--,v.reject(),v;if(f.aborted)return v.reject(),v;(i=a.clk)&&(o=i.name)&&!i.disabled&&(u.extraData=u.extraData||{},u.extraData[o]=i.value,"image"===i.type&&(u.extraData[o+".x"]=a.clk_x,u.extraData[o+".y"]=a.clk_y));var y=1,b=2;function w(e){var n=null;try{e.contentWindow&&(n=e.contentWindow.document)}catch(t){L("cannot get iframe.contentWindow document: "+t)}if(n)return n;try{n=e.contentDocument?e.contentDocument:e.document}catch(t){L("cannot get iframe.contentDocument: "+t),n=e.document}return n}var c=M("meta[name=csrf-token]").attr("content"),x=M("meta[name=csrf-param]").attr("content");function k(){var t=D.attr2("target"),e=D.attr2("action"),n=D.attr("enctype")||D.attr("encoding")||"multipart/form-data";a.setAttribute("target",r),j&&!/post/i.test(j)||a.setAttribute("method","POST"),e!==u.url&&a.setAttribute("action",u.url),u.skipEncodingOverride||j&&!/post/i.test(j)||D.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(g=setTimeout(function(){m=!0,S(y)},u.timeout));var i=[];try{if(u.extraData)for(var o in u.extraData)u.extraData.hasOwnProperty(o)&&(M.isPlainObject(u.extraData[o])&&u.extraData[o].hasOwnProperty("name")&&u.extraData[o].hasOwnProperty("value")?i.push(M('<input type="hidden" name="'+u.extraData[o].name+'">',s).val(u.extraData[o].value).appendTo(a)[0]):i.push(M('<input type="hidden" name="'+o+'">',s).val(u.extraData[o]).appendTo(a)[0]));u.iframeTarget||d.appendTo(l),h.attachEvent?h.attachEvent("onload",S):h.addEventListener("load",S,!1),setTimeout(function t(){try{var e=w(h).readyState;L("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(t){L("Server abort: ",t," (",t.name,")"),S(b),g&&clearTimeout(g),g=void 0}},15);try{a.submit()}catch(t){document.createElement("form").submit.apply(a)}}finally{a.setAttribute("action",e),a.setAttribute("enctype",n),t?a.setAttribute("target",t):D.removeAttr("target"),M(i).remove()}}x&&c&&(u.extraData=u.extraData||{},u.extraData[x]=c),u.forceSync?k():setTimeout(k,10);var $,T,_,C=50;function S(t){if(!f.aborted&&!_){if((T=w(h))||(L("cannot access response document"),t=b),t===y&&f)return f.abort("timeout"),void v.reject(f,"timeout");if(t===b&&f)return f.abort("server abort"),void v.reject(f,"error","server abort");if(T&&T.location.href!==u.iframeSrc||m){h.detachEvent?h.detachEvent("onload",S):h.removeEventListener("load",S,!1);var e,n="success";try{if(m)throw"timeout";var i="xml"===u.dataType||T.XMLDocument||M.isXMLDoc(T);if(L("isXml="+i),!i&&window.opera&&(null===T.body||!T.body.innerHTML)&&--C)return L("requeing onLoad callback, DOM not available"),void setTimeout(S,250);var o=T.body?T.body:T.documentElement;f.responseText=o?o.innerHTML:null,f.responseXML=T.XMLDocument?T.XMLDocument:T,i&&(u.dataType="xml"),f.getResponseHeader=function(t){return{"content-type":u.dataType}[t.toLowerCase()]},o&&(f.status=Number(o.getAttribute("status"))||f.status,f.statusText=o.getAttribute("statusText")||f.statusText);var r=(u.dataType||"").toLowerCase(),a=/(json|script|text)/.test(r);if(a||u.textarea){var s=T.getElementsByTagName("textarea")[0];if(s)f.responseText=s.value,f.status=Number(s.getAttribute("status"))||f.status,f.statusText=s.getAttribute("statusText")||f.statusText;else if(a){var l=T.getElementsByTagName("pre")[0],c=T.getElementsByTagName("body")[0];l?f.responseText=l.textContent?l.textContent:l.innerText:c&&(f.responseText=c.textContent?c.textContent:c.innerText)}}else"xml"===r&&!f.responseXML&&f.responseText&&(f.responseXML=N(f.responseText));try{$=O(f,r,u)}catch(t){n="parsererror",f.error=e=t||n}}catch(t){L("error caught: ",t),n="error",f.error=e=t||n}f.aborted&&(L("upload aborted"),n=null),f.status&&(n=200<=f.status&&f.status<300||304===f.status?"success":"error"),"success"===n?(u.success&&u.success.call(u.context,$,"success",f),v.resolve(f.responseText,"success",f),p&&M.event.trigger("ajaxSuccess",[f,u])):n&&(void 0===e&&(e=f.statusText),u.error&&u.error.call(u.context,f,n,e),v.reject(f,"error",e),p&&M.event.trigger("ajaxError",[f,u,e])),p&&M.event.trigger("ajaxComplete",[f,u]),p&&!--M.active&&M.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,f,n),_=!0,u.timeout&&clearTimeout(g),setTimeout(function(){u.iframeTarget?d.attr("src",u.iframeSrc):d.remove(),f.responseXML=null},100)}}}var N=M.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!==e.documentElement.nodeName?e:null},E=M.parseJSON||function(t){return window.eval("("+t+")")},O=function(t,e,n){var i=t.getResponseHeader("content-type")||"",o=("xml"===e||!e)&&0<=i.indexOf("xml"),r=o?t.responseXML:t.responseText;return o&&"parsererror"===r.documentElement.nodeName&&M.error&&M.error("parsererror"),n&&n.dataFilter&&(r=n.dataFilter(r,e)),"string"==typeof r&&(("json"===e||!e)&&0<=i.indexOf("json")?r=E(r):("script"===e||!e)&&0<=i.indexOf("javascript")&&M.globalEval(r)),r};return v}},M.fn.ajaxForm=function(t,e,n,i){if(("string"==typeof t||!1===t&&0<arguments.length)&&(t={url:t,data:e,dataType:n},"function"==typeof i&&(t.success=i)),(t=t||{}).delegation=t.delegation&&M.isFunction(M.fn.on),t.delegation||0!==this.length)return t.delegation?(M(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,a),this):this.ajaxFormUnbind().on("submit.form-plugin",t,r).on("click.form-plugin",t,a);var o={s:this.selector,c:this.context};return!M.isReady&&o.s?(L("DOM not ready, queuing ajaxForm"),M(function(){M(o.s,o.c).ajaxForm(t)})):L("terminating; zero elements found by selector"+(M.isReady?"":" (DOM not ready)")),this},M.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},M.fn.formToArray=function(t,e,n){var i=[];if(0===this.length)return i;var o,r,a,s,l,c,u,p,d=this[0],h=this.attr("id"),f=t||void 0===d.elements?d.getElementsByTagName("*"):d.elements;if(f=f&&M.makeArray(f),h&&(t||/(Edge|Trident)\//.test(navigator.userAgent))&&(o=M(':input[form="'+h+'"]').get()).length&&(f=(f||[]).concat(o)),!f||!f.length)return i;for(M.isFunction(n)&&(f=M.map(f,n)),r=0,u=f.length;r<u;r++)if((s=(c=f[r]).name)&&!c.disabled)if(t&&d.clk&&"image"===c.type)d.clk===c&&(i.push({name:s,value:M(c).val(),type:c.type}),i.push({name:s+".x",value:d.clk_x},{name:s+".y",value:d.clk_y}));else if((l=M.fieldValue(c,!0))&&l.constructor===Array)for(e&&e.push(c),a=0,p=l.length;a<p;a++)i.push({name:s,value:l[a]});else if($.fileapi&&"file"===c.type){e&&e.push(c);var m=c.files;if(m.length)for(a=0;a<m.length;a++)i.push({name:s,value:m[a],type:c.type});else i.push({name:s,value:"",type:c.type})}else null!=l&&(e&&e.push(c),i.push({name:s,value:l,type:c.type,required:c.required}));if(!t&&d.clk){var g=M(d.clk),v=g[0];(s=v.name)&&!v.disabled&&"image"===v.type&&(i.push({name:s,value:g.val()}),i.push({name:s+".x",value:d.clk_x},{name:s+".y",value:d.clk_y}))}return i},M.fn.formSerialize=function(t){return M.param(this.formToArray(t))},M.fn.fieldSerialize=function(o){var r=[];return this.each(function(){var t=this.name;if(t){var e=M.fieldValue(this,o);if(e&&e.constructor===Array)for(var n=0,i=e.length;n<i;n++)r.push({name:t,value:e[n]});else null!=e&&r.push({name:this.name,value:e})}}),M.param(r)},M.fn.fieldValue=function(t){for(var e=[],n=0,i=this.length;n<i;n++){var o=this[n],r=M.fieldValue(o,t);null==r||r.constructor===Array&&!r.length||(r.constructor===Array?M.merge(e,r):e.push(r))}return e},M.fieldValue=function(t,e){var n=t.name,i=t.type,o=t.tagName.toLowerCase();if(void 0===e&&(e=!0),e&&(!n||t.disabled||"reset"===i||"button"===i||("checkbox"===i||"radio"===i)&&!t.checked||("submit"===i||"image"===i)&&t.form&&t.form.clk!==t||"select"===o&&-1===t.selectedIndex))return null;if("select"!==o)return M(t).val().replace(h,"\r\n");var r=t.selectedIndex;if(r<0)return null;for(var a=[],s=t.options,l="select-one"===i,c=l?r+1:s.length,u=l?r:0;u<c;u++){var p=s[u];if(p.selected&&!p.disabled){var d=p.value;if(d=d||(p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),l)return d;a.push(d)}}return a},M.fn.clearForm=function(t){return this.each(function(){M("input,select,textarea",this).clearFields(t)})},M.fn.clearFields=M.fn.clearInputs=function(n){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,e=this.tagName.toLowerCase();i.test(t)||"textarea"===e?this.value="":"checkbox"===t||"radio"===t?this.checked=!1:"select"===e?this.selectedIndex=-1:"file"===t?/MSIE/.test(navigator.userAgent)?M(this).replaceWith(M(this).clone(!0)):M(this).val(""):n&&(!0===n&&/hidden/.test(t)||"string"==typeof n&&M(this).is(n))&&(this.value="")})},M.fn.resetForm=function(){return this.each(function(){var e=M(this),t=this.tagName.toLowerCase();switch(t){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var n=e.parents("select");return n.length&&n[0].multiple?"option"===t?this.selected=this.defaultSelected:e.find("option").resetForm():n.resetForm(),!0;case"select":return e.find("option").each(function(t){if(this.selected=this.defaultSelected,this.defaultSelected&&!e[0].multiple)return e[0].selectedIndex=t,!1}),!0;case"label":var i=M(e.attr("for")),o=e.find("input,select,textarea");return i[0]&&o.unshift(i[0]),o.resetForm(),!0;case"form":return"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset(),!0;default:return e.find("form,input,label,select,textarea").resetForm(),!0}})},M.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},M.fn.selected=function(n){return void 0===n&&(n=!0),this.each(function(){var t=this.type;if("checkbox"===t||"radio"===t)this.checked=n;else if("option"===this.tagName.toLowerCase()){var e=M(this).parent("select");n&&e[0]&&"select-one"===e[0].type&&e.find("option").selected(!1),this.selected=n}})},M.fn.ajaxSubmit.debug=!1}),define("mockup-patterns-modal",["jquery","underscore","pat-base","mockup-patterns-backdrop","pat-registry","mockup-router","mockup-utils","translate","jquery.form"],function(p,l,t,i,o,e,r,a){"use strict";return t.extend({name:"plone-modal",trigger:".pat-plone-modal",parser:"mockup",createModal:null,$model:null,defaults:{width:"",height:"",margin:20,position:"center middle",triggers:[],zIndexSelector:".plone-modal-wrapper,.plone-modal-backdrop",backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.85",className:"plone-modal-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"], .formControls > button',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:".portalMessage, #global_statusmessage",onRender:null,templateOptions:{className:"plone-modal fade",classDialog:"plone-modal-dialog",classModal:"plone-modal-content",classHeaderName:"plone-modal-header",classBodyName:"plone-modal-body",classFooterName:"plone-modal-footer",classWrapperName:"plone-modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"in",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %>">    <div class="<%= options.classModal %>">      <div class="<%= options.classHeaderName %>">        <a class="plone-modal-close">&times;</a>        <% if (title) { %><h2 class="plone-modal-title"><%= title %></h2><% } %>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <% if (buttons) { %><%= buttons %><% } %>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",disableAjaxFormSubmit:!1,target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:5e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error, .alert-danger",formFieldError:".field.error",onSuccess:null,onError:null,onFormError:null,onTimeout:null,redirectOnResponse:!1,redirectToUrl:function(t,e,n){var i;return(i=/<body.*data-view-url=[\"'](.*)[\"'].*/im.exec(e))&&1<i.length?i[1].split('"')[0]:(i=/<body.*data-base-url=[\"'](.*)[\"'].*/im.exec(e))&&1<i.length?i[1].split('"')[0]:(i=/<base.*href=[\"'](.*)[\"'].*/im.exec(e))&&1<i.length?i[1]:""}},routerOptions:{id:null,pathExp:null},form:function(t){var a=this,s=a.$modal;a.options.automaticallyAddButtonActions&&(t[a.options.buttons]={}),t.a={},p.each(t,function(t,n){var e=l.union(l.keys(a.options.actionOptions),["templateOptions"]),i=p.extend(!0,{},a.options.actionOptions,l.pick(n,e));n.templateOptions=p.extend(!0,n.templateOptions,a.options.templateOptions);var o=l.union(l.keys(a.options.actionOptions),["actions","actionOptions"]),r=p.extend(!0,l.omit(n,o),a.options);p(t,p("."+n.templateOptions.classBodyName,s)).each(function(t){var e=p(this);e.on(i.eventType,function(t){t.stopPropagation(),t.preventDefault(),a.loading.show(!1),null!==i.modalFunction?a[i.modalFunction]():p.nodeName(e[0],"input")||p.nodeName(e[0],"button")||!0===n.isForm?a.options.handleFormAction.apply(a,[e,i,r]):null===n.ajaxUrl&&!p.nodeName(e[0],"a")||a.options.handleLinkAction.apply(a,[e,i,r])})})})},handleFormAction:function(o,r,a){var t,e,s=this,n={};if(n[o.attr("name")]=o.attr("value"),t=p.nodeName(o[0],"form")?o:o.parents("form:not(.disableAutoSubmit)"),e=null!==r.ajaxUrl?"function"==typeof r.ajaxUrl?r.ajaxUrl.apply(s,[o,r]):r.ajaxUrl:o.parents("form").attr("action"),r.disableAjaxFormSubmit)return o.attr("name")&&o.attr("value")&&t.append(p('<input type="hidden" name="'+o.attr("name")+'" value="'+o.attr("value")+'" />')),void t.trigger("submit");t.on("submit",function(t){t.preventDefault()}),t.trigger("submit"),s.loading.show(!1),t.ajaxSubmit({timeout:r.timeout,data:n,url:e,error:function(t,e,n){s.loading.hide(),"timeout"===e&&r.onTimeout?r.onTimeout.apply(s,t,n):r.onError?"string"==typeof r.onError?window[r.onError](t,e,n):r.onError(t,e,n):console.log("error happened",e," do something"),s.emit("formActionError",[t,e,n])},success:function(t,e,n,i){s.loading.hide(),0===p(r.error,t).size()&&0===p(r.formFieldError,t).size()?!0!==r.redirectOnResponse?(r.onSuccess&&("string"==typeof r.onSuccess?window[r.onSuccess](s,t,e,n,i):r.onSuccess(s,t,e,n,i)),!0===r.displayInModal?s.redraw(t,a):(o.trigger("destroy.plone-modal.patterns"),r.reloadWindowOnClose&&s.reloadWindow()),s.emit("formActionSuccess",[t,e,n,i])):"function"==typeof r.redirectToUrl?window.parent.location.href=r.redirectToUrl.apply(s,[o,t,r]):window.parent.location.href=r.redirectToUrl:r.onFormError?"string"==typeof r.onFormError?window[r.onFormError](s,t,e,n,i):r.onFormError(s,t,e,n,i):s.redraw(t,a)}})},handleLinkAction:function(t,i,o){var e,r=this;t.hasClass("pat-plone-modal")||(e=i.ajaxUrl?"function"==typeof i.ajaxUrl?i.ajaxUrl.apply(r,[t,i]):i.ajaxUrl:t.attr("href"),!1!==i.displayInModal?p.ajax({url:e}).fail(function(t,e,n){"timeout"===e&&i.onTimeout?i.onTimeout(r.$modal,t,n):i.onError?i.onError(t,e,n):window.alert(a("There was an error loading modal.")),r.emit("linkActionError",[t,e,n])}).done(function(t,e,n){r.redraw(t,o),i.onSuccess&&("string"==typeof i.onSuccess?window[i.onSuccess](r,t,e,n):i.onSuccess(r,t,e,n)),r.emit("linkActionSuccess",[t,e,n])}).always(function(){r.loading.hide()}):"_blank"===t.attr("target")?(window.open(e,"_blank"),r.loading.hide()):window.location=e)},render:function(t){var n=this;if(n.emit("before-render"),n.$raw){var e=n.$raw.clone();p("input:checked",e).each(function(){this.setAttribute&&this.setAttribute("checked","checked")});var i={title:"",prepend:"<div />",content:"",buttons:'<div class="pattern-modal-buttons"></div>',options:t.templateOptions};if(null===t.title){var o=p(t.titleSelector,e);i.title=o.html(),p(t.titleSelector,e).remove()}else i.title=t.title;t.prependContent&&(i.prepend=p("<div />").append(p(t.prependContent,e).clone()).html(),p(t.prependContent,e).remove()),t.content?i.content=p(t.content,e).html():i.content=e.html(),n.$modal=p(l.template(n.options.templateOptions.template)(i)),n.$modalDialog=p("> ."+n.options.templateOptions.classDialog,n.$modal),n.$modalContent=p("> ."+n.options.templateOptions.classModal,n.$modalDialog),p("form",n.$modal).on("keydown",function(t){13===t.keyCode&&"TEXTAREA"!==t.target.nodeName&&(t.preventDefault(),p("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click"))}),p(t.buttons,n.$modal).each(function(){var e=p(this);e.on("click",function(t){t.stopPropagation(),t.preventDefault()}).clone().appendTo(p(".pattern-modal-buttons",n.$modal)).off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),e.trigger("click")}),e.hide()}),n.emit("before-events-setup"),p(".plone-modal-header > a.plone-modal-close, .plone-modal-footer > a.plone-modal-close",n.$modal).off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),p(t.target).trigger("destroy.plone-modal.patterns")}),t.form&&t.form.apply(n,[t.actions]),n.$modal.addClass(n.options.templateOptions.className).on("destroy.plone-modal.patterns",function(t){t.stopPropagation(),n.hide()}).on("resize.plone-modal.patterns",function(t){t.stopPropagation(),t.preventDefault(),n.positionModal()}).appendTo(n.$wrapperInner),n.options.loadLinksWithinModal&&n.$modal.on("click",function(t){t.stopPropagation(),p.nodeName(t.target,"a")&&t.preventDefault(),n.$modal.trigger("modal-click")}),n.$modal.data("pattern-"+n.name,n),n.emit("after-render"),t.onRender&&("string"==typeof t.onRender?window[t.onRender](n):t.onRender(n))}}},reloadWindow:function(){window.parent.location.reload()},init:function(){var o=this;o.options.loadLinksWithinModal=p.parseJSON(o.options.loadLinksWithinModal),null!==o.options.routerOptions.id&&e.addRoute("modal",o.options.routerOptions.id,function(){this.show()},o,o.options.routerOptions.pathExp,o.options.routerOptions.expReplace),!0===o.options.backdropOptions.closeOnEsc&&p(document).on("keydown",function(t,e){o.$el.is("."+o.options.templateOptions.classActiveName)&&27===t.keyCode&&o.hide()}),p(window.parent).resize(function(){o.positionModal()}),o.options.triggers&&p.each(o.options.triggers,function(t,e){var n=e.substring(0,e.indexOf(" ")),i=e.substring(e.indexOf(" "),e.length);p(i||o.$el).on(n,function(t){t.stopPropagation(),t.preventDefault(),o.show()})}),o.$el.is("a")&&(o.$el.attr("href")&&!o.options.image&&(o.options.target||"#"!==o.$el.attr("href").substr(0,1)||(o.options.target=o.$el.attr("href"),o.options.content=""),o.options.ajaxUrl||"#"===o.$el.attr("href").substr(0,1)||(o.options.ajaxUrl=function(){return o.$el.attr("href")})),o.$el.on("click",function(t){t.stopPropagation(),t.preventDefault(),o.show()})),o.initModal()},createAjaxModal:function(){var o=this;o.emit("before-ajax"),o.loading.show();var t=o.options.ajaxUrl;"function"==typeof t&&(t=t.apply(o,[o.options])),o.ajaxXHR=p.ajax({url:t,type:o.options.ajaxType}).done(function(t,e,n){o.ajaxXHR=void 0,o.$raw=p("<div />").append(p(r.parseBodyTag(t))),o.emit("after-ajax",o,e,n),o._show()}).fail(function(t,e,n){var i=o.options.actionOptions;"timeout"===e&&i.onTimeout?i.onTimeout(o.$modal,t,n):i.onError?i.onError(t,e,n):(window.alert(a("There was an error loading modal.")),o.hide()),o.emit("linkActionError",[t,e,n])}).always(function(){o.loading.hide()})},createTargetModal:function(){this.$raw=p(this.options.target).clone(),this._show()},createBasicModal:function(){this.$raw=p("<div/>").html(this.$el.clone()),this._show()},createHtmlModal:function(){var t=p(this.options.html);this.$raw=t,this._show()},createImageModal:function(){var t=this;t.$wrapper.addClass("image-modal");var e=t.$el.attr("href"),n=t.$el.attr("data-modal-srcset")||"",i=p.trim(t.$el.context.innerText)||"Image";t.$raw=p("<div><h1>"+i+'</h1><div id="content"><div class="modal-image"><img src="'+e+'" srcset="'+n+'" /></div></div></div>'),t._show()},initModal:function(){var t=this;t.options.ajaxUrl?t.createModal=t.createAjaxModal:t.options.target?t.createModal=t.createTargetModal:t.options.html?t.createModal=t.createHtmlModal:t.options.image?t.createModal=t.createImageModal:t.createModal=t.createBasicModal},findPosition:function(t,e,n,i,o,r,a){var s,l,c,u,p={};return u=c=s=c="auto","left"===t?(c=n+"px",r<i&&(c="0px"),p.left=c):"right"===t?(u=n+"px",r<i&&(u="0px"),p.right=u,p.left="auto"):(c=r/2-i/2-n+"px",r<i&&(c="0px"),p.left=c),"top"===e?(s=n+"px",a<o&&(s="0px"),p.top=s):"bottom"===e?(l=n+"px",a<o&&(l="0px"),p.bottom=l,p.top="auto"):(s=a/2-o/2-n+"px",a<o&&(s="0px"),p.top=s),p},modalInitialized:function(){return null!==this.$modal&&void 0!==this.$modal},positionModal:function(){var t=this;if(t.modalInitialized()){t.$modal.removeAttr("style"),t.$wrapper.parent().is("body")&&t.$wrapper.height(p(window.parent).height());var e="function"==typeof t.options.margin?t.options.margin():t.options.margin;t.$modal.css({position:"absolute",padding:e}),t.$modalDialog.css({margin:"0",padding:"0",width:t.options.width,height:t.options.height}),t.$modalContent.css({width:t.options.width});var n=t.options.position.split(" "),i=n[0],o=n[1],r=t.$modalDialog.outerWidth(!0),a=t.$modalDialog.outerHeight(!0),s=t.$wrapperInner.width(),l=t.$wrapperInner.height(),c=t.findPosition(i,o,e,r,a,s,l);for(var u in c)t.$modalDialog.css(u,c[u])}},render:function(t){this.emit("render"),this.options.render.apply(this,[t]),this.emit("rendered")},show:function(){this.backdrop=this.createBackdrop(),this.createModal()},createBackdrop:function(){var e=this,n=new i(e.$el.parents(e.options.backdrop),e.options.backdropOptions),t=1041;return p(e.options.zIndexSelector).each(function(){t=Math.max(t,parseInt(p(this).css("zIndex"))+1||1041)}),e.$wrapper=p("<div/>").hide().css({"z-index":t,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(e.options.templateOptions.classWrapperName).insertBefore(n.$backdrop).on("click",function(t){e.options.backdropOptions.closeOnClick&&(t.stopPropagation(),t.preventDefault(),n.hide())}),n.on("hidden",function(t){void 0!==e.$modal&&e.$modal.hasClass(e.options.templateOptions.classActiveName)&&e.hide()}),e.loading=new r.Loading({backdrop:n}),e.$wrapperInner=p("<div/>").addClass(e.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(e.$wrapper),n},_show:function(){var t=this;t.render.apply(t,[t.options]),t.emit("show"),t.backdrop.show(),t.$wrapper.show(),t.loading.hide(),t.$el.addClass(t.options.templateOptions.classActiveName),t.$modal.addClass(t.options.templateOptions.classActiveName),o.scan(t.$modal),t.positionModal(),p(window.parent).on("resize.plone-modal.patterns",function(){t.positionModal()}),p("body").addClass("plone-modal-open"),t.emit("shown")},hide:function(){var t=this;t.ajaxXHR&&t.ajaxXHR.abort(),t.emit("hide"),t._suppressHide&&!window.confirm(t._suppressHide)||(t.loading.hide(),t.$el.removeClass(t.options.templateOptions.classActiveName),void 0!==t.$modal&&(t.$modal.remove(),t.initModal()),t.$wrapper.remove(),p(".plone-modal",p("body")).size()<1&&(t._suppressHide=void 0,t.backdrop.hide(),p("body").removeClass("plone-modal-open"),p(window.parent).off("resize.plone-modal.patterns")),t.emit("hidden"))},redraw:function(t,e){var n=this;n.emit("beforeDraw"),n.$modal.remove(),n.$raw=p("<div />").append(p(r.parseBodyTag(t))),n.render.apply(n,[e||n.options]),n.$modal.addClass(n.options.templateOptions.classActiveName),n.positionModal(),o.scan(n.$modal),n.emit("afterDraw")}})}),define("mockup-patterns-navigationmarker",["jquery","pat-base"],function(c,t){return t.extend({name:"navigationmarker",trigger:".pat-navigationmarker",parser:"mockup",init:function(){var l=document.querySelector('head link[rel="canonical"]').href||window.location.href;c("a",this.$el).each(function(){var t=this.href.replace("/view","");if(-1!==l.indexOf(t)){var e=c(this).parent(),n=e.find("> input");n.length&&(n[0].checked=!0);for(var i=l.split("/"),o=t.split("/"),r=!1,a=0,s=o.length;a<s;a++)r=!1,o[a]===i[a]&&(r=!0);r&&e.addClass("inPath"),l===t&&e.addClass("current")}})}})}),define("mockup-patterns-preventdoublesubmit",["jquery","pat-base","translate"],function(n,t,e){"use strict";return t.extend({name:"preventdoublesubmit",trigger:".pat-preventdoublesubmit",parser:"mockup",defaults:{message:e("You already clicked the submit button. Do you really want to submit this form again?"),guardClassName:"submitting",optOutClassName:"allowMultiSubmit"},init:function(){var e=this;e.$el.is("form")&&n(":submit",e.$el).click(function(t){if(n(":submit").removeAttr("clicked"),n(this).attr("clicked","clicked"),n(this).hasClass(e.options.guardClassName)&&!n(this).hasClass(e.options.optOutClassName))return e._confirm.call(e);n(this).addClass(e.options.guardClassName)})},_confirm:function(t){return window.confirm(this.options.message)}})}),function(t){define("bootstrap-collapse",["jquery"],function(){return function(){return function(a){"use strict";var s=function(t,e){this.$element=a(t),this.options=a.extend({},s.DEFAULTS,e),this.$trigger=a('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function o(t){var e,n=t.attr("data-target")||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return a(document).find(n)}function l(i){return this.each(function(){var t=a(this),e=t.data("bs.collapse"),n=a.extend({},s.DEFAULTS,t.data(),"object"==typeof i&&i);!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||t.data("bs.collapse",e=new s(this,n)),"string"==typeof i&&e[i]()})}s.VERSION="3.4.1",s.TRANSITION_DURATION=350,s.DEFAULTS={toggle:!0},s.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},s.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(t=e.data("bs.collapse"))&&t.transitioning)){var n=a.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){e&&e.length&&(l.call(e,"hide"),t||e.data("bs.collapse",null));var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return o.call(this);var r=a.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",a.proxy(o,this)).emulateTransitionEnd(s.TRANSITION_DURATION)[i](this.$element[0][r])}}}},s.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=a.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!a.support.transition)return n.call(this);this.$element[e](0).one("bsTransitionEnd",a.proxy(n,this)).emulateTransitionEnd(s.TRANSITION_DURATION)}}},s.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},s.prototype.getParent=function(){return a(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(t,e){var n=a(e);this.addAriaAndCollapsedClass(o(n),n)},this)).end()},s.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var t=a.fn.collapse;a.fn.collapse=l,a.fn.collapse.Constructor=s,a.fn.collapse.noConflict=function(){return a.fn.collapse=t,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=a(this);e.attr("data-target")||t.preventDefault();var n=o(e),i=n.data("bs.collapse")?"toggle":e.data();l.call(n,i)})}(jQuery),window.jQuery.fn.collapse.Constructor}.apply(t,arguments)})}(this),function(t){define("bootstrap-dropdown",["jquery"],function(){return function(){!function(a){"use strict";function i(t){a(t).on("click.bs.dropdown",this.toggle)}var s='[data-toggle="dropdown"]';function l(t){var e=t.attr("data-target"),n="#"!==(e=e||(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""))?a(document).find(e):null;return n&&n.length?n:t.parent()}function r(i){i&&3===i.which||(a(".dropdown-backdrop").remove(),a(s).each(function(){var t=a(this),e=l(t),n={relatedTarget:this};e.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&a.contains(e[0],i.target)||(e.trigger(i=a.Event("hide.bs.dropdown",n)),i.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",n)))))}))}i.VERSION="3.4.1",i.prototype.toggle=function(t){var e=a(this);if(!e.is(".disabled, :disabled")){var n=l(e),i=n.hasClass("open");if(r(),!i){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",r);var o={relatedTarget:this};if(n.trigger(t=a.Event("show.bs.dropdown",o)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(a.Event("shown.bs.dropdown",o))}return!1}},i.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=a(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=l(e),i=n.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&n.find(s).trigger("focus"),e.trigger("click");var o=n.find(".dropdown-menu li:not(.disabled):visible a");if(o.length){var r=o.index(t.target);38==t.which&&0<r&&r--,40==t.which&&r<o.length-1&&r++,~r||(r=0),o.eq(r).trigger("focus")}}}};var t=a.fn.dropdown;a.fn.dropdown=function(n){return this.each(function(){var t=a(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new i(this)),"string"==typeof n&&e[n].call(t)})},a.fn.dropdown.Constructor=i,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=t,this},a(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,i.prototype.toggle).on("keydown.bs.dropdown.data-api",s,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery)}.apply(t,arguments)})}(this),function(t){define("bootstrap-tooltip",["jquery"],function(){return function(){!function(m){"use strict";var i=["sanitize","whiteList","sanitizeFn"],a=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],t={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},s=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,l=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function f(t,e){var n=t.nodeName.toLowerCase();if(-1!==m.inArray(n,e))return-1===m.inArray(n,a)||Boolean(t.nodeValue.match(s)||t.nodeValue.match(l));for(var i=m(e).filter(function(t,e){return e instanceof RegExp}),o=0,r=i.length;o<r;o++)if(n.match(i[o]))return!0;return!1}function o(t,e,n){if(0===t.length)return t;if(n&&"function"==typeof n)return n(t);if(!document.implementation||!document.implementation.createHTMLDocument)return t;var i=document.implementation.createHTMLDocument("sanitization");i.body.innerHTML=t;for(var o=m.map(e,function(t,e){return e}),r=m(i.body).find("*"),a=0,s=r.length;a<s;a++){var l=r[a],c=l.nodeName.toLowerCase();if(-1!==m.inArray(c,o))for(var u=m.map(l.attributes,function(t){return t}),p=[].concat(e["*"]||[],e[c]||[]),d=0,h=u.length;d<h;d++)f(u[d],p)||l.removeAttribute(u[d].nodeName);else l.parentNode.removeChild(l)}return i.body.innerHTML}function g(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)}g.VERSION="3.4.1",g.TRANSITION_DURATION=150,g.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:t},g.prototype.init=function(t,e,n){if(this.enabled=!0,this.type=t,this.$element=m(e),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&m(document).find(m.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var r=i[o];if("click"==r)this.$element.on("click."+this.type,this.options.selector,m.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",s="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,m.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,m.proxy(this.leave,this))}}this.options.selector?this._options=m.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},g.prototype.getDefaults=function(){return g.DEFAULTS},g.prototype.getOptions=function(t){var e=this.$element.data();for(var n in e)e.hasOwnProperty(n)&&-1!==m.inArray(n,i)&&delete e[n];return(t=m.extend({},this.getDefaults(),e,t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t.sanitize&&(t.template=o(t.template,t.whiteList,t.sanitizeFn)),t},g.prototype.getDelegateOptions=function(){var n={},i=this.getDefaults();return this._options&&m.each(this._options,function(t,e){i[t]!=e&&(n[t]=e)}),n},g.prototype.enter=function(t){var e=t instanceof this.constructor?t:m(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),m(t.currentTarget).data("bs."+this.type,e)),t instanceof m.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState)e.hoverState="in";else{if(clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},g.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},g.prototype.leave=function(t){var e=t instanceof this.constructor?t:m(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),m(t.currentTarget).data("bs."+this.type,e)),t instanceof m.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue()){if(clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)}},g.prototype.show=function(){var t=m.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=m.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var n=this,i=this.tip(),o=this.getUID(this.type);this.setContent(),i.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&i.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,s=a.test(r);s&&(r=r.replace(a,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?i.appendTo(m(document).find(this.options.container)):i.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),c=i[0].offsetWidth,u=i[0].offsetHeight;if(s){var p=r,d=this.getPosition(this.$viewport);r="bottom"==r&&l.bottom+u>d.bottom?"top":"top"==r&&l.top-u<d.top?"bottom":"right"==r&&l.right+c>d.width?"left":"left"==r&&l.left-c<d.left?"right":r,i.removeClass(p).addClass(r)}var h=this.getCalculatedOffset(r,l,c,u);this.applyPlacement(h,r);var f=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};m.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",f).emulateTransitionEnd(g.TRANSITION_DURATION):f()}},g.prototype.applyPlacement=function(t,e){var n=this.tip(),i=n[0].offsetWidth,o=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),t.top+=r,t.left+=a,m.offset.setOffset(n[0],m.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),n.addClass("in");var s=n[0].offsetWidth,l=n[0].offsetHeight;"top"==e&&l!=o&&(t.top=t.top+o-l);var c=this.getViewportAdjustedDelta(e,t,s,l);c.left?t.left+=c.left:t.top+=c.top;var u=/top|bottom/.test(e),p=u?2*c.left-i+s:2*c.top-o+l,d=u?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(p,n[0][d],u)},g.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},g.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=o(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},g.prototype.hide=function(t){var e=this,n=m(this.$tip),i=m.Event("hide.bs."+this.type);function o(){"in"!=e.hoverState&&n.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(i),!i.isDefaultPrevented())return n.removeClass("in"),m.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",o).emulateTransitionEnd(g.TRANSITION_DURATION):o(),this.hoverState=null,this},g.prototype.fixTitle=function(){var t=this.$element;!t.attr("title")&&"string"==typeof t.attr("data-original-title")||t.attr("data-original-title",t.attr("title")||"").attr("title","")},g.prototype.hasContent=function(){return this.getTitle()},g.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],n="BODY"==e.tagName,i=e.getBoundingClientRect();null==i.width&&(i=m.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&e instanceof window.SVGElement,r=n?{top:0,left:0}:o?null:t.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=n?{width:m(window).width(),height:m(window).height()}:null;return m.extend({},i,a,s,r)},g.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},g.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-r-a.scroll,l=e.top+r-a.scroll+i;s<a.top?o.top=a.top-s:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var c=e.left-r,u=e.left+r+n;c<a.left?o.left=a.left-c:u>a.right&&(o.left=a.left+a.width-u)}return o},g.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},g.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},g.prototype.tip=function(){if(!this.$tip&&(this.$tip=m(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},g.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},g.prototype.enable=function(){this.enabled=!0},g.prototype.disable=function(){this.enabled=!1},g.prototype.toggleEnabled=function(){this.enabled=!this.enabled},g.prototype.toggle=function(t){var e=this;t&&((e=m(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),m(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},g.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})},g.prototype.sanitizeHtml=function(t){return o(t,this.options.whiteList,this.options.sanitizeFn)};var e=m.fn.tooltip;m.fn.tooltip=function(i){return this.each(function(){var t=m(this),e=t.data("bs.tooltip"),n="object"==typeof i&&i;!e&&/destroy|hide/.test(i)||(e||t.data("bs.tooltip",e=new g(this,n)),"string"==typeof i&&e[i]())})},m.fn.tooltip.Constructor=g,m.fn.tooltip.noConflict=function(){return m.fn.tooltip=e,this}}(jQuery)}.apply(t,arguments)})}(this),require(["mockup-patterns-autotoc","mockup-patterns-contentloader","mockup-patterns-cookietrigger","mockup-patterns-formautofocus","mockup-patterns-formunloadalert","mockup-patterns-livesearch","mockup-patterns-markspeciallinks","mockup-patterns-modal","mockup-patterns-navigationmarker","mockup-patterns-preventdoublesubmit","bootstrap-collapse","bootstrap-dropdown","bootstrap-tooltip"],function(){}),define("/home/_thet/data/dev/plone/buildout.coredev/src/plone.staticresources/src/plone/staticresources/static/plone.js",function(){});
//# sourceMappingURL=plone-compiled.min.js.map