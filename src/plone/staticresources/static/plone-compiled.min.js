define("mockup-patterns-autotoc",["jquery","pat-base"],function(a,t){"use strict";return t.extend({name:"autotoc",trigger:".pat-autotoc",parser:"mockup",defaults:{section:"section",levels:"h1,h2,h3",IDPrefix:"autotoc-item-",classTOCName:"autotoc-nav",classSectionName:"autotoc-section",classLevelPrefixName:"autotoc-level-",classActiveName:"active",scrollDuration:"slow",scrollEasing:"swing"},init:function(){var o=this;o.$toc=a("<nav/>").addClass(o.options.classTOCName),o.options.prependTo?o.$toc.prependTo(o.options.prependTo):o.options.appendTo?o.$toc.appendTo(o.options.appendTo):o.$toc.prependTo(o.$el),o.options.className&&o.$el.addClass(o.options.className),a(o.options.section,o.$el).addClass(o.options.classSectionName);var r=o.$el.hasClass("autotabs"),n=null;a(o.options.levels,o.$el).each(function(t){var i=a(this),e=(i.prop("id")?i:i.parents(o.options.section)).prop("id");(!e||0<a("#"+e).length)&&(e=o.options.IDPrefix+o.name+"-"+t),window.location.hash==="#"+e&&(n=e),null===n&&i.hasClass(o.options.classActiveName)&&(n=e),i.data("navref",e),a("<a/>").appendTo(o.$toc).text(i.text()).attr("id",e).attr("href","#"+e).addClass(o.options.classLevelPrefixName+o.getLevel(i)).on("click",function(t,e){t.stopPropagation(),t.preventDefault(),e=e||{doScroll:!0,skipHash:!1};var n=a(this);o.$toc.children("."+o.options.classActiveName).removeClass(o.options.classActiveName),o.$el.children("."+o.options.classActiveName).removeClass(o.options.classActiveName),a(t.target).addClass(o.options.classActiveName),i.parents(o.options.section).addClass(o.options.classActiveName),!1!==e.doScroll&&o.options.scrollDuration&&i&&!r&&a("body,html").animate({scrollTop:i.offset().top},o.options.scrollDuration,o.options.scrollEasing),0!==o.$el.parents(".plone-modal").length&&o.$el.trigger("resize.plone-modal.patterns"),a(this).trigger("clicked"),e.skipHash||window.history&&window.history.pushState&&window.history.pushState({},"","#"+n.attr("id"))}),i.data("autotoc-trigger-id",e)}),n?a("a#"+n).trigger("click",{doScroll:!0,skipHash:!0}):o.$toc.find("a").first().trigger("click",{doScroll:!1,skipHash:!0})},getLevel:function(n){var i=0;return a.each(this.options.levels.split(","),function(t,e){if(1===n.filter(e).length)return i=t+1,!1}),i}})}),define("mockup-utils",["jquery"],function(l){"use strict";function t(t){var n=this;return n.className="plone-loader",t=t||{},n.options=l.extend({},{backdrop:null,zIndex:10005},t),n.init=function(){n.$el=l("."+n.className),0===n.$el.length&&(n.$el=l("<div><div></div></div>"),n.$el.addClass(n.className).hide().appendTo("body"))},n.show=function(t){n.init(),n.$el.show();var e=n.options.zIndex;"function"==typeof e?e=Math.max(e(),10005):(e=10005,l(".plone-modal-wrapper,.plone-modal-backdrop").each(function(){e=Math.max(e,l(this).css("zIndex")||10005)}),e+=1),n.$el.css("zIndex",e),void 0===t&&(t=!0),n.options.backdrop&&(n.options.backdrop.closeOnClick=t,n.options.backdrop.closeOnEsc=t,n.options.backdrop.init(),n.options.backdrop.show())},n.hide=function(){n.init(),n.$el.hide()},n}function i(t){return void 0===t&&(t="id"),t+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var e={get:function(t){if(window.localStorage){t=window.localStorage[t];return"string"==typeof t?JSON.parse(t):void 0}},set:function(t,e){window.localStorage&&(window.localStorage[t]=JSON.stringify(e))}};return{bool:function(t){return"string"==typeof t&&(t=l.trim(t).toLowerCase()),-1===["false",!1,"0",0,"",void 0,null].indexOf(t)},escapeHTML:function(t){return l("<div/>").text(t).html()},removeHTML:function(t){return t.replace(/<[^>]+>/gi,"")},featureSupport:{dragAndDrop:function(){return"draggable"in document.createElement("span")},fileApi:function(){return"undefined"!=typeof FileReader},history:function(){return!(!window.history||!window.history.pushState)}},generateId:i,getAuthenticator:function(){var t=l('input[name="_authenticator"]');return 0===t.length?0<(t=l('a[href*="_authenticator"]')).length?t.attr("href").split("_authenticator=")[1]:"":t.val()},getWindow:function(){var t=window;return t.parent!==window&&(t=t.parent),t},Loading:t,loading:new t,parseBodyTag:function(t){return l(/<body[^>]*>[^]*<\/body>/im.exec(t)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},QueryHelper:function(t){var s=this;return s.options=l.extend({},{pattern:null,vocabularyUrl:null,searchParam:"SearchableText",pathOperator:"plone.app.querystring.operation.string.path",attributes:["UID","Title","Description","getURL","portal_type"],batchSize:10,baseCriteria:[],sort_on:"is_folderish",sort_order:"reverse",pathDepth:1},t),s.pattern=s.options.pattern,void 0!==s.pattern&&null!==s.pattern||(s.pattern={browsing:!1,basePath:"/"}),s.options.url&&!s.options.vocabularyUrl?s.options.vocabularyUrl=s.options.url:s.pattern.vocabularyUrl&&(s.options.vocabularyUrl=s.pattern.vocabularyUrl),s.valid=Boolean(s.options.vocabularyUrl),s.getBatch=function(t){return{page:t||1,size:s.options.batchSize}},s.getCurrentPath=function(){var t=s.pattern,e=s.currentPath||t.currentPath;"function"==typeof e&&(e=e());return e=e||(t.basePath||t.options.basePath||"/")},s.getCriterias=function(t,e){void 0===e&&(e={});var n=[];return(e=l.extend({},{useBaseCriteria:!0,additionalCriterias:[]},e)).useBaseCriteria&&(n=s.options.baseCriteria.slice(0)),t&&(t+="*",n.push({i:s.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:t})),e.searchPath?n.push({i:"path",o:s.options.pathOperator,v:e.searchPath+"::"+s.options.pathDepth}):s.pattern.browsing&&n.push({i:"path",o:s.options.pathOperator,v:s.getCurrentPath()+"::"+s.options.pathDepth}),n=n.concat(e.additionalCriterias)},s.getQueryData=function(t,e){t={query:JSON.stringify({criteria:s.getCriterias(t),sort_on:s.options.sort_on,sort_order:s.options.sort_order}),attributes:JSON.stringify(s.options.attributes)};return e&&(t.batch=JSON.stringify(s.getBatch(e))),t},s.getUrl=function(){var t=s.options.vocabularyUrl;return-1===t.indexOf("?")?t+="?":t+="&",t+l.param(s.getQueryData())},s.selectAjax=function(){return{url:s.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(t,e){return s.getQueryData(t,e)},results:function(t,e){e=10*e<t.total;return{results:t.results,more:e}}}},s.search=function(t,e,n,i,o,r){void 0===o&&(o=!0),void 0===r&&(r="GET");var a=[];o&&(a=s.options.baseCriteria.slice(0)),a.push({i:t,o:e,v:n});a={query:JSON.stringify({criteria:a}),attributes:JSON.stringify(s.options.attributes)};l.ajax({url:s.options.vocabularyUrl,dataType:"JSON",data:a,type:r,success:i})},s},setId:function(t,e){void 0===e&&(e="id");var n=void 0===(n=t.attr("id"))?i(e):n.replace(/\./g,"-");return t.attr("id",n),n},storage:e,createElementFromHTML:function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}}}),define("mockup-patterns-contentloader",["jquery","pat-base","pat-logger","pat-registry","mockup-utils","underscore"],function(i,t,e,o,r,a){"use strict";var s=e.getLogger("pat-contentloader");return t.extend({name:"contentloader",trigger:".pat-contentloader",parser:"mockup",defaults:{url:null,content:null,trigger:"click",target:null,template:null,dataType:"html"},init:function(){var e=this;"el"===e.options.url&&"A"===e.$el[0].tagName&&(e.options.url=e.$el.attr("href")),e.$el.removeClass("loading-content"),e.$el.removeClass("content-load-error"),"immediate"===e.options.trigger?e._load():e.$el.on(e.options.trigger,function(t){t.preventDefault(),e._load()})},_load:function(){this.$el.addClass("loading-content"),this.options.url?this.loadRemote():this.loadLocal()},loadRemote:function(){var n=this;i.ajax({url:n.options.url,dataType:n.options.dataType,success:function(t){var e;if("html"===n.options.dataType)-1!==t.indexOf("<html")&&(t=r.parseBodyTag(t)),e=i("<div>"+t+"</div>");else if(-1!==n.options.dataType.indexOf("json")){t.constructor===Array&&1===t.length&&(t=t[0]);try{e=i(a.template(n.options.template)(t))}catch(t){return n.$el.removeClass("loading-content"),n.$el.addClass("content-load-error"),void s.warn("error rendering template. pat-contentloader will not work")}}null!==n.options.content&&(e=e.find(n.options.content)),n.loadLocal(e)},error:function(){n.$el.removeClass("loading-content"),n.$el.addClass("content-load-error")}})},loadLocal:function(t){var e=this;if(!t&&null===e.options.content)return e.$el.removeClass("loading-content"),e.$el.addClass("content-load-error"),void s.warn("No selector configured");var n=e.$el;if(null!==e.options.target&&0===(n=i(e.options.target)).length)return e.$el.removeClass("loading-content"),e.$el.addClass("content-load-error"),void s.warn("No target nodes found");(t=t||i(e.options.content).clone()).length?(t.show(),n.replaceWith(t),o.scan(t)):n.empty(),e.$el.removeClass("loading-content"),e.emit("loading-done")}})}),define("mockup-patterns-cookietrigger",["pat-base"],function(t){"use strict";return t.extend({name:"cookietrigger",trigger:".pat-cookietrigger",parser:"mockup",isCookiesEnabled:function(){var t;document.cookie="areYourCookiesEnabled=0";var e=document.cookie;return-1===e.indexOf("areYourCookiesEnabled=0")?0:(t="areYourCookiesEnabled=1",document.cookie=t,-1===(e=document.cookie).indexOf(t)?0:(document.cookie="areYourCookiesEnabled=; expires=Thu, 01-Jan-70 00:00:01 GMT",1))},showIfCookiesDisabled:function(){this.isCookiesEnabled()?this.$el.hide():this.$el.show()},init:function(){this.showIfCookiesDisabled()}})}),define("mockup-patterns-formautofocus",["jquery","pat-base"],function(e,t,n){"use strict";return t.extend({name:"formautofocus",trigger:".pat-formautofocus",parser:"mockup",defaults:{condition:"div.error",target:"div.error :input:not(.formTabs):visible:first",always:":input:not(.formTabs):visible:first"},init:function(){var t=this;(0!==e(t.options.condition,t.$el).length?e(t.options.target,t.$el):e(t.options.always,t.$el)).focus()}})}),define("mockup-i18n",["jquery"],function(i){"use strict";return function(){var s=this;s.baseUrl=i("body").attr("data-i18ncatalogurl"),s.currentLanguage=i("html").attr("lang")||"en",1<s.currentLanguage.split("-").length&&(s.currentLanguage=s.currentLanguage.split("-")[0]+"_"+s.currentLanguage.split("-")[1].toUpperCase()),s.storage=null,s.catalogs={},s.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(s.storage=window.localStorage)}catch(t){}s.configure=function(t){for(var e in t)s[e]=t[e]},s._setCatalog=function(t,e,n){t in s.catalogs||(s.catalogs[t]={}),s.catalogs[t][e]=n},s._storeCatalog=function(t,e,n){e=t+"-"+e;null!==s.storage&&null!==n&&(s.storage.setItem(e,JSON.stringify(n)),s.storage.setItem(e+"-updated",Date.now()))},s.getUrl=function(t,e){return s.baseUrl+"?domain="+t+"&language="+e},s.loadCatalog=function(e,n){if(void 0===n&&(n=s.currentLanguage),null!==s.storage){var t=e+"-"+n;if(t in s.storage&&Date.now()-parseInt(s.storage.getItem(t+"-updated"),10)<s.ttl){t=JSON.parse(s.storage.getItem(t));return void s._setCatalog(e,n,t)}}s.baseUrl&&i.getJSON(s.getUrl(e,n),function(t){null!==t&&(s._setCatalog(e,n,t),s._storeCatalog(e,n,t))})},s.MessageFactory=function(r,a){return a=a||s.currentLanguage,function(t,e){var n,i,o=r in s.catalogs&&a in s.catalogs[r]&&t in s.catalogs[r][a]?s.catalogs[r][a][t]:t;if(e)for(i in e)e.hasOwnProperty(i)&&(n=new RegExp("\\$\\{"+i+"\\}","g"),o=o.replace(n,e[i]));return o}}}}),define("translate",["mockup-i18n"],function(i){"use strict";var o=null;return function(t,e){var n;return null===o&&((n=new i).loadCatalog("widgets"),o=n.MessageFactory("widgets")),o(t,e)}}),define("mockup-patterns-formunloadalert",["jquery","pat-base","translate"],function(o,t,e){"use strict";return t.extend({name:"formunloadalert",trigger:".pat-formunloadalert",parser:"mockup",_changed:!1,_suppressed:!1,defaults:{message:e("Discard changes? If you click OK, any changes you have made will be lost."),changingEvents:"change keyup paste",changingFields:"input,select,textarea,fileupload"},init:function(){var n,i=this;i.$el.is("form")&&(o(i.options.changingFields,i.$el).on(i.options.changingEvents,function(t){i._changed=!0}),0!==(n=i.$el.parents(".plone-modal")).length?n.data("patternPloneModal").on("hide",function(t){var e=n.data("patternPloneModal");e&&(e._suppressHide=i._handleUnload.call(i,t))}):o(window).on("beforeunload",function(t){return i._handleUnload(t)}),i.$el.on("submit",function(t){i._suppressed=!0}))},_handleUnload:function(t){var e=this;if(e._suppressed)e._suppressed=!1;else if(e._changed){var n=e.options.message;return e._handleMsg(t,n),o(window).trigger("messageset"),n}},_handleMsg:function(t,e){(t||window.event).returnValue=e}})}),define("mockup-patterns-livesearch",["jquery","pat-base","underscore","translate"],function(r,t,a,s){"use strict";return t.extend({name:"livesearch",trigger:".pat-livesearch",parser:"mockup",timeout:null,active:!1,results:null,selectedItem:-1,resultsClass:"livesearch-results",defaults:{ajaxUrl:null,defaultSortOn:"",perPage:7,quietMillis:350,minimumInputLength:4,inputSelector:'input[type="text"]',itemTemplate:'<li class="search-result <%- state %>"><h4 class="title"><a href="<%- url %>"><%- title %></a></h4><p class="description"><%- description %></p></li>'},doSearch:function(e){var i=this;i.active=!0,i.render(),i.$el.addClass("searching");var n=i.$el.serialize();void 0===e&&(e=1);var t=function(){var t=location.search,e=t.indexOf("sort_on");if(-1===e){var n=r("#search-results");return 0<n.length?n.attr("data-default-sort"):i.options.defaultSortOn}e=t.substring(e);return e=(e=e.split("&")[0]).split("=")[1]}();r.ajax({url:i.options.ajaxUrl+"?"+n+"&page="+e+"&perPage="+i.options.perPage+"&sort_on="+t,dataType:"json"}).done(function(t){i.results=t,i.page=e,n!==i.$el.serialize()&&i.doSearch()}).fail(function(){i.results={items:[{url:"",title:s("Error"),description:s("There was an error searching…"),state:"error",error:!1}],total:1},i.page=1}).always(function(){i.active=!1,i.selectedItem=-1,i.$el.removeClass("searching"),i.render()})},render:function(){var i,t,e,n,o=this;o.$results.empty(),o.active?o.$results.append(r('<li class="searching">'+s("searching…")+"</li>")):null===o.results?o.$results.append(r('<li class="no-results no-search">'+s("enter search phrase")+"</li>")):0===o.results.total?o.$results.append(r('<li class="no-results">'+s("no results found")+"</li>")):o.$results.append(r('<li class="results-summary">'+s("found")+" "+o.results.total+" "+s("results")+"</li>")),null!==o.results&&(i=a.template(o.options.itemTemplate),a.each(o.results.items,function(t,e){var n=r(i(r.extend({_t:s},t)));n.attr("data-url",t.url).on("click",function(){t.error||(window.location=t.url)}),e===o.selectedItem&&n.addClass("selected"),o.$results.append(n)}),t=[],1<o.page&&((e=r('<a href="#" class="prev">'+s("Previous")+"</a>")).click(function(t){o.disableHiding=!0,t.preventDefault(),o.doSearch(o.page-1)}),t.push(e)),o.page*o.options.perPage<o.results.total&&((n=r('<a href="#" class="next">'+s("Next")+"</a>")).click(function(t){o.disableHiding=!0,t.preventDefault(),o.doSearch(o.page+1)}),t.push(n)),0<t.length&&((n=r('<li class="load-more"><div class="page">'+o.page+"</div></li>")).prepend(t),o.$results.append(n))),o.position()},position:function(){var t=this;t.$el.addClass("livesearch-active");var e=t.$input.position();t.$results.width(t.$el.outerWidth()),t.$results.css({top:e.top+t.$input.outerHeight(),left:e.left}),t.$results.show()},hide:function(){this.$results.hide(),this.$el.removeClass("livesearch-active")},init:function(){var e=this;e.$input=e.$el.find(e.options.inputSelector),e.$input.off("focusout").on("focusout",function(){setTimeout(function(){e.disableHiding?(e.disableHiding=!1,e.$input.focus()):e.hide()},200)}).off("focusin").on("focusin",function(){e.onceFocused?e.$results.is(":visible")||e.render():(e.onceFocused=!0,e.$input.val().length>=e.options.minimumInputLength&&e.doSearch())}).attr("autocomplete","off").off("keyup").on("keyup",function(t){t=t.keyCode||t.which;if(27===t)return e.$input.val(""),void e.hide();if(e.results&&e.results.items&&0<e.results.items.length){if(13===t)return void(-1!==e.selectedItem&&(window.location=e.results.items[e.selectedItem].url));if(38===t)return void(-1!==e.selectedItem&&(--e.selectedItem,e.render()));if(40===t)return void(e.selectedItem<e.results.items.length&&(e.selectedItem+=1,e.render()))}null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.active||(e.$input.val().length>=e.options.minimumInputLength?e.timeout=setTimeout(function(){e.doSearch()},e.options.quietMillis):(e.results=null,e.render()))}),r("#sorting-options a").click(function(t){t.preventDefault(),e.onceFocused=!1}),e.$results=r('<ul class="'+e.resultsClass+'"></ul>').hide().insertAfter(e.$input)}})}),define("mockup-patterns-markspeciallinks",["pat-base","jquery"],function(t,a){"use strict";return t.extend({name:"markspeciallinks",trigger:".pat-markspeciallinks",parser:"mockup",defaults:{external_links_open_new_window:!1,mark_special_links:!0},init:function(){var t,e,n,i,o=this,r=o.$el;"string"==typeof o.options.external_links_open_new_window?t="true"===o.options.external_links_open_new_window.toLowerCase():"boolean"==typeof o.options.external_links_open_new_window&&(t=o.options.external_links_open_new_window),"string"==typeof o.options.mark_special_links?e="true"===o.options.mark_special_links.toLowerCase():"boolean"==typeof o.options.mark_special_links&&(e=o.options.mark_special_links),o=window.location.protocol+"//"+window.location.host,n=/^(mailto|ftp|news|irc|h323|sip|callto|https|feed|webcal)/,r=r,t&&r.find('a[href^="http"]:not(.link-plain):not([href^="'+o+'"])').attr("target","_blank").attr("rel","noopener"),e&&(r.find('a[href^="http:"]:not(.link-plain):not([href^="'+o+'"]):not(:has(img))').before('<i class="glyphicon link-external"></i>'),r.find('a[href]:not([href^="http:"]):not(.link-plain):not([href^="'+o+'"]):not(:has(img)):not([href^="#"])').each(function(){var t;(i=n.exec(a(this).attr("href")))&&(t="glyphicon link-"+i[0],a(this).before('<i class="'+t+'"></i>'))}))}})}),define("mockup-patterns-backdrop",["jquery","pat-base"],function(t,e){"use strict";return e.extend({name:"backdrop",trigger:".pat-backdrop",parser:"mockup",defaults:{zIndex:null,opacity:.8,className:"plone-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var n=this;n.$backdrop=t("> ."+n.options.className,n.$el),0===n.$backdrop.length&&(n.$backdrop=t("<div/>").hide().appendTo(n.$el).addClass(n.options.className),null!==n.options.zIndex&&n.$backdrop.css("z-index",n.options.zIndex)),!0===n.options.closeOnEsc&&t(document).on("keydown",function(t,e){n.$el.is("."+n.options.classActiveName)&&27===t.keyCode&&n.hide()}),!0===n.options.closeOnClick&&n.$backdrop.on("click",function(){n.$el.is("."+n.options.classActiveName)&&n.hide()})},show:function(){var t=this;t.$el.hasClass(t.options.classActiveName)||(t.emit("show"),t.$backdrop.css("opacity","0").show(),t.$el.addClass(t.options.classActiveName),t.$backdrop.animate({opacity:t.options.opacity},500),t.emit("shown"))},hide:function(){var t=this;t.$el.hasClass(t.options.classActiveName)&&(t.emit("hide"),t.$backdrop.animate({opacity:"0"},500).hide(),t.$el.removeClass(t.options.classActiveName),t.emit("hidden"))}})}),function(i,o){var t;"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(t,e,n){i.Backbone=o(i,n,t,e)}):"undefined"!=typeof exports?(t=require("underscore"),o(i,exports,t)):i.Backbone=o(i,{},i._,i.jQuery||i.Zepto||i.ender||i.$)}(this,function(t,a,x,e){var n=t.Backbone,i=[],o=(i.push,i.slice);i.splice;a.VERSION="1.1.2",a.$=e,a.noConflict=function(){return t.Backbone=n,this},a.emulateHTTP=!1,a.emulateJSON=!1;var r=a.Events={on:function(t,e,n){return p(this,"on",t,[e,n])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this})),this},once:function(t,e,n){if(!p(this,"once",t,[e,n])||!e)return this;var i=this,o=x.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var i,o,r,a,s,l,c,u;if(!this._events||!p(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(s=0,l=(a=t?[t]:x.keys(this._events)).length;s<l;s++)if(t=a[s],r=this._events[t]){if(this._events[t]=i=[],e||n)for(c=0,u=r.length;c<u;c++)o=r[c],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!p(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&s(n,e),i&&s(i,arguments),this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var o,r=!e&&!n;for(o in n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t),i)(t=i[o]).off(e,n,this),(r||x.isEmpty(t._events))&&delete this._listeningTo[o];return this}},l=/\s+/,p=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var r=n.split(l),a=0,s=r.length;a<s;a++)t[e].apply(t,[r[a]].concat(i));return!1}return!0},s=function(t,e){var n,i=-1,o=t.length,r=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,a);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,a,s);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e);return}};x.each({listenTo:"on",listenToOnce:"once"},function(o,t){r[t]=function(t,e,n){var i=this._listeningTo||(this._listeningTo={});return n||"object"!=typeof e||(n=this),(i[t._listenId||(t._listenId=x.uniqueId("l"))]=t)[o](e,n,this),this}}),r.bind=r.on,r.unbind=r.off,x.extend(a,r);var k=a.Model=function(t,e){var n=t||{};e=e||{},this.cid=x.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=x.defaults({},n,x.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};x.extend(k.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return x.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return x.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,o,r,a,s,l,c;if(null==t)return this;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n=n||{},!this._validate(o,n))return!1;for(i in r=n.unset,s=n.silent,a=[],t=this._changing,this._changing=!0,t||(this._previousAttributes=x.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)e=o[i],x.isEqual(c[i],e)||a.push(i),x.isEqual(l[i],e)?delete this.changed[i]:this.changed[i]=e,r?delete c[i]:c[i]=e;if(!s){a.length&&(this._pending=n);for(var u=0,p=a.length;u<p;u++)this.trigger("change:"+a[u],this,c[a[u]],n)}if(t)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,x.extend({},e,{unset:!0}))},clear:function(t){var e,n={};for(e in this.attributes)n[e]=void 0;return this.set(n,x.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!x.isEmpty(this.changed):x.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&x.clone(this.changed);var e,n,i=!1,o=this._changing?this._previousAttributes:this.attributes;for(n in t)x.isEqual(o[n],e=t[n])||((i=i||{})[n]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?x.clone(e):{}).parse&&(e.parse=!0);var n=this,i=e.success;return e.success=function(t){if(!n.set(n.parse(t,e),e))return!1;i&&i(n,t,e),n.trigger("sync",n,t,e)},O(this,e),this.sync("read",this,e)},save:function(t,e,n){var i,o=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,n=x.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=x.extend({},o,i)),void 0===n.parse&&(n.parse=!0);var r=this,a=n.success;return n.success=function(t){r.attributes=o;var e=r.parse(t,n);if(n.wait&&(e=x.extend(i||{},e)),x.isObject(e)&&!r.set(e,n))return!1;a&&a(r,t,n),r.trigger("sync",r,t,n)},O(this,n),"patch"==(e=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=i),e=this.sync(e,this,n),i&&n.wait&&(this.attributes=o),e},destroy:function(e){e=e?x.clone(e):{};function n(){i.trigger("destroy",i,i.collection,e)}var i=this,o=e.success;if(e.success=function(t){(e.wait||i.isNew())&&n(),o&&o(i,t,e),i.isNew()||i.trigger("sync",i,t,e)},this.isNew())return e.success(),!1;O(this,e);var t=this.sync("delete",this,e);return e.wait||n(),t},url:function(){var t=x.result(this,"urlRoot")||x.result(this.collection,"url")||E();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},x.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=x.extend({},this.attributes,t);t=this.validationError=this.validate(t,e)||null;return!t||(this.trigger("invalid",this,t,x.extend(e,{validationError:t})),!1)}});x.each(["keys","values","pairs","invert","pick","omit"],function(e){k.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),x[e].apply(x,t)}});var c=a.Collection=function(t,e){(e=e||{}).model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,x.extend({silent:!0},e))},$={add:!0,remove:!0,merge:!0},u={add:!0,remove:!1};x.extend(c.prototype,r,{model:k,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,x.extend({merge:!1},e,u))},remove:function(t,e){var n,i,o,r,a=!x.isArray(t);for(e=e||{},n=0,i=(t=a?[t]:x.clone(t)).length;n<i;n++)(r=t[n]=this.get(t[n]))&&(delete this._byId[r.id],delete this._byId[r.cid],o=this.indexOf(r),this.models.splice(o,1),this.length--,e.silent||(e.index=o,r.trigger("remove",r,this,e)),this._removeReference(r,e));return a?t[0]:t},set:function(t,e){(e=x.defaults({},e,$)).parse&&(t=this.parse(t,e));var n,i,o,r,a=!x.isArray(t);t=a?t?[t]:[]:x.clone(t);var s=e.at,l=this.model,c=this.comparator&&null==s&&!1!==e.sort,u=x.isString(this.comparator)?this.comparator:null,p=[],d=[],h={},f=e.add,m=e.merge,g=e.remove,v=!(c||!f||!g)&&[];for(b=0,w=t.length;b<w;b++){if(o=(i=t[b]||{})instanceof k?n=i:i[l.prototype.idAttribute||"id"],o=this.get(o))g&&(h[o.cid]=!0),m&&(i=i===n?n.attributes:i,e.parse&&(i=o.parse(i,e)),o.set(i,e),c&&!r&&o.hasChanged(u)&&(r=!0)),t[b]=o;else if(f){if(!(n=t[b]=this._prepareModel(i,e)))continue;p.push(n),this._addReference(n,e)}n=o||n,!v||!n.isNew()&&h[n.id]||v.push(n),h[n.id]=!0}if(g){for(b=0,w=this.length;b<w;++b)h[(n=this.models[b]).cid]||d.push(n);d.length&&this.remove(d,e)}if(p.length||v&&v.length)if(c&&(r=!0),this.length+=p.length,null!=s)for(b=0,w=p.length;b<w;b++)this.models.splice(s+b,0,p[b]);else{v&&(this.models.length=0);for(var y=v||p,b=0,w=y.length;b<w;b++)this.models.push(y[b])}if(r&&this.sort({silent:!0}),!e.silent){for(b=0,w=p.length;b<w;b++)(n=p[b]).trigger("add",n,this,e);(r||v&&v.length)&&this.trigger("sort",this,e)}return a?t[0]:t},reset:function(t,e){e=e||{};for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,x.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,x.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,x.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(n,t){return x.isEmpty(n)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var e in n)if(n[e]!==t.get(e))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t=t||{},x.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(x.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return x.invoke(this.models,"get",t)},fetch:function(n){void 0===(n=n?x.clone(n):{}).parse&&(n.parse=!0);var i=n.success,o=this;return n.success=function(t){var e=n.reset?"reset":"set";o[e](t,n),i&&i(o,t,n),o.trigger("sync",o,t,n)},O(this,n),this.sync("read",this,n)},create:function(t,n){if(n=n?x.clone(n):{},!(t=this._prepareModel(t,n)))return!1;n.wait||this.add(t,n);var i=this,o=n.success;return n.success=function(t,e){n.wait&&i.add(t,n),o&&o(t,e,n)},t.save(null,n),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof k)return t;t=new((e=e?x.clone(e):{}).collection=this).model(t,e);return t.validationError?(this.trigger("invalid",this,t.validationError,e),!1):t},_addReference:function(t,e){null!=(this._byId[t.cid]=t).id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});x.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(e){c.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),x[e].apply(x,t)}});x.each(["groupBy","countBy","sortBy","indexBy"],function(i){c.prototype[i]=function(e,t){var n=x.isFunction(e)?e:function(t){return t.get(e)};return x[i](this.models,n,t)}});var i=a.View=function(t){this.cid=x.uniqueId("view"),t=t||{},x.extend(this,x.pick(t,h)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},d=/^(\S+)\s*(.*)$/,h=["model","collection","el","id","attributes","className","tagName","events"];x.extend(i.prototype,r,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof a.$?t:a.$(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},delegateEvents:function(t){if(!(t=t||x.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var n,i,o=t[e];x.isFunction(o)||(o=this[t[e]]),o&&(n=(i=e.match(d))[1],i=i[2],o=x.bind(o,this),n+=".delegateEvents"+this.cid,""===i?this.$el.on(n,o):this.$el.on(n,i,o))}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){var t;this.el?this.setElement(x.result(this,"el"),!1):(t=x.extend({},x.result(this,"attributes")),this.id&&(t.id=x.result(this,"id")),this.className&&(t.class=x.result(this,"className")),t=a.$("<"+x.result(this,"tagName")+">").attr(t),this.setElement(t,!1))}}),a.sync=function(t,e,n){var i=m[t];x.defaults(n=n||{},{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var o,r={type:i,dataType:"json"};n.url||(r.url=x.result(e,"url")||E()),null!=n.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||e.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),!n.emulateHTTP||"PUT"!==i&&"DELETE"!==i&&"PATCH"!==i||(r.type="POST",n.emulateJSON&&(r.data._method=i),o=n.beforeSend,n.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",i),o)return o.apply(this,arguments)}),"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"===r.type&&f&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});r=n.xhr=a.ajax(x.extend(r,n));return e.trigger("request",e,r,n),r};var f=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),m={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var e=a.Router=function(t){(t=t||{}).routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},g=/\((.*?)\)/g,v=/(\(\?)?:\w+/g,y=/\*\w+/g,b=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(e.prototype,r,{initialize:function(){},route:function(e,n,i){x.isRegExp(e)||(e=this._routeToRegExp(e)),x.isFunction(n)&&(i=n,n=""),i=i||this[n];var o=this;return a.history.route(e,function(t){t=o._extractParameters(e,t);o.execute(i,t),o.trigger.apply(o,["route:"+n].concat(t)),o.trigger("route",n,t),a.history.trigger("route",o,n,t)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,e){return a.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var t,e=x.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(b,"\\$&").replace(g,"(?:$1)?").replace(v,function(t,e){return e?t:"([^/?]+)"}).replace(y,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return x.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var w=a.History=function(){this.handlers=[],x.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},T=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,C=/msie [\w.]+/,S=/\/$/,N=/#.*$/;w.started=!1,x.extend(w.prototype,r,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){t=(t||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(t,e){return null==t&&(this._hasPushState||!this._wantsHashChange||e?(t=decodeURI(this.location.pathname+this.location.search),e=this.root.replace(S,""),t.indexOf(e)||(t=t.slice(e.length))):t=this.getHash()),t.replace(T,"")},start:function(t){if(w.started)throw new Error("Backbone.history has already been started");w.started=!0,this.options=x.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),n=document.documentMode,t=C.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),t&&this._wantsHashChange&&(n=a.$('<iframe src="javascript:0" tabindex="-1">'),this.iframe=n.hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!t?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;e=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&e.hash&&(this.fragment=this.getHash().replace(T,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),w.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),x.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(t,e){if(!w.started)return!1;e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(N,""),this.fragment!==t){if(""===(this.fragment=t)&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){n?(n=t.href.replace(/(javascript:|#).*$/,""),t.replace(n+"#"+e)):t.hash="#"+e}}),a.history=new w;k.extend=c.extend=e.extend=i.extend=w.extend=function(t,e){var n=this,i=t&&x.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)};x.extend(i,n,e);e=function(){this.constructor=i};return e.prototype=n.prototype,i.prototype=new e,t&&x.extend(i.prototype,t),i.__super__=n.prototype,i};var E=function(){throw new Error('A "url" property or function must be specified')},O=function(e,n){var i=n.error;n.error=function(t){i&&i(e,t,n),e.trigger("error",e,t,n)}};return a}),define("mockup-router",["underscore","backbone"],function(a,t){"use strict";function s(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}return new(t.Router.extend({actions:[],redirects:{},addRoute:function(t,e,n,i,o,r){void 0===a.findWhere(this.patterns,{patternName:t,id:e})&&this.actions.push({patternName:t,id:e,callback:n,context:i,pathExp:o,expReplace:r});e=new RegExp("("+s(t)+":"+s(e)+")");this.route(e,"handleRoute")},addRedirect:function(t,e){this.redirects[t]=e},handleRoute:function(t){var e=t.split(":"),t=e[0],e=e[1],e=a.findWhere(this.actions,{patternName:t,id:e});e&&e.callback.call(e.context)},redirect:function(){var n,i,o,r=window.parent.location.pathname;if(a.some(this.actions,function(t){if(t.pathExp&&(i=new RegExp(t.pathExp),r.match(i))){o="!/"+t.patternName+":"+t.id;var e="";return t.expReplace&&(e=t.expReplace),n=r.replace(i,e),!0}},this),void 0===o)for(var t in this.redirects)if(i=new RegExp(t),r.match(i)){o="!/"+this.redirects[t],n=r.replace(i,"");break}void 0!==o&&this._changeLocation.apply(this,[n,o])},_changeLocation:function(t,e){window.parent.location.hash=e,window.parent.location.pathname=t},start:function(){t.history.start()},reset:function(){this.actions=[]}}))}),function(n){"function"==typeof define&&define.amd?define("jquery.form",["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(t,e){return void 0===e&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),n(e),e}:n(jQuery)}(function(j){"use strict";var d=/\r?\n/g,g={};g.fileapi=void 0!==j('<input type="file">').get(0).files,g.formdata=void 0!==window.FormData;var D=!!j.fn.prop;function r(t){var e=t.data;t.isDefaultPrevented()||(t.preventDefault(),j(t.target).closest("form").ajaxSubmit(e))}function a(t){var e=t.target,n=j(e);if(!n.is("[type=submit],[type=image]")){var i=n.closest("[type=submit]");if(0===i.length)return;e=i[0]}var o=e.form;"image"===(o.clk=e).type&&(void 0!==t.offsetX?(o.clk_x=t.offsetX,o.clk_y=t.offsetY):"function"==typeof j.fn.offset?(n=n.offset(),o.clk_x=t.pageX-n.left,o.clk_y=t.pageY-n.top):(o.clk_x=t.pageX-e.offsetLeft,o.clk_y=t.pageY-e.offsetTop)),setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function I(){var t;j.fn.ajaxSubmit.debug&&(t="[jquery.form] "+Array.prototype.join.call(arguments,""),window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t))}j.fn.attr2=function(){if(!D)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},j.fn.ajaxSubmit=function(N,t,e,n){if(!this.length)return I("ajaxSubmit: skipping submit process - no element selected"),this;var E,O=this;"function"==typeof N?N={success:N}:"string"==typeof N||!1===N&&0<arguments.length?(N={url:N,data:t,dataType:e},"function"==typeof n&&(N.success=n)):void 0===N&&(N={}),E=N.method||N.type||this.attr2("method"),n=(n=(n="string"==typeof(e=N.url||this.attr2("action"))?j.trim(e):"")||window.location.href||"")&&(n.match(/^([^#]+)/)||[])[1],N=j.extend(!0,{url:n,success:j.ajaxSettings.success,type:E||j.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},N);e={};if(this.trigger("form-pre-serialize",[this,N,e]),e.veto)return I("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(N.beforeSerialize&&!1===N.beforeSerialize(this,N))return I("ajaxSubmit: submit aborted via beforeSerialize callback"),this;n=N.traditional;void 0===n&&(n=j.ajaxSettings.traditional);var A=[],i=this.formToArray(N.semantic,A,N.filtering);if(N.data&&(o=j.isFunction(N.data)?N.data(i):N.data,N.extraData=o,c=j.param(o,n)),N.beforeSubmit&&!1===N.beforeSubmit(i,this,N))return I("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[i,this,N,e]),e.veto)return I("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var o=j.param(i,n);c&&(o=o?o+"&"+c:c),"GET"===N.type.toUpperCase()?(N.url+=(0<=N.url.indexOf("?")?"&":"?")+o,N.data=null):N.data=o;var r,a,s,l=[];N.resetForm&&l.push(function(){O.resetForm()}),N.clearForm&&l.push(function(){O.clearForm(N.includeHidden)}),!N.dataType&&N.target?(r=N.success||function(){},l.push(function(t,e,n){var i=arguments,o=N.replaceTarget?"replaceWith":"html";j(N.target)[o](t).each(function(){r.apply(this,i)})})):N.success&&(j.isArray(N.success)?j.merge(l,N.success):l.push(N.success)),N.success=function(t,e,n){for(var i=N.context||this,o=0,r=l.length;o<r;o++)l[o].apply(i,[t,e,n||O,O])},N.error&&(a=N.error,N.error=function(t,e,n){var i=N.context||this;a.apply(i,[t,e,n,O])}),N.complete&&(s=N.complete,N.complete=function(t,e){var n=N.context||this;s.apply(n,[t,e,O])});var e=0<j("input[type=file]:enabled",this).filter(function(){return""!==j(this).val()}).length,n="multipart/form-data",c=O.attr("enctype")===n||O.attr("encoding")===n,o=g.fileapi&&g.formdata;I("fileAPI :"+o);var u,n=(e||c)&&!o;!1!==N.iframe&&(N.iframe||n)?N.closeKeepAlive?j.get(N.closeKeepAlive,function(){u=d(i)}):u=d(i):u=(e||c)&&o?function(t){for(var n=new FormData,e=0;e<t.length;e++)n.append(t[e].name,t[e].value);if(N.extraData){var i=function(t){var e,n,i=j.param(t,N.traditional).split("&"),o=i.length,r=[];for(e=0;e<o;e++)i[e]=i[e].replace(/\+/g," "),n=i[e].split("="),r.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return r}(N.extraData);for(e=0;e<i.length;e++)i[e]&&n.append(i[e][0],i[e][1])}N.data=null;var o=j.extend(!0,{},j.ajaxSettings,N,{contentType:!1,processData:!1,cache:!1,type:E||"POST"});N.uploadProgress&&(o.xhr=function(){var t=j.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(t){var e=0,n=t.loaded||t.position,i=t.total;t.lengthComputable&&(e=Math.ceil(n/i*100)),N.uploadProgress(t,n,i,e)},!1),t});o.data=null;var r=o.beforeSend;return o.beforeSend=function(t,e){N.formData?e.data=N.formData:e.data=n,r&&r.call(this,t,e)},j.ajax(o)}(i):j.ajax(N),O.removeData("jqxhr").data("jqxhr",u);for(var p=0;p<A.length;p++)A[p]=null;return this.trigger("form-submit-notify",[this,N]),this;function d(t){var e,n,a,s,r,l,c,u,p,d,h=O[0],f=j.Deferred();if(f.abort=function(t){u.abort(t)},t)for(n=0;n<A.length;n++)e=j(A[n]),D?e.prop("disabled",!1):e.removeAttr("disabled");(a=j.extend(!0,{},j.ajaxSettings,N)).context=a.context||a,r="jqFormIO"+(new Date).getTime();var m=h.ownerDocument,g=O.closest("body");if(a.iframeTarget?(i=(l=j(a.iframeTarget,m)).attr2("name"))?r=i:l.attr2("name",r):(l=j('<iframe name="'+r+'" src="'+a.iframeSrc+'" />',m)).css({position:"absolute",top:"-1000px",left:"-1000px"}),c=l[0],u={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var e="timeout"===t?"timeout":"aborted";I("aborting upload... "+e),this.aborted=1;try{c.contentWindow.document.execCommand&&c.contentWindow.document.execCommand("Stop")}catch(t){}l.attr("src",a.iframeSrc),u.error=e,a.error&&a.error.call(a.context,u,e,t),s&&j.event.trigger("ajaxError",[u,a,e]),a.complete&&a.complete.call(a.context,u,e)}},(s=a.global)&&0==j.active++&&j.event.trigger("ajaxStart"),s&&j.event.trigger("ajaxSend",[u,a]),a.beforeSend&&!1===a.beforeSend.call(a.context,u,a))return a.global&&j.active--,f.reject(),f;if(u.aborted)return f.reject(),f;(t=h.clk)&&(i=t.name)&&!t.disabled&&(a.extraData=a.extraData||{},a.extraData[i]=t.value,"image"===t.type&&(a.extraData[i+".x"]=h.clk_x,a.extraData[i+".y"]=h.clk_y));var v=1,y=2;function b(e){var n=null;try{e.contentWindow&&(n=e.contentWindow.document)}catch(t){I("cannot get iframe.contentWindow document: "+t)}if(n)return n;try{n=e.contentDocument||e.document}catch(t){I("cannot get iframe.contentDocument: "+t),n=e.document}return n}var t=j("meta[name=csrf-token]").attr("content"),i=j("meta[name=csrf-param]").attr("content");function o(){var t=O.attr2("target"),e=O.attr2("action"),n=O.attr("enctype")||O.attr("encoding")||"multipart/form-data";h.setAttribute("target",r),E&&!/post/i.test(E)||h.setAttribute("method","POST"),e!==a.url&&h.setAttribute("action",a.url),a.skipEncodingOverride||E&&!/post/i.test(E)||O.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),a.timeout&&(d=setTimeout(function(){p=!0,T(v)},a.timeout));var i=[];try{if(a.extraData)for(var o in a.extraData)a.extraData.hasOwnProperty(o)&&(j.isPlainObject(a.extraData[o])&&a.extraData[o].hasOwnProperty("name")&&a.extraData[o].hasOwnProperty("value")?i.push(j('<input type="hidden" name="'+a.extraData[o].name+'">',m).val(a.extraData[o].value).appendTo(h)[0]):i.push(j('<input type="hidden" name="'+o+'">',m).val(a.extraData[o]).appendTo(h)[0]));a.iframeTarget||l.appendTo(g),c.attachEvent?c.attachEvent("onload",T):c.addEventListener("load",T,!1),setTimeout(function t(){try{var e=b(c).readyState;I("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(t){I("Server abort: ",t," (",t.name,")"),T(y),d&&clearTimeout(d),d=void 0}},15);try{h.submit()}catch(t){document.createElement("form").submit.apply(h)}}finally{h.setAttribute("action",e),h.setAttribute("enctype",n),t?h.setAttribute("target",t):O.removeAttr("target"),j(i).remove()}}i&&t&&(a.extraData=a.extraData||{},a.extraData[i]=t),a.forceSync?o():setTimeout(o,10);var w,x,k,$=50;function T(t){if(!u.aborted&&!k){if((x=b(c))||(I("cannot access response document"),t=y),t===v&&u)return u.abort("timeout"),void f.reject(u,"timeout");if(t===y&&u)return u.abort("server abort"),void f.reject(u,"error","server abort");if(x&&x.location.href!==a.iframeSrc||p){c.detachEvent?c.detachEvent("onload",T):c.removeEventListener("load",T,!1);var e,n="success";try{if(p)throw"timeout";var i="xml"===a.dataType||x.XMLDocument||j.isXMLDoc(x);if(I("isXml="+i),!i&&window.opera&&(null===x.body||!x.body.innerHTML)&&--$)return I("requeing onLoad callback, DOM not available"),void setTimeout(T,250);var o=x.body||x.documentElement;u.responseText=o?o.innerHTML:null,u.responseXML=x.XMLDocument||x,i&&(a.dataType="xml"),u.getResponseHeader=function(t){return{"content-type":a.dataType}[t.toLowerCase()]},o&&(u.status=Number(o.getAttribute("status"))||u.status,u.statusText=o.getAttribute("statusText")||u.statusText);var r=(a.dataType||"").toLowerCase(),i=/(json|script|text)/.test(r);i||a.textarea?(o=x.getElementsByTagName("textarea")[0])?(u.responseText=o.value,u.status=Number(o.getAttribute("status"))||u.status,u.statusText=o.getAttribute("statusText")||u.statusText):i&&(o=x.getElementsByTagName("pre")[0],i=x.getElementsByTagName("body")[0],o?u.responseText=o.textContent||o.innerText:i&&(u.responseText=i.textContent||i.innerText)):"xml"===r&&!u.responseXML&&u.responseText&&(u.responseXML=_(u.responseText));try{w=S(u,r,a)}catch(t){n="parsererror",u.error=e=t||n}}catch(t){I("error caught: ",t),n="error",u.error=e=t||n}u.aborted&&(I("upload aborted"),n=null),u.status&&(n=200<=u.status&&u.status<300||304===u.status?"success":"error"),"success"===n?(a.success&&a.success.call(a.context,w,"success",u),f.resolve(u.responseText,"success",u),s&&j.event.trigger("ajaxSuccess",[u,a])):n&&(void 0===e&&(e=u.statusText),a.error&&a.error.call(a.context,u,n,e),f.reject(u,"error",e),s&&j.event.trigger("ajaxError",[u,a,e])),s&&j.event.trigger("ajaxComplete",[u,a]),s&&!--j.active&&j.event.trigger("ajaxStop"),a.complete&&a.complete.call(a.context,u,n),k=!0,a.timeout&&clearTimeout(d),setTimeout(function(){a.iframeTarget?l.attr("src",a.iframeSrc):l.remove(),u.responseXML=null},100)}}}var _=j.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!==e.documentElement.nodeName?e:null},C=j.parseJSON||function(t){return window.eval("("+t+")")},S=function(t,e,n){var i=t.getResponseHeader("content-type")||"",o=("xml"===e||!e)&&0<=i.indexOf("xml"),t=o?t.responseXML:t.responseText;return o&&"parsererror"===t.documentElement.nodeName&&j.error&&j.error("parsererror"),n&&n.dataFilter&&(t=n.dataFilter(t,e)),"string"==typeof t&&(("json"===e||!e)&&0<=i.indexOf("json")?t=C(t):("script"===e||!e)&&0<=i.indexOf("javascript")&&j.globalEval(t)),t};return f}},j.fn.ajaxForm=function(t,e,n,i){if(("string"==typeof t||!1===t&&0<arguments.length)&&(t={url:t,data:e,dataType:n},"function"==typeof i&&(t.success=i)),(t=t||{}).delegation=t.delegation&&j.isFunction(j.fn.on),t.delegation||0!==this.length)return t.delegation?(j(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,a),this):this.ajaxFormUnbind().on("submit.form-plugin",t,r).on("click.form-plugin",t,a);var o={s:this.selector,c:this.context};return!j.isReady&&o.s?(I("DOM not ready, queuing ajaxForm"),j(function(){j(o.s,o.c).ajaxForm(t)})):I("terminating; zero elements found by selector"+(j.isReady?"":" (DOM not ready)")),this},j.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},j.fn.formToArray=function(t,e,n){var i=[];if(0===this.length)return i;var o,r,a,s,l,c,u,p,d=this[0],h=this.attr("id"),f=(f=t||void 0===d.elements?d.getElementsByTagName("*"):d.elements)&&j.makeArray(f);if(h&&(t||/(Edge|Trident)\//.test(navigator.userAgent))&&(u=j(':input[form="'+h+'"]').get()).length&&(f=(f||[]).concat(u)),!f||!f.length)return i;for(j.isFunction(n)&&(f=j.map(f,n)),o=0,l=f.length;o<l;o++)if((p=(s=f[o]).name)&&!s.disabled)if(t&&d.clk&&"image"===s.type)d.clk===s&&(i.push({name:p,value:j(s).val(),type:s.type}),i.push({name:p+".x",value:d.clk_x},{name:p+".y",value:d.clk_y}));else if((a=j.fieldValue(s,!0))&&a.constructor===Array)for(e&&e.push(s),r=0,c=a.length;r<c;r++)i.push({name:p,value:a[r]});else if(g.fileapi&&"file"===s.type){e&&e.push(s);var m=s.files;if(m.length)for(r=0;r<m.length;r++)i.push({name:p,value:m[r],type:s.type});else i.push({name:p,value:"",type:s.type})}else null!=a&&(e&&e.push(s),i.push({name:p,value:a,type:s.type,required:s.required}));return t||!d.clk||(p=(n=(u=j(d.clk))[0]).name)&&!n.disabled&&"image"===n.type&&(i.push({name:p,value:u.val()}),i.push({name:p+".x",value:d.clk_x},{name:p+".y",value:d.clk_y})),i},j.fn.formSerialize=function(t){return j.param(this.formToArray(t))},j.fn.fieldSerialize=function(o){var r=[];return this.each(function(){var t=this.name;if(t){var e=j.fieldValue(this,o);if(e&&e.constructor===Array)for(var n=0,i=e.length;n<i;n++)r.push({name:t,value:e[n]});else null!=e&&r.push({name:this.name,value:e})}}),j.param(r)},j.fn.fieldValue=function(t){for(var e=[],n=0,i=this.length;n<i;n++){var o=this[n],o=j.fieldValue(o,t);null==o||o.constructor===Array&&!o.length||(o.constructor===Array?j.merge(e,o):e.push(o))}return e},j.fieldValue=function(t,e){var n=t.name,i=t.type,o=t.tagName.toLowerCase();if(void 0===e&&(e=!0),e&&(!n||t.disabled||"reset"===i||"button"===i||("checkbox"===i||"radio"===i)&&!t.checked||("submit"===i||"image"===i)&&t.form&&t.form.clk!==t||"select"===o&&-1===t.selectedIndex))return null;if("select"!==o)return j(t).val().replace(d,"\r\n");o=t.selectedIndex;if(o<0)return null;for(var r=[],a=t.options,s="select-one"===i,l=s?o+1:a.length,c=s?o:0;c<l;c++){var u=a[c];if(u.selected&&!u.disabled){var p=(p=u.value)||(u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value);if(s)return p;r.push(p)}}return r},j.fn.clearForm=function(t){return this.each(function(){j("input,select,textarea",this).clearFields(t)})},j.fn.clearFields=j.fn.clearInputs=function(n){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,e=this.tagName.toLowerCase();i.test(t)||"textarea"===e?this.value="":"checkbox"===t||"radio"===t?this.checked=!1:"select"===e?this.selectedIndex=-1:"file"===t?/MSIE/.test(navigator.userAgent)?j(this).replaceWith(j(this).clone(!0)):j(this).val(""):n&&(!0===n&&/hidden/.test(t)||"string"==typeof n&&j(this).is(n))&&(this.value="")})},j.fn.resetForm=function(){return this.each(function(){var e=j(this),t=this.tagName.toLowerCase();switch(t){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var n=e.parents("select");return n.length&&n[0].multiple?"option"===t?this.selected=this.defaultSelected:e.find("option").resetForm():n.resetForm(),!0;case"select":return e.find("option").each(function(t){if(this.selected=this.defaultSelected,this.defaultSelected&&!e[0].multiple)return e[0].selectedIndex=t,!1}),!0;case"label":var i=j(e.attr("for")),n=e.find("input,select,textarea");return i[0]&&n.unshift(i[0]),n.resetForm(),!0;case"form":return"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset(),!0;default:return e.find("form,input,label,select,textarea").resetForm(),!0}})},j.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},j.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var t=this.type;"checkbox"===t||"radio"===t?this.checked=e:"option"===this.tagName.toLowerCase()&&(t=j(this).parent("select"),e&&t[0]&&"select-one"===t[0].type&&t.find("option").selected(!1),this.selected=e)})},j.fn.ajaxSubmit.debug=!1}),define("mockup-patterns-modal",["jquery","underscore","pat-base","mockup-patterns-backdrop","pat-registry","mockup-router","mockup-utils","translate","jquery.form"],function(u,s,t,i,o,e,r,a){"use strict";return t.extend({name:"plone-modal",trigger:".pat-plone-modal",parser:"mockup",createModal:null,$model:null,defaults:{width:"",height:"",margin:20,position:"center middle",triggers:[],zIndexSelector:".plone-modal-wrapper,.plone-modal-backdrop",backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.85",className:"plone-modal-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"], .formControls > button',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:"#global_statusmessage",onRender:null,templateOptions:{className:"plone-modal fade",classDialog:"plone-modal-dialog",classModal:"plone-modal-content",classHeaderName:"plone-modal-header",classBodyName:"plone-modal-body",classFooterName:"plone-modal-footer",classWrapperName:"plone-modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"in",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %>">    <div class="<%= options.classModal %>">      <div class="<%= options.classHeaderName %>">        <a class="plone-modal-close">&times;</a>        <% if (title) { %><h2 class="plone-modal-title"><%= title %></h2><% } %>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <% if (buttons) { %><%= buttons %><% } %>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",disableAjaxFormSubmit:!1,target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:5e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error, .statusmessage-error",formFieldError:".field.error",onSuccess:null,onError:null,onFormError:null,onTimeout:null,redirectOnResponse:!1,redirectToUrl:function(t,e,n){var i=/<body.*data-view-url=[\"'](.*)[\"'].*/im.exec(e);return i&&1<i.length||(i=/<body.*data-base-url=[\"'](.*)[\"'].*/im.exec(e))&&1<i.length?i[1].split('"')[0]:(i=/<base.*href=[\"'](.*)[\"'].*/im.exec(e))&&1<i.length?i[1]:""}},routerOptions:{id:null,pathExp:null},form:function(t){var r=this,a=r.$modal;r.options.automaticallyAddButtonActions&&(t[r.options.buttons]={}),t.a={},u.each(t,function(t,n){var e=s.union(s.keys(r.options.actionOptions),["templateOptions"]),i=u.extend(!0,{},r.options.actionOptions,s.pick(n,e));n.templateOptions=u.extend(!0,n.templateOptions,r.options.templateOptions);var e=s.union(s.keys(r.options.actionOptions),["actions","actionOptions"]),o=u.extend(!0,s.omit(n,e),r.options);u(t,u("."+n.templateOptions.classBodyName,a)).each(function(t){var e=u(this);e.on(i.eventType,function(t){t.stopPropagation(),t.preventDefault(),r.loading.show(!1),null!==i.modalFunction?r[i.modalFunction]():u.nodeName(e[0],"input")||u.nodeName(e[0],"button")||!0===n.isForm?r.options.handleFormAction.apply(r,[e,i,o]):null===n.ajaxUrl&&!u.nodeName(e[0],"a")||r.options.handleLinkAction.apply(r,[e,i,o])})})})},handleFormAction:function(o,r,a){var t,e,s=this,n={};if(n[o.attr("name")]=o.attr("value"),t=u.nodeName(o[0],"form")?o:o.parents("form:not(.disableAutoSubmit)"),e=null!==r.ajaxUrl?"function"==typeof r.ajaxUrl?r.ajaxUrl.apply(s,[o,r]):r.ajaxUrl:o.parents("form").attr("action"),r.disableAjaxFormSubmit)return o.attr("name")&&o.attr("value")&&t.append(u('<input type="hidden" name="'+o.attr("name")+'" value="'+o.attr("value")+'" />')),void t.trigger("submit");t.on("submit",function(t){t.preventDefault()}),t.trigger("submit"),s.loading.show(!1),t.ajaxSubmit({timeout:r.timeout,data:n,url:e,error:function(t,e,n){s.loading.hide(),"timeout"===e&&r.onTimeout?r.onTimeout.apply(s,t,n):r.onError?"string"==typeof r.onError?window[r.onError](t,e,n):r.onError(t,e,n):console.log("error happened",e," do something"),s.emit("formActionError",[t,e,n])},success:function(t,e,n,i){s.loading.hide(),0===u(r.error,t).length&&0===u(r.formFieldError,t).length?!0!==r.redirectOnResponse?(r.onSuccess&&("string"==typeof r.onSuccess?window[r.onSuccess](s,t,e,n,i):r.onSuccess(s,t,e,n,i)),!0===r.displayInModal?s.redraw(t,a):(o.trigger("destroy.plone-modal.patterns"),r.reloadWindowOnClose&&s.reloadWindow()),s.emit("formActionSuccess",[t,e,n,i])):"function"==typeof r.redirectToUrl?window.parent.location.href=r.redirectToUrl.apply(s,[o,t,r]):window.parent.location.href=r.redirectToUrl:r.onFormError?"string"==typeof r.onFormError?window[r.onFormError](s,t,e,n,i):r.onFormError(s,t,e,n,i):s.redraw(t,a)}})},handleLinkAction:function(t,i,o){var e,r=this;t.hasClass("pat-plone-modal")||(e=i.ajaxUrl?"function"==typeof i.ajaxUrl?i.ajaxUrl.apply(r,[t,i]):i.ajaxUrl:t.attr("href"),!1!==i.displayInModal?u.ajax({url:e}).fail(function(t,e,n){"timeout"===e&&i.onTimeout?i.onTimeout(r.$modal,t,n):i.onError?i.onError(t,e,n):window.alert(a("There was an error loading modal.")),r.emit("linkActionError",[t,e,n])}).done(function(t,e,n){r.redraw(t,o),i.onSuccess&&("string"==typeof i.onSuccess?window[i.onSuccess](r,t,e,n):i.onSuccess(r,t,e,n)),r.emit("linkActionSuccess",[t,e,n])}).always(function(){r.loading.hide()}):"_blank"===t.attr("target")?(window.open(e,"_blank"),r.loading.hide()):window.location=e)},render:function(t){var e,n,i,o=this;o.emit("before-render"),o.$raw&&(e=o.$raw.clone(),u("input:checked",e).each(function(){this.setAttribute&&this.setAttribute("checked","checked")}),n={title:"",prepend:"<div />",content:"",buttons:'<div class="pattern-modal-buttons"></div>',options:t.templateOptions},null===t.title?(i=u(t.titleSelector,e),n.title=i.html(),u(t.titleSelector,e).remove()):n.title=t.title,t.prependContent&&(n.prepend=u("<div />").append(u(t.prependContent,e).clone()).html(),u(t.prependContent,e).remove()),t.content?n.content=u(t.content,e).html():n.content=e.html(),o.$modal=u(s.template(o.options.templateOptions.template)(n)),o.$modalDialog=u("> ."+o.options.templateOptions.classDialog,o.$modal),o.$modalContent=u("> ."+o.options.templateOptions.classModal,o.$modalDialog),u("form",o.$modal).on("keydown",function(t){13===t.keyCode&&"TEXTAREA"!==t.target.nodeName&&(t.preventDefault(),u("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click"))}),u(t.buttons,o.$modal).each(function(){var e=u(this);e.on("click",function(t){t.stopPropagation(),t.preventDefault()}).clone().appendTo(u(".pattern-modal-buttons",o.$modal)).off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),e.trigger("click")}),e.hide()}),o.emit("before-events-setup"),u(".plone-modal-header > a.plone-modal-close, .plone-modal-footer > a.plone-modal-close",o.$modal).off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),u(t.target).trigger("destroy.plone-modal.patterns")}),t.form&&t.form.apply(o,[t.actions]),o.$modal.addClass(o.options.templateOptions.className).on("destroy.plone-modal.patterns",function(t){t.stopPropagation(),o.hide()}).on("resize.plone-modal.patterns",function(t){t.stopPropagation(),t.preventDefault(),o.positionModal()}).appendTo(o.$wrapperInner),o.options.loadLinksWithinModal&&o.$modal.on("click",function(t){t.stopPropagation(),u.nodeName(t.target,"a")&&t.preventDefault(),o.$modal.trigger("modal-click")}),o.$modal.data("pattern-"+o.name,o),o.emit("after-render"),t.onRender&&("string"==typeof t.onRender?window[t.onRender](o):t.onRender(o)))}},reloadWindow:function(){window.parent.location.reload()},init:function(){var i=this;i.options.loadLinksWithinModal=u.parseJSON(i.options.loadLinksWithinModal),null!==i.options.routerOptions.id&&e.addRoute("modal",i.options.routerOptions.id,function(){this.show()},i,i.options.routerOptions.pathExp,i.options.routerOptions.expReplace),!0===i.options.backdropOptions.closeOnEsc&&u(document).on("keydown",function(t,e){i.$el.is("."+i.options.templateOptions.classActiveName)&&27===t.keyCode&&i.hide()}),u(window.parent).resize(function(){i.positionModal()}),i.options.triggers&&u.each(i.options.triggers,function(t,e){var n=e.substring(0,e.indexOf(" ")),e=e.substring(e.indexOf(" "),e.length);u(e||i.$el).on(n,function(t){t.stopPropagation(),t.preventDefault(),i.show()})}),i.$el.is("a")&&(i.$el.attr("href")&&!i.options.image&&(!i.options.target&&"#"===i.$el.attr("href").substr(0,1)&&1<i.$el.attr("href").length&&(i.options.target=i.$el.attr("href"),i.options.content=""),i.options.ajaxUrl||"#"===i.$el.attr("href").substr(0,1)||(i.options.ajaxUrl=function(){return i.$el.attr("href")})),i.$el.on("click",function(t){t.stopPropagation(),t.preventDefault(),i.show()})),i.initModal()},createAjaxModal:function(){var o=this;o.emit("before-ajax"),o.loading.show();var t=o.options.ajaxUrl;"function"==typeof t&&(t=t.apply(o,[o.options])),o.ajaxXHR=u.ajax({url:t,type:o.options.ajaxType}).done(function(t,e,n){o.ajaxXHR=void 0,o.$raw=u("<div />").append(u(r.parseBodyTag(t))),o.emit("after-ajax",o,e,n),o._show()}).fail(function(t,e,n){var i=o.options.actionOptions;"timeout"===e&&i.onTimeout?i.onTimeout(o.$modal,t,n):i.onError?i.onError(t,e,n):(window.alert(a("There was an error loading modal.")),o.hide()),o.emit("linkActionError",[t,e,n])}).always(function(){o.loading.hide()})},createTargetModal:function(){this.$raw=u(this.options.target).clone(),this._show()},createBasicModal:function(){this.$raw=u("<div/>").html(this.$el.clone()),this._show()},createHtmlModal:function(){var t=u(this.options.html);this.$raw=t,this._show()},createImageModal:function(){var t=this;t.$wrapper.addClass("image-modal");var e=t.$el.attr("href"),n=t.$el.attr("data-modal-srcset")||"",i=u.trim(t.$el.context.innerText)||"Image";t.$raw=u("<div><h1>"+i+'</h1><div id="content"><div class="modal-image"><img src="'+e+'" srcset="'+n+'" /></div></div></div>'),t._show()},initModal:function(){var t=this;t.options.ajaxUrl?t.createModal=t.createAjaxModal:t.options.target?t.createModal=t.createTargetModal:t.options.html?t.createModal=t.createHtmlModal:t.options.image?t.createModal=t.createImageModal:t.createModal=t.createBasicModal},findPosition:function(t,e,n,i,o,r,a){var s,l,c={},u=l=s="auto";return"left"===t?(l=r<i?"0px":n+"px",c.left=l):"right"===t?(u=r<i?"0px":n+"px",c.right=u,c.left="auto"):(l=r<i?"0px":r/2-i/2-n+"px",c.left=l),"top"===e?(s=a<o?"0px":n+"px",c.top=s):"bottom"===e?(e=a<o?"0px":n+"px",c.bottom=e,c.top="auto"):(s=a<o?"0px":a/2-o/2-n+"px",c.top=s),c},modalInitialized:function(){return null!==this.$modal&&void 0!==this.$modal},positionModal:function(){var t=this;if(t.modalInitialized()){t.$modal.removeAttr("style"),t.$wrapper.parent().is("body")&&t.$wrapper.height(u(window.parent).height());var e="function"==typeof t.options.margin?t.options.margin():t.options.margin;t.$modal.css({position:"absolute",padding:e}),t.$modalDialog.css({margin:"0",padding:"0",width:t.options.width,height:t.options.height}),t.$modalContent.css({width:t.options.width});var n,i=t.options.position.split(" "),o=i[0],r=i[1],a=t.$modalDialog.outerWidth(!0),s=t.$modalDialog.outerHeight(!0),l=t.$wrapperInner.width(),i=t.$wrapperInner.height(),c=t.findPosition(o,r,e,a,s,l,i);for(n in c)t.$modalDialog.css(n,c[n])}},render:function(t){this.emit("render"),this.options.render.apply(this,[t]),this.emit("rendered")},show:function(){this.backdrop=this.createBackdrop(),this.createModal()},createBackdrop:function(){var e=this,n=new i(e.$el.parents(e.options.backdrop),e.options.backdropOptions),t=1041;return u(e.options.zIndexSelector).each(function(){t=Math.max(t,parseInt(u(this).css("zIndex"))+1||1041)}),e.$wrapper=u("<div/>").hide().css({"z-index":t,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(e.options.templateOptions.classWrapperName).insertBefore(n.$backdrop).on("click",function(t){e.options.backdropOptions.closeOnClick&&(t.stopPropagation(),t.preventDefault(),n.hide())}),n.on("hidden",function(t){void 0!==e.$modal&&e.$modal.hasClass(e.options.templateOptions.classActiveName)&&e.hide()}),e.loading=new r.Loading({backdrop:n}),e.$wrapperInner=u("<div/>").addClass(e.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(e.$wrapper),n},_show:function(){var t=this;t.render.apply(t,[t.options]),t.emit("show"),t.backdrop.show(),t.$wrapper.show(),t.loading.hide(),t.$el.addClass(t.options.templateOptions.classActiveName),t.$modal.addClass(t.options.templateOptions.classActiveName),o.scan(t.$modal),t.positionModal(),u(window.parent).on("resize.plone-modal.patterns",function(){t.positionModal()}),u("body").addClass("plone-modal-open"),t.emit("shown")},hide:function(){var t=this;t.ajaxXHR&&t.ajaxXHR.abort(),t.emit("hide"),t._suppressHide&&!window.confirm(t._suppressHide)||(t.loading.hide(),t.$el.removeClass(t.options.templateOptions.classActiveName),void 0!==t.$modal&&(t.$modal.remove(),t.initModal()),t.$wrapper.remove(),u(".plone-modal",u("body")).length<1&&(t._suppressHide=void 0,t.backdrop.hide(),u("body").removeClass("plone-modal-open"),u(window.parent).off("resize.plone-modal.patterns")),t.emit("hidden"),t.$el.focus())},redraw:function(t,e){var n=this;n.emit("beforeDraw"),n.$modal.remove(),n.$raw=u("<div />").append(u(r.parseBodyTag(t))),n.render.apply(n,[e||n.options]),n.$modal.addClass(n.options.templateOptions.classActiveName),n.positionModal(),o.scan(n.$modal),n.emit("afterDraw")}})}),define("mockup-patterns-navigationmarker",["jquery","pat-base"],function(c,t){return t.extend({name:"navigationmarker",trigger:".pat-navigationmarker",parser:"mockup",init:function(){var l=document.querySelector('head link[rel="canonical"]').href||window.location.href;c("a",this.$el).each(function(){var t=this.href.replace("/view","");if(-1!==l.indexOf(t)){var e=c(this).parent(),n=e.find("> input");n.length&&(n[0].checked=!0);for(var i=l.split("/"),o=t.split("/"),r=!1,a=0,s=o.length;a<s;a++)r=!1,o[a]===i[a]&&(r=!0);r&&e.addClass("inPath"),l===t&&e.addClass("current")}})}})}),define("mockup-patterns-preventdoublesubmit",["jquery","pat-base","translate"],function(n,t,e){"use strict";return t.extend({name:"preventdoublesubmit",trigger:".pat-preventdoublesubmit",parser:"mockup",defaults:{message:e("You already clicked the submit button. Do you really want to submit this form again?"),guardClassName:"submitting",optOutClassName:"allowMultiSubmit"},init:function(){var e=this;e.$el.is("form")&&n(":submit",e.$el).click(function(t){return n(":submit").removeAttr("clicked"),n(this).attr("clicked","clicked"),n(this).hasClass(e.options.guardClassName)&&!n(this).hasClass(e.options.optOutClassName)?e._confirm.call(e):void n(this).addClass(e.options.guardClassName)})},_confirm:function(t){return window.confirm(this.options.message)}})}),function(t){define("bootstrap-collapse",["jquery"],function(){return function(){return function(o){"use strict";var r=function(t,e){this.$element=o(t),this.options=o.extend({},r.DEFAULTS,e),this.$trigger=o('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(t){var e=t.attr("data-target")||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return o(document).find(e)}function a(i){return this.each(function(){var t=o(this),e=t.data("bs.collapse"),n=o.extend({},r.DEFAULTS,t.data(),"object"==typeof i&&i);!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||t.data("bs.collapse",e=new r(this,n)),"string"==typeof i&&e[i]()})}r.VERSION="3.4.1",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&(i=t.data("bs.collapse"))&&i.transitioning)){var e=o.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){t&&t.length&&(a.call(t,"hide"),i||t.data("bs.collapse",null));var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var i=function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!o.support.transition)return i.call(this);t=o.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",o.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[n](this.$element[0][t])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=o.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;t=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!o.support.transition)return t.call(this);this.$element[e](0).one("bsTransitionEnd",o.proxy(t,this)).emulateTransitionEnd(r.TRANSITION_DURATION)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return o(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(o.proxy(function(t,e){e=o(e);this.addAriaAndCollapsedClass(n(e),e)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var t=o.fn.collapse;o.fn.collapse=a,o.fn.collapse.Constructor=r,o.fn.collapse.noConflict=function(){return o.fn.collapse=t,this},o(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=o(this);e.attr("data-target")||t.preventDefault();t=n(e),e=t.data("bs.collapse")?"toggle":e.data();a.call(t,e)})}(jQuery),window.jQuery.fn.collapse.Constructor}.apply(t,arguments)})}(this),function(t){define("bootstrap-dropdown",["jquery"],function(){return function(){!function(o){"use strict";function i(t){o(t).on("click.bs.dropdown",this.toggle)}var r='[data-toggle="dropdown"]';function a(t){var e=t.attr("data-target"),e="#"!==(e=e||(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""))?o(document).find(e):null;return e&&e.length?e:t.parent()}function s(i){i&&3===i.which||(o(".dropdown-backdrop").remove(),o(r).each(function(){var t=o(this),e=a(t),n={relatedTarget:this};e.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&o.contains(e[0],i.target)||(e.trigger(i=o.Event("hide.bs.dropdown",n)),i.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger(o.Event("hidden.bs.dropdown",n)))))}))}i.VERSION="3.4.1",i.prototype.toggle=function(t){var e=o(this);if(!e.is(".disabled, :disabled")){var n=a(e),i=n.hasClass("open");if(s(),!i){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&o(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(o(this)).on("click",s);i={relatedTarget:this};if(n.trigger(t=o.Event("show.bs.dropdown",i)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(o.Event("shown.bs.dropdown",i))}return!1}},i.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=o(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=a(e),i=n.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&n.find(r).trigger("focus"),e.trigger("click");e=n.find(".dropdown-menu li:not(.disabled):visible a");e.length&&(n=e.index(t.target),38==t.which&&0<n&&n--,40==t.which&&n<e.length-1&&n++,~n||(n=0),e.eq(n).trigger("focus"))}}};var t=o.fn.dropdown;o.fn.dropdown=function(n){return this.each(function(){var t=o(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new i(this)),"string"==typeof n&&e[n].call(t)})},o.fn.dropdown.Constructor=i,o.fn.dropdown.noConflict=function(){return o.fn.dropdown=t,this},o(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,i.prototype.toggle).on("keydown.bs.dropdown.data-api",r,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery)}.apply(t,arguments)})}(this),function(t){define("bootstrap-tooltip",["jquery"],function(){return function(){!function(h){"use strict";var i=["sanitize","whiteList","sanitizeFn"],f=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],t={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},m=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function o(t,e,n){if(0===t.length)return t;if(n&&"function"==typeof n)return n(t);if(!document.implementation||!document.implementation.createHTMLDocument)return t;n=document.implementation.createHTMLDocument("sanitization");n.body.innerHTML=t;for(var i=h.map(e,function(t,e){return e}),o=h(n.body).find("*"),r=0,a=o.length;r<a;r++){var s=o[r],l=s.nodeName.toLowerCase();if(-1!==h.inArray(l,i))for(var c=h.map(s.attributes,function(t){return t}),u=[].concat(e["*"]||[],e[l]||[]),p=0,d=c.length;p<d;p++)!function(t,e){var n=t.nodeName.toLowerCase();if(-1!==h.inArray(n,e))return-1===h.inArray(n,f)||Boolean(t.nodeValue.match(m)||t.nodeValue.match(g));for(var i=h(e).filter(function(t,e){return e instanceof RegExp}),o=0,r=i.length;o<r;o++)if(n.match(i[o]))return 1}(c[p],u)&&s.removeAttribute(c[p].nodeName);else s.parentNode.removeChild(s)}return n.body.innerHTML}function l(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)}l.VERSION="3.4.1",l.TRANSITION_DURATION=150,l.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:t},l.prototype.init=function(t,e,n){if(this.enabled=!0,this.type=t,this.$element=h(e),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&h(document).find(h.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var r,a=i[o];"click"==a?this.$element.on("click."+this.type,this.options.selector,h.proxy(this.toggle,this)):"manual"!=a&&(r="hover"==a?"mouseenter":"focusin",a="hover"==a?"mouseleave":"focusout",this.$element.on(r+"."+this.type,this.options.selector,h.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,h.proxy(this.leave,this)))}this.options.selector?this._options=h.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},l.prototype.getDefaults=function(){return l.DEFAULTS},l.prototype.getOptions=function(t){var e,n=this.$element.data();for(e in n)n.hasOwnProperty(e)&&-1!==h.inArray(e,i)&&delete n[e];return(t=h.extend({},this.getDefaults(),n,t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t.sanitize&&(t.template=o(t.template,t.whiteList,t.sanitizeFn)),t},l.prototype.getDelegateOptions=function(){var n={},i=this.getDefaults();return this._options&&h.each(this._options,function(t,e){i[t]!=e&&(n[t]=e)}),n},l.prototype.enter=function(t){var e=t instanceof this.constructor?t:h(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),h(t.currentTarget).data("bs."+this.type,e)),t instanceof h.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState)e.hoverState="in";else{if(clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},l.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},l.prototype.leave=function(t){var e=t instanceof this.constructor?t:h(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),h(t.currentTarget).data("bs."+this.type,e)),t instanceof h.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue()){if(clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)}},l.prototype.show=function(){var e,t,n,i,o,r,a,s=h.Event("show.bs."+this.type);this.hasContent()&&this.enabled&&(this.$element.trigger(s),n=h.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),!s.isDefaultPrevented()&&n&&(t=(e=this).tip(),r=this.getUID(this.type),this.setContent(),t.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&t.addClass("fade"),a="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,(o=(i=/\s?auto?\s?/i).test(a))&&(a=a.replace(i,"")||"top"),t.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?t.appendTo(h(document).find(this.options.container)):t.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type),s=this.getPosition(),n=t[0].offsetWidth,r=t[0].offsetHeight,o&&(i=a,o=this.getPosition(this.$viewport),a="bottom"==a&&s.bottom+r>o.bottom?"top":"top"==a&&s.top-r<o.top?"bottom":"right"==a&&s.right+n>o.width?"left":"left"==a&&s.left-n<o.left?"right":a,t.removeClass(i).addClass(a)),r=this.getCalculatedOffset(a,s,n,r),this.applyPlacement(r,a),a=function(){var t=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==t&&e.leave(e)},h.support.transition&&this.$tip.hasClass("fade")?t.one("bsTransitionEnd",a).emulateTransitionEnd(l.TRANSITION_DURATION):a()))},l.prototype.applyPlacement=function(t,e){var n=this.tip(),i=n[0].offsetWidth,o=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),t.top+=r,t.left+=a,h.offset.setOffset(n[0],h.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),n.addClass("in");var s=n[0].offsetWidth,r=n[0].offsetHeight;"top"==e&&r!=o&&(t.top=t.top+o-r);a=this.getViewportAdjustedDelta(e,t,s,r);a.left?t.left+=a.left:t.top+=a.top;e=/top|bottom/.test(e),o=e?2*a.left-i+s:2*a.top-o+r,r=e?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(o,n[0][r],e)},l.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},l.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=o(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},l.prototype.hide=function(t){var e=this,n=h(this.$tip),i=h.Event("hide.bs."+this.type);function o(){"in"!=e.hoverState&&n.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(i),!i.isDefaultPrevented())return n.removeClass("in"),h.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",o).emulateTransitionEnd(l.TRANSITION_DURATION):o(),this.hoverState=null,this},l.prototype.fixTitle=function(){var t=this.$element;!t.attr("title")&&"string"==typeof t.attr("data-original-title")||t.attr("data-original-title",t.attr("title")||"").attr("title","")},l.prototype.hasContent=function(){return this.getTitle()},l.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],n="BODY"==e.tagName,i=e.getBoundingClientRect();null==i.width&&(i=h.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));e=window.SVGElement&&e instanceof window.SVGElement,e=n?{top:0,left:0}:e?null:t.offset(),t={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},n=n?{width:h(window).width(),height:h(window).height()}:null;return h.extend({},i,t,n,e)},l.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},l.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r,a=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);return/right|left/.test(t)?(t=e.top-a-s.scroll,r=e.top+a-s.scroll+i,t<s.top?o.top=s.top-t:r>s.top+s.height&&(o.top=s.top+s.height-r)):(r=e.left-a,n=e.left+a+n,r<s.left?o.left=s.left-r:n>s.right&&(o.left=s.left+s.width-n)),o},l.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},l.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},l.prototype.tip=function(){if(!this.$tip&&(this.$tip=h(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},l.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},l.prototype.enable=function(){this.enabled=!0},l.prototype.disable=function(){this.enabled=!1},l.prototype.toggleEnabled=function(){this.enabled=!this.enabled},l.prototype.toggle=function(t){var e=this;t&&((e=h(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),h(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},l.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})},l.prototype.sanitizeHtml=function(t){return o(t,this.options.whiteList,this.options.sanitizeFn)};var e=h.fn.tooltip;h.fn.tooltip=function(i){return this.each(function(){var t=h(this),e=t.data("bs.tooltip"),n="object"==typeof i&&i;!e&&/destroy|hide/.test(i)||(e||t.data("bs.tooltip",e=new l(this,n)),"string"==typeof i&&e[i]())})},h.fn.tooltip.Constructor=l,h.fn.tooltip.noConflict=function(){return h.fn.tooltip=e,this}}(jQuery)}.apply(t,arguments)})}(this),require(["mockup-patterns-autotoc","mockup-patterns-contentloader","mockup-patterns-cookietrigger","mockup-patterns-formautofocus","mockup-patterns-formunloadalert","mockup-patterns-livesearch","mockup-patterns-markspeciallinks","mockup-patterns-modal","mockup-patterns-navigationmarker","mockup-patterns-preventdoublesubmit","bootstrap-collapse","bootstrap-dropdown","bootstrap-tooltip"],function(){}),define("/home/_thet/data/dev/plone/buildout.coredev-60/src/plone.staticresources/src/plone/staticresources/static/plone.js",function(){});
//# sourceMappingURL=plone-compiled.min.js.map