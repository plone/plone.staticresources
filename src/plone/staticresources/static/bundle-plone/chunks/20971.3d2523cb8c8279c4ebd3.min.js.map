{"version":3,"file":"chunks/20971.3d2523cb8c8279c4ebd3.min.js","mappings":"+ZAMqBA,EAAAA,WACjB,WAAYC,I,4FAAI,SACZC,KAAKD,GAAKA,E,iDAEd,WACIE,GAAAA,CAAE,oBAAoBC,MAAK,WACvB,IAAIC,EAAMF,GAAAA,CAAED,MACRI,EAAU,CACVC,cAAe,CACXC,UAAW,SAAUC,GACjBA,EAAMC,OACNP,GAAAA,CAAE,mCAAmCQ,QAAQ,aAIzDN,EAAIO,SAAS,aACG,IAAIC,EAAAA,EAAMR,EAAKC,Q,kBAIvC,WACI,IAAIQ,EAAOZ,KACXY,EAAKC,aACLZ,GAAAA,CAAE,qBAAqBa,GAAG,QAAS,kBAAkB,WACjDC,SAASC,cAAc,8BAA8BC,MAAQ,GAC7DF,SACKC,cAAc,yDACdE,WAGTjB,GAAAA,CAAE,qBAAqBa,GACnB,QACA,sCACA,WACI,IAAIX,EAAMF,GAAAA,CAAED,MAWZ,OAVAmB,EAAAA,EAAAA,QAAAA,OACAlB,GAAAA,CAAE,qBAAqBmB,KACnBjB,EAAIkB,KAAK,QAAU,kBACnB,WAEIC,EAAAA,EAAAA,KAAcrB,GAAAA,CAAE,kBAChBW,EAAKC,aACLM,EAAAA,EAAAA,QAAAA,WAGD,KAKflB,GAAAA,CAAE,qBAAqBa,GAAG,SAAU,mBAAmB,SAAUS,GAC7D,IAAIpB,EAAMF,GAAAA,CAAED,MAgBZ,OAfAmB,EAAAA,EAAAA,QAAAA,OACAlB,GAAAA,CAAE,qBAAqBmB,KACnBnB,GAAAA,CAAE,QAAQoB,KAAK,iBACX,IACAlB,EAAIqB,YACJ,kBACJ,WACIvB,GAAAA,CAAE,YAAYO,OACdP,GAAAA,CAAE,8BAA8BQ,QAAQ,YACxCa,EAAAA,EAAAA,KAAcrB,GAAAA,CAAE,kBAChBW,EAAKC,aACLM,EAAAA,EAAAA,QAAAA,UAGRI,EAAEE,kBACK,KAIXxB,GAAAA,CAAE,qBAAqBa,GAAG,SAAU,qBAAqB,WACrDb,GAAAA,CAAE,mCAAmCQ,QAAQ,aAIjDR,GAAAA,CAAE,8BAA8BQ,QAAQ,iB,gFA5E3BX","sources":["webpack://plone.staticresources/./node_modules/@plone/mockup/src/pat/controlpanels/registry--implementation.js"],"sourcesContent":["import $ from \"jquery\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport utils from \"../../core/utils\";\nimport Modal from \"../modal/modal\";\nimport Base from \"@patternslib/patternslib/src/core/base\";\n\nexport default class ConfigRegistry {\n    constructor(el) {\n        this.el = el;\n    }\n    loadModals() {\n        $(\".recordsEditLink\").each(function () {\n            var $el = $(this);\n            var options = {\n                actionOptions: {\n                    onSuccess: function (modal) {\n                        modal.hide();\n                        $(\"#searchrow form#registry-filter\").trigger(\"submit\");\n                    },\n                },\n            };\n            $el.addClass(\"pat-modal\");\n            let modal_obj = new Modal($el, options);\n        });\n    }\n\n    init() {\n        var self = this;\n        self.loadModals();\n        $(\"#recordsContainer\").on(\"click\", \"[type='reset']\", function () {\n            document.querySelector('#searchrow input[name=\"q\"]').value = \"\";\n            document\n                .querySelector(\"#searchrow form#registry-filter button[type='submit']\")\n                .click();\n        });\n        /* ajax retrieval of paging */\n        $(\"#recordsContainer\").on(\n            \"click\",\n            \"nav.pagination a, div.listingBar a\",\n            function () {\n                var $el = $(this);\n                utils.loading.show();\n                $(\"#recordsContainer\").load(\n                    $el.attr(\"href\") + \" #recordsTable\",\n                    function () {\n                        /* scan registry */\n                        registry.scan($(\"#recordsTable\"));\n                        self.loadModals();\n                        utils.loading.hide();\n                    }\n                );\n                return false;\n            }\n        );\n\n        /* ajax form submission */\n        $(\"#recordsContainer\").on(\"submit\", \"#searchrow form\", function (e) {\n            var $el = $(this);\n            utils.loading.show();\n            $(\"#recordsContainer\").load(\n                $(\"body\").attr(\"data-base-url\") +\n                    \"?\" +\n                    $el.serialize() +\n                    \" #recordsTable\",\n                function () {\n                    $(\"#spinner\").hide();\n                    $('#searchrow input[name=\"q\"]').trigger(\"keypress\");\n                    registry.scan($(\"#recordsTable\"));\n                    self.loadModals();\n                    utils.loading.hide();\n                }\n            );\n            e.preventDefault();\n            return false;\n        });\n\n        /* force submit on select change */\n        $(\"#recordsContainer\").on(\"change\", \"#searchrow select\", function () {\n            $(\"#searchrow form#registry-filter\").trigger(\"submit\");\n        });\n\n        /* some init */\n        $('#searchrow input[name=\"q\"]').trigger(\"keypress\");\n    }\n}\n"],"names":["ConfigRegistry","el","this","$","each","$el","options","actionOptions","onSuccess","modal","hide","trigger","addClass","Modal","self","loadModals","on","document","querySelector","value","click","utils","load","attr","registry","e","serialize","preventDefault"],"sourceRoot":""}