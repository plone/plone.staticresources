(self.webpackChunkplone_staticresources=self.webpackChunkplone_staticresources||[]).push([[668,17479],{668:function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=(o="function",e=>typeof e===o);var o,t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=tinymce.util.Tools.resolve("tinymce.util.Tools");const c=e=>n=>n.options.get(e),s=c("save_enablewhendirty"),i=c("save_onsavecallback"),r=c("save_oncancelcallback"),l=(e,n)=>{e.notificationManager.open({text:n,type:"error"})},u=e=>{e.addCommand("mceSave",(()=>{(e=>{const o=t.DOM.getParent(e.id,"form");if(s(e)&&!e.isDirty())return;e.save();const a=i(e);if(n(a))return a.call(e,e),void e.nodeChanged();o?(e.setDirty(!1),o.onsubmit&&!o.onsubmit()||("function"==typeof o.submit?o.submit():l(e,"Error: Form submit field collision.")),e.nodeChanged()):l(e,"Error: No form element found.")})(e)})),e.addCommand("mceCancel",(()=>{(e=>{const o=a.trim(e.startContent),t=r(e);n(t)?t.call(e,e):e.resetContent(o)})(e)}))},d=e=>n=>{const o=()=>{n.setEnabled(!s(e)||e.isDirty())};return o(),e.on("NodeChange dirty",o),()=>e.off("NodeChange dirty",o)};e.add("save",(e=>{(e=>{const n=e.options.register;n("save_enablewhendirty",{processor:"boolean",default:!0}),n("save_onsavecallback",{processor:"function"}),n("save_oncancelcallback",{processor:"function"})})(e),(e=>{e.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>e.execCommand("mceSave"),onSetup:d(e),shortcut:"Meta+S"}),e.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>e.execCommand("mceCancel"),onSetup:d(e)}),e.addShortcut("Meta+S","","mceSave")})(e),u(e)}))}()},17479:function(e,n,o){o(668)}}]);
//# sourceMappingURL=17479.1c7143dc43adfa04bc4c.min.js.map