(self.webpackChunkplone_staticresources=self.webpackChunkplone_staticresources||[]).push([[29425],{29425:function(){!function(){"use strict";function t(t){return function(e){return r=typeof(n=e),(null===n?"null":"object"==r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===t;var n,r}}function e(t){return function(e){return typeof e===t}}function n(){}function r(t){return function(){return t}}function o(t){return t}function i(t,e){return t===e}function u(){return v}var a,l=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.VK"),f=t("string"),s=t("array"),m=function(t){return a===t},g=e("boolean"),d=e("function"),h=r(!1),p=r(!(a=null)),v={fold:function(t,e){return t()},isSome:h,isNone:p,getOr:o,getOrThunk:k,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:o,orThunk:k,map:u,each:n,bind:u,exists:h,forall:p,filter:function(){return v},toArray:function(){return[]},toString:r("none()")};function k(t){return t()}function y(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!s(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);rt.apply(e,t[n])}return e}function x(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return et.none()}function b(t,e,n){return void 0===n&&(n=i),t.exists((function(t){return n(t,e)}))}function O(t,e){return t?et.some(e):et.none()}function w(t){var e=t.getParam("link_assume_external_targets",!1);return g(e)&&e?1:!f(e)||"http"!==e&&"https"!==e?0:e}function C(t){return t.getParam("default_link_target")}function N(t){return t.getParam("target_list",!0)}function A(t){return t.getParam("rel_list",[],"array")}function T(t){return t.getParam("allow_unsafe_link_target",!1,"boolean")}function P(t){return f(t.value)?t.value:""}function S(t){return void 0===t&&(t=P),function(e){return et.from(e).map((function(e){return it(e,t)}))}}function _(t,e){return ct.call(t,e)}function R(t){return t&&"a"===t.nodeName.toLowerCase()}function D(t){return R(t)&&!!mt(t)}function L(t,e){if(t.collapsed)return[];for(var n=t.cloneContents(),r=new ft(n.firstChild,n),o=[],i=n.firstChild;e(i)&&o.push(i),i=r.next(););return o}function E(t){return/^\w+:/i.test(t)}function M(t,e){function n(t){return t.filter((function(t){return-1===ot.inArray(o,t)}))}var r,o=["noopener"],i=t?t.split(/\s+/):[],u=e?0<(r=n(r=i)).length?r.concat(o):o:n(i);return 0<u.length?ot.trim(u.sort().join(" ")):""}function U(t,e){return e=e||t.selection.getNode(),gt(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")}function B(t,e){return(e?e.innerText||e.textContent:t.getContent({format:"text"})).replace(/\uFEFF/g,"")}function I(t){return 0<ot.grep(t,D).length}function K(t){var e=t.schema.getTextInlineElements();return 0===L(t.selection.getRng(),(function(t){return 1===t.nodeType&&!R(t)&&!_(e,t.nodeName.toLowerCase())})).length}function z(t,e,r){var o,i,u,a,l,c,f,s,g,d,h=(o=t,i=r.href,at(at({},r),{href:st.isDomSafe(i,"a",o.settings)?i:""}));t.hasPlugin("rtc",!0)?t.execCommand("createlink",!1,(l=h.class,c=h.href,f=h.rel,s=h.target,g=h.text,d=h.title,function(t,e,n,r){(function(t){for(var o=lt(t),i=0,u=o.length;i<u;i++){var a=o[i];!function(t,o){(e(t,o)?n:r)(t,o)}(t[a],a)}})(t)}({class:l.getOrNull(),href:c,rel:f.getOrNull(),target:s.getOrNull(),text:g.getOrNull(),title:d.getOrNull()},(function(t,e){return!1===m(t)}),(u=a={},function(t,e){u[e]=t}),n),a)):function(t,e,n){var r,o,i,u,a,l,c,f=t.selection.getNode(),s=U(t,f),m=(o=t,i=function(t,e,n){return function(t){for(var r,o=0,i=t.length;o<i;o++)r=t[o],n=e(n,r,o)}(t),n}(["title","rel","class","target"],(function(t,e){return r[e].each((function(n){t[e]=0<n.length?n:null})),t}),{href:(r=n).href}),c=at({},i),0<A(o).length||!1!==T(o)||(u=M(c.rel,"_blank"===c.target),c.rel=u||null),et.from(c.target).isNone()&&!1===N(o)&&(c.target=C(o)),c.href=(a=c.href,"http"!==(l=w(o))&&"https"!==l||E(a)?a:l+"://"+a),c);t.undoManager.transact((function(){var r,o,i,u,a,l,c,g;n.href===e.href&&e.attach(),s?(t.focus(),a=t,l=s,c=n.text,g=m,c.each((function(t){_(l,"innerText")?l.innerText=t:l.textContent=t})),a.dom.setAttribs(l,g),a.selection.select(l)):(r=t,i=n.text,u=m,gt(o=f)?ht(r,o,u):i.fold((function(){r.execCommand("mceInsertLink",!1,u)}),(function(t){r.insertContent(r.dom.createHTML("a",u,r.dom.encode(t)))})))}))}(t,e,h)}function j(t){var e;t.hasPlugin("rtc",!0)?t.execCommand("unlink"):(e=t).undoManager.transact((function(){var t,n,r,o,i,u,a,l=e.selection.getNode();gt(l)?dt(e,l):(n=(t=e).dom,o=(r=t.selection).getBookmark(),i=r.getRng().cloneRange(),u=n.getParent(i.startContainer,"a[href]",t.getBody()),a=n.getParent(i.endContainer,"a[href]",t.getBody()),u&&i.setStartBefore(u),a&&i.setEndAfter(a),r.setRng(i),t.execCommand("unlink"),r.moveToBookmark(o)),e.focus()}))}function V(t){var e=t.href;return 0<e.indexOf("@")&&-1===e.indexOf("/")&&-1===e.indexOf("mailto:")?et.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(t){return at(at({},t),{href:"mailto:"+e})}}):et.none()}function q(t,e,n){var r=t.getAttrib(e,n);return null!==r&&0<r.length?et.some(r):et.none()}function F(t,e){return t.dom.getParent(e,"a[href]")}function W(t){return F(t,t.selection.getStart())}function H(t,e){var n,r;e&&(n=mt(e),/^#/.test(n)?(r=t.$(n)).length&&t.selection.scrollIntoView(r[0],!0):function(t){var e=document.createElement("a");e.target="_blank",e.href=t,e.rel="noreferrer noopener";var n,r,o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n=e,r=o,document.body.appendChild(n),n.dispatchEvent(r),document.body.removeChild(n)}(e.href))}function G(t){return function(){!function(t){var e,r=U(e=t);wt(e,r).then((function(e){var r,o,i,u,a=i=t,l=(r=u=e).anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),c=r.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],f=et.from(C(a)),s=r.anchor,m={url:{value:o=s.url.getOr(""),meta:{original:{value:o}}},text:s.text.getOr(""),title:s.title.getOr(""),anchor:o,link:o,rel:s.rel.getOr(""),target:s.target.or(f).getOr(""),linkClass:s.linkClass.getOr("")},g=r.catalogs,d=vt(m,g);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:y([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],l,c,function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e}([g.anchor.map(ut.createUi("anchor","Anchors")),g.rels.map(ut.createUi("rel","Rel")),g.targets.map(ut.createUi("target","Open link in...")),g.link.map(ut.createUi("link","Link list")),g.classes.map(ut.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:m,onChange:function(t,e){var n=e.name;d.onChange(t.getData,{name:n}).each((function(e){t.setData(e)}))},onSubmit:function(t){var e=t.getData();if(!e.url.value)return j(i),void t.close();function r(t){return et.from(e[t]).filter((function(e){return!b(u.anchor[t],e)}))}var o={href:e.url.value,text:r("text"),target:r("target"),rel:r("rel"),class:r("linkClass"),title:r("title")},a={href:e.url.value,attach:void 0!==e.url.meta&&e.url.meta.attach?e.url.meta.attach:n};xt(i,o).then((function(t){z(i,a,t)})),t.close()}}})).then((function(e){t.windowManager.open(e)}))}(t)}}function J(t){return function(){H(t,W(t))}}function X(t,e){return t.on("NodeChange",e),function(){return t.off("NodeChange",e)}}function $(t){return function(e){function n(){return e.setActive(!t.mode.isReadOnly()&&null!==U(t,t.selection.getNode()))}return n(),X(t,n)}}function Q(t){return function(e){function n(){return e.setDisabled(null===U(t,t.selection.getNode()))}return n(),X(t,n)}}function Y(t){return function(e){function n(e){return I(e)||0<L(t.selection.getRng(),D).length}var r=t.dom.getParents(t.selection.getStart());return e.setDisabled(!n(r)),X(t,(function(t){return e.setDisabled(!n(t.parents))}))}}function Z(t){var e=y(function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i)}return r}(t.dom.select("a:not([href])"),(function(t){var e=t.name||t.id;return e?[{text:e,value:"#"+e}]:[]})));return 0<e.length?et.some([{text:"None",value:""}].concat(e)):et.none()}var tt=function(t){function e(){return i}function n(e){return e(t)}var o=r(t),i={fold:function(e,n){return n(t)},isSome:p,isNone:h,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:e,orThunk:e,map:function(e){return tt(e(t))},each:function(e){e(t)},bind:n,exists:n,forall:n,filter:function(e){return e(t)?i:v},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},et={some:tt,none:u,from:function(t){return null==t?v:tt(t)}},nt=Array.prototype.indexOf,rt=Array.prototype.push,ot=tinymce.util.Tools.resolve("tinymce.util.Tools"),it=function(t,e){var n=[];return ot.each(t,(function(t){var r,o,i,u=f((r=t).text)?r.text:f(r.title)?r.title:"";void 0!==t.menu?(o=it(t.menu,e),n.push({text:u,items:o})):(i=e(t),n.push({text:u,value:i}))})),n},ut={sanitize:function(t){return S(P)(t)},sanitizeWith:S,createUi:function(t,e){return function(n){return{name:t,type:"listbox",label:e,items:n}}},getValue:P},at=function(){return(at=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},lt=Object.keys,ct=Object.hasOwnProperty,ft=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),st=tinymce.util.Tools.resolve("tinymce.util.URI"),mt=function(t){return t.getAttribute("data-mce-href")||t.getAttribute("href")},gt=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},dt=function(t,e){var n,r=t.dom.select("img",e)[0];!r||(n=t.dom.getParents(r,"a[href]",e)[0])&&(n.parentNode.insertBefore(r,n),t.dom.remove(n))},ht=function(t,e,n){var r,o=t.dom.select("img",e)[0];o&&(r=t.dom.create("a",n),o.parentNode.insertBefore(r,o),r.appendChild(o))},pt=function(t,e){return x(e,(function(e){return _(n=e,"items")&&void 0!==n.items&&null!==n.items?pt(t,e.items):O(e.value===t,e);var n}))},vt=function(t,e){var r={text:t.text,title:t.title};return{onChange:function(t,o){var i,u,a,l,c,f,s=o.name;return"url"===s?(a=(u=t()).url,c=O(r.text.length<=0,et.from(a.meta.text).getOr(a.value)),l=u.url,f=O(r.title.length<=0,et.from(l.meta.title).getOr("")),c.isSome()||f.isSome()?et.some(at(at({},c.map((function(t){return{text:t}})).getOr({})),f.map((function(t){return{title:t}})).getOr({}))):et.none()):(i=["anchor","link"],-1<nt.call(i,s)?function(t,o){var i,u,a,l,c,f=("link"===(i=o.name)?e.link:"anchor"===i?e.anchor:et.none()).getOr([]);return u=r.text,a=f,l=t[o.name],c=0<u.length,void 0!==l?pt(l,a).map((function(t){return{url:{value:t.value,meta:{text:c?u:t.text,attach:n}},text:c?u:t.text}})):et.none()}(t(),o):("text"!==s&&"title"!==s||(r[s]=t()[s]),et.none()))}}},kt=tinymce.util.Tools.resolve("tinymce.util.Delay"),yt=tinymce.util.Tools.resolve("tinymce.util.Promise"),xt=function(t,e){return x([V,(n=w(t),r=t.getParam("link_default_protocol","http","string"),function(t){var e=t.href;return 1===n&&!E(e)||0===n&&/^\s*www(\.|\d\.)/i.test(e)?et.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+r+":// prefix?",preprocess:function(t){return at(at({},t),{href:r+"://"+e})}}):et.none()})],(function(t){return t(e)})).fold((function(){return yt.resolve(e)}),(function(n){return new yt((function(r){var o=t,i=n.message,u=o.selection.getRng();kt.setEditorTimeout(o,(function(){o.windowManager.confirm(i,(function(t){o.selection.setRng(u),function(t){r(t?n.preprocess(e):e)}(t)}))}))}))}));var n,r},bt=tinymce.util.Tools.resolve("tinymce.util.XHR"),Ot=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],wt=function(t,e){return o=(r=t).getParam("link_list"),new yt((function(t){f(o)?bt.send({url:o,success:function(e){return t(function(t){try{return et.some(JSON.parse(t))}catch(t){return et.none()}}(e))},error:function(e){return t(et.none())}}):d(o)?o((function(e){return t(et.some(e))})):t(et.from(o))})).then((function(t){return t.bind(ut.sanitizeWith(n)).map((function(t){return 0<t.length?[{text:"None",value:""}].concat(t):t}))})).then((function(n){var r,o,i,u,a,l,c,f,m,g,d=(o=e,i=(r=t).dom,u=K(r)?et.some(B(r.selection,o)):et.none(),a=o?et.some(i.getAttrib(o,"href")):et.none(),l=o?et.from(i.getAttrib(o,"target")):et.none(),c=q(i,o,"rel"),f=q(i,o,"class"),{url:a,text:u,title:q(i,o,"title"),target:l,rel:c,linkClass:f});return{anchor:d,catalogs:{targets:(g=N(t),s(g)?ut.sanitize(g).orThunk((function(){return et.some(Ot)})):!1===g?et.none():et.some(Ot)),rels:function(t,e){var n=A(t);if(0<n.length){var r=b(e,"_blank");return(!1===T(t)?ut.sanitizeWith((function(t){return M(ut.getValue(t),r)})):ut.sanitize)(n)}return et.none()}(t,d.target),classes:0<(m=t.getParam("link_class_list",[],"array")).length?ut.sanitize(m):et.none(),anchor:Z(t),link:n},optNode:et.from(e),flags:{titleEnabled:t.getParam("link_title",!0,"boolean")}}}));function n(t){return r.convertURL(t.value||t.url,"href")}var r,o};l.add("link",(function(t){var e,r,o,i,u,a,l;function f(t){var e=l.selection.getNode();return t.setDisabled(!U(l,e)),n}(e=t).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:G(e),onSetup:$(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:J(e),onSetup:Q(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return j(e)},onSetup:Y(e)}),(r=t).ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:J(r),onSetup:Q(r)}),r.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:G(r)}),r.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return j(r)},onSetup:Y(r)}),(o=t).ui.registry.addContextMenu("link",{update:function(t){return I(o.dom.getParents(t,"a"))?"link unlink openlink":"link"}}),(l=t).ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:$(l)},label:"Link",predicate:function(t){return!!U(l,t)&&l.getParam("link_context_toolbar",!1,"boolean")},initValue:function(){var t=U(l);return t?mt(t):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(t){var e=l.selection.getNode();return t.setActive(!!U(l,e)),$(l)(t)},onAction:function(t){var e=t.getValue(),r=function(t){var e=U(l),n=K(l);if(e||!n)return et.none();var r=B(l.selection,e);return et.some(0<r.length?r:t)}(e);z(l,{href:e,attach:n},{href:e,text:r,title:et.none(),rel:et.none(),target:et.none(),class:et.none()}),l.selection.collapse(!1),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:f,onAction:function(t){j(l),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:f,onAction:function(t){J(l)(),t.hide()}}]}),(a=t).on("click",(function(t){var e=F(a,t.target);e&&c.metaKeyPressed(t)&&(t.preventDefault(),H(a,e))})),a.on("keydown",(function(t){var e=W(a);e&&13===t.keyCode&&!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey&&(t.preventDefault(),H(a,e))})),(i=t).addCommand("mceLink",(function(){i.getParam("link_quicklink",!1,"boolean")?i.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):G(i)()})),(u=t).addShortcut("Meta+K","",(function(){u.execCommand("mceLink")}))}))}()}}]);
//# sourceMappingURL=29425.00d49c9d4595b83274c2.min.js.map