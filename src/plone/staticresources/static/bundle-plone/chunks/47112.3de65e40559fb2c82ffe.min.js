(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[47112],{42764:function(t,e,n){"use strict";var i=n(32751),r=n(82799),a=n(18742),s=n(50033);function o(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const l=new r.Z("code-editor");l.addArgument("language",null),l.addArgument("linenumbers",!1),l.addArgument("theme","dark"),l.addArgument("tab","    "),l.addArgument("indent-on","{$"),l.addArgument("spellcheck",!1),l.addArgument("catch-tab",!0),l.addArgument("preserve-ident",!0),l.addArgument("add-closing",!0),l.addArgument("history",!0);const c={atom:"xml",html:"xml",plist:"xml",rss:"xml",svg:"xml",wsf:"xml",xhtml:"xml",xjb:"xml",xsd:"xml",xsl:"xml"};class d extends i.o{async init(){const t=(await n.e(20256).then(n.bind(n,20256))).CodeJar,e=(await n.e(47802).then(n.t.bind(n,47802,23))).default;let i,r=this.el;i="light"===this.options.theme?"stackoverflow-light":"dark"===this.options.theme||"okaidia"===this.options.theme?"stackoverflow-dark":this.options.theme,await n(25794)(`./${i}.css`),window.__patternslib_import_styles&&await n.e(95912).then(n.bind(n,95912));const s=t=>{t.textContent=t.textContent,e.highlightElement(t)};let o=s;if(this.options.linenumbers){o=(0,(await n.e(65663).then(n.bind(n,65663))).withLineNumbers)(s,{class:`codejar-linenumbers ${i}`})}let l=[...r.classList].filter((t=>t.startsWith("language-")))[0];l=l?l.replace("language-",""):this.options.language,l=l||"plaintext";const d=(await n(55867)(`./${c[l]||l}`)).default;if(e.registerLanguage(l,d),["textarea","input"].includes(this.el.nodeName.toLowerCase())){const t=document.createElement("pre");t.innerHTML="<code contenteditable></code>",r=t.querySelector("code"),r.textContent=this.el.value,this.el.parentNode.insertBefore(t,this.el),this.el.setAttribute("hidden","")}r.classList.add("code-editor",`theme-${this.options.theme}`,`language-${l}`);const u={tab:this.options.tab.replace(/'/g,"").replace(/"/g,"").replace(/\\t/g,"\t"),indentOn:new RegExp(this.options.indentOn),spellcheck:this.options.spellcheck,catchTab:this.options.catchTab,preserveIdent:this.options.preserveIdent,addClosing:this.options.addClosing,history:this.options.history};this.codeeditor=t(r,o,u),r!==this.el&&this.codeeditor.onUpdate((t=>{this.el.value=t.trim(),this.el.dispatchEvent(a.Z.input_event())}))}}o(d,"name","code-editor"),o(d,"trigger",".pat-code-editor"),o(d,"parser",l),s.Z.register(d)},11191:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var i=n(4462),r=n.n(i),a=n(50033),s=n(7424),o={getOptions(t,e,n){n=n||{},0===t.length||r().nodeName(t[0],"body")||(n=this.getOptions(t.parent(),e,n));let i={};if(0!==t.length&&(i=t.data("pat-"+e),i&&"string"==typeof i)){const t={};r().each(i.split(";"),(function(e,n){(n=n.split(":")).reverse();let i=n.pop();i=i.replace(/^\s+|\s+$/g,""),n.reverse();let r=n.join(":");r=r.replace(/^\s+|\s+$/g,""),t[i]=r})),i=t}return r().extend(!0,{},n,i)}};const l=s.Z.getLogger("Patternslib Base"),c=function(t,e,n){t.jquery||(t=r()(t));const i=this.prototype.name,l=s.Z.getLogger(`pat.${i}`);let c=t.data(`pattern-${i}`);if(void 0===c&&a.Z.patterns[i])try{t.data(`pattern-${i}`,"initializing"),e="mockup"===this.prototype.parser?o.getOptions(t,i,e):e,c=new a.Z.patterns[i](t,e,n)}catch(t){l.error(`Failed while initializing ${i} pattern.`,t)}return c},d=async function(t,e,n){t?.jquery&&0===t.length||!t?l.warn("No element given to pattern."):(t.jquery||(t=r()(t)),this.$el=t,this.el=t[0],this.options=r().extend(!0,{},this.defaults||{},e||{}),await this.init(t,e,n),this.$el.data(`pattern-${this.name}`,this),this.el[`pattern-${this.name}`]=this,this.emit("init"))};d.prototype={constructor:d,on(t,e){this.$el.on(`${t}.${this.name}.patterns`,e)},one(t,e){this.$el.one(`${t}.${this.name}.patterns`,e)},emit(t,e){void 0===e&&(e=[]),this.$el.trigger(`${t}.${this.name}.patterns`,e)}},d.extend=function(t){const e=this;let n;if(!t)throw new Error("Pattern configuration properties required when calling Base.extend");n=Object.hasOwnProperty.call(t,"constructor")?t.constructor:function(){e.apply(this,arguments)},n.extend=d.extend,n.init=c,n.jquery_plugin=!0,n.trigger=t.trigger,n.parser=t?.parser||null;var i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,r().extend(!0,n.prototype,t),n.__super__=e.prototype,t.name?t.trigger?!1!==t.autoregister&&a.Z.register(n,t.name):l.warn(`The pattern ${t.name} does not have a trigger attribute, it will not be registered.`):l.warn("This pattern without a name attribute will not be registered!"),n};var u=d},32751:function(t,e,n){"use strict";n.d(e,{o:function(){return s}});var i=n(18742);function r(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const a=n(7424).Z.getLogger("basepattern");class s{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.name=this.constructor.name,this.trigger=this.constructor.trigger,this.parser=this.constructor.parser,t?(t.jquery&&(t=t[0]),this.el=t,window.setTimeout((async()=>{if(void 0!==this.el[`pattern-${this.name}`])return a.debug(`Not reinstatiating the pattern ${this.name}.`,this.el),void this.el.dispatchEvent(new Event(`not-init.${this.name}.patterns`,{bubbles:!0,cancelable:!1}));this.options=this.parser?.parse(this.el,e)??e,this.el[`pattern-${this.name}`]=this,await this.init(),this.el.dispatchEvent(new Event(`init.${this.name}.patterns`,{bubbles:!0,cancelable:!0}))}),0)):a.warn(`No element given to pattern ${this.name}.`)}async init(){}one(t,e){i.Z.add_event_listener(this.el,`${t}.${this.name}.patterns`,`basepattern-one--${t}.${this.name}.patterns`,e,{once:!0})}destroy(){delete this.el[`pattern-${this.name}`]}}r(s,"name",void 0),r(s,"trigger",void 0),r(s,"parser",void 0)},32218:function(t,e,n){"use strict";var i=n(18742);const r=n(7424).Z.getLogger("core dom"),a="__patternslib__data_prefix__",s="__patternslib__style__display";function o(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=window.getComputedStyle(t).getPropertyValue(e);return(n||i)&&(r=parseFloat(r)||0),n&&!i&&(r=parseInt(Math.round(r),10)),r}const l={toNodeArray:t=>(t.jquery||t instanceof NodeList?t=[...t]:t instanceof Array==!1&&(t=[t]),t),querySelectorAllAndMe:(t,e)=>{if(!t)return[];const n=[...t.querySelectorAll(e)];return t.matches(e)&&n.unshift(t),n},wrap:(t,e)=>{t.parentNode.insertBefore(e,t),e.appendChild(t)},hide:t=>{"none"!==t.style.display&&(t.style.display&&(t[s]=t.style.display),t.style.display="none")},show:t=>{const e=t[s]||null;t.style.display=e,delete t[s]},find_parents:(t,e)=>{const n=[];let i=t;for(;i;)i=i.parentNode?.closest?.(e),i&&n.push(i);return n},find_scoped:(t,e)=>(0===e.indexOf("#")?document:t).querySelectorAll(e),get_parents:t=>{const e=[];let n=t?.parentNode;for(;n;)e.push(n),n=n?.parentNode,n=n instanceof HTMLElement?n:null;return e},acquire_attribute:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=t;const a=[];for(;r;){const t=r.getAttribute(e);if(t||n&&""===t){if(!i)return t;a.push(t)}r=r.parentElement}if(i)return a},is_visible:t=>t.offsetWidth>0&&t.offsetHeight>0,is_input:t=>/^(?:input|select|textarea|button)$/i.test(t.nodeName),create_from_string:t=>document.createRange().createContextualFragment(t.trim()),get_css_value:o,find_scroll_container:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;for(;t&&t!==document.body;){if(!e||"y"===e){let e=o(t,"overflow-y");if(["auto","scroll"].includes(e))return t}if(!e||"x"===e){let e=o(t,"overflow-x");if(["auto","scroll"].includes(e))return t}t=t.parentElement}return n},get_data:(t,e,n)=>t[`${a}${e}`]||n,set_data:(t,e,n)=>{t[`${a}${e}`]=n},delete_data:(t,e)=>{delete t[`${a}${e}`]},template:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.warn("Using dom.template is not recommended due to a problem with Content-Security-Policy."),new Function("return `"+t+"`;").call(e)},add_event_listener:i.Z.add_event_listener,remove_event_listener:i.Z.remove_event_listener};e.Z=l},18742:function(t,e,n){"use strict";const i={},r=(t,e)=>{if(!t?.removeEventListener)return;const n=i[t];if(!n)return;let r;if(e){const t=n[e];r=t?[t]:[]}else r=Object.entries(n);for(const e of r||[])t.removeEventListener(e[0],e[1],e[2])};e.Z={add_event_listener:function(t,e,n,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!t?.addEventListener)return;r(t,n),i[t]||(i[t]={});let o=a;!0===s?.once&&(o=e=>{delete i[t][n],a(e)}),i[t][n]=[e,o,s.capture?s:void 0],t.addEventListener(e,o,s)},remove_event_listener:r,await_event:(t,e)=>new Promise((n=>t.addEventListener(e,n,{once:!0}))),await_pattern_init:t=>new Promise(((e,n)=>{t.one("init",(()=>{r(t.el,`basepattern-one--not-init.${t.name}.patterns`),e()})),t.one("not-init",(()=>{r(t.el,`basepattern-one--init.${t.name}.patterns`),n()}))})).catch((()=>{throw new Error(`Pattern "${t.name}" not initialized.`)})),blur_event:()=>new Event("blur",{bubbles:!1,cancelable:!1}),click_event:()=>new Event("click",{bubbles:!0,cancelable:!0}),change_event:()=>new Event("change",{bubbles:!0,cancelable:!1}),focus_event:()=>new Event("focus",{bubbles:!1,cancelable:!1}),input_event:()=>new Event("input",{bubbles:!0,cancelable:!1}),mousedown_event:()=>new Event("mousedown",{bubbles:!0,cancelable:!0}),mouseup_event:()=>new Event("mouseup",{bubbles:!0,cancelable:!0}),scroll_event:()=>new Event("scroll",{bubbles:!0,cancelable:!1}),submit_event:()=>new Event("submit",{bubbles:!0,cancelable:!0}),dragstart_event:()=>new Event("dragstart",{bubbles:!0,cancelable:!0}),dragend_event:()=>new Event("dragend",{bubbles:!0,cancelable:!0})}},46888:function(t,e,n){"use strict";var i=n(4462),r=n.n(i),a={init:function(t){var e={time:3,initialTime:8,exceptionAreas:[]};return this.each((function(){var n=r()(this);n.data("timeout")||(t&&r().extend(e,t),n.data("timeout",{lastEvent:new Date,trueTime:e.time,time:e.initialTime,untouched:!0,inExceptionArea:!1}),n.on("mouseover.timeout",a.mouseMoved),n.on("mouseenter.timeout",a.mouseMoved),r()(e.exceptionAreas).each((function(){n.find(this).live("mouseover.timeout",{parent:n},a.enteredException).live("mouseleave.timeout",{parent:n},a.leftException)})),e.initialTime>0?n.timeout("startTimer"):n.addClass("timeout"))}))},enteredException:function(t){var e=t.data.parent.data("timeout");e.inExceptionArea=!0,t.data.parent.data("timeout",e),t.data.parent.trigger("mouseover")},leftException:function(t){var e=t.data.parent.data("timeout");e.inExceptionArea=!1,t.data.parent.data("timeout",e)},destroy:function(){return this.each((function(){var t=r()(this),e=t.data("timeout");r()(window).off(".timeout"),e.timeout.remove(),t.removeData("timeout")}))},mouseMoved:function(){var t=r()(this),e=t.data("timeout");t.hasClass("timeout")?(t.removeClass("timeout"),t.timeout("startTimer")):e.untouched&&(e.untouched=!1,e.time=e.trueTime),e.lastEvent=new Date,t.data("timeout",e)},startTimer:function(){var t=r()(this),e=t.data("timeout"),n=function(){var e=t.data("timeout");if(e&&e.lastEvent)if(e.inExceptionArea)setTimeout(n,Math.floor(1e3*e.time));else{var i=new Date,r=Math.floor(1e3*e.time)-(i-e.lastEvent);r>0?setTimeout(n,r+100):t.addClass("timeout")}};setTimeout(n,Math.floor(1e3*e.time))}};r().fn.timeout=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void r().error("Method "+t+" does not exist on jQuery.timeout"):a.init.apply(this,arguments)},r().extend(r().expr[":"],{scrollable:function(t){return"scroll"===r()(t).css("overflow")||"scroll"===r()(t).css("overflowX")||"scroll"===r()(t).css("overflowY")||(t.clientHeight<t.scrollHeight&&(-1!==r().inArray(r()(t).css("overflowY"),["scroll","auto"])||-1!==r().inArray(r()(t).css("overflow"),["scroll","auto"]))||t.clientWidth<t.scrollWidth&&(-1!==r().inArray(r()(t).css("overflowX"),["scroll","auto"])||-1!==r().inArray(r()(t).css("overflow"),["scroll","auto"])))}}),r().fn.makeVisibleInScroll=function(t){var e=null;return"string"==typeof t?e=r()("#"+t):t&&(e=r()(t)),this.each((function(){var t,n=r()(this);t=e||((t=n.parents(":scrollable")).length>0?r()(t[0]):r()(window));var i=n.position().top,a=n.height()+i,s=t.scrollTop(),o=t.height()+s;i<s?t.scrollTop(i):a>o-t.height()/2&&t.scrollTop(i-(t.height()-n.height())/2)}))},r().fn.safeOffset=function(){var t,e=this[0],n={top:0,left:0};return e&&e.nodeType?(t=(e.ownerDocument||document).documentElement,r().contains(t,e)?r().fn.offset.apply(this,arguments):n):n},r().fn.setPositionAbsolute=function(t,e,n){return this.each((function(){var i=r()(this),a=r()(this).width(),s=t.safeOffset(),o=t.width(),l=t.height(),c=s.left+o-a+n,d=s.top+l+e;i.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:c+"px",top:d+"px",width:a}),i.remove().appendTo("body").show()}))},r().fn.positionAncestor=function(t){var e=0,n=0;return this.each((function(){var i=r()(this).closest(t);if(i.length&&"static"!==i.css("position")){var a=r()(this),s=a.safeOffset().left-parseInt(a.css("marginLeft"),10),o=a.safeOffset().top-parseInt(a.css("marginTop"),10),l=i.safeOffset().left+parseInt(i.css("borderLeftWidth"),10),c=i.safeOffset().top+parseInt(i.css("borderTopWidth"),10);return e=s-l,n=o-c,!1}})),{left:e,top:n}},r().fn.findInclusive=function(t){return this.find("*").addBack().filter(t)},r().fn.slideIn=function(t,e,n){return this.animate({width:"show"},t,e,n)},r().fn.slideOut=function(t,e,n){return this.animate({width:"hide"},t,e,n)},r().expr[":"].Contains=function(t,e,n){return r()(t).text().toUpperCase().indexOf(n[3].toUpperCase())>=0},r().fn.scopedFind=function(t){return 0===t.indexOf("#")?r()(t):this.find(t)}},7424:function(t,e){"use strict";var n,i;Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r});var r={DEBUG:10,INFO:20,WARN:30,ERROR:40,FATAL:50};function a(){}function s(t,e){this._loggers={},this.name=t||"",this._parent=e||null,e||(this._enabled=!0,this._level=r.WARN)}function o(t){i=t}a.prototype={output:function(t,e,n){t&&n.unshift(t+":"),e<=r.DEBUG?(n.unshift("[DEBUG]"),console.log.apply(console,n)):e<=r.INFO?console.info.apply(console,n):e<=r.WARN?console.warn.apply(console,n):console.error.apply(console,n)}},s.prototype={getLogger:function(t){for(var e=t.split("."),n=this,i=this.name?[this.name]:[];e.length;){var r=e.shift();i.push(r),r in n._loggers||(n._loggers[r]=new s(i.join("."),n)),n=n._loggers[r]}return n},_getFlag:function(t){var e=this;for(t="_"+t;null!==e;){if(void 0!==e[t])return e[t];e=e._parent}return null},setEnabled:function(t){this._enabled=!!t},isEnabled:function(){this._getFlag("enabled")},setLevel:function(t){"number"==typeof t?this._level=t:"string"==typeof t&&(t=t.toUpperCase())in r&&(this._level=r[t])},getLevel:function(){return this._getFlag("level")},log:function(t,e){!e.length||!this._getFlag("enabled")||t<this._getFlag("level")||(e=Array.prototype.slice.call(e),i.output(this.name,t,e))},debug:function(){this.log(r.DEBUG,arguments)},info:function(){this.log(r.INFO,arguments)},warn:function(){this.log(r.WARN,arguments)},error:function(){this.log(r.ERROR,arguments)},fatal:function(){this.log(r.FATAL,arguments)}},o(new a),n=new s;for(var l,c=/loglevel(|-[^=]+)=([^&]+)/g;null!==(l=c.exec(window.location.search));){(""===l[1]?n:n.getLogger(l[1].slice(1))).setLevel(l[2].toUpperCase())}var d={Level:r,getLogger:n.getLogger.bind(n),setEnabled:n.setEnabled.bind(n),isEnabled:n.isEnabled.bind(n),setLevel:n.setLevel.bind(n),getLevel:n.getLevel.bind(n),debug:n.debug.bind(n),info:n.info.bind(n),warn:n.warn.bind(n),error:n.error.bind(n),fatal:n.fatal.bind(n),getWriter:function(){return i},setWriter:o};e.Z=d},82799:function(t,e,n){"use strict";var i=n(4462),r=n.n(i),a=n(37834),s=n(7424);class o{constructor(t){this.order=[],this.parameters={},this.attribute="data-pat-"+t,this.enum_values={},this.enum_conflicts=[],this.groups={},this.possible_groups={},this.log=s.Z.getLogger(t+".parser"),this.group_pattern=/([a-z][a-z0-9]*)-([A-Z][a-z0-0\-]*)/i,this.json_param_pattern=/^\s*\[?\s*{/i,this.named_param_pattern=/^\s*([a-z][a-z0-9\-]*)\s*:(.*)/is,this.token_pattern=/((["']).*?(?!\\)\2)|\s*(\S+)\s*/g}_camelCase(t){return t.replace(/\-([a-z])/g,((t,e)=>e.toUpperCase()))}addAlias(t,e){if(!this.parameters[e])throw'Attempted to add an alias "'+t+'" for a non-existing parser argument "'+e+'".';this.parameters[e].alias=t}addGroupToSpec(t){const e=t.name.match(this.group_pattern);if(e){const n=e[1],i=e[2];if(n in this.possible_groups){const t=this.possible_groups[n],e=t.name.match(this.group_pattern)[2];t.group=n,t.dest=e,this.groups[n]=new o,this.groups[n].addArgument(e,t.value,t.choices,t.multiple),delete this.possible_groups[n]}n in this.groups?(this.groups[n].addArgument(i,t.value,t.choices,t.multiple),t.group=n,t.dest=i):(this.possible_groups[n]=t,t.dest=this._camelCase(t.name))}return t}addJSONArgument(t,e){this.order.push(t),this.parameters[t]=this.addGroupToSpec({name:t,value:e,dest:t,group:null,type:"json"})}addArgument(t,e,n,i){const r={name:t,value:i&&!Array.isArray(e)?[e]:e,multiple:i,dest:t,group:null};if(n&&Array.isArray(n)&&n.length){r.choices=n,r.type=this._typeof(n[0]);for(const e of n)-1===this.enum_conflicts.indexOf(e)&&(e in this.enum_values?(this.enum_conflicts.push(e),delete this.enum_values[e]):this.enum_values[e]=t)}else"string"==typeof r.value&&"$"===r.value.slice(0,1)?r.type=this.parameters[r.value.slice(1)].type:r.type=this._typeof(i?r.value[0]:r.value);this.order.push(t),this.parameters[t]=this.addGroupToSpec(r)}_typeof(t){return null===t?"null":typeof t}_coerce(t,e){const n=this.parameters[t];if(typeof e!==n.type)try{switch(n.type){case"json":e=JSON.parse(e);break;case"boolean":if("string"==typeof e){e=e.toLowerCase();const t=parseInt(e,10);e=isNaN(t)?"true"===e||"y"===e||"yes"===e||"y"===e||"on"===e:!!t}else{if("number"!=typeof e)throw"Cannot convert value for "+t+" to boolean";e=!!e}break;case"number":if("string"==typeof e){if(e=parseInt(e,10),isNaN(e))throw"Cannot convert value for "+t+" to number"}else{if("boolean"!=typeof e)throw"Cannot convert value for "+t+" to number";e+=0}break;case"string":e=e.toString();break;case"null":case"undefined":break;default:throw"Do not know how to convert value for "+t+" to "+n.type}}catch(t){return this.log.warn(t),null}return n.choices&&-1===n.choices.indexOf(e)?(this.log.warn("Illegal value for "+t+": "+e),null):e}_set(t,e,n){if(!(e in this.parameters))return void this.log.debug("Ignoring value for unknown argument "+e);let i;if(this.parameters[e].multiple){i="string"==typeof n?n.split(/,+/):n,n=[];for(const t of i){const i=this._coerce(e,t.trim());null!==i&&n.push(i)}}else if(null===(n=this._coerce(e,n)))return;t[e]=n}_split(t){const e=[];return t.replace(this.token_pattern,((t,n,i,r)=>{n?e.push(n):r&&e.push(r)})),e}_parseExtendedNotation(t){const e={},n=t.replace(/;;/g,"\0x1f").replace(/&amp;/g,"&amp\0x1f").split(/;/).map((t=>t.replace(new RegExp("\0x1f","g"),";")));for(const i of n){if(!i)continue;const n=i.match(this.named_param_pattern);if(!n){this.log.warn("Invalid parameter: "+i+": "+t);continue}const r=n[1],a=n[2].trim(),s=Object.values(this.parameters).filter((t=>t.alias===r));if(1===s.length)this._set(e,s[0].name,a);else if(r in this.parameters)this._set(e,r,a);else{if(!(r in this.groups)){this.log.warn("Unknown named parameter "+n[1]);continue}{const t=this.groups[r]._parseShorthandNotation(a);for(const n in t)this._set(e,r+"-"+n,t[n])}}}return e}_parseShorthandNotation(t){const e=this._split(t),n={};let i=0;for(;e.length;){const t=e.shift().trim();let r,a,s=!0;if("no-"===t.slice(0,3)?(r=!1,a=t.slice(3)):(r=!0,a=t),a in this.parameters&&"boolean"===this.parameters[a].type)s=!1,this._set(n,a,r);else if(a in this.enum_values)s=!1,this._set(n,this.enum_values[a],a);else{if(!s){e.unshift(t);break}this._set(n,this.order[i],t)}if(i++,i>=this.order.length)break}return e.length&&this.log.warn("Ignore extra arguments: "+e.join(" ")),n}_parse(t){if(!t)return{};if(t.match(this.json_param_pattern))try{return JSON.parse(t)}catch(e){this.log.warn("Invalid JSON argument found: "+t)}if(t.match(this.named_param_pattern))return this._parseExtendedNotation(t);const e=t.indexOf(";");if(-1===e)return this._parseShorthandNotation(t);const n=this._parseShorthandNotation(t.slice(0,e)),i=this._parseExtendedNotation(t.slice(e+1));for(const t in i)n[t]=i[t];return n}_defaults(t){const e={};for(const n in this.parameters)if("function"==typeof this.parameters[n].value)try{e[n]=this.parameters[n].value(t,n),this.parameters[n].type=typeof e[n]}catch(t){this.log.error("Default function for "+n+" failed.")}else e[n]=this.parameters[n].value;return e}_cleanupOptions(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(const e of Object.keys(t)){const n=this.parameters[e];void 0!==n&&(t[e]===n.value&&"string"==typeof n.value&&"$"===n.value.slice(0,1)&&(t[e]=t[n.value.slice(1)]))}if(e)for(const e of Object.keys(t)){const n=this.parameters[e];let i;void 0!==n&&(n.group?("object"!=typeof t[n.group]&&(t[n.group]={}),i=t[n.group]):i=t,n.dest!==e&&(i[n.dest]=t[e],delete t[e]))}return t}parse(t,e,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];t.jquery||(t=r()(t)),"boolean"==typeof e&&void 0===n&&(n=e,e={});const o=i?[[this._defaults(t)]]:[[{}]];let l,c=1;l=!i||t.hasClass("pat-modal")&&"data-pat-inject"===this.attribute?t:t.parents("["+this.attribute+"]").addBack();for(const t of l){let e;const n=(r()(t).attr(this.attribute)||"").trim();if(!n)continue;const i=this._parse.bind(this);e=n.match(/&&/)?n.split(/\s*&&\s*/).map(i):i(n),Array.isArray(e)||(e=[e]),c=Math.max(e.length,c),o.push(e)}"object"==typeof e&&(Array.isArray(e)?(o.push(e),c=Math.max(e.length,c)):o.push([e])),n||(c=1);const d=a.Z.removeDuplicateObjects(a.Z.mergeStack(o,c)).map((t=>this._cleanupOptions(t,s)));return n?d:d[0]}}o.prototype.add_argument=o.prototype.addArgument,e.Z=o},28778:function(){!function(){let t=null;const e='button, input[type="button"], input[type="submit"], input[type="image"]';document.addEventListener("click",(function(n){n.target.closest&&(t=n.target.closest(e))}),!0),document.addEventListener("submit",(function(n){if("submitter"in n)return;const i=[document.activeElement,t];t=null;for(const t of i)if(t&&t.form&&t.matches(e))return void(n.submitter=t);n.submitter=n.target.querySelector(e)}),!0)}()},50033:function(t,e,n){"use strict";var i=n(4462),r=n.n(i),a=n(32218),s=n(7424),o=n(37834);const l=s.Z.getLogger("registry"),c=/patterns-disable=([^&]+)/g,d=/patterns-dont-catch/g,u={};let p,h=!1;for(;null!==(p=c.exec(window.location.search));)u[p[1]]=!0,l.info("Pattern disabled via url config:",p[1]);for(;null!==(p=d.exec(window.location.search));)h=!0,l.info("I will not catch init exceptions");void 0===window.__patternslib_registry&&(window.__patternslib_registry={});const g=window.__patternslib_registry;void 0===window.__patternslib_registry_initialized&&(window.__patternslib_registry_initialized=!1);const m={patterns:g,init(){r()(document).ready((function(){window.__patternslib_registry_initialized||(window.__patternslib_registry_initialized=!0,l.debug("Loaded: "+Object.keys(m.patterns).sort().join(", ")),m.scan(document.body),l.debug("Finished initial scan."))}))},clear(){for(const t in m.patterns)delete m.patterns[t]},transformPattern(t,e){if(u[t])return void l.debug(`Skipping disabled pattern: ${t}.`);const n=m.patterns[t],i=n.transform||n.prototype?.transform;if(i)try{i(r()(e))}catch(e){if(h)throw e;l.error(`Transform error for pattern ${t}.`,e)}},initPattern(t,e,n){const i=r()(e),a=m.patterns[t],o=s.Z.getLogger(`pat.${t}`);if(e.matches(a.trigger)){o.debug("Initialising.",e);try{a.init?a.init(i,null,n):new a(i,null,n),o.debug("done.")}catch(t){if(h)throw t;o.error("Caught error:",t)}}},orderPatterns(t){return t.includes("validation")&&(t.splice(t.indexOf("validation"),1),t.unshift("validation")),t.includes("clone-code")&&(t.splice(t.indexOf("clone-code"),1),t.unshift("clone-code")),t},scan(t,e,n){if(!t)return;if("string"==typeof t)t=document.querySelector(t);else{if(t instanceof Text)return;t.jquery&&(t=t[0])}const i=[];e=this.orderPatterns(e||Object.keys(m.patterns));for(const n of e){this.transformPattern(n,t);const e=m.patterns[n];e.trigger&&i.unshift(e.trigger)}let r=a.Z.querySelectorAllAndMe(t,i.map((t=>t.trim().replace(/,$/,""))).join(","));r=r.filter((t=>!(t.matches(".disable-patterns")||t?.parentNode?.closest?.(".disable-patterns")||t?.parentNode?.closest?.("pre")||t?.parentNode?.closest?.("template")||t.matches(".cant-touch-this")||t?.parentNode?.closest?.(".cant-touch-this"))));for(const t of r.reverse())for(const i of e)this.initPattern(i,t,n);document.body.classList.add("patterns-loaded")},register(t,e){if(!(e=e||t.name))return l.error("Pattern lacks a name.",t),!1;if(m.patterns[e])return l.debug(`Already have a pattern called ${e}.`),!1;if(m.patterns[e]=t,t.jquery_plugin){const n=("pat-"+e).replace(/-([a-zA-Z])/g,(function(t,e){return e.toUpperCase()}));r().fn[n]=o.Z.jqueryPlugin(t),r().fn[n.replace(/^pat/,"pattern")]=r().fn[n]}return l.debug(`Registered pattern ${e}`,t),window.__patternslib_registry_initialized&&(m.scan(document.body,[e]),l.debug(`Re-scanned dom with newly registered pattern ${e}.`)),!0}};e.Z=m},37834:function(t,e,n){"use strict";var i=n(4462),r=n.n(i),a=n(32218);r().fn.safeClone=function(){return this.clone()},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null===this)throw new TypeError(" this is null or not defined");var r=Object(this),a=r.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=0;i<a;){var s;i in r&&(s=r[i],t.call(n,s,i,r)),i++}});var s=function(t,e,n){return this.each((function(){var i,a=r()(this);if(i=t.init(a,n),e){if(void 0===i[e])return r().error("Method "+e+" does not exist on jQuery."+t.name),!1;if("_"===e.charAt(0))return r().error("Method "+e+" is private on jQuery."+t.name),!1;i[e].apply(i,[n])}})),this},o=function(t,e,n){var i=this;if(e){if(t[e])return t[e].apply(i,[i].concat([n]));r().error("Method "+e+" does not exist on jQuery."+t.name)}else t.init.apply(i,[i].concat([n]));return i};function l(t){var e=typeof t;return"function"===e||"object"===e&&!!t}var c={jqueryPlugin:function(t){return function(e,n){return 0===this.length?this:("object"==typeof e&&(n=e,e=void 0),"function"==typeof t?s.call(this,t,e,n):o.call(this,t,e,n))}},escapeRegExp:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isObject:l,extend:function(t){if(!l(t))return t;for(var e,n,i=1,r=arguments.length;i<r;i++)for(n in e=arguments[i])hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},findLabel:function(t){for(var e,n=t.parentNode;n&&11!==n.nodeType;n=n.parentNode)if("LABEL"===n.tagName)return n;return t.id&&(e=r()('label[for="'+t.id+'"]')),e&&0===e.length&&t.form&&(e=r()('label[for="'+t.name+'"]',t.form)),e&&e.length?e[0]:null},elementInViewport:function(t){var e=t.getBoundingClientRect(),n=document.documentElement,i=window.innerWidth||n.clientWidth,r=window.innerHeight||n.clientHeight;return!(e.right<0||e.bottom<0||e.left>i||e.top>r)},removeWildcardClass:function(t,e){if(t=c.ensureArray(t),-1===e.indexOf("*"))for(const n of t)n.classList.remove(e);else{let n=e.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&");n=n.replace(/[*]/g,".*"),n=new RegExp("^"+n+"$");for(const e of t){const t=(e.getAttribute("class")||"").split(/\s+/);if(!t.length)continue;const i=t.filter((t=>!n.test(t)));i.length?e.setAttribute("class",i.join(" ")):e.removeAttribute("class")}}},hideOrShow:(t,e,n,i)=>{t=a.Z.toNodeArray(t);const s={none:{hide:"hide",show:"show"},fade:{hide:"fadeOut",show:"fadeIn"},slide:{hide:"slideUp",show:"slideDown"}},o="css"===n.transition||"none"===n.transition?null:n.effect.duration,l=t=>{t.classList.remove("in-progress"),t.classList.add(e?"visible":"hidden"),r()(t).trigger("pat-update",{pattern:i,action:"attribute-changed",dom:t,transition:"complete"})};for(const c of t)if(c.classList.remove("visible"),c.classList.remove("hidden"),c.classList.remove("in-progress"),o){const t=s[n.transition];c.classList.add("in-progress"),r()(c).trigger("pat-update",{pattern:i,action:"attribute-changed",dom:c,transition:"start"}),r()(c)[e?t.show:t.hide]({duration:o,easing:n.effect.easing,complete:()=>l(c)})}else"css"!==n.transition&&a.Z[e?"show":"hide"](c),l(c)},addURLQueryParameter:function(t,e,n){var i=new RegExp("(\\?|\\&)"+e+"=.*?(?=(&|$))"),r=t.toString().split("#"),a=r[0],s=r[1],o=a;return o=i.test(a)?a.replace(i,"$1"+e+"="+n):/\?.+$/.test(a)?a+"&"+e+"="+n:a+"?"+e+"="+n,s&&(o+="#"+s),o},removeDuplicateObjects:function(t){const e=function(t,e){return this[t]===e};return t.reduce((function(t,n){let i=!1;for(const r of t)i=Object.keys(r).length===Object.keys(n).length&&0===Object.entries(r).filter((t=>!e.bind(n)(t[0],t[1]))).length;return i||t.push(n),t}),[])},mergeStack:function(t,e){const n=[];for(let t=0;t<e;t++)n.push({});for(const i of t){const t=i.length-1;for(let a=0;a<e;a++)n[a]=r().extend(n[a]||{},i[a>t?t:a])}return n},isElementInViewport:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t instanceof r()&&(t=t[0]);const i=t.getBoundingClientRect();return![i.top,i.bottom,i.left,i.right].every((t=>0===t))&&(e?i.top<=0+n&&i.bottom>=0+n:i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth))},hasValue:function(t){return"INPUT"===t.tagName?"checkbox"===t.type||"radio"===t.type?t.checked:""!==t.value:"SELECT"===t.tagName?-1!==t.selectedIndex:"TEXTAREA"===t.tagName&&""!==t.value},parseTime:function(t){var e=/^(\d+(?:\.\d+)?)\s*(\w*)/.exec(t);if(!e)throw new Error("Invalid time");var n=parseFloat(e[1]);switch(e[2]){case"s":return Math.round(1e3*n);case"m":return Math.round(1e3*n*60);default:return Math.round(n)}},findRelatives:function(t){var e=r()(t),n=r()(t),i=r()();if(n=(n=n.add(e.closest("label"))).add(e.closest("fieldset")),t.id&&(i=r()("label[for='"+t.id+"']")),!i.length){var a=e.closest("form");a.length||(a=r()(document.body)),i=a.find("label[for='"+t.name+"']")}return n=n.add(i)},get_bounds:function(t){const e=t.getBoundingClientRect();return{x:parseInt(Math.round(e.x),10)||0,y:parseInt(Math.round(e.y),10)||0,top:parseInt(Math.round(e.top),10)||0,bottom:parseInt(Math.round(e.bottom),10)||0,left:parseInt(Math.round(e.left),10)||0,right:parseInt(Math.round(e.right),10)||0,width:parseInt(Math.round(e.width),10)||0,height:parseInt(Math.round(e.height),10)||0}},checkInputSupport:function(t,e){let n=!1;const i=document.createElement("input");return i.setAttribute("type",t),n=i.type==t,void 0!==e&&(i.setAttribute("value",e),n=i.value!==e),n},checkCSSFeature:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div";n=document.createElement(n);let i=void 0!==n.style[t];return i&&void 0!==e&&(n.style[t]=e,i=n.style[t]===e),i},animation_frame:()=>new Promise(window.requestAnimationFrame),timeout:t=>new Promise((e=>setTimeout(e,t))),debounce:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{timer:null};return function(){clearTimeout(n.timer);const i=arguments;n.timer=setTimeout((()=>t.apply(this,i)),e)}},isIE:()=>!!document.documentMode,jqToNode:t=>(t.jquery&&(t=t[0]),t),ensureArray:(t,e)=>!!(NodeList.prototype.isPrototypeOf(t)||Array.isArray(t)||t.jquery)?e?[...t]:t:[t],localized_isodate:t=>{const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0");return`${t.getFullYear().toString()}-${n}-${e}`},escape_html:t=>{if(!t)return"";const e=document.createElement("div");return e.appendChild(document.createTextNode(t)),e.innerHTML.replace(/"/g,"&quot;")},unescape_html:t=>{if(!t)return"";return(new DOMParser).parseFromString(t,"text/html").documentElement.textContent.replace(/&quot;/g,'"')},is_iso_date_time:function(t){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?/^\d{4}-[01]\d-[0-3]\d(T[0-2]\d:[0-5]\d)?$/:/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d$/).test(t)},is_iso_date:t=>/^\d{4}-[01]\d-[0-3]\d$/.test(t),date_diff:(t,e)=>{const n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((n-i)/864e5)},getCSSValue:a.Z.get_css_value};e.Z=c},54328:function(t,e,n){"use strict";var i=n(11191),r=n(82799),a=n(32218),s=n(37834);n(46888);const o=new r.Z("checklist");o.addArgument("select",".select-all"),o.addArgument("deselect",".deselect-all"),o.addArgument("toggle",".toggle-all");i.Z.extend({name:"checklist",trigger:".pat-checklist",jquery_plugin:!0,all_selects:[],all_deselects:[],all_toggles:[],all_checkboxes:[],all_radios:[],init(){this.options=o.parse(this.el,this.options,!1),this.$el.on("patterns-injected",this._init.bind(this)),this._init()},_init(){this.all_checkboxes=this.el.querySelectorAll("input[type=checkbox]"),this.all_radios=this.el.querySelectorAll("input[type=radio]"),this.all_selects=a.Z.find_scoped(this.el,this.options.select);for(const t of this.all_selects)t.addEventListener("click",this.select_all.bind(this));this.all_deselects=a.Z.find_scoped(this.el,this.options.deselect);for(const t of this.all_deselects)t.addEventListener("click",this.deselect_all.bind(this));this.all_toggles=a.Z.find_scoped(this.el,this.options.toggle);for(const t of this.all_toggles)t.addEventListener("click",this.toggle_all.bind(this));this.el.addEventListener("change",this._handler_change.bind(this)),this.change_buttons_and_toggles(),this.change_checked()},_handler_change(){s.Z.debounce((()=>this.change_buttons_and_toggles()),50)(),s.Z.debounce((()=>this.change_checked()),50)()},destroy(){for(const t of this.all_selects)t.removeEventListener("click",this.select_all);for(const t of this.all_deselects)t.removeEventListener("click",this.deselect_all);this.el.removeEventListener("change",this._handler_change),this.$el.off("patterns_injected")},find_siblings(t,e){let n,i=t.parentNode;for(;i;){if(n=i.querySelectorAll(`${e}:not(${this.options.toggle})`),n.length||i===this.el)return n;i=i.parentNode}},find_checkboxes(t,e){let n=[];return n=0===this.options.select.indexOf("#")?this.el.querySelectorAll(e):this.find_siblings(t,e),n},change_buttons_and_toggles(){let t;for(const e of this.all_selects)t=this.find_checkboxes(e,"input[type=checkbox]"),e.disabled=[...t].map((t=>t.matches(":checked"))).every((t=>!0===t));for(const e of this.all_deselects)t=this.find_checkboxes(e,"input[type=checkbox]"),e.disabled=[...t].map((t=>t.matches(":checked"))).every((t=>!1===t));for(const e of this.all_toggles)t=this.find_checkboxes(e,"input[type=checkbox]"),e.checked=[...t].map((t=>t.matches(":checked"))).every((t=>!0===t))},select_all(t){t.preventDefault();const e=this.find_checkboxes(t.target,"input[type=checkbox]:not(:checked)");for(const t of e)t.checked=!0,t.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))},deselect_all(t){t.preventDefault();const e=this.find_checkboxes(t.target,"input[type=checkbox]:checked");for(const t of e)t.checked=!1,t.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))},toggle_all(t){t.preventDefault();const e=t.target.checked,n=this.find_checkboxes(t.target,"input[type=checkbox]");for(const t of n)t.checked=e,t.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))},change_checked(){for(const t of[...this.all_checkboxes,...this.all_radios])for(const e of t.labels)e.classList.remove("checked","unchecked"),e.classList.add(t.checked?"checked":"unchecked");for(const t of a.Z.querySelectorAllAndMe(this.el,"fieldset"))t.querySelectorAll(`input[type=checkbox]:checked:not(${this.options.toggle}), input[type=radio]:checked`).length?(t.classList.remove("unchecked"),t.classList.add("checked")):(t.classList.remove("checked"),t.classList.add("unchecked"))}})},93520:function(t,e,n){"use strict";n.r(e),n.d(e,{parser:function(){return p}});var i=n(4462),r=n.n(i),a=n(11191),s=n(7424),o=n(82799),l=n(32218),c=n(18742),d=n(37834);const u=s.Z.getLogger("date-picker"),p=new o.Z("date-picker");p.addArgument("behavior","styled",["native","styled"]),p.addArgument("week-numbers",[],["show","hide"]),p.addArgument("i18n"),p.addArgument("first-day",0),p.addArgument("after"),p.addArgument("offset-days",0),p.add_argument("output-format",null),p.add_argument("locale",null),p.addAlias("behaviour","behavior"),e.default=a.Z.extend({name:"date-picker",trigger:".pat-date-picker",parser:p,format:"YYYY-MM-DD",async init(){const t=this.el,e=this.el.disabled;if(this.options=r().extend(p.parse(t),this.options),!e&&this.options.after){const t=document.querySelectorAll(this.options.after);for(const e of t)e.addEventListener("change",(t=>{let e=t.target.value;if(e=e?new Date(e):null,!e)return;let n=this.el.value;if(n=n?new Date(n):null,!n||n<e){const t=this.options.offsetDays||0;e.setDate(e.getDate()+t),this.el.value=e.toISOString().substring(0,10),this.dispatch_change_event()}}))}let i;if("styled"===this.options.behavior){l.Z.hide(t),i=document.createElement("time"),i.setAttribute("class","output-field"),i.setAttribute("datetime",t.value),e&&i.classList.add("disabled"),t.insertAdjacentElement("beforebegin",i);const a=i.closest("label");let s;if(a&&c.Z.add_event_listener(a,"click","pat-date-picker--label",(t=>{t.preventDefault()})),this.options.outputFormat){const t=(await Promise.resolve().then(n.bind(n,67164))).default,e={format:this.format};this.options.outputFormat&&(e["output-format"]=this.options.outputFormat),this.options.locale&&(e.locale=this.options.locale),s=new t(i,e)}else this.el.value&&(i.textContent=t.value);const o=()=>{this.add_clear_button(i),!this.el.value&&this.el.placeholder&&(i.innerHTML=`<span class="placeholder">${this.el.placeholder}</span>`)};if(s?r()(i).on("init.display-time.patterns",(()=>{o()})):o(),this.el.addEventListener("change",(()=>{i.setAttribute("datetime",this.el.value),s&&this.el.value?s.format():i.textContent=this.el.value,o()})),e)return}else{if(e)return;if(d.Z.checkInputSupport("date","invalid date"))return;"date"===t.getAttribute("type")&&t.setAttribute("type","text")}window.__patternslib_import_styles&&n.e(80298).then(n.bind(n,80298));const a=(await n.e(76392).then(n.t.bind(n,76392,23))).default,s={field:t,trigger:i||t,format:this.format,firstDay:this.options.firstDay,showWeekNumber:"show"===this.options.weekNumbers,onSelect:()=>this.dispatch_change_event(),onClose:()=>{"styled"!==this.options.behavior||this.el.value||t.dispatchEvent(c.Z.blur_event())}};if(t.getAttribute("min")&&(s.minDate=new Date(t.getAttribute("min"))),t.getAttribute("max")&&(s.maxDate=new Date(t.getAttribute("max"))),this.options.i18n)try{const t=await fetch(this.options.i18n);s.i18n=await t.json()}catch{u.error(`date-picker could not load i18n for ${this.options.i18n}`)}this.pikaday=new a(s)},add_clear_button(t){if(!this.el.disabled&&!this.el.required&&this.el.value){const e=document.createElement("span");e.setAttribute("class","cancel-button"),e.addEventListener("click",(t=>{t.stopPropagation(),this.el.value=null,this.dispatch_change_event()})),t.appendChild(e)}},dispatch_change_event(){const t=new Event("change",{bubbles:!0,cancelable:!0});t.firedBy=this.pikaday,this.el.dispatchEvent(t),r()(this.el).trigger("input-change"),r()(this.el.form).trigger("input-change")}})},50016:function(t,e,n){"use strict";var i=n(11191),r=n(82799),a=n(37834),s=n(32218);const o=new r.Z("datetime-picker");o.addArgument("format","YYYY-MM-DD"),o.addArgument("week-numbers",[],["show","hide"]),o.addArgument("i18n"),o.addArgument("today","Today"),o.addArgument("clear","Clear"),o.addArgument("first-day",0);i.Z.extend({name:"datetime-picker",trigger:".pat-datetime-picker",parser:o,el_date:null,el_time:null,async init(){const t=this.el;if(this.options=o.parse(this.el,this.options),a.Z.checkInputSupport("datetime-local","invalid date"))return;window.__patternslib_import_styles&&n.e(28108).then(n.bind(n,28108));const e=(await Promise.resolve().then(n.bind(n,93520))).default,i=this.el.value.split("T"),r=i[0]||"",l=i[1]||"",c=document.createElement("div");c.setAttribute("class","pat-datetime-picker__wrapper"),s.Z.hide(t);const d=`\n            <button type="button" class="_btn _now" title="${this.options.today}">\n                <span class="_icon"/>\n                <span class="_text">${this.options.today}</span>\n            </button>`,u=`\n            <button type="button" class="_btn _clear" title="${this.options.clear}">\n                <span class="_icon"/>\n                <span class="_text">${this.options.clear}</span>\n            </button>`;c.innerHTML=`\n            <input type="date" placeholder="YYYY-MM-DD" value="${r}" />\n            <input type="time" placeholder="hh:mm" value="${l}" />\n            ${this.options.today?d:""}\n            ${this.options.clear?u:""}\n        `,this.el_time=c.querySelector("input[type=time]"),this.el_time.addEventListener("change",(()=>this.update())),this.el_date=c.querySelector("input[type=date]"),this.el_date.addEventListener("change",(()=>{this.el_time.value||(this.el_time.value=this.isotime()),this.update()}));const p={behavior:"native",format:this.options.format,weekNumbers:this.options.weekNumbers,firstDay:this.options.firstDay};if(await e.init(this.el_date,p),this.options.today){c.querySelector("._btn._now").addEventListener("click",(t=>{t.preventDefault(),this.el_date.value=this.isodate(),this.el_time.value=this.isotime(),this.update()}))}if(this.options.clear){c.querySelector("._btn._clear").addEventListener("click",(t=>{t.preventDefault(),this.el_date.value="",this.el_time.value="",this.update()}))}t.parentNode.insertBefore(c,t)},update(){this.el_date.value&&this.el_time.value?this.el.value=`${this.el_date.value}T${this.el_time.value}`:this.el.value="",this.el.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))},isodate(){return(new Date).toISOString().substr(0,10)},isotime(){return(new Date).toTimeString().substr(0,5)}})},12078:function(t,e,n){"use strict";var i=n(4462),r=n.n(i),a=n(11191),s=n(37834),o=n(7424),l=n(82799);const c=o.Z.getLogger("depends"),d=new l.Z("depends");d.addArgument("condition"),d.addArgument("action","show",["show","enable","both"]),d.addArgument("transition","none",["none","css","fade","slide"]),d.addArgument("effect-duration","fast"),d.addArgument("effect-easing","swing");a.Z.extend({name:"depends",trigger:".pat-depends",jquery_plugin:!0,async init(t,e){const i=(await n.e(35387).then(n.bind(n,35387))).default,a=this.$el[0],o=d.parse(this.$el,e);let l;this.$modal=this.$el.parents(".pat-modal");try{l=new i(this.$el,o.condition)}catch(t){return void c.error("Invalid condition: "+t.message,a)}let u=l.evaluate();switch(o.action){case"show":s.Z.hideOrShow(t,u,o,this.name),this.updateModal();break;case"enable":u?this.enable():this.disable();break;case"both":u?(s.Z.hideOrShow(t,u,o,this.name),this.updateModal(),this.enable()):(s.Z.hideOrShow(t,u,o,this.name),this.updateModal(),this.disable())}const p={handler:l,options:o,dependent:a};for(let t of l.getAllInputs()){if(t.form){let e=r()(t.form),n=e.data("patDepends.dependents");n?-1===n.indexOf(p)&&n.push(p):(n=[p],e.on("reset.pat-depends",(()=>this.onReset))),e.data("patDepends.dependents",n)}r()(t).on("change.pat-depends",null,p,this.onChange.bind(this)),r()(t).on("keyup.pat-depends",null,p,this.onChange.bind(this))}},async onReset(t){const e=r()(t.target).data("patDepends.dependents");await s.Z.timeout(50);for(let n of e)t.data=n,this.onChange(t)},updateModal(){this.$modal.length&&r()(document).trigger("pat-update",{pattern:"depends"})},enable(){this.$el.is(":input")?this.$el[0].disabled=null:this.$el.is("a")&&this.$el.off("click.patternDepends"),this.$el.removeClass("disabled"),this.$el.trigger("pat-update",{pattern:"depends",action:"attribute-changed",dom:this.$el[0],enabled:!0})},disable(){this.$el.is(":input")?this.$el[0].disabled="disabled":this.$el.is("a")&&this.$el.on("click.patternDepends",(t=>t.preventDefault())),this.$el.addClass("disabled"),this.$el.trigger("pat-update",{pattern:"depends",action:"attribute-changed",dom:this.$el[0],enabled:!1})},onChange(t){const e=t.data.handler,n=t.data.options,i=t.data.dependent,a=r()(i),o=e.evaluate();switch(n.action){case"show":s.Z.hideOrShow(a,o,n,this.name),this.updateModal();break;case"enable":o?this.enable():this.disable();break;case"both":s.Z.hideOrShow(a,o,n,this.name),this.updateModal(),o?this.enable():this.disable()}}})},67164:function(t,e,n){"use strict";n.r(e),n.d(e,{parser:function(){return d}});var i=n(11191),r=n(82799),a=n(32218),s=n(7424),o=n(37834);let l;const c=s.Z.getLogger("pat-display-time"),d=new r.Z("display-time");d.add_argument("format",""),d.add_argument("locale",null),d.add_argument("strict",!1),d.add_argument("from-now",!1),d.add_argument("no-suffix",!1),d.add_argument("output-format",null),e.default=i.Z.extend({name:"display-time",trigger:".pat-display-time",async init(){l=(await n.e(36823).then(n.t.bind(n,36823,23))).default,this.options=d.parse(this.el,this.options);let t=this.options.locale||a.Z.acquire_attribute(this.el,"lang")||"en";t=t.substr(0,2).toLowerCase();try{await n(77961)(`./${t}.js`),l.locale(t),this.lang=t}catch{l.locale("en"),this.lang="en"}c.debug(`Moment.js language used: ${t}.`),this.format()},format(){const t=this.el.getAttribute("datetime");let e="";if(t){const n=l(t,this.options.format,this.options.strict);if(!0===this.options.fromNow)if(o.Z.is_iso_date(t)){const t=new Intl.RelativeTimeFormat(this.lang,{numeric:"auto"}),i=o.Z.date_diff(n.toDate(),new Date);e=n.calendar(null,{lastWeek:`[${t.format(i,"day")}]`,lastDay:`[${t.format(-1,"day")}]`,sameDay:`[${t.format(0,"day")}]`,nextDay:`[${t.format(1,"day")}]`,nextWeek:"dddd",sameElse:()=>`[${t.format(i,"day")}]`})}else e=n.fromNow(this.options.noSuffix);else e=n.format(this.options.outputFormat||void 0)}this.el.textContent=e}})},54973:function(t,e,n){"use strict";n(46888);var i=n(4462),r=n.n(i),a=n(7424),s=n(82799),o=n(50033);const l=a.Z.getLogger("pat.ajax"),c=new s.Z("ajax");c.addArgument("accept","text/html"),c.addArgument("url",(function(t){return(t.is("a")?t.attr("href"):t.is("form")?t.attr("action"):"").split("#")[0]})),c.addArgument("browser-cache","no-cache",["cache","no-cache"]);const d={get:function(t){return void 0!==this[t]?this[t]:0},inc:function(t){return this[t]=this.get(t)+1,this.get(t)}},u={name:"ajax",trigger:".pat-ajax",parser:c,init(t){return t.off(".pat-ajax"),t.filter("a").on("click.pat-ajax",u.onTriggerEvents),t.filter("form").on("submit.pat-ajax",u.onTriggerEvents).on("click.pat-ajax","[type=submit]",u.onClickSubmit),t.filter(":not(form,a)").each((function(){l.warn("Unsupported element:",this)})),t},destroy(t){t.off(".pat-ajax")},onClickSubmit(t){const e=t.target,n=e.closest("form"),i={};e.name&&(i[e.name]=e.value),r()(n).data("pat-ajax.clicked-data",i)},onTriggerEvents(t){t&&t.preventDefault(),u.request(r()(this))},request(t,e){return t.each((function(){u._request(r()(this),e)}))},_request(t,e){const n=u.parser.parse(t,e),i=d.inc(n.url),a=t.data("pat-ajax.clicked-data"),s=a?r().param(a):"",o={context:t,data:[t.serialize(),s].filter(Boolean).join("&"),headers:{},url:n.url,method:t.attr("method")?t.attr("method"):"GET",cache:"cache"===n.browserCache};if(n.accept&&(o.headers.Accept=n.accept),t.is("form")&&t.attr("method")&&"POST"==t.attr("method").toUpperCase()){const e=new FormData(t[0]);for(const t in a)e.append(t,a[t]);o.method="POST",o.data=e,o.cache=!1,o.contentType=!1,o.processData=!1,o.type="POST"}t.removeData("pat-ajax.clicked-data"),l.debug("request:",o,t[0]);const c=r().ajax(o);c&&c.done((function(e,r,a){l.debug("success: jqxhr:",a),i===d.get(n.url)&&t.trigger({type:"pat-ajax-success",jqxhr:a})})).fail((function(e,i,r){l.error("load error for "+n.url+":",r,e),t.trigger({type:"pat-ajax-error",jqxhr:e})}))}};o.Z.register(u);var p=u,h=n(32218),g=n(18742),m=n(37834);const f=a.Z.getLogger("pat.inject"),b=new s.Z("inject");b.addArgument("default-selector"),b.addArgument("target"),b.addArgument("data-type","html"),b.addArgument("next-href"),b.addArgument("source"),b.addArgument("trigger","default",["default","autoload","autoload-visible","idle"]),b.addArgument("delay"),b.addArgument("browser-cache","no-cache",["cache","no-cache"]),b.addArgument("confirm","class",["never","always","form-data","class"]),b.addArgument("confirm-message","Are you sure you want to leave this page?"),b.addArgument("hooks",[],["raptor"],!0),b.addArgument("loading-class","injecting"),b.addArgument("executing-class","executing"),b.addArgument("executed-class","executed"),b.addArgument("class"),b.addArgument("history","none",["none","record"]),b.addArgument("push-marker"),b.addArgument("scroll"),b.addArgument("url");const v={name:"inject",trigger:".raptor-ui .ui-button.pat-inject, a.pat-inject, form.pat-inject, .pat-subform.pat-inject",parser:b,init(t,e){const n=this.extractConfig(t,e);if(n.some((t=>"record"===t.history))&&!("pushState"in history))return t;if(t.data("pat-inject",n),n[0].nextHref&&0===n[0].nextHref.indexOf("#")&&t.is("a")&&r()(n[0].nextHref).length>0)return f.debug("Skipping as next href is anchor, which already exists",n[0].nextHref),t.attr({href:(window.location.href.split("#")[0]||"")+n[0].nextHref});if(n[0].pushMarker&&r()("body").on("push",((e,i)=>{f.debug("received push message: "+i),i==n[0].pushMarker&&(f.debug("re-injecting "+i),this.onTrigger({currentTarget:t[0]}))})),n[0].idleTrigger)this._initIdleTrigger(t,n[0].idleTrigger);else switch(n[0].trigger){case"default":n.forEach((t=>{t.delay&&(t.processDelay=t.delay)})),t.is("form")?t.on("submit.pat-inject",this.onTrigger.bind(this)).on("click.pat-inject","[type=submit]",p.onClickSubmit).on("click.pat-inject","[type=submit][formaction], [type=image][formaction]",this.onFormActionSubmit.bind(this)):t.is(".pat-subform")?f.debug("Initializing subform with injection"):t.on("click.pat-inject",this.onTrigger.bind(this));break;case"autoload":if(n[0].delay){const e=Math.random().toString(36);t.attr("data-pat-inject-uid",e);const i=e=>0!=r()("[data-pat-inject-uid='"+e+"']").length&&(t.data("pat-inject-autoloaded",!0),this.onTrigger({currentTarget:t[0]}),!0);window.setTimeout(i.bind(null,e),n[0].delay)}else this.onTrigger({currentTarget:t[0]});break;case"autoload-visible":this._initAutoloadVisible(t,n);break;case"idle":this._initIdleTrigger(t,n[0].delay)}return f.debug("initialised:",t),t},destroy(t){return t.off(".pat-inject"),t.data("pat-inject",null),t},onTrigger(t){const e=r()(t.currentTarget),n=e.data("pat-inject");e.is("form")&&r()(n).each(((t,n)=>{n.params=r().param(e.serializeArray())})),t.preventDefault&&t.preventDefault(),e.trigger("patterns-inject-triggered"),this.execute(n,e)},onFormActionSubmit(t){p.onClickSubmit(t);const e=r()(t.target),n=e.attr("formaction"),i=e.parents(".pat-inject").first(),a={url:n},s=e.closest("[data-pat-inject]"),o=this.extractConfig(s,a);r()(o).each(((t,e)=>{e.params=r().param(i.serializeArray())})),t.preventDefault(),i.trigger("patterns-inject-triggered"),this.execute(o,i)},submitSubform(t){const e=t.parents("form"),n=t.data("pat-inject");r()(n).each(((e,n)=>{n.params=r().param(t.serializeArray())}));try{e.trigger("patterns-inject-triggered")}catch(t){f.error("patterns-inject-triggered",t)}this.execute(n,e)},extractConfig(t,e){e=r().extend({},e);const n=b.parse(t,e,!0);return n.forEach((n=>{n.$context=t,n.url=e.url||n.url||t.attr("href")||t.attr("action")||t.parents("form").attr("action")||"";const i=n.url.split("#");if(n.url=i[0],i.length>2&&f.warn("Ignoring additional source ids:",i.slice(2)),n.defaultSelector||(n.defaultSelector=i[1]&&"#"+i[1]||"body"),n.delay)try{n.delay=m.Z.parseTime(n.delay)}catch(t){f.warn("Invalid delay value: ",n.delay),n.delay=null}n.processDelay=0})),n},elementIsDirty(t){const e=r().map(t.find(":input:not(select)"),(t=>{const e=r()(t).val();return Boolean(e)&&e!==r()(t).attr("placeholder")}));return-1!==r().inArray(!0,e)},askForConfirmation(t){let e,n=!1;for(const i of t){let t=!1;"always"==i.confirm?t=!0:"form-data"===i.confirm&&i.target&&"none"!==i.target?t=this.elementIsDirty(i.$target):"class"===i.confirm&&i.target&&"none"!==i.target&&(t=i.$target.hasClass("is-dirty")),t&&(n=!0,e=i.confirmMessage)}return!(n&&!window.confirm(e))},ensureTarget(t){if("none"===t.target)return!0;if(t.$target=t.$target||("self"===t.target?t.$context:r()(t.target)),0===t.$target.length){if(!t.target)return f.error("Need target selector",t),!1;t.$target=this.createTarget(t.target),t.$injected=t.$target}return!0},verifySingleConfig(t,e){return e.url!==t?(f.error("Unsupported different urls for multi-inject"),!1):(e.source=e.source||e.defaultSelector,e.target=e.target||e.defaultSelector,!!this.extractModifiers(e)&&(!!this.ensureTarget(e)&&(this.listenForFormReset(e),!0)))},verifyConfig(t){return t.every((e=>this.verifySingleConfig(t[0].url,e)))},listenForFormReset(t){if("none"===t.target)return;const e=t.$target.parents("form");0!==e.length&&void 0===t.$target.data("initial-value")&&(t.$target.data("initial-value",t.$target.html()),e.on("reset",(()=>{t.$target.html(t.$target.data("initial-value"))})))},extractModifiers(t){const e=/^(.*?)(::element)?$/.exec(t.source),n=/^(.*?)(::element)?(::after|::before)?$/.exec(t.target);t.source=e[1],t.sourceMod=e[2]?"element":"content",t.target=n[1];const i=n[2]?"element":"content",r=(n[3]||"::").slice(2);return t.loadingClass&&(t.loadingClass+=" "+t.loadingClass+"-"+i,r&&t.loadingClass&&(t.loadingClass+=" "+t.loadingClass+"-"+r)),t.action=i+r,!0},createTarget(t){if("#"!==t.slice(0,1))return f.error("only id supported for non-existing target"),null;const e=r()("<div />").attr({id:t.slice(1)});return r()("body").append(e),e},_performInjection(t,e,n,i,a,s){let o;"content"===i.sourceMod&&(n=n.contents()),o=n.safeClone(),o.findInclusive("img").on("load",(t=>{r()(t.currentTarget).trigger("pat-inject-content-loaded")}));const l=i.$injected||o;this._inject(a,o,r()(t),i)&&(this._update_history(i,a,s),this._afterInjection(e,l,i))},_update_history(t,e,n){const i=t.url.indexOf("?")>-1?"&":"?";"record"===t.history&&"pushState"in history&&(t.params?history.pushState({url:t.url+i+t.params},"",t.url+i+t.params):history.pushState({url:t.url},"",t.url),n&&this._inject(e,n,r()("title"),{action:"element"}))},_afterInjection(t,e,n){if(e.filter(((t,e)=>3!==e.nodeType)).data("pat-injected",{origin:n.url}),1===e.length&&3==e[0].nodeType?e.parent().trigger("patterns-injected",[n,t[0],e[0]]):e.each(((e,i)=>{3!==i.nodeType&&r()(i).addClass(n.class).trigger("patterns-injected",[n,t[0],i])})),n.scroll&&"none"!==n.scroll){let t=n.$target.parents().addBack().filter(":scrollable");t=t.length?t[0]:window;let i=0,r=0;if("top"!==n.scroll){const a="target"===n.scroll?n.$target[0]:e.filter(n.scroll)[0],s=t===window?document.body:t;r=Math.abs(a.getBoundingClientRect().left+s.scrollLeft-s.getBoundingClientRect().left-h.Z.get_css_value(s,"border-left-width",!0)),i=Math.abs(a.getBoundingClientRect().top+s.scrollTop-s.getBoundingClientRect().top-h.Z.get_css_value(s,"border-top-width",!0))}t===window?t.scrollTo(r,i):(t.scrollLeft=r,t.scrollTop=i)}t[0].dispatchEvent(new Event("pat-inject-success",{bubbles:!0,cancelable:!0}))},async _onInjectSuccess(t,e,n){let i=n?.jqxhr?.responseText;if(!i)return void f.warn("No response content, aborting",n);"none"===e[0].source&&(i=""),r().each(e[0].hooks||[],((e,n)=>t.trigger("pat-inject-hook-"+n)));const a=await this.callTypeHandler(e[0].dataType,"sources",t,[e,i,n]);let s;a&&a[a.length-1]&&a[a.length-1][0]&&"TITLE"==a[a.length-1][0].nodeName&&(s=a[a.length-1]),e.forEach(((e,i)=>{const r=()=>{"none"!==e.target&&e.$target.each(((r,o)=>{this._performInjection(o,t,a[i],e,n.target,s)}))};e.processDelay?setTimeout((()=>r()),e.processDelay):r()})),e[0].nextHref&&t.is("a")&&(t.attr({href:e[0].nextHref.replace(/&amp;/g,"&")}),this.destroy(t)),t.off("pat-ajax-success.pat-inject"),t.off("pat-ajax-error.pat-inject")},async _onInjectError(t,e,n){let i="";const a=n.jqxhr.status,s=new Date;let l,c;a%100==4?i="Sorry! We couldn't find the page to load. Please make a screenshot and send it to support. Thank you!":a%100==5?i="I am very sorry! There was an error at the server. Please make a screenshot and contact support. Thank you!":0==a&&(i="It seems, the server is down. Please make a screenshot and contact support. Thank you!");if(null===new URLSearchParams(window.location.search).get("pat-inject-errorhandler.off")){const t=document?.querySelector(`meta[name^=pat-inject-status-${a}]`)?.getAttribute("content",!1);if(c=t?.split("#")[1],c=c?`#${c}`:null,c&&(l=document.createElement("html"),l.innerHTML=n.jqxhr.responseText,l=l.querySelector(c)),!l&&t)try{const e=await fetch(t,{method:"GET"});l=document.createElement("html"),l.innerHTML=await e.text(),l=l.querySelector(c||"body")}catch{}}if(e.forEach((e=>{"$injected"in e&&e.$injected.remove(),e.$target.removeClass(e.loadingClass),t.removeClass(e.executingClass)})),t.off("pat-ajax-success.pat-inject"),t.off("pat-ajax-error.pat-inject"),l){const t=document.querySelector(c||"body");t.innerHTML=l.innerHTML,o.Z.scan(t)}else{const t=`${i} Status is ${a} ${n.jqxhr.statusText}, time was ${s}. You can click to close this.`;r()("body").attr("data-error-message",t),r()("body").on("click",(()=>{r()("body").removeAttr("data-error-message"),window.location.href=window.location.href}))}},execute(t,e){if(t=t.map((t=>r().extend({},t))),!this.verifyConfig(t))return;if(!this.askForConfirmation(t))return;if(e.data("pat-inject-triggered"))return;e.data("pat-inject-triggered",!0);for(const n of t)n?.executingClass&&e[0].classList.add(n.executingClass),n?.loadingClass&&"none"!==n?.target&&n.$target.addClass(n.loadingClass);e.on("pat-ajax-success.pat-inject",this._onInjectSuccess.bind(this,e,t)),e.on("pat-ajax-error.pat-inject",this._onInjectError.bind(this,e,t)),e.on("pat-ajax-success.pat-inject pat-ajax-error.pat-inject",(()=>e.removeData("pat-inject-triggered")));let n=!1;g.Z.add_event_listener(e[0],"close-panel","pat-inject--close-panel",(t=>{t.stopPropagation(),t.stopImmediatePropagation(),n=!0})),e.on("pat-ajax-success.pat-inject",(async()=>{await m.Z.timeout(1),g.Z.remove_event_listener(e[0],"pat-inject--close-panel"),n&&(n=!1,e[0].dispatchEvent(new Event("close-panel",{bubbles:!0,cancelable:!0})))})),t[0].url.length?p.request(e,{url:t[0].url,"browser-cache":t[0].browserCache}):e.trigger({type:"pat-ajax-success",jqxhr:{responseText:r()("body").html()}})},_inject(t,e,n,i){const a={contentbefore:"prepend",contentafter:"append",elementbefore:"before",elementafter:"after"}[i.action];return"none"===i.source?(n.replaceWith(""),!0):0===e.length?(f.warn("Aborting injection, source not found:",e),r()(t).trigger("pat-inject-missingSource",{url:i.url,selector:i.source}),!1):"none"===i.target||(0===n.length?(f.warn("Aborting injection, target not found:",n),r()(t).trigger("pat-inject-missingTarget",{selector:i.target}),!1):("content"===i.action?n.empty().append(e):"element"===i.action?n.replaceWith(e):n[a](e),!0))},_sourcesFromHtml(t,e,n){const i=this._parseRawHtml(t,e);return n.map((t=>{if("body"===t&&(t="#__original_body"),"none"===t)return r()("\x3c!-- --\x3e");const n=i.find(t);return 0===n.length&&"title"!=t&&f.warn("No source elements for selector:",t,i),n.find('a[href^="#"]').each(((t,i)=>{const r=i.getAttribute("href");-1===r.indexOf("#{1}")&&(1===r.length?i.href=e:n.find(r).length||(i.href=e+r))})),n}))},_rebaseAttrs:{A:"href",FORM:"action",IMG:"data-pat-inject-rebase-src",OBJECT:"data",SOURCE:"data-pat-inject-rebase-src",VIDEO:"data-pat-inject-rebase-src"},_rebaseOptions:{calendar:["url","event-sources"],collapsible:["load-content"],"date-picker":["i18n"],"datetime-picker":["i18n"],inject:["url"]},_rebaseURL(t,e){return-1!==e.indexOf("://")||"/"===e[0]||0===e.indexOf("data:")?e:(t=new URL(t,window.location).href).slice(0,t.lastIndexOf("/")+1)+e},_rebaseHTML(t,e){if(""===e)return"";const n=r()(e.replace(/(\s)(src\s*)=/gi,'$1src="" data-pat-inject-rebase-$2=').trim()).wrapAll("<div>").parent();n.find(Object.keys(this._rebaseAttrs).join(",")).each(((e,n)=>{const i=r()(n),a=this._rebaseAttrs[n.tagName];let s=i.attr(a);s&&"@@"!==s.slice(0,2)&&"#"!==s[0]&&"mailto:"!==s.slice(0,7)&&"tel:"!==s.slice(0,4)&&"fax:"!==s.slice(0,4)&&"callto:"!==s.slice(0,7)&&"ts3server:"!==s.slice(0,10)&&"teams:"!==s.slice(0,6)&&"javascript:"!==s.slice(0,11)&&(s=this._rebaseURL(t,s),i.attr(a,s))}));for(const[e,i]of Object.entries(this._rebaseOptions))for(const r of h.Z.querySelectorAllAndMe(n[0],`[data-pat-${e}]`)){const n=o.Z.patterns?.[e],a=n?.parser;if(!a)continue;const s=a.parse(r,{},!0,!1,!1);let l=!1;for(const e of s)for(const n of i){const i=e[n];i&&(l=!0,Array.isArray(i)?e[n]=i.map((e=>this._rebaseURL(t,e))):e[n]=this._rebaseURL(t,i))}l&&r.setAttribute(`data-pat-${e}`,JSON.stringify(1===s.length?s[0]:s))}return n.html().replace(/src="" data-pat-inject-rebase-/g,"").trim()},_parseRawHtml(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=t.match(/\<title\>(.*)\<\/title\>/);let i=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<head\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/head>/gi,"").replace(/<body([^>]*?)>/gi,'<div id="__original_body">').replace(/<\/body([^>]*?)>/gi,"</div>");n&&2==n.length&&(i=n[0]+i);try{i=this._rebaseHTML(e,i)}catch(t){f.error("Error rebasing urls",t)}const a=r()("<div/>").html(i);return 0===a.children().length&&f.warn("Parsing html resulted in empty jquery object:",i),a},_initAutoloadVisible(t,e){if(t.data("pat-inject-autoloaded"))return!1;const n=t[0],i=e[0].delay||200;f.debug(`Delay time: ${i}`);const r=e=>t.data("pat-inject-autoloaded")?(f.debug(`autoload-visible trigger skipped ${n}`),!1):(t.data("pat-inject-autoloaded",!0),this.onTrigger({currentTarget:n}),e&&e.preventDefault(),f.debug(`autoload-visible trigger run ${n}`),!0);let a=null;const s=new IntersectionObserver((t=>{for(const e of t)e.isIntersecting?(a=window.setTimeout((()=>{s.disconnect(),r()}),i),f.debug(`autoload-visible intersecting ${n}`)):(window.clearTimeout(a),f.debug(`autoload-visible not intersecting ${n}`))}),{threshold:0,root:null,margin:"0px"});s.observe(n)},_initIdleTrigger(t,e){const n=parseInt(e,10);let i;const r=()=>{this.onTrigger({currentTarget:t[0]}),s(),clearTimeout(i)},a=m.Z.debounce((()=>{document.body.contains(t[0])?(clearTimeout(i),i=setTimeout(r,n)):s()}),n),s=()=>{["scroll","resize"].forEach((t=>window.removeEventListener(t,a))),["click","keypress","keyup","mousemove","touchstart","touchend"].forEach((t=>document.removeEventListener(t,a)))};a(),["scroll","resize"].forEach((t=>window.addEventListener(t,a))),["click","keypress","keyup","mousemove","touchstart","touchend"].forEach((t=>document.addEventListener(t,a)))},registerTypeHandler(t,e){this.handlers[t]=e},async callTypeHandler(t,e,n,i){return t=t||"html",this.handlers[t]&&r().isFunction(this.handlers[t][e])?await this.handlers[t][e].bind(this)(...i):null},handlers:{html:{sources(t,e){const n=t.map((t=>t.source));return n.push("title"),this._sourcesFromHtml(e,t[0].url,n)}}}};if(r()(document).on("patterns-injected.inject",(async(t,e,n,i)=>{e&&e.skipPatInjectHandler||(e&&(e.$target.removeClass(e.loadingClass),r()(n).removeClass(e.executingClass).addClass(e.executedClass)),3!==i.nodeType&&8!==i.nodeType&&(o.Z.scan(i,null,{type:"injection",element:n}),r()(i).trigger("patterns-injected-scanned"),await m.Z.timeout(10),i.dispatchEvent(new CustomEvent("patterns-injected-delayed",{bubbles:!0,cancelable:!0,detail:{injected:i}}))))})),r()(window).on("popstate",(t=>{if(t.originalEvent.state||!("replaceState"in history))window.location.reload();else try{history.replaceState("anchor","",document.location.href)}catch(t){f.debug(t)}})),"replaceState"in history)try{history.replaceState("pageload","",document.location.href)}catch(t){f.debug(t)}o.Z.register(v)},36382:function(t,e,n){"use strict";n.d(e,{ZP:function(){return m},E2:function(){return h}});var i=n(4462),r=n.n(i),a=n(32751),s=n(7424),o=n(82799),l=n(18742),c=n(50033),d=n(37834);n(11191).Z.extend({name:"close-panel",trigger:".close-panel",init(){const t=this.el.closest("dialog");t&&l.Z.add_event_listener(t,"close-panel","close-panel--dialog",(()=>{t.close()})),this.el.addEventListener("click",(async t=>{await d.Z.timeout(0),t.target.matches("[type=submit], button:not([type=button])")&&!1===this.el.closest("form")?.checkValidity()||this.el.dispatchEvent(new Event("close-panel",{bubbles:!0,cancelable:!0}))}))}});function u(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const p=s.Z.getLogger("pat-tooltip"),h=new o.Z("tooltip");h.addArgument("position-list",[],["tl","tm","tr","rt","rm","rb","br","bm","bl","lb","lm","lt"],!0),h.addArgument("position-policy","auto",["auto","force"]),h.addArgument("trigger","click",["click","hover","none"]),h.addArgument("source","title",["ajax","content","title"]),h.addArgument("ajax-data-type","html",["html","markdown"]),h.addArgument("closing","auto",["auto","sticky","close-button"]),h.addArgument("delay"),h.addArgument("mark-inactive",!0),h.addArgument("class"),h.addArgument("target","body"),h.addArgument("arrow-padding",null),h.addArgument("url",null);class g extends a.o{async init(){const t=this.el;window.__patternslib_import_styles&&n.e(17287).then(n.bind(n,17287));const e=(await n.e(25981).then(n.t.bind(n,25981,23))).default;this.tippy_options=this.parseOptionsForTippy(this.options);const i={animation:!1,arrow:!0,hideOnClick:"close-button"!==this.options.closing,ignoreAttributes:!0,interactive:!0,onHide:this._onHide.bind(this),onShow:this._onShow.bind(this),trigger:"click"};e.setDefaultProps(i),this.tippy=new e(t,this.tippy_options),"title"===this.options.source&&t.removeAttribute("title"),"click"===this.options.trigger&&"ajax"===this.options.source&&l.Z.add_event_listener(t,"click","pat-tooltip--click-prevent-default",(t=>{t.preventDefault(),t.stopPropagation()})),"click"===this.options.trigger&&(this.active_class="tooltip-active-click"),this.options.markInactive&&t.classList.add(this.inactive_class)}show(){this.tippy.show()}async hide(){await d.Z.timeout(1),this.tippy.hide()}destroy(){super.destroy(),this.tippy.destroy()}parseOptionsForTippy(t){const e=t=>{return`${n=t[0],{t:"bottom",r:"left",b:"top",l:"right"}[n]}${e=t[1],{l:"-start",r:"-end",m:"",t:"-start",b:"-end"}[e]}`;var e,n},n={popperOptions:{modifiers:[]}};null!==t.arrowPadding&&n.popperOptions.modifiers.push({name:"arrow",options:{padding:parseInt(t.arrowPadding,10)}});const i={position:()=>{if(!t.position?.list?.length)return;n.placement=e(t.position.list[0]);const i={name:"flip",enabled:!0};if("force"===t.position.policy)i.enabled=!1;else if(t.position.length>1){const n=t.position.list.slice(1).map(e);i.fallbackPlacements=n}n.popperOptions.modifiers.push(i)},trigger(){"hover"===t.trigger?n.trigger="mouseenter focus":"none"===t.trigger&&(n.trigger="manual",n.hideOnClick=!1)},source:()=>{let e;"title"===t.source?e=this.el.getAttribute("title"):"content"===t.source?(e=this.el.innerHTML,n.allowHTML=!0):"ajax"===t.source&&(e=document.createElement("progress"),n.allowHTML=!0),n.content=e},delay(){t.delay&&(n.delay=[d.Z.parseTime(t.delay),0])},target:()=>{t.target&&("parent"===t.target?n.appendTo="parent":"body"===t.target?n.appendTo=document.body:n.appendTo=document.querySelector(t.target))}};for(let e in t){switch(e){case"ajax-data-type":e="ajaxDataType";break;case"mark-inactive":e="markInactive"}i[e]&&i[e](e)}return n}_initialize_content(){c.Z.scan(this.tippy.popper)}async _onShow(){const t=[];if(this.options.class&&t.push(...this.options.class.split(" ")),t.push("tooltip-container"),"close-button"===this.options.closing){for(const t of this.tippy.popper.querySelectorAll(".pat-tooltip--close-button"))t.remove();const t=document.createElement("button");t.setAttribute("class","close-panel pat-tooltip--close-button");const e=this.tippy.popper.querySelector(".tippy-content");e.parentNode.insertBefore(t,e)}l.Z.add_event_listener(this.tippy.popper,"close-panel","pat-tooltip--close-panel",(()=>this.hide())),this.tippy.popper.classList.add(...t),this.options.markInactive&&(this.el.classList.remove(this.inactive_class),this.el.classList.add(this.active_class)),"auto"!==this.options.closing&&"hover"===this.options.trigger&&this.tippy.setProps({trigger:"click"}),"ajax"===this.options.source&&await this._get_content(),r()(this.tippy.popper).trigger("patterns-injected",[{skipPatInjectHandler:!0},this.el,this.tippy.popper]),this._initialize_content()}_onHide(){this.options.markInactive&&(this.el.classList.remove(this.active_class),this.el.classList.add(this.inactive_class)),"auto"!==this.options.closing&&"hover"===this.options.trigger&&this.tippy.setProps({trigger:"mouseenter focus"}),"ajax"===this.options.source&&this.tippy.setContent(document.createElement("progress"))}async _get_content(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.url;if(({url:n,selector:t}=this.get_url_parts(n||this.el.getAttribute("href"))),n){const i=this.data_type_handlers[this.options.ajaxDataType];try{const r=await fetch(n,{headers:{Accept:"text/html,application/xhtml+xml,application/xml"}}),a=await r.text();e=await i(a,n,t)}catch(t){p.error("Error on ajax request. ${e}")}}else t&&(e=document.querySelector(t),e=e?.innerHTML||void 0);e&&(this.tippy.setContent(e),await d.Z.timeout(1),this.tippy.popperInstance.forceUpdate())}async get_content(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.url;await this._get_content(t),this._initialize_content()}get_url_parts(t){let e,n,i;return t?([e,n]=t.split("#"),n&&(n=`#${n}`,[n,i]=n.split("?")),i&&(e=`${e}?${i}`),{url:e,selector:n}):{url:e,selector:n}}static register_type_handler(t,e){g.data_type_handlers[t]=e}constructor(){super(...arguments),u(this,"tippy",null),u(this,"active_class","tooltip-active-hover"),u(this,"inactive_class","tooltip-inactive"),this.register_type_handler=this.constructor.register_type_handler,this.data_type_handlers=this.constructor.data_type_handlers}}u(g,"name","tooltip"),u(g,"trigger",".pat-tooltip, .pat-tooltip-ng"),u(g,"parser",h),u(g,"data_type_handlers",{html(t,e,n){let i=document.createElement("div");return i.innerHTML=t,n&&(i=i.querySelector(n)),i?.innerHTML||""},async markdown(t,e,n){const i=c.Z.patterns.markdown;if(!i)return t;const a=new i(r()("<div/>"));await l.Z.await_pattern_init(a);const s={url:e};n&&(s.source=n);return(await a.renderForInjection(s,t))[0]}}),c.Z.register(g);var m=g},25600:function(t,e,n){"use strict";n.d(e,{cf:function(){return b}});n(28778);var i=n(4462),r=n.n(i),a=n(32751),s=n(82799),o=n(32218),l=n(18742),c=n(7424),d=n(37834),u=n(50033);function p(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const h=c.Z.getLogger("pat-validation"),g=new s.Z("validation");g.addArgument("disable-selector","[type=submit], button:not([type=button])"),g.addArgument("message-date",""),g.addArgument("message-datetime",""),g.addArgument("message-email",""),g.addArgument("message-max",""),g.addArgument("message-min",""),g.addArgument("message-number",""),g.addArgument("message-required",""),g.addArgument("message-equality","is not equal to %{attribute}."),g.addArgument("not-after",null),g.addArgument("not-before",null),g.addArgument("equality",null),g.addArgument("delay",100),g.addAlias("message-integer","message-number"),g.addArgument("error-template");const m="__patternslib__input__error__el",f="__patternslib__input__error__msg";class b extends a.o{init(){l.Z.add_event_listener(this.el,"submit","pat-validation--submit--validator",(t=>{for(const e of this.inputs)h.debug("Checking input for submit",e,t),this.check_input({input:e,event:t})}),{capture:!0}),this.initialize_inputs(),r()(this.el).on("pat-update",(()=>{this.initialize_inputs()})),this.el.setAttribute("novalidate","")}initialize_inputs(){this.inputs=[...this.el.querySelectorAll("input[name], select[name], textarea[name]")],this.disabled_elements=[...this.el.querySelectorAll(this.options.disableSelector)];for(const[t,e]of this.inputs.entries()){const n=d.Z.debounce((t=>{h.debug("Checking input for event",e,t),this.check_input({input:e,event:t})}),this.options.delay);l.Z.add_event_listener(e,"input",`pat-validation--input-${e.name}--${t}--validator`,(t=>n(t))),l.Z.add_event_listener(e,"change",`pat-validation--change-${e.name}--${t}--validator`,(t=>n(t))),l.Z.add_event_listener(e,"blur",`pat-validation--blur-${e.name}--${t}--validator`,(t=>n(t)))}}check_input(t){let{input:e,event:n,stop:i=!1}=t;if(e.disabled)return;this.set_validity({input:e,msg:""});const r=e.validity;if(n?.submitter?.hasAttribute("formnovalidate"))return;h.debug(`\n            validity_state.badInput ${r.badInput}\n            validity_state.customError ${r.customError}\n            validity_state.patternMismatch ${r.patternMismatch}\n            validity_state.rangeOverflow ${r.rangeOverflow}\n            validity_state.rangeUnderflow ${r.rangeUnderflow}\n            validity_state.stepMismatch ${r.stepMismatch}\n            validity_state.tooLong ${r.tooLong}\n            validity_state.tooShort ${r.tooShort}\n            validity_state.typeMismatch ${r.typeMismatch}\n            validity_state.valid ${r.valid}\n            validity_state.valueMissing ${r.valueMissing}\n        `);const a=g.parse(e);if(r.valid){if(a.equality&&this.el.querySelector(`[name=${a.equality}]`)?.value!==e.value){const t=a.message.equality||"The value is not equal to %{attribute}";this.set_validity({input:e,msg:t,attribute:a.equality})}else if(a.not.after||a.not.before){const t=a.message.date||a.message.datetime,n="The date must be after %{attribute}",r="The date must be before %{attribute}";let s,o,l,c;if(a.not.after&&(d.Z.is_iso_date_time(a.not.after,!0)?s=new Date(a.not.after):(o=document.querySelector(a.not.after),s=o?.value?new Date(o?.value):void 0),s=isNaN(s)?null:s),a.not.before&&(d.Z.is_iso_date_time(a.not.before,!0)?l=new Date(a.not.before):(c=document.querySelector(a.not.before),l=c?.value?new Date(c?.value):void 0),l=isNaN(l)?null:l),e.value&&d.Z.is_iso_date_time(e.value,!0)&&!isNaN(new Date(e.value))){const i=new Date(e.value);if(s&&i>s){let n;!o&&a.not.after?n=a.not.after:(n=o?.labels?.[0]?.textContent.replace(/\s\s+/g," "),n=n||o.name),this.set_validity({input:e,msg:t||r,attribute:n.trim()})}else if(l&&i<l){let i;!c&&a.not.before?i=a.not.before:(i=c?.labels?.[0]?.textContent.replace(/\s\s+/g," "),i=i||c.name),this.set_validity({input:e,msg:t||n,attribute:i.trim()})}}!i&&o&&(h.debug("Check `not-after` input.",o),this.check_input({input:o,stop:!0})),!i&&c&&(h.debug("Check `no-before` input.",o),this.check_input({input:c,stop:!0}))}if(!r.customError)return void this.remove_error(e,!0)}else r.valueMissing&&a.message.required?this.set_validity({input:e,msg:a.message.required}):r.rangeUnderflow&&a.message.min?this.set_validity({input:e,msg:a.message.min,min:e.getAttribute("min")}):r.rangeOverflow&&a.message.max?this.set_validity({input:e,msg:a.message.max,max:e.getAttribute("max")}):(r.badInput||r.stepMismatch)&&"number"===e.type&&a.message.number?this.set_validity({input:e,msg:a.message.number}):r.typeMismatch&&"email"===e.type&&a.message.email?this.set_validity({input:e,msg:a.message.email}):r.rangeUnderflow&&"date"===e.type&&a.message.date||r.rangeOverflow&&"date"===e.type&&a.message.date?this.set_validity({input:e,msg:a.message.date}):(r.rangeUnderflow&&"datetime"===e.type&&a.message.datetime||r.rangeOverflow&&"datetime"===e.type&&a.message.datetime)&&this.set_validity({input:e,msg:a.message.datetime});"submit"===n?.type&&(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation()),this.set_error_message(e)}set_validity(t){let{input:e,msg:n,attribute:i=null,min:r=null,max:a=null}=t;i&&(n=n.replace(/%{attribute}/g,i)),r&&(n=n.replace(/%{count}/g,r)),a&&(n=n.replace(/%{count}/g,a)),n=n.replace(/%{value}/g,JSON.stringify(e.value)),e.setCustomValidity(n),e[f]=n}remove_error(t){let e=[t];arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e=this.inputs.filter((e=>e.name===t.name)));for(const t of e){const e=t[m];t[m]=null,e?.remove()}if(this.el.checkValidity())for(const t of this.disabled_elements)t.disabled&&(t.removeAttribute("disabled"),t.classList.remove("disabled"))}set_error_message(t){this.remove_error(t);const e=this.inputs.filter((e=>e.name===t.name));if(e.length>1&&e.some((t=>!!t[m])))return;const n=t.validationMessage||t[f],i=o.Z.create_from_string(this.error_template(n)).firstChild;let r;"radio"!==t.type&&"checkbox"!==t.type||(r=t.closest("fieldset.pat-checklist")),r?r.append(i):t.after(i),t[m]=i;let a=!1;for(const t of this.disabled_elements)t.disabled||(a=!0,t.setAttribute("disabled","disabled"),t.classList.add("disabled"),h.debug("Disable element",t));if(a){h.debug("Checking whole form after element was disabled.");for(const e of this.inputs.filter((e=>e!==t)))this.check_input({input:e,stop:!0})}}error_template(t){return`<em class="validation warning message">${t}</em>`}}p(b,"name","validation"),p(b,"trigger","form.pat-validation"),p(b,"parser",g),u.Z.register(b)}}]);
//# sourceMappingURL=47112.3de65e40559fb2c82ffe.min.js.map