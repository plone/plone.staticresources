(self.webpackChunkplone_staticresources=self.webpackChunkplone_staticresources||[]).push([[77941],{11191:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var n=a(22236),i=a.n(n),o=a(50033),r=a(7424),s={getOptions(e,t,a){a=a||{},0===e.length||i().nodeName(e[0],"body")||(a=this.getOptions(e.parent(),t,a));let n={};if(0!==e.length&&(n=e.data("pat-"+t),n&&"string"==typeof n)){const e={};i().each(n.split(";"),(function(t,a){(a=a.split(":")).reverse();let n=a.pop();n=n.replace(/^\s+|\s+$/g,""),a.reverse();let i=a.join(":");i=i.replace(/^\s+|\s+$/g,""),e[n]=i})),n=e}return i().extend(!0,{},a,n)}};const l=r.Z.getLogger("Patternslib Base"),c=function(e,t,a){e.jquery||(e=i()(e));const n=this.prototype.name,l=r.Z.getLogger(`pat.${n}`);let c=e.data(`pattern-${n}`);if(void 0===c&&o.Z.patterns[n])try{e.data(`pattern-${n}`,"initializing"),t="mockup"===this.prototype.parser?s.getOptions(e,n,t):t,c=new o.Z.patterns[n](e,t,a)}catch(e){l.error(`Failed while initializing ${n} pattern.`,e)}return c},d=async function(e,t,a){var n;null!==(n=e)&&void 0!==n&&n.jquery&&0===e.length||!e?l.warn("No element given to pattern."):(e.jquery||(e=i()(e)),this.$el=e,this.el=e[0],this.options=i().extend(!0,{},this.defaults||{},t||{}),await this.init(e,t,a),this.$el.data(`pattern-${this.name}`,this),this.el[`pattern-${this.name}`]=this,this.emit("init"))};d.prototype={constructor:d,on(e,t){this.$el.on(`${e}.${this.name}.patterns`,t)},one(e,t){this.$el.one(`${e}.${this.name}.patterns`,t)},emit(e,t){void 0===t&&(t=[]),this.$el.trigger(`${e}.${this.name}.patterns`,t)}},d.extend=function(e){const t=this;let a;if(!e)throw new Error("Pattern configuration properties required when calling Base.extend");a=Object.hasOwnProperty.call(e,"constructor")?e.constructor:function(){t.apply(this,arguments)},a.extend=d.extend,a.init=c,a.jquery_plugin=!0,a.trigger=e.trigger,a.parser=(null==e?void 0:e.parser)||null;var n=function(){this.constructor=a};return n.prototype=t.prototype,a.prototype=new n,i().extend(!0,a.prototype,e),a.__super__=t.prototype,e.name?e.trigger?!1!==e.autoregister&&o.Z.register(a,e.name):l.warn(`The pattern ${e.name} does not have a trigger attribute, it will not be registered.`):l.warn("This pattern without a name attribute will not be registered!"),a};var p=d},32218:function(e,t,a){"use strict";var n=a(18742);const i="__patternslib__data_prefix__",o="__patternslib__style__display";function r(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=window.getComputedStyle(e).getPropertyValue(t);return(a||n)&&(i=parseFloat(i)||0),a&&!n&&(i=parseInt(Math.round(i),10)),i}const s={toNodeArray:e=>(e.jquery||e instanceof NodeList?e=[...e]:e instanceof Array==!1&&(e=[e]),e),querySelectorAllAndMe:(e,t)=>{if(!e)return[];const a=[...e.querySelectorAll(t)];return e.matches(t)&&a.unshift(e),a},wrap:(e,t)=>{e.parentNode.insertBefore(t,e),t.appendChild(e)},hide:e=>{"none"!==e.style.display&&(e.style.display&&(e[o]=e.style.display),e.style.display="none")},show:e=>{const t=e[o]||null;e.style.display=t,delete e[o]},find_parents:(e,t)=>{const a=[];let n=e;for(;n;){var i,o,r;n=null===(i=n.parentNode)||void 0===i||null===(o=(r=i).closest)||void 0===o?void 0:o.call(r,t),n&&a.push(n)}return a},find_scoped:(e,t)=>(0===t.indexOf("#")?document:e).querySelectorAll(t),get_parents:e=>{const t=[];let a=null==e?void 0:e.parentNode;for(;a;){var n;t.push(a),a=null===(n=a)||void 0===n?void 0:n.parentNode,a=a instanceof HTMLElement?a:null}return t},acquire_attribute:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e;const o=[];for(;i;){const e=i.getAttribute(t);if(e||a&&""===e){if(!n)return e;o.push(e)}i=i.parentElement}if(n)return o},is_visible:e=>e.offsetWidth>0&&e.offsetHeight>0,create_from_string:e=>document.createRange().createContextualFragment(e.trim()),get_css_value:r,find_scroll_container:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;for(;e&&e!==document.body;){if(!t||"y"===t){let t=r(e,"overflow-y");if(["auto","scroll"].includes(t))return e}if(!t||"x"===t){let t=r(e,"overflow-x");if(["auto","scroll"].includes(t))return e}e=e.parentElement}return a},get_data:(e,t,a)=>e[`${i}${t}`]||a,set_data:(e,t,a)=>{e[`${i}${t}`]=a},delete_data:(e,t)=>{delete e[`${i}${t}`]},template:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Function("return `"+e+"`;").call(t)},add_event_listener:n.Z.add_event_listener,remove_event_listener:n.Z.remove_event_listener};t.Z=s},18742:function(e,t){"use strict";const a={},n=(e,t)=>{if(null==e||!e.removeEventListener)return;const n=a[e];if(!n)return;let i;if(t){const e=n[t];i=e?[e]:[]}else i=Object.entries(n);for(const t of i||[])e.removeEventListener(t[0],t[1],t[2])};t.Z={add_event_listener:function(e,t,i,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};null!=e&&e.addEventListener&&(n(e,i),a[e]||(a[e]={}),a[e][i]=[t,o,r.capture?r:void 0],e.addEventListener(t,o,r))},remove_event_listener:n,await_event:(e,t)=>new Promise((a=>e.addEventListener(t,a,{once:!0}))),await_pattern_init:e=>new Promise((t=>e.one("init",t))),blur_event:()=>new Event("blur",{bubbles:!1,cancelable:!1}),click_event:()=>new Event("click",{bubbles:!0,cancelable:!0}),change_event:()=>new Event("change",{bubbles:!0,cancelable:!1}),focus_event:()=>new Event("focus",{bubbles:!1,cancelable:!1}),input_event:()=>new Event("input",{bubbles:!0,cancelable:!1}),mousedown_event:()=>new Event("mousedown",{bubbles:!0,cancelable:!0}),mouseup_event:()=>new Event("mouseup",{bubbles:!0,cancelable:!0}),scroll_event:()=>new Event("scroll",{bubbles:!0,cancelable:!1}),submit_event:()=>new Event("submit",{bubbles:!0,cancelable:!0})}},7424:function(e,t){"use strict";var a,n;Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),a=this,n=function(){},i=function(){return a.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,i.prototype=new n,i});var i={DEBUG:10,INFO:20,WARN:30,ERROR:40,FATAL:50};function o(){}function r(e,t){this._loggers={},this.name=e||"",this._parent=t||null,t||(this._enabled=!0,this._level=i.WARN)}function s(e){n=e}o.prototype={output:function(e,t,a){e&&a.unshift(e+":"),t<=i.DEBUG?(a.unshift("[DEBUG]"),console.log.apply(console,a)):t<=i.INFO?console.info.apply(console,a):t<=i.WARN?console.warn.apply(console,a):console.error.apply(console,a)}},r.prototype={getLogger:function(e){for(var t=e.split("."),a=this,n=this.name?[this.name]:[];t.length;){var i=t.shift();n.push(i),i in a._loggers||(a._loggers[i]=new r(n.join("."),a)),a=a._loggers[i]}return a},_getFlag:function(e){var t=this;for(e="_"+e;null!==t;){if(void 0!==t[e])return t[e];t=t._parent}return null},setEnabled:function(e){this._enabled=!!e},isEnabled:function(){this._getFlag("enabled")},setLevel:function(e){"number"==typeof e?this._level=e:"string"==typeof e&&(e=e.toUpperCase())in i&&(this._level=i[e])},getLevel:function(){return this._getFlag("level")},log:function(e,t){!t.length||!this._getFlag("enabled")||e<this._getFlag("level")||(t=Array.prototype.slice.call(t),n.output(this.name,e,t))},debug:function(){this.log(i.DEBUG,arguments)},info:function(){this.log(i.INFO,arguments)},warn:function(){this.log(i.WARN,arguments)},error:function(){this.log(i.ERROR,arguments)},fatal:function(){this.log(i.FATAL,arguments)}},s(new o),a=new r;for(var l,c=/loglevel(|-[^=]+)=([^&]+)/g;null!==(l=c.exec(window.location.search));){(""===l[1]?a:a.getLogger(l[1].slice(1))).setLevel(l[2].toUpperCase())}var d={Level:i,getLogger:a.getLogger.bind(a),setEnabled:a.setEnabled.bind(a),isEnabled:a.isEnabled.bind(a),setLevel:a.setLevel.bind(a),getLevel:a.getLevel.bind(a),debug:a.debug.bind(a),info:a.info.bind(a),warn:a.warn.bind(a),error:a.error.bind(a),fatal:a.fatal.bind(a),getWriter:function(){return n},setWriter:s};t.Z=d},82799:function(e,t,a){"use strict";var n=a(22236),i=a.n(n),o=a(37834),r=a(7424);class s{constructor(e){this.order=[],this.parameters={},this.attribute="data-pat-"+e,this.enum_values={},this.enum_conflicts=[],this.groups={},this.possible_groups={},this.log=r.Z.getLogger(e+".parser"),this.group_pattern=/([a-z][a-z0-9]*)-([A-Z][a-z0-0\-]*)/i,this.json_param_pattern=/^\s*\[?\s*{/i,this.named_param_pattern=/^\s*([a-z][a-z0-9\-]*)\s*:(.*)/is,this.token_pattern=/((["']).*?(?!\\)\2)|\s*(\S+)\s*/g}_camelCase(e){return e.replace(/\-([a-z])/g,((e,t)=>t.toUpperCase()))}addAlias(e,t){if(!this.parameters[t])throw'Attempted to add an alias "'+e+'" for a non-existing parser argument "'+t+'".';this.parameters[t].alias=e}addGroupToSpec(e){const t=e.name.match(this.group_pattern);if(t){const a=t[1],n=t[2];if(a in this.possible_groups){const e=this.possible_groups[a],t=e.name.match(this.group_pattern)[2];e.group=a,e.dest=t,this.groups[a]=new s,this.groups[a].addArgument(t,e.value,e.choices,e.multiple),delete this.possible_groups[a]}a in this.groups?(this.groups[a].addArgument(n,e.value,e.choices,e.multiple),e.group=a,e.dest=n):(this.possible_groups[a]=e,e.dest=this._camelCase(e.name))}return e}addJSONArgument(e,t){this.order.push(e),this.parameters[e]=this.addGroupToSpec({name:e,value:t,dest:e,group:null,type:"json"})}addArgument(e,t,a,n){const i={name:e,value:n&&!Array.isArray(t)?[t]:t,multiple:n,dest:e,group:null};if(a&&Array.isArray(a)&&a.length){i.choices=a,i.type=this._typeof(a[0]);for(const t of a)-1===this.enum_conflicts.indexOf(t)&&(t in this.enum_values?(this.enum_conflicts.push(t),delete this.enum_values[t]):this.enum_values[t]=e)}else"string"==typeof i.value&&"$"===i.value.slice(0,1)?i.type=this.parameters[i.value.slice(1)].type:i.type=this._typeof(n?i.value[0]:i.value);this.order.push(e),this.parameters[e]=this.addGroupToSpec(i)}_typeof(e){return null===e?"null":typeof e}_coerce(e,t){const a=this.parameters[e];if(typeof t!==a.type)try{switch(a.type){case"json":t=JSON.parse(t);break;case"boolean":if("string"==typeof t){t=t.toLowerCase();const e=parseInt(t,10);t=isNaN(e)?"true"===t||"y"===t||"yes"===t||"y"===t||"on"===t:!!e}else{if("number"!=typeof t)throw"Cannot convert value for "+e+" to boolean";t=!!t}break;case"number":if("string"==typeof t){if(t=parseInt(t,10),isNaN(t))throw"Cannot convert value for "+e+" to number"}else{if("boolean"!=typeof t)throw"Cannot convert value for "+e+" to number";t+=0}break;case"string":t=t.toString();break;case"null":case"undefined":break;default:throw"Do not know how to convert value for "+e+" to "+a.type}}catch(e){return this.log.warn(e),null}return a.choices&&-1===a.choices.indexOf(t)?(this.log.warn("Illegal value for "+e+": "+t),null):t}_set(e,t,a){if(!(t in this.parameters))return void this.log.debug("Ignoring value for unknown argument "+t);let n;if(this.parameters[t].multiple){n="string"==typeof a?a.split(/,+/):a,a=[];for(const e of n){const n=this._coerce(t,e.trim());null!==n&&a.push(n)}}else if(null===(a=this._coerce(t,a)))return;e[t]=a}_split(e){const t=[];return e.replace(this.token_pattern,((e,a,n,i)=>{a?t.push(a):i&&t.push(i)})),t}_parseExtendedNotation(e){const t={},a=e.replace(/;;/g,"\0x1f").replace(/&amp;/g,"&amp\0x1f").split(/;/).map((e=>e.replace(new RegExp("\0x1f","g"),";")));for(const n of a){if(!n)continue;const a=n.match(this.named_param_pattern);if(!a){this.log.warn("Invalid parameter: "+n+": "+e);continue}const i=a[1],o=a[2].trim(),r=Object.values(this.parameters).filter((e=>e.alias===i));if(1===r.length)this._set(t,r[0].name,o);else if(i in this.parameters)this._set(t,i,o);else{if(!(i in this.groups)){this.log.warn("Unknown named parameter "+a[1]);continue}{const e=this.groups[i]._parseShorthandNotation(o);for(const a in e)this._set(t,i+"-"+a,e[a])}}}return t}_parseShorthandNotation(e){const t=this._split(e),a={};let n=0;for(;t.length;){const e=t.shift().trim();let i,o,r=!0;if("no-"===e.slice(0,3)?(i=!1,o=e.slice(3)):(i=!0,o=e),o in this.parameters&&"boolean"===this.parameters[o].type)r=!1,this._set(a,o,i);else if(o in this.enum_values)r=!1,this._set(a,this.enum_values[o],o);else{if(!r){t.unshift(e);break}this._set(a,this.order[n],e)}if(n++,n>=this.order.length)break}return t.length&&this.log.warn("Ignore extra arguments: "+t.join(" ")),a}_parse(e){if(!e)return{};if(e.match(this.json_param_pattern))try{return JSON.parse(e)}catch(t){this.log.warn("Invalid JSON argument found: "+e)}if(e.match(this.named_param_pattern))return this._parseExtendedNotation(e);const t=e.indexOf(";");if(-1===t)return this._parseShorthandNotation(e);const a=this._parseShorthandNotation(e.slice(0,t)),n=this._parseExtendedNotation(e.slice(t+1));for(const e in n)a[e]=n[e];return a}_defaults(e){const t={};for(const a in this.parameters)if("function"==typeof this.parameters[a].value)try{t[a]=this.parameters[a].value(e,a),this.parameters[a].type=typeof t[a]}catch(e){this.log.error("Default function for "+a+" failed.")}else t[a]=this.parameters[a].value;return t}_cleanupOptions(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(const t of Object.keys(e)){const a=this.parameters[t];void 0!==a&&(e[t]===a.value&&"string"==typeof a.value&&"$"===a.value.slice(0,1)&&(e[t]=e[a.value.slice(1)]))}if(t)for(const t of Object.keys(e)){const a=this.parameters[t];let n;void 0!==a&&(a.group?("object"!=typeof e[a.group]&&(e[a.group]={}),n=e[a.group]):n=e,a.dest!==t&&(n[a.dest]=e[t],delete e[t]))}return e}parse(e,t,a){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.jquery||(e=i()(e)),"boolean"==typeof t&&void 0===a&&(a=t,t={});const s=n?[[this._defaults(e)]]:[[{}]];let l,c=1;l=!n||e.hasClass("pat-modal")&&"data-pat-inject"===this.attribute?e:e.parents("["+this.attribute+"]").addBack();for(const e of l){let t;const a=(i()(e).attr(this.attribute)||"").trim();if(!a)continue;const n=this._parse.bind(this);t=a.match(/&&/)?a.split(/\s*&&\s*/).map(n):n(a),Array.isArray(t)||(t=[t]),c=Math.max(t.length,c),s.push(t)}"object"==typeof t&&(Array.isArray(t)?(s.push(t),c=Math.max(t.length,c)):s.push([t])),a||(c=1);const d=o.Z.removeDuplicateObjects(o.Z.mergeStack(s,c)).map((e=>this._cleanupOptions(e,r)));return a?d:d[0]}}s.prototype.add_argument=s.prototype.addArgument,t.Z=s},28778:function(){!function(){let e=null;const t='button, input[type="button"], input[type="submit"], input[type="image"]';document.addEventListener("click",(function(a){a.target.closest&&(e=a.target.closest(t))}),!0),document.addEventListener("submit",(function(a){if("submitter"in a)return;const n=[document.activeElement,e];e=null;for(const e of n)if(e&&e.form&&e.matches(t))return void(a.submitter=e);a.submitter=a.target.querySelector(t)}),!0)}()},50033:function(e,t,a){"use strict";var n=a(22236),i=a.n(n),o=a(32218),r=a(7424),s=a(37834);const l=r.Z.getLogger("registry"),c=/patterns-disable=([^&]+)/g,d=/patterns-dont-catch/g,p={};let u,h=!1;for(;null!==(u=c.exec(window.location.search));)p[u[1]]=!0,l.info("Pattern disabled via url config:",u[1]);for(;null!==(u=d.exec(window.location.search));)h=!0,l.info("I will not catch init exceptions");void 0===window.__patternslib_registry&&(window.__patternslib_registry={});const m=window.__patternslib_registry;void 0===window.__patternslib_registry_initialized&&(window.__patternslib_registry_initialized=!1);const f={patterns:m,init(){i()(document).ready((function(){window.__patternslib_registry_initialized||(window.__patternslib_registry_initialized=!0,l.debug("Loaded: "+Object.keys(f.patterns).sort().join(", ")),f.scan(document.body),l.debug("Finished initial scan."))}))},clear(){for(const e in f.patterns)delete f.patterns[e]},transformPattern(e,t){var a;if(p[e])return void l.debug(`Skipping disabled pattern: ${e}.`);const n=f.patterns[e],o=n.transform||(null===(a=n.prototype)||void 0===a?void 0:a.transform);if(o)try{o(i()(t))}catch(t){if(h)throw t;l.error(`Transform error for pattern ${e}.`,t)}},initPattern(e,t,a){const n=i()(t),o=f.patterns[e],s=r.Z.getLogger(`pat.${e}`);if(t.matches(o.trigger)){s.debug("Initialising.",t);try{o.init?o.init(n,null,a):new o(n,null,a),s.debug("done.")}catch(e){if(h)throw e;s.error("Caught error:",e)}}},orderPatterns(e){return e.includes("validation")&&(e.splice(e.indexOf("validation"),1),e.unshift("validation")),e.includes("clone-code")&&(e.splice(e.indexOf("clone-code"),1),e.unshift("clone-code")),e},scan(e,t,a){if(!e)return;if("string"==typeof e)e=document.querySelector(e);else{if(e instanceof Text)return;e.jquery&&(e=e[0])}const n=[];t=this.orderPatterns(t||Object.keys(f.patterns));for(const a of t){this.transformPattern(a,e);const t=f.patterns[a];t.trigger&&n.unshift(t.trigger)}let i=o.Z.querySelectorAllAndMe(e,n.map((e=>e.trim().replace(/,$/,""))).join(","));i=i.filter((e=>{var t,a,n,i,o,r,s,l;return!(e.matches(".disable-patterns")||null!=e&&null!==(t=e.parentNode)&&void 0!==t&&null!==(a=t.closest)&&void 0!==a&&a.call(t,".disable-patterns")||null!=e&&null!==(n=e.parentNode)&&void 0!==n&&null!==(i=n.closest)&&void 0!==i&&i.call(n,"pre")||null!=e&&null!==(o=e.parentNode)&&void 0!==o&&null!==(r=o.closest)&&void 0!==r&&r.call(o,"template")||e.matches(".cant-touch-this")||null!=e&&null!==(s=e.parentNode)&&void 0!==s&&null!==(l=s.closest)&&void 0!==l&&l.call(s,".cant-touch-this"))}));for(const e of i.reverse())for(const n of t)this.initPattern(n,e,a);document.body.classList.add("patterns-loaded")},register(e,t){if(!(t=t||e.name))return l.error("Pattern lacks a name.",e),!1;if(f.patterns[t])return l.debug(`Already have a pattern called ${t}.`),!1;if(f.patterns[t]=e,e.jquery_plugin){const a=("pat-"+t).replace(/-([a-zA-Z])/g,(function(e,t){return t.toUpperCase()}));i().fn[a]=s.Z.jqueryPlugin(e),i().fn[a.replace(/^pat/,"pattern")]=i().fn[a]}return l.debug(`Registered pattern ${t}`,e),window.__patternslib_registry_initialized&&(f.scan(document.body,[t]),l.debug(`Re-scanned dom with newly registered pattern ${t}.`)),!0}};t.Z=f},37834:function(e,t,a){"use strict";var n=a(22236),i=a.n(n),o=a(32218);i().fn.safeClone=function(){var e=this.clone();return window.document.documentMode&&e.findInclusive(":input[placeholder]").each((function(e,t){var a=i()(t);a.attr("placeholder")===a.val()&&a.val("")})),e},Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var a,n;if(null===this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(a=t),n=0;n<o;){var r;n in i&&(r=i[n],e.call(a,r,n,i)),n++}});var r=function(e,t,a){return this.each((function(){var n,o=i()(this);if(n=e.init(o,a),t){if(void 0===n[t])return i().error("Method "+t+" does not exist on jQuery."+e.name),!1;if("_"===t.charAt(0))return i().error("Method "+t+" is private on jQuery."+e.name),!1;n[t].apply(n,[a])}})),this},s=function(e,t,a){var n=this;if(t){if(e[t])return e[t].apply(n,[n].concat([a]));i().error("Method "+t+" does not exist on jQuery."+e.name)}else e.init.apply(n,[n].concat([a]));return n};function l(e){var t=typeof e;return"function"===t||"object"===t&&!!e}var c={jqueryPlugin:function(e){return function(t,a){return 0===this.length?this:("object"==typeof t&&(a=t,t=void 0),"function"==typeof e?r.call(this,e,t,a):s.call(this,e,t,a))}},escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isObject:l,extend:function(e){if(!l(e))return e;for(var t,a,n=1,i=arguments.length;n<i;n++)for(a in t=arguments[n])hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},findLabel:function(e){for(var t,a=e.parentNode;a&&11!==a.nodeType;a=a.parentNode)if("LABEL"===a.tagName)return a;return e.id&&(t=i()('label[for="'+e.id+'"]')),t&&0===t.length&&e.form&&(t=i()('label[for="'+e.name+'"]',e.form)),t&&t.length?t[0]:null},elementInViewport:function(e){var t=e.getBoundingClientRect(),a=document.documentElement,n=window.innerWidth||a.clientWidth,i=window.innerHeight||a.clientHeight;return!(t.right<0||t.bottom<0||t.left>n||t.top>i)},removeWildcardClass:function(e,t){if(e=c.ensureArray(e),-1===t.indexOf("*"))for(const a of e)a.classList.remove(t);else{let a=t.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&");a=a.replace(/[*]/g,".*"),a=new RegExp("^"+a+"$");for(const t of e){const e=(t.getAttribute("class")||"").split(/\s+/);if(!e.length)continue;const n=e.filter((e=>!a.test(e)));n.length?t.setAttribute("class",n.join(" ")):t.removeAttribute("class")}}},hideOrShow:(e,t,a,n)=>{e=o.Z.toNodeArray(e);const r={none:{hide:"hide",show:"show"},fade:{hide:"fadeOut",show:"fadeIn"},slide:{hide:"slideUp",show:"slideDown"}},s="css"===a.transition||"none"===a.transition?null:a.effect.duration,l=e=>{e.classList.remove("in-progress"),e.classList.add(t?"visible":"hidden"),i()(e).trigger("pat-update",{pattern:n,transition:"complete"})};for(const c of e)if(c.classList.remove("visible"),c.classList.remove("hidden"),c.classList.remove("in-progress"),s){const e=r[a.transition];c.classList.add("in-progress"),i()(c).trigger("pat-update",{pattern:n,transition:"start"}),i()(c)[t?e.show:e.hide]({duration:s,easing:a.effect.easing,complete:()=>l(c)})}else"css"!==a.transition&&o.Z[t?"show":"hide"](c),l(c)},addURLQueryParameter:function(e,t,a){var n=new RegExp("(\\?|\\&)"+t+"=.*?(?=(&|$))"),i=e.toString().split("#"),o=i[0],r=i[1],s=o;return s=n.test(o)?o.replace(n,"$1"+t+"="+a):/\?.+$/.test(o)?o+"&"+t+"="+a:o+"?"+t+"="+a,r&&(s+="#"+r),s},removeDuplicateObjects:function(e){const t=function(e,t){return this[e]===t};return e.reduce((function(e,a){let n=!1;for(const i of e)n=Object.keys(i).length===Object.keys(a).length&&0===Object.entries(i).filter((e=>!t.bind(a)(e[0],e[1]))).length;return n||e.push(a),e}),[])},mergeStack:function(e,t){const a=[];for(let e=0;e<t;e++)a.push({});for(const n of e){const e=n.length-1;for(let o=0;o<t;o++)a[o]=i().extend(a[o]||{},n[o>e?e:o])}return a},isElementInViewport:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e instanceof i()&&(e=e[0]);const n=e.getBoundingClientRect(),o=[n.top,n.bottom,n.left,n.right];return!o.every((e=>0===e))&&(t?n.top<=0+a&&n.bottom>=0+a:n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth))},hasValue:function(e){return"INPUT"===e.tagName?"checkbox"===e.type||"radio"===e.type?e.checked:""!==e.value:"SELECT"===e.tagName?-1!==e.selectedIndex:"TEXTAREA"===e.tagName&&""!==e.value},parseTime:function(e){var t=/^(\d+(?:\.\d+)?)\s*(\w*)/.exec(e);if(!t)throw new Error("Invalid time");var a=parseFloat(t[1]);switch(t[2]){case"s":return Math.round(1e3*a);case"m":return Math.round(1e3*a*60);default:return Math.round(a)}},findRelatives:function(e){var t=i()(e),a=i()(e),n=i()();if(a=(a=a.add(t.closest("label"))).add(t.closest("fieldset")),e.id&&(n=i()("label[for='"+e.id+"']")),!n.length){var o=t.closest("form");o.length||(o=i()(document.body)),n=o.find("label[for='"+e.name+"']")}return a=a.add(n)},get_bounds:function(e){const t=e.getBoundingClientRect();return{x:parseInt(Math.round(t.x),10)||0,y:parseInt(Math.round(t.y),10)||0,top:parseInt(Math.round(t.top),10)||0,bottom:parseInt(Math.round(t.bottom),10)||0,left:parseInt(Math.round(t.left),10)||0,right:parseInt(Math.round(t.right),10)||0,width:parseInt(Math.round(t.width),10)||0,height:parseInt(Math.round(t.height),10)||0}},checkInputSupport:function(e,t){let a=!1;const n=document.createElement("input");return n.setAttribute("type",e),a=n.type==e,void 0!==t&&(n.setAttribute("value",t),a=n.value!==t),a},checkCSSFeature:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div";a=document.createElement(a);let n=void 0!==a.style[e];return n&&void 0!==t&&(a.style[e]=t,n=a.style[e]===t),n},animation_frame:()=>new Promise(window.requestAnimationFrame),timeout:e=>new Promise((t=>setTimeout(t,e))),debounce:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{timer:null};return function(){clearTimeout(a.timer);const n=arguments;a.timer=setTimeout((()=>e.apply(this,n)),t)}},isIE:()=>!!document.documentMode,jqToNode:e=>(e.jquery&&(e=e[0]),e),ensureArray:(e,t)=>!!(NodeList.prototype.isPrototypeOf(e)||Array.isArray(e)||e.jquery)?t?[...e]:e:[e],localized_isodate:e=>{const t=e.getDate().toString().padStart(2,"0"),a=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getFullYear().toString()}-${a}-${t}`},escape_html:e=>{if(!e)return"";const t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML.replace(/"/g,"&quot;")},unescape_html:e=>{if(!e)return"";return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent.replace(/&quot;/g,'"')},is_iso_date_time:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=t?/^\d{4}-[01]\d-[0-3]\d(T[0-2]\d:[0-5]\d)?$/:/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d$/;return a.test(e)},is_iso_date:e=>/^\d{4}-[01]\d-[0-3]\d$/.test(e),date_diff:(e,t)=>{const a=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/864e5)},getCSSValue:o.Z.get_css_value};t.Z=c},93520:function(e,t,a){"use strict";a.r(t),a.d(t,{parser:function(){return u}});var n=a(22236),i=a.n(n),o=a(11191),r=a(7424),s=a(82799),l=a(32218),c=a(18742),d=a(37834);const p=r.Z.getLogger("date-picker"),u=new s.Z("date-picker");u.addArgument("behavior","styled",["native","styled"]),u.addArgument("week-numbers",[],["show","hide"]),u.addArgument("i18n"),u.addArgument("first-day",0),u.addArgument("after"),u.addArgument("offset-days",0),u.add_argument("output-format",null),u.add_argument("locale",null),u.addAlias("behaviour","behavior"),t.default=o.Z.extend({name:"date-picker",trigger:".pat-date-picker",parser:u,format:"YYYY-MM-DD",async init(){const e=this.el,t=this.el.disabled;if(this.options=i().extend(u.parse(e),this.options),!t&&this.options.after){const e=document.querySelectorAll(this.options.after);for(const t of e)t.addEventListener("change",(e=>{let t=e.target.value;if(t=t?new Date(t):null,!t)return;let a=this.el.value;if(a=a?new Date(a):null,!a||a<t){const e=this.options.offsetDays||0;t.setDate(t.getDate()+e),this.el.value=t.toISOString().substring(0,10),this.dispatch_change_event()}}))}let n;if("styled"===this.options.behavior){l.Z.hide(e),n=document.createElement("time"),n.setAttribute("class","output-field"),n.setAttribute("datetime",e.value),t&&n.classList.add("disabled"),e.insertAdjacentElement("beforebegin",n);const o=n.closest("label");let r;if(o&&c.Z.add_event_listener(o,"click","pat-date-picker--label",(e=>{e.preventDefault()})),this.options.outputFormat){const e=(await Promise.resolve().then(a.bind(a,67164))).default,t={format:this.format};this.options.outputFormat&&(t["output-format"]=this.options.outputFormat),this.options.locale&&(t.locale=this.options.locale),r=new e(n,t)}else this.el.value&&(n.textContent=e.value);const s=()=>{this.add_clear_button(n),!this.el.value&&this.el.placeholder&&(n.innerHTML=`<span class="placeholder">${this.el.placeholder}</span>`)};if(r?i()(n).on("init.display-time.patterns",(()=>{s()})):s(),this.el.addEventListener("change",(()=>{n.setAttribute("datetime",this.el.value),r&&this.el.value?r.format():n.textContent=this.el.value,s()})),t)return}else{if(t)return;if(d.Z.checkInputSupport("date","invalid date"))return;"date"===e.getAttribute("type")&&e.setAttribute("type","text")}window.__patternslib_import_styles&&a.e(80298).then(a.bind(a,80298));const o=(await a.e(76392).then(a.t.bind(a,76392,23))).default,r={field:e,trigger:n||e,format:this.format,firstDay:this.options.firstDay,showWeekNumber:"show"===this.options.weekNumbers,onSelect:()=>this.dispatch_change_event(),onClose:()=>{"styled"!==this.options.behavior||this.el.value||e.dispatchEvent(c.Z.blur_event())}};if(e.getAttribute("min")&&(r.minDate=new Date(e.getAttribute("min"))),e.getAttribute("max")&&(r.maxDate=new Date(e.getAttribute("max"))),this.options.i18n)try{const e=await fetch(this.options.i18n);r.i18n=await e.json()}catch{p.error(`date-picker could not load i18n for ${this.options.i18n}`)}this.pikaday=new o(r)},add_clear_button(e){if(!this.el.disabled&&!this.el.required&&this.el.value){const t=document.createElement("span");t.setAttribute("class","cancel-button"),t.addEventListener("click",(e=>{e.stopPropagation(),this.el.value=null,this.dispatch_change_event()})),e.appendChild(t)}},dispatch_change_event(){const e=new Event("change",{bubbles:!0,cancelable:!0});e.firedBy=this.pikaday,this.el.dispatchEvent(e),i()(this.el).trigger("input-change"),i()(this.el.form).trigger("input-change")}})},67164:function(e,t,a){"use strict";a.r(t),a.d(t,{parser:function(){return d}});var n=a(11191),i=a(82799),o=a(32218),r=a(7424),s=a(37834);let l;const c=r.Z.getLogger("pat-display-time"),d=new i.Z("display-time");d.add_argument("format",""),d.add_argument("locale",null),d.add_argument("strict",!1),d.add_argument("from-now",!1),d.add_argument("no-suffix",!1),d.add_argument("output-format",null),t.default=n.Z.extend({name:"display-time",trigger:".pat-display-time",async init(){l=(await a.e(36823).then(a.t.bind(a,36823,23))).default,this.options=d.parse(this.el,this.options);let e=this.options.locale||o.Z.acquire_attribute(this.el,"lang")||"en";e=e.substr(0,2).toLowerCase();try{await a(77961)(`./${e}.js`),l.locale(e),this.lang=e}catch{l.locale("en"),this.lang="en"}c.debug(`Moment.js language used: ${e}.`),this.format()},format(){const e=this.el.getAttribute("datetime");let t="";if(e){const a=l(e,this.options.format,this.options.strict);if(!0===this.options.fromNow)if(s.Z.is_iso_date(e)){const e=new Intl.RelativeTimeFormat(this.lang,{numeric:"auto"}),n=s.Z.date_diff(a.toDate(),new Date);t=a.calendar(null,{lastWeek:`[${e.format(n,"day")}]`,lastDay:`[${e.format(-1,"day")}]`,sameDay:`[${e.format(0,"day")}]`,nextDay:`[${e.format(1,"day")}]`,nextWeek:"dddd",sameElse:()=>`[${e.format(n,"day")}]`})}else t=a.fromNow(this.options.noSuffix);else t=a.format(this.options.outputFormat||void 0)}this.el.textContent=t}})},72459:function(e,t,a){"use strict";a.d(t,{Z:function(){return w}});var n=a(22236),i=a.n(n),o={init:function(e){var t={time:3,initialTime:8,exceptionAreas:[]};return this.each((function(){var a=i()(this);a.data("timeout")||(e&&i().extend(t,e),a.data("timeout",{lastEvent:new Date,trueTime:t.time,time:t.initialTime,untouched:!0,inExceptionArea:!1}),a.on("mouseover.timeout",o.mouseMoved),a.on("mouseenter.timeout",o.mouseMoved),i()(t.exceptionAreas).each((function(){a.find(this).live("mouseover.timeout",{parent:a},o.enteredException).live("mouseleave.timeout",{parent:a},o.leftException)})),t.initialTime>0?a.timeout("startTimer"):a.addClass("timeout"))}))},enteredException:function(e){var t=e.data.parent.data("timeout");t.inExceptionArea=!0,e.data.parent.data("timeout",t),e.data.parent.trigger("mouseover")},leftException:function(e){var t=e.data.parent.data("timeout");t.inExceptionArea=!1,e.data.parent.data("timeout",t)},destroy:function(){return this.each((function(){var e=i()(this),t=e.data("timeout");i()(window).off(".timeout"),t.timeout.remove(),e.removeData("timeout")}))},mouseMoved:function(){var e=i()(this),t=e.data("timeout");e.hasClass("timeout")?(e.removeClass("timeout"),e.timeout("startTimer")):t.untouched&&(t.untouched=!1,t.time=t.trueTime),t.lastEvent=new Date,e.data("timeout",t)},startTimer:function(){var e=i()(this),t=e.data("timeout"),a=function(){var t=e.data("timeout");if(t&&t.lastEvent)if(t.inExceptionArea)setTimeout(a,Math.floor(1e3*t.time));else{var n=new Date,i=Math.floor(1e3*t.time)-(n-t.lastEvent);i>0?setTimeout(a,i+100):e.addClass("timeout")}};setTimeout(a,Math.floor(1e3*t.time))}};i().fn.timeout=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void i().error("Method "+e+" does not exist on jQuery.timeout"):o.init.apply(this,arguments)},i().extend(i().expr[":"],{scrollable:function(e){return"scroll"===i()(e).css("overflow")||"scroll"===i()(e).css("overflowX")||"scroll"===i()(e).css("overflowY")||(e.clientHeight<e.scrollHeight&&(-1!==i().inArray(i()(e).css("overflowY"),["scroll","auto"])||-1!==i().inArray(i()(e).css("overflow"),["scroll","auto"]))||e.clientWidth<e.scrollWidth&&(-1!==i().inArray(i()(e).css("overflowX"),["scroll","auto"])||-1!==i().inArray(i()(e).css("overflow"),["scroll","auto"])))}}),i().fn.makeVisibleInScroll=function(e){var t=null;return"string"==typeof e?t=i()("#"+e):e&&(t=i()(e)),this.each((function(){var e,a=i()(this);e=t||((e=a.parents(":scrollable")).length>0?i()(e[0]):i()(window));var n=a.position().top,o=a.height()+n,r=e.scrollTop(),s=e.height()+r;n<r?e.scrollTop(n):o>s-e.height()/2&&e.scrollTop(n-(e.height()-a.height())/2)}))},i().fn.safeOffset=function(){var e,t=this[0],a={top:0,left:0};return t&&t.nodeType?(e=(t.ownerDocument||document).documentElement,i().contains(e,t)?i().fn.offset.apply(this,arguments):a):a},i().fn.setPositionAbsolute=function(e,t,a){return this.each((function(){var n=i()(this),o=i()(this).width(),r=e.safeOffset(),s=e.width(),l=e.height(),c=r.left+s-o+a,d=r.top+l+t;n.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:c+"px",top:d+"px",width:o}),n.remove().appendTo("body").show()}))},i().fn.positionAncestor=function(e){var t=0,a=0;return this.each((function(){var n=i()(this).closest(e);if(n.length&&"static"!==n.css("position")){var o=i()(this),r=o.safeOffset().left-parseInt(o.css("marginLeft"),10),s=o.safeOffset().top-parseInt(o.css("marginTop"),10),l=n.safeOffset().left+parseInt(n.css("borderLeftWidth"),10),c=n.safeOffset().top+parseInt(n.css("borderTopWidth"),10);return t=r-l,a=s-c,!1}})),{left:t,top:a}},i().fn.findInclusive=function(e){return this.find("*").addBack().filter(e)},i().fn.slideIn=function(e,t,a){return this.animate({width:"show"},e,t,a)},i().fn.slideOut=function(e,t,a){return this.animate({width:"hide"},e,t,a)},i().expr[":"].Contains=function(e,t,a){return i()(e).text().toUpperCase().indexOf(a[3].toUpperCase())>=0},i().fn.scopedFind=function(e){return 0===e.indexOf("#")?i()(e):this.find(e)};var r=a(7424),s=a(82799),l=a(50033);const c=r.Z.getLogger("pat.ajax"),d=new s.Z("ajax");d.addArgument("accept","text/html"),d.addArgument("url",(function(e){return(e.is("a")?e.attr("href"):e.is("form")?e.attr("action"):"").split("#")[0]})),d.addArgument("browser-cache","no-cache",["cache","no-cache"]);const p={get:function(e){return void 0!==this[e]?this[e]:0},inc:function(e){return this[e]=this.get(e)+1,this.get(e)}},u={name:"ajax",trigger:".pat-ajax",parser:d,init(e){return e.off(".pat-ajax"),e.filter("a").on("click.pat-ajax",u.onTriggerEvents),e.filter("form").on("submit.pat-ajax",u.onTriggerEvents).on("click.pat-ajax","[type=submit]",u.onClickSubmit),e.filter(":not(form,a)").each((function(){c.warn("Unsupported element:",this)})),e},destroy(e){e.off(".pat-ajax")},onClickSubmit(e){const t=e.target,a=t.closest("form"),n={};t.name&&(n[t.name]=t.value),i()(a).data("pat-ajax.clicked-data",n)},onTriggerEvents(e){e&&e.preventDefault(),u.request(i()(this))},request(e,t){return e.each((function(){u._request(i()(this),t)}))},_request(e,t){const a=u.parser.parse(e,t),n=p.inc(a.url),o=e.data("pat-ajax.clicked-data"),r=o?i().param(o):"",s={context:e,data:[e.serialize(),r].filter(Boolean).join("&"),headers:{},url:a.url,method:e.attr("method")?e.attr("method"):"GET",cache:"cache"===a.browserCache};if(a.accept&&(s.headers.Accept=a.accept),e.is("form")&&e.attr("method")&&"POST"==e.attr("method").toUpperCase()){const t=new FormData(e[0]);for(const e in o)t.append(e,o[e]);s.method="POST",s.data=t,s.cache=!1,s.contentType=!1,s.processData=!1,s.type="POST"}e.removeData("pat-ajax.clicked-data"),c.debug("request:",s,e[0]);const l=i().ajax(s);l&&l.done((function(t,i,o){c.debug("success: jqxhr:",o),n===p.get(a.url)&&e.trigger({type:"pat-ajax-success",jqxhr:o})})).fail((function(t,n,i){c.error("load error for "+a.url+":",i,t),e.trigger({type:"pat-ajax-error",jqxhr:t})}))}};l.Z.register(u);var h=u,m=a(32218),f=a(18742),g=a(37834);const v=r.Z.getLogger("pat.inject"),y=new s.Z("inject");y.addArgument("default-selector"),y.addArgument("target"),y.addArgument("data-type","html"),y.addArgument("next-href"),y.addArgument("source"),y.addArgument("trigger","default",["default","autoload","autoload-visible","idle"]),y.addArgument("delay"),y.addArgument("browser-cache","no-cache",["cache","no-cache"]),y.addArgument("confirm","class",["never","always","form-data","class"]),y.addArgument("confirm-message","Are you sure you want to leave this page?"),y.addArgument("hooks",[],["raptor"],!0),y.addArgument("loading-class","injecting"),y.addArgument("executing-class","executing"),y.addArgument("executed-class","executed"),y.addArgument("class"),y.addArgument("history","none",["none","record"]),y.addArgument("push-marker"),y.addArgument("scroll"),y.addArgument("url");const b={name:"inject",trigger:".raptor-ui .ui-button.pat-inject, a.pat-inject, form.pat-inject, .pat-subform.pat-inject",parser:y,init(e,t){const a=this.extractConfig(e,t);if(a.some((e=>"record"===e.history))&&!("pushState"in history))return e;if(e.data("pat-inject",a),a[0].nextHref&&0===a[0].nextHref.indexOf("#")&&e.is("a")&&i()(a[0].nextHref).length>0)return v.debug("Skipping as next href is anchor, which already exists",a[0].nextHref),e.attr({href:(window.location.href.split("#")[0]||"")+a[0].nextHref});if(a[0].pushMarker&&i()("body").on("push",((t,n)=>{v.debug("received push message: "+n),n==a[0].pushMarker&&(v.debug("re-injecting "+n),this.onTrigger({currentTarget:e[0]}))})),a[0].idleTrigger)this._initIdleTrigger(e,a[0].idleTrigger);else switch(a[0].trigger){case"default":a.forEach((e=>{e.delay&&(e.processDelay=e.delay)})),e.is("form")?e.on("submit.pat-inject",this.onTrigger.bind(this)).on("click.pat-inject","[type=submit]",h.onClickSubmit).on("click.pat-inject","[type=submit][formaction], [type=image][formaction]",this.onFormActionSubmit.bind(this)):e.is(".pat-subform")?v.debug("Initializing subform with injection"):e.on("click.pat-inject",this.onTrigger.bind(this));break;case"autoload":if(a[0].delay){const t=Math.random().toString(36);e.attr("data-pat-inject-uid",t);const n=t=>0!=i()("[data-pat-inject-uid='"+t+"']").length&&(e.data("pat-inject-autoloaded",!0),this.onTrigger({currentTarget:e[0]}),!0);window.setTimeout(n.bind(null,t),a[0].delay)}else this.onTrigger({currentTarget:e[0]});break;case"autoload-visible":this._initAutoloadVisible(e,a);break;case"idle":this._initIdleTrigger(e,a[0].delay)}return v.debug("initialised:",e),e},destroy(e){return e.off(".pat-inject"),e.data("pat-inject",null),e},onTrigger(e){const t=i()(e.currentTarget),a=t.data("pat-inject");t.is("form")&&i()(a).each(((e,a)=>{a.params=i().param(t.serializeArray())})),e.preventDefault&&e.preventDefault(),t.trigger("patterns-inject-triggered"),this.execute(a,t)},onFormActionSubmit(e){h.onClickSubmit(e);const t=i()(e.target),a=t.attr("formaction"),n=t.parents(".pat-inject").first(),o={url:a},r=t.closest("[data-pat-inject]"),s=this.extractConfig(r,o);i()(s).each(((e,t)=>{t.params=i().param(n.serializeArray())})),e.preventDefault(),n.trigger("patterns-inject-triggered"),this.execute(s,n)},submitSubform(e){const t=e.parents("form"),a=e.data("pat-inject");i()(a).each(((t,a)=>{a.params=i().param(e.serializeArray())}));try{t.trigger("patterns-inject-triggered")}catch(e){v.error("patterns-inject-triggered",e)}this.execute(a,t)},extractConfig(e,t){t=i().extend({},t);const a=y.parse(e,t,!0);return a.forEach((a=>{a.$context=e,a.url=t.url||a.url||e.attr("href")||e.attr("action")||e.parents("form").attr("action")||"";const n=a.url.split("#");if(a.url=n[0],n.length>2&&v.warn("Ignoring additional source ids:",n.slice(2)),a.defaultSelector||(a.defaultSelector=n[1]&&"#"+n[1]||"body"),a.delay)try{a.delay=g.Z.parseTime(a.delay)}catch(e){v.warn("Invalid delay value: ",a.delay),a.delay=null}a.processDelay=0})),a},elementIsDirty(e){const t=i().map(e.find(":input:not(select)"),(e=>{const t=i()(e).val();return Boolean(t)&&t!==i()(e).attr("placeholder")}));return-1!==i().inArray(!0,t)},askForConfirmation(e){let t,a=!1;for(const n of e){let e=!1;"always"==n.confirm?e=!0:"form-data"===n.confirm&&n.target&&"none"!==n.target?e=this.elementIsDirty(n.$target):"class"===n.confirm&&n.target&&"none"!==n.target&&(e=n.$target.hasClass("is-dirty")),e&&(a=!0,t=n.confirmMessage)}return!(a&&!window.confirm(t))},ensureTarget(e){if("none"===e.target)return!0;if(e.$target=e.$target||("self"===e.target?e.$context:i()(e.target)),0===e.$target.length){if(!e.target)return v.error("Need target selector",e),!1;e.$target=this.createTarget(e.target),e.$injected=e.$target}return!0},verifySingleConfig(e,t){return t.url!==e?(v.error("Unsupported different urls for multi-inject"),!1):(t.source=t.source||t.defaultSelector,t.target=t.target||t.defaultSelector,!!this.extractModifiers(t)&&(!!this.ensureTarget(t)&&(this.listenForFormReset(t),!0)))},verifyConfig(e){return e.every((t=>this.verifySingleConfig(e[0].url,t)))},listenForFormReset(e){if("none"===e.target)return;const t=e.$target.parents("form");0!==t.length&&void 0===e.$target.data("initial-value")&&(e.$target.data("initial-value",e.$target.html()),t.on("reset",(()=>{e.$target.html(e.$target.data("initial-value"))})))},extractModifiers(e){const t=/^(.*?)(::element)?$/.exec(e.source),a=/^(.*?)(::element)?(::after|::before)?$/.exec(e.target);e.source=t[1],e.sourceMod=t[2]?"element":"content",e.target=a[1];const n=a[2]?"element":"content",i=(a[3]||"::").slice(2);return e.loadingClass&&(e.loadingClass+=" "+e.loadingClass+"-"+n,i&&e.loadingClass&&(e.loadingClass+=" "+e.loadingClass+"-"+i)),e.action=n+i,!0},createTarget(e){if("#"!==e.slice(0,1))return v.error("only id supported for non-existing target"),null;const t=i()("<div />").attr({id:e.slice(1)});return i()("body").append(t),t},stopBubblingFromRemovedElement(e,t,a){for(const n of t){const t=n.target;if(e.parents(t).addBack(t)&&!a.isPropagationStopped())return void a.stopPropagation()}},_performInjection(e,t,a,n,o,r){let s;"content"===n.sourceMod&&(a=a.contents()),s=document.all&&document.querySelector&&!document.addEventListener?a.map(((e,t)=>i()(t.outerHTML)[0])):a.safeClone(),s.findInclusive("img").on("load",(e=>{i()(e.currentTarget).trigger("pat-inject-content-loaded")}));const l=n.$injected||s;this._inject(o,s,i()(e),n)&&(this._update_history(n,o,r),this._afterInjection(t,l,n))},_update_history(e,t,a){const n=e.url.indexOf("?")>-1?"&":"?";"record"===e.history&&"pushState"in history&&(e.params?history.pushState({url:e.url+n+e.params},"",e.url+n+e.params):history.pushState({url:e.url},"",e.url),a&&this._inject(t,a,i()("title"),{action:"element"}))},_afterInjection(e,t,a){if(t.filter(((e,t)=>3!==t.nodeType)).data("pat-injected",{origin:a.url}),1===t.length&&3==t[0].nodeType?t.parent().trigger("patterns-injected",[a,e[0],t[0]]):t.each(((t,n)=>{3!==n.nodeType&&i()(n).addClass(a.class).trigger("patterns-injected",[a,e[0],n])})),a.scroll&&"none"!==a.scroll){let e=a.$target.parents().addBack().filter(":scrollable");e=e.length?e[0]:window;let n=0,i=0;if("top"!==a.scroll){const o="target"===a.scroll?a.$target[0]:t.filter(a.scroll)[0],r=e===window?document.body:e;i=Math.abs(o.getBoundingClientRect().left+r.scrollLeft-r.getBoundingClientRect().left-m.Z.get_css_value(r,"border-left-width",!0)),n=Math.abs(o.getBoundingClientRect().top+r.scrollTop-r.getBoundingClientRect().top-m.Z.get_css_value(r,"border-top-width",!0))}e===window?e.scrollTo(i,n):(e.scrollLeft=i,e.scrollTop=n)}e[0].dispatchEvent(new Event("pat-inject-success",{bubbles:!0,cancelable:!0}))},async _onInjectSuccess(e,t,a){var n;let o=null==a||null===(n=a.jqxhr)||void 0===n?void 0:n.responseText;if(!o)return void v.warn("No response content, aborting",a);"none"===t[0].source&&(o=""),i().each(t[0].hooks||[],((t,a)=>e.trigger("pat-inject-hook-"+a))),this.stopBubblingFromRemovedElement(e,t,a);const r=await this.callTypeHandler(t[0].dataType,"sources",e,[t,o,a]);let s;r&&r[r.length-1]&&r[r.length-1][0]&&"TITLE"==r[r.length-1][0].nodeName&&(s=r[r.length-1]),t.forEach(((t,n)=>{const i=()=>{"none"!==t.target&&t.$target.each(((i,o)=>{this._performInjection(o,e,r[n],t,a.target,s)}))};t.processDelay?setTimeout((()=>i()),t.processDelay):i()})),t[0].nextHref&&e.is("a")&&(e.attr({href:t[0].nextHref.replace(/&amp;/g,"&")}),this.destroy(e)),e.off("pat-ajax-success.pat-inject"),e.off("pat-ajax-error.pat-inject")},async _onInjectError(e,t,a){let n="";const o=a.jqxhr.status,r=new Date;let s,c;o%100==4?n="Sorry! We couldn't find the page to load. Please make a screenshot and send it to support. Thank you!":o%100==5?n="I am very sorry! There was an error at the server. Please make a screenshot and contact support. Thank you!":0==o&&(n="It seems, the server is down. Please make a screenshot and contact support. Thank you!");if(null===new URLSearchParams(window.location.search).get("pat-inject-errorhandler.off")){var d,p;const e=null===(d=document)||void 0===d||null===(p=d.querySelector(`meta[name^=pat-inject-status-${o}]`))||void 0===p?void 0:p.getAttribute("content",!1);if(c=null==e?void 0:e.split("#")[1],c=c?`#${c}`:null,c&&(s=document.createElement("html"),s.innerHTML=a.jqxhr.responseText,s=s.querySelector(c)),!s&&e)try{const t=await fetch(e,{method:"GET"});s=document.createElement("html"),s.innerHTML=await t.text(),s=s.querySelector(c||"body")}catch{}}if(t.forEach((t=>{"$injected"in t&&t.$injected.remove(),t.$target.removeClass(t.loadingClass),e.removeClass(t.executingClass)})),e.off("pat-ajax-success.pat-inject"),e.off("pat-ajax-error.pat-inject"),s){const e=document.querySelector(c||"body");e.innerHTML=s.innerHTML,l.Z.scan(e)}else{const e=`${n} Status is ${o} ${a.jqxhr.statusText}, time was ${r}. You can click to close this.`;i()("body").attr("data-error-message",e),i()("body").on("click",(()=>{i()("body").removeAttr("data-error-message"),window.location.href=window.location.href}))}},execute(e,t){if(e=e.map((e=>i().extend({},e))),!this.verifyConfig(e))return;if(!this.askForConfirmation(e))return;if(t.data("pat-inject-triggered"))return;t.data("pat-inject-triggered",!0);for(const a of e)null!=a&&a.executingClass&&t[0].classList.add(a.executingClass),null!=a&&a.loadingClass&&"none"!==(null==a?void 0:a.target)&&a.$target.addClass(a.loadingClass);t.on("pat-ajax-success.pat-inject",this._onInjectSuccess.bind(this,t,e)),t.on("pat-ajax-error.pat-inject",this._onInjectError.bind(this,t,e)),t.on("pat-ajax-success.pat-inject pat-ajax-error.pat-inject",(()=>t.removeData("pat-inject-triggered")));let a=!1;f.Z.add_event_listener(t[0],"close-panel","pat-inject--close-panel",(e=>{e.stopPropagation(),e.stopImmediatePropagation(),a=!0})),t.on("pat-ajax-success.pat-inject",(async()=>{await g.Z.timeout(1),f.Z.remove_event_listener(t[0],"pat-inject--close-panel"),a&&(a=!1,t[0].dispatchEvent(new Event("close-panel",{bubbles:!0,cancelable:!0})))})),e[0].url.length?h.request(t,{url:e[0].url,"browser-cache":e[0].browserCache}):t.trigger({type:"pat-ajax-success",jqxhr:{responseText:i()("body").html()}})},_inject(e,t,a,n){const o={contentbefore:"prepend",contentafter:"append",elementbefore:"before",elementafter:"after"}[n.action];return"none"===n.source?(a.replaceWith(""),!0):0===t.length?(v.warn("Aborting injection, source not found:",t),i()(e).trigger("pat-inject-missingSource",{url:n.url,selector:n.source}),!1):"none"===n.target||(0===a.length?(v.warn("Aborting injection, target not found:",a),i()(e).trigger("pat-inject-missingTarget",{selector:n.target}),!1):("content"===n.action?a.empty().append(t):"element"===n.action?a.replaceWith(t):a[o](t),!0))},_sourcesFromHtml(e,t,a){const n=this._parseRawHtml(e,t);return a.map((e=>{if("body"===e&&(e="#__original_body"),"none"===e)return i()("\x3c!-- --\x3e");const a=n.find(e);return 0===a.length&&"title"!=e&&v.warn("No source elements for selector:",e,n),a.find('a[href^="#"]').each(((e,n)=>{const i=n.getAttribute("href");-1===i.indexOf("#{1}")&&(1===i.length?n.href=t:a.find(i).length||(n.href=t+i))})),a}))},_rebaseAttrs:{A:"href",FORM:"action",IMG:"data-pat-inject-rebase-src",OBJECT:"data",SOURCE:"data-pat-inject-rebase-src",VIDEO:"data-pat-inject-rebase-src"},_rebaseOptions:{calendar:["url","event-sources"],collapsible:["load-content"],"date-picker":["i18n"],"datetime-picker":["i18n"],inject:["url"]},_rebaseURL(e,t){return-1!==t.indexOf("://")||"/"===t[0]||0===t.indexOf("data:")?t:(e=new URL(e,window.location).href).slice(0,e.lastIndexOf("/")+1)+t},_rebaseHTML(e,t){if(""===t)return"";const a=i()(t.replace(/(\s)(src\s*)=/gi,'$1src="" data-pat-inject-rebase-$2=').trim()).wrapAll("<div>").parent();a.find(Object.keys(this._rebaseAttrs).join(",")).each(((t,a)=>{const n=i()(a),o=this._rebaseAttrs[a.tagName];let r=n.attr(o);r&&"@@"!==r.slice(0,2)&&"#"!==r[0]&&"mailto:"!==r.slice(0,7)&&"tel:"!==r.slice(0,4)&&"fax:"!==r.slice(0,4)&&"callto:"!==r.slice(0,7)&&"ts3server:"!==r.slice(0,10)&&"teams:"!==r.slice(0,6)&&"javascript:"!==r.slice(0,11)&&(r=this._rebaseURL(e,r),n.attr(o,r))}));for(const[t,i]of Object.entries(this._rebaseOptions))for(const o of m.Z.querySelectorAllAndMe(a[0],`[data-pat-${t}]`)){var n;const a=null===(n=l.Z.patterns)||void 0===n?void 0:n[t],r=null==a?void 0:a.parser;if(!r)continue;const s=r.parse(o,{},!0,!1,!1);let c=!1;for(const t of s)for(const a of i){const n=t[a];n&&(c=!0,Array.isArray(n)?t[a]=n.map((t=>this._rebaseURL(e,t))):t[a]=this._rebaseURL(e,n))}c&&o.setAttribute(`data-pat-${t}`,JSON.stringify(1===s.length?s[0]:s))}return a.find("[data-pat-inject-rebase-src]").each(((e,t)=>{const a=i()(t);a.attr("src",a.attr("data-pat-inject-rebase-src")).removeAttr("data-pat-inject-rebase-src")})),a.html().replace(/src="" data-pat-inject-rebase-/g,"").trim()},_parseRawHtml(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const a=e.match(/\<title\>(.*)\<\/title\>/);let n=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<head\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/head>/gi,"").replace(/<body([^>]*?)>/gi,'<div id="__original_body">').replace(/<\/body([^>]*?)>/gi,"</div>");a&&2==a.length&&(n=a[0]+n);try{n=this._rebaseHTML(t,n)}catch(e){v.error("Error rebasing urls",e)}const o=i()("<div/>").html(n);return 0===o.children().length&&v.warn("Parsing html resulted in empty jquery object:",n),o},_initAutoloadVisible(e,t){if(e.data("pat-inject-autoloaded"))return!1;const a=e[0],n=t[0].delay||200;v.debug(`Delay time: ${n}`);const i=t=>e.data("pat-inject-autoloaded")?(v.debug(`autoload-visible trigger skipped ${a}`),!1):(e.data("pat-inject-autoloaded",!0),this.onTrigger({currentTarget:a}),t&&t.preventDefault(),v.debug(`autoload-visible trigger run ${a}`),!0);let o=null;const r=new IntersectionObserver((e=>{for(const t of e)t.isIntersecting?(o=window.setTimeout((()=>{r.disconnect(),i()}),n),v.debug(`autoload-visible intersecting ${a}`)):(window.clearTimeout(o),v.debug(`autoload-visible not intersecting ${a}`))}),{threshold:0,root:null,margin:"0px"});r.observe(a)},_initIdleTrigger(e,t){const a=parseInt(t,10);let n;const i=()=>{this.onTrigger({currentTarget:e[0]}),r(),clearTimeout(n)},o=g.Z.debounce((()=>{document.body.contains(e[0])?(clearTimeout(n),n=setTimeout(i,a)):r()}),a),r=()=>{["scroll","resize"].forEach((e=>window.removeEventListener(e,o))),["click","keypress","keyup","mousemove","touchstart","touchend"].forEach((e=>document.removeEventListener(e,o)))};o(),["scroll","resize"].forEach((e=>window.addEventListener(e,o))),["click","keypress","keyup","mousemove","touchstart","touchend"].forEach((e=>document.addEventListener(e,o)))},registerTypeHandler(e,t){this.handlers[e]=t},async callTypeHandler(e,t,a,n){return e=e||"html",this.handlers[e]&&i().isFunction(this.handlers[e][t])?await this.handlers[e][t].bind(this)(...n):null},handlers:{html:{sources(e,t){const a=e.map((e=>e.source));return a.push("title"),this._sourcesFromHtml(t,e[0].url,a)}}}};if(i()(document).on("patterns-injected.inject",(async(e,t,a,n)=>{t&&t.skipPatInjectHandler||(t&&(t.$target.removeClass(t.loadingClass),i()(a).removeClass(t.executingClass).addClass(t.executedClass)),3!==n.nodeType&&8!==n.nodeType&&(l.Z.scan(n,null,{type:"injection",element:a}),i()(n).trigger("patterns-injected-scanned"),await g.Z.timeout(10),n.dispatchEvent(new CustomEvent("patterns-injected-delayed",{bubbles:!0,cancelable:!0,detail:{injected:n}}))))})),i()(window).on("popstate",(e=>{if(e.originalEvent.state||!("replaceState"in history))window.location.reload();else try{history.replaceState("anchor","",document.location.href)}catch(e){v.debug(e)}})),"replaceState"in history)try{history.replaceState("pageload","",document.location.href)}catch(e){v.debug(e)}l.Z.register(b);var w=b},36382:function(e,t,a){"use strict";a.d(t,{Z:function(){return h},E:function(){return u}});var n=a(22236),i=a.n(n),o=a(11191),r=a(7424),s=a(82799),l=a(18742),c=a(50033),d=a(37834);o.Z.extend({name:"close-panel",trigger:".close-panel",init(){const e=this.el.closest("dialog");e&&l.Z.add_event_listener(e,"close-panel","close-panel--dialog",(()=>{e.close()})),this.el.addEventListener("click",(async e=>{var t;await d.Z.timeout(0),e.target.matches("[type=submit], button:not([type=button])")&&!1===(null===(t=this.el.closest("form"))||void 0===t?void 0:t.checkValidity())||this.el.dispatchEvent(new Event("close-panel",{bubbles:!0,cancelable:!0}))}))}});const p=r.Z.getLogger("pat-tooltip"),u=new s.Z("tooltip");u.addArgument("position-list",[],["tl","tm","tr","rt","rm","rb","br","bm","bl","lb","lm","lt"],!0),u.addArgument("position-policy","auto",["auto","force"]),u.addArgument("trigger","click",["click","hover","none"]),u.addArgument("source","title",["ajax","content","title"]),u.addArgument("ajax-data-type","html",["html","markdown"]),u.addArgument("closing","auto",["auto","sticky","close-button"]),u.addArgument("delay"),u.addArgument("mark-inactive",!0),u.addArgument("class"),u.addArgument("target","body"),u.addArgument("arrow-padding",null),u.addArgument("url",null);var h=o.Z.extend({name:"tooltip",trigger:".pat-tooltip, .pat-tooltip-ng",tippy:null,active_class:"tooltip-active-hover",inactive_class:"tooltip-inactive",async init(){const e=this.el;window.__patternslib_import_styles&&a.e(17287).then(a.bind(a,17287));const t=(await a.e(25981).then(a.t.bind(a,25981,23))).default;this.options=u.parse(e,this.options),this.tippy_options=this.parseOptionsForTippy(this.options);const n={animation:!1,arrow:!0,hideOnClick:"close-button"!==this.options.closing,ignoreAttributes:!0,interactive:!0,onHide:this._onHide.bind(this),onShow:this._onShow.bind(this),trigger:"click"};t.setDefaultProps(n),this.tippy=new t(e,this.tippy_options),"title"===this.options.source&&e.removeAttribute("title"),"click"===this.options.trigger&&"ajax"===this.options.source&&l.Z.add_event_listener(e,"click","pat-tooltip--click-prevent-default",(e=>{e.preventDefault(),e.stopPropagation()})),"click"===this.options.trigger&&(this.active_class="tooltip-active-click"),this.options.markInactive&&e.classList.add(this.inactive_class)},show(){this.tippy.show()},async hide(){await d.Z.timeout(1),this.tippy.hide()},destroy(){this.tippy.destroy()},parseOptionsForTippy(e){const t=e=>{return`${a=e[0],{t:"bottom",r:"left",b:"top",l:"right"}[a]}${t=e[1],{l:"-start",r:"-end",m:"",t:"-start",b:"-end"}[t]}`;var t,a},a={popperOptions:{modifiers:[]}};null!==e.arrowPadding&&a.popperOptions.modifiers.push({name:"arrow",options:{padding:parseInt(e.arrowPadding,10)}});const n={position:()=>{var n,i;if(null===(n=e.position)||void 0===n||null===(i=n.list)||void 0===i||!i.length)return;a.placement=t(e.position.list[0]);const o={name:"flip",enabled:!0};if("force"===e.position.policy)o.enabled=!1;else if(e.position.length>1){const a=e.position.list.slice(1).map(t);o.fallbackPlacements=a}a.popperOptions.modifiers.push(o)},trigger(){"hover"===e.trigger?a.trigger="mouseenter focus":"none"===e.trigger&&(a.trigger="manual",a.hideOnClick=!1)},source:()=>{let t;"title"===e.source?t=this.el.getAttribute("title"):"content"===e.source?(t=this.el.innerHTML,a.allowHTML=!0):"ajax"===e.source&&(t=document.createElement("progress"),a.allowHTML=!0),a.content=t},delay(){e.delay&&(a.delay=[d.Z.parseTime(e.delay),0])},target:()=>{e.target&&("parent"===e.target?a.appendTo="parent":"body"===e.target?a.appendTo=document.body:a.appendTo=document.querySelector(e.target))}};for(let t in e){switch(t){case"ajax-data-type":t="ajaxDataType";break;case"mark-inactive":t="markInactive"}n[t]&&n[t](t)}return a},_initialize_content(){c.Z.scan(this.tippy.popper)},async _onShow(){const e=[];if(this.options.class&&e.push(...this.options.class.split(" ")),e.push("tooltip-container"),"close-button"===this.options.closing){for(const e of this.tippy.popper.querySelectorAll(".pat-tooltip--close-button"))e.remove();const e=document.createElement("button");e.setAttribute("class","close-panel pat-tooltip--close-button");const t=this.tippy.popper.querySelector(".tippy-content");t.parentNode.insertBefore(e,t)}l.Z.add_event_listener(this.tippy.popper,"close-panel","pat-tooltip--close-panel",(()=>this.hide())),this.tippy.popper.classList.add(...e),this.options.markInactive&&(this.el.classList.remove(this.inactive_class),this.el.classList.add(this.active_class)),"auto"!==this.options.closing&&"hover"===this.options.trigger&&this.tippy.setProps({trigger:"click"}),"ajax"===this.options.source&&await this._get_content(),i()(this.tippy.popper).trigger("patterns-injected",[{skipPatInjectHandler:!0},this.el,this.tippy.popper]),this._initialize_content()},_onHide(){this.options.markInactive&&(this.el.classList.remove(this.active_class),this.el.classList.add(this.inactive_class)),"auto"!==this.options.closing&&"hover"===this.options.trigger&&this.tippy.setProps({trigger:"mouseenter focus"}),"ajax"===this.options.source&&this.tippy.setContent(document.createElement("progress"))},async _get_content(){let e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.url;if(({url:a,selector:e}=this.get_url_parts(a||this.el.getAttribute("href"))),a){const n=this._ajaxDataTypeHandlers[this.options.ajaxDataType];try{const i=await fetch(a,{headers:{Accept:"text/html,application/xhtml+xml,application/xml"}}),o=await i.text();t=await n(o,a,e)}catch(e){p.error("Error on ajax request. ${e}")}}else if(e){var n;t=document.querySelector(e),t=(null===(n=t)||void 0===n?void 0:n.innerHTML)||void 0}t&&(this.tippy.setContent(t),await d.Z.timeout(1),this.tippy.popperInstance.forceUpdate())},async get_content(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.url;await this._get_content(e),this._initialize_content()},get_url_parts(e){let t,a,n;return e?([t,a]=e.split("#"),a&&(a=`#${a}`,[a,n]=a.split("?")),n&&(t=`${t}?${n}`),{url:t,selector:a}):{url:t,selector:a}},_ajaxDataTypeHandlers:{html(e,t,a){var n;let i=document.createElement("div");return i.innerHTML=e,a&&(i=i.querySelector(a)),(null===(n=i)||void 0===n?void 0:n.innerHTML)||""},async markdown(e,t,n){const o=(await a.e(15244).then(a.bind(a,15244))).default.init(i()("<div/>")),r={url:t};n&&(r.source=n);return(await o.renderForInjection(r,e))[0]}}})},10354:function(e,t,a){"use strict";var n=a(25219);let i=null;t.Z=function(e,t){if(null===i){var a=new n.Z;a.loadCatalog("widgets"),i=a.MessageFactory("widgets")}return i(e,t)}},25219:function(e,t,a){"use strict";var n=a(72513),i=a.n(n);t.Z=function(){var e=this;e.baseUrl=i()("body").attr("data-i18ncatalogurl"),e.currentLanguage=i()("html").attr("lang")||"en",e.currentLanguage.split("-").length>1&&(e.currentLanguage=e.currentLanguage.split("-")[0]+"_"+e.currentLanguage.split("-")[1].toUpperCase()),e.storage=null,e.catalogs={},e.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(e.storage=window.localStorage)}catch(e){}e.configure=function(t){for(var a in t)e[a]=t[a]},e._setCatalog=function(t,a,n){t in e.catalogs||(e.catalogs[t]={}),e.catalogs[t][a]=n},e._storeCatalog=function(t,a,n){var i=t+"-"+a;null!==e.storage&&null!==n&&(e.storage.setItem(i,JSON.stringify(n)),e.storage.setItem(i+"-updated",Date.now()))},e.getUrl=function(t,a){return e.baseUrl+"?domain="+t+"&language="+a},e.loadCatalog=function(t,a){if(void 0===a&&(a=e.currentLanguage),null!==e.storage){var n=t+"-"+a;if(n in e.storage&&Date.now()-parseInt(e.storage.getItem(n+"-updated"),10)<e.ttl){var o=JSON.parse(e.storage.getItem(n));return void e._setCatalog(t,a,o)}}e.baseUrl&&i().getJSON(e.getUrl(t,a),(function(n){null!==n&&(e._setCatalog(t,a,n),e._storeCatalog(t,a,n))}))},e.MessageFactory=function(t,a){return a=a||e.currentLanguage,function(n,i){var o,r,s;if(o=t in e.catalogs&&a in e.catalogs[t]&&n in e.catalogs[t][a]?e.catalogs[t][a][n]:n,i)for(s in i)i.hasOwnProperty(s)&&(r=new RegExp("\\$\\{"+s+"\\}","g"),o=o.replace(r,i[s]));return o}}}},62832:function(e,t,a){"use strict";var n=a(72513),i=a.n(n);const o=a(7424).Z.getLogger("core utils");var r=function(e){var t=this;t.className="spinner-border";return e||(e={}),t.options=i().extend({},{backdrop:null,zIndex:10005},e),t.init=function(){t.$el=i()("."+t.className),0===t.$el.length&&(t.$el=i()("<div><div></div></div>"),t.$el.addClass(t.className).hide().appendTo("body"))},t.show=function(e){t.init(),t.$el.show(),t.$el.css("position","absolute"),t.$el.css("top","50%"),t.$el.css("left","50%");var a=t.options.zIndex;"function"==typeof a?a=Math.max(a(),10005):(a=10005,i()(".modal-wrapper,.-modal-backdrop").each((function(){a=Math.max(a,i()(this).css("zIndex")||10005)})),a+=1),t.$el.css("zIndex",a),void 0===e&&(e=!0),t.options.backdrop&&(t.options.backdrop.closeOnClick=e,t.options.backdrop.closeOnEsc=e,t.options.backdrop.init(),t.options.backdrop.show())},t.hide=function(){t.init(),t.$el.hide()},t},s=function(e){return void 0===e&&(e="id"),e+Math.floor(65536*(1+Math.random())).toString(16).substring(1)},l={dragAndDrop:function(){return"draggable"in document.createElement("span")},fileApi:function(){return"undefined"!=typeof FileReader},history:function(){return!(!window.history||!window.history.pushState)}},c={get:function(e){if(window.localStorage){var t=window.localStorage[e];return"string"==typeof t?JSON.parse(t):void 0}},set:function(e,t){window.localStorage&&(window.localStorage[e]=JSON.stringify(t))}};const d=new Map;t.Z={bool:function(e){return"string"==typeof e&&(e=i().trim(e).toLowerCase()),-1===["false",!1,"0",0,"",void 0,null].indexOf(e)},escapeHTML:function(e){return i()("<div/>").text(e).html()},removeHTML:function(e){return e.replace(/<[^>]+>/gi,"")},featureSupport:l,generateId:s,getAuthenticator:function(){var e=i()('input[name="_authenticator"]');return 0===e.length?(e=i()('a[href*="_authenticator"]')).length>0?e.attr("href").split("_authenticator=")[1]:"":e.val()},getWindow:function(){var e=window;return e.parent!==window&&(e=e.parent),e},Loading:r,loading:new r,parseBodyTag:function(e){return i()(/<body[^>]*>[^]*<\/body>/im.exec(e)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},QueryHelper:function(e){var t=this;return t.options=i().extend({},{pattern:null,vocabularyUrl:null,searchParam:"SearchableText",pathOperator:"plone.app.querystring.operation.string.path",attributes:["UID","Title","Description","getURL","portal_type"],batchSize:10,baseCriteria:[],sort_on:"is_folderish",sort_order:"reverse",pathDepth:1},e),t.pattern=t.options.pattern,void 0!==t.pattern&&null!==t.pattern||(t.pattern={browsing:!1,basePath:"/"}),t.options.url&&!t.options.vocabularyUrl?t.options.vocabularyUrl=t.options.url:t.pattern.vocabularyUrl&&(t.options.vocabularyUrl=t.pattern.vocabularyUrl),t.valid=Boolean(t.options.vocabularyUrl),t.getBatch=function(e){return{page:e||1,size:t.options.batchSize}},t.getCurrentPath=function(){var e,a=t.pattern;"function"==typeof(e=t.currentPath?t.currentPath:a.currentPath)&&(e=e());var n=e;return n||(n=a.basePath?a.basePath:a.options.basePath?a.options.basePath:"/"),n},t.getCriterias=function(e,a){void 0===a&&(a={});var n=[];return(a=i().extend({},{useBaseCriteria:!0,additionalCriterias:[]},a)).useBaseCriteria&&(n=t.options.baseCriteria.slice(0)),e&&(e+="*",n.push({i:t.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:e})),a.searchPath?n.push({i:"path",o:t.options.pathOperator,v:a.searchPath+"::"+t.options.pathDepth}):t.pattern.browsing&&n.push({i:"path",o:t.options.pathOperator,v:t.getCurrentPath()+"::"+t.options.pathDepth}),n=n.concat(a.additionalCriterias)},t.getQueryData=function(e,a){var n={query:JSON.stringify({criteria:t.getCriterias(e),sort_on:t.options.sort_on,sort_order:t.options.sort_order}),attributes:JSON.stringify(t.options.attributes)};return a&&(n.batch=JSON.stringify(t.getBatch(a))),n},t.getUrl=function(){var e=t.options.vocabularyUrl;return-1===e.indexOf("?")?e+="?":e+="&",e+i().param(t.getQueryData())},t.selectAjax=function(){return{url:t.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(e,a){return t.getQueryData(e,a)},results:function(e,t){var a=10*t<e.total;return{results:e.results,more:a}}}},t.search=function(e,a,n,o,r,s){void 0===r&&(r=!0),void 0===s&&(s="GET");var l=[];r&&(l=t.options.baseCriteria.slice(0)),l.push({i:e,o:a,v:n});var c={query:JSON.stringify({criteria:l}),attributes:JSON.stringify(t.options.attributes)};i().ajax({url:t.options.vocabularyUrl,dataType:"JSON",data:c,type:s,success:o})},t},resolveIcon:async function(e){const t=`plone.icon.${e}`,n=t;return d.has(n)||(d.set(n,async function(){const n=i()("body").attr("data-portal-url");let r="";if(n){const t=n+"/@@iconresolver";if(t)try{const a=new AbortController;setTimeout((()=>a.abort()),5e3);const n=await fetch(`${t}/${e}`,{signal:a.signal});r=await n.text()}catch(a){o.warn(`Loading icon "${e}" from URL ${t} failed.`),console.warn(a)}}if(!r){e=t;try{var s,l;a.e(71662).then(a.bind(a,71662));const t=null===(s=(await a.e(83392).then(a.t.bind(a,83392,19)))[e])||void 0===s||null===(l=s.split)||void 0===l?void 0:l.call(s,"/");var c;if(t[0].includes("bootstrap-icons"))r=await a(47010)(`./${t[1]}`),r=null===(c=r)||void 0===c?void 0:c.default}catch(e){o.warn(`Loading icon "${t}" failed from fallback.`),console.warn(e)}}return r}()),o.debug(`Loading icon "${t}"`)),await d.get(n)},setId:function(e,t){void 0===t&&(t="id");var a=e.attr("id");return a=void 0===a?s(t):a.replace(/\./g,"-"),e.attr("id",a),a},storage:c}},95474:function(e,t,a){"use strict";var n=a(72513),i=a.n(n);a(11191).Z.extend({name:"autotoc",trigger:".pat-autotoc",parser:"mockup",defaults:{section:"section",levels:"h1,h2,h3",IDPrefix:"autotoc-item-",classTOCName:"autotoc-nav",classSectionName:"autotoc-section",classLevelPrefixName:"autotoc-level-",classActiveName:"active",scrollDuration:"slow",scrollEasing:"swing"},init:function(){a.e(4650).then(a.bind(a,4650));var e=this;e.$toc=i()("<nav/>").addClass(e.options.classTOCName),e.options.prependTo?e.$toc.prependTo(e.options.prependTo):e.options.appendTo?e.$toc.appendTo(e.options.appendTo):e.$toc.prependTo(e.$el),e.options.className&&e.$el.addClass(e.options.className),i()(e.options.section,e.$el).addClass(e.options.classSectionName);var t=e.$el.hasClass("autotabs"),n=null;i()(e.options.levels,e.$el).each((function(a){var o=i()(this),r=o.prop("id")?o.prop("id"):o.parents(e.options.section).prop("id");(!r||i()("#"+r).length>0)&&(r=e.options.IDPrefix+e.name+"-"+a),window.location.hash==="#"+r&&(n=r),null===n&&o.hasClass(e.options.classActiveName)&&(n=r),o.data("navref",r),i()("<a/>").appendTo(e.$toc).text(o.text()).attr("id",r).attr("href","#"+r).addClass(e.options.classLevelPrefixName+e.getLevel(o)).on("click",(function(a,n){a.stopPropagation(),a.preventDefault(),n||(n={doScroll:!0,skipHash:!1});var r=i()(this);e.$toc.children("."+e.options.classActiveName).removeClass(e.options.classActiveName),e.$el.children("."+e.options.classActiveName).removeClass(e.options.classActiveName),i()(a.target).addClass(e.options.classActiveName),o.parents(e.options.section).addClass(e.options.classActiveName),!1!==n.doScroll&&e.options.scrollDuration&&o&&!t&&i()("body,html").animate({scrollTop:o.offset().top},e.options.scrollDuration,e.options.scrollEasing),0!==e.$el.parents(".plone-modal").length&&e.$el.trigger("resize.plone-modal.patterns"),i()(this).trigger("clicked"),n.skipHash||window.history&&window.history.pushState&&window.history.pushState({},"","#"+r.attr("id"))})),o.data("autotoc-trigger-id",r)})),n?i()("a#"+n).trigger("click",{doScroll:!0,skipHash:!0}):e.$toc.find("a").first().trigger("click",{doScroll:!1,skipHash:!0})},getLevel:function(e){var t=0;return i().each(this.options.levels.split(","),(function(a,n){if(1===e.filter(n).length)return t=a+1,!1})),t}})},57887:function(e,t,a){"use strict";var n=a(72513),i=a.n(n),o=a(11191);t.Z=o.Z.extend({name:"backdrop",trigger:".pat-backdrop",parser:"mockup",defaults:{zIndex:null,opacity:.8,className:"plone-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var e=this;e.$backdrop=i()("> ."+e.options.className,e.$el),0===e.$backdrop.length&&(e.$backdrop=i()("<div/>").hide().appendTo(e.$el).addClass(e.options.className),null!==e.options.zIndex&&e.$backdrop.css("z-index",e.options.zIndex)),!0===e.options.closeOnEsc&&i()(document).on("keydown",(function(t,a){e.$el.is("."+e.options.classActiveName)&&27===t.keyCode&&e.hide()})),!0===e.options.closeOnClick&&e.$backdrop.on("click",(function(){e.$el.is("."+e.options.classActiveName)&&e.hide()}))},show:function(){var e=this;e.$el.hasClass(e.options.classActiveName)||(e.emit("show"),e.$backdrop.css("opacity","0").show(),e.$el.addClass(e.options.classActiveName),e.$backdrop.animate({opacity:e.options.opacity},500),e.emit("shown"))},hide:function(){var e=this;e.$el.hasClass(e.options.classActiveName)&&(e.emit("hide"),e.$backdrop.animate({opacity:"0"},500).hide(),e.$el.removeClass(e.options.classActiveName),e.emit("hidden"))}})},62027:function(e,t,a){"use strict";var n=a(72513),i=a.n(n);a(11191).Z.extend({name:"datatables",trigger:".pat-datatables",parser:"mockup",table:null,defaults:{},async init(){Promise.all([a.e(50421),a.e(99992)]).then(a.bind(a,66662)),Promise.all([a.e(50421),a.e(93931)]).then(a.bind(a,5802)),Promise.all([a.e(50421),a.e(36517)]).then(a.bind(a,53990)),Promise.all([a.e(50421),a.e(79056)]).then(a.bind(a,61833)),Promise.all([a.e(50421),a.e(1345)]).then(a.bind(a,72347)),Promise.all([a.e(50421),a.e(94433)]).then(a.bind(a,90091)),Promise.all([a.e(50421),a.e(34109)]).then(a.bind(a,986)),await a.e(34297).then(a.t.bind(a,34297,23)),await a.e(42921).then(a.t.bind(a,42921,23)),await a.e(2808).then(a.t.bind(a,2808,23)),await a.e(20067).then(a.t.bind(a,20067,23)),await Promise.all([a.e(50421),a.e(65035),a.e(68510),a.e(2808)]).then(a.t.bind(a,17740,23)),await Promise.all([a.e(50421),a.e(65035),a.e(68510),a.e(2808)]).then(a.t.bind(a,85253,23)),await Promise.all([a.e(50421),a.e(65035),a.e(68510),a.e(2808)]).then(a.t.bind(a,442,23)),await a.e(16340).then(a.t.bind(a,16340,23)),await a.e(38685).then(a.t.bind(a,38685,23)),await a.e(10258).then(a.t.bind(a,10258,23)),await a.e(13284).then(a.t.bind(a,13284,23)),await a.e(27212).then(a.t.bind(a,27212,23)),await a.e(25047).then(a.t.bind(a,25047,23)),await a.e(68962).then(a.t.bind(a,68962,23)),await a.e(92954).then(a.t.bind(a,92954,23)),await a.e(39314).then(a.t.bind(a,39314,23)),await a.e(58034).then(a.t.bind(a,58034,23)),i()(this.el).DataTable(this.options)}})},43067:function(e,t,a){"use strict";var n=a(72513),i=a.n(n),o=a(11191),r=a(17544),s=a.n(r),l=a(57887),c=a(50033),d=a(62832),p=a(25219);a(50834);t.Z=o.Z.extend({name:"plone-modal",trigger:".pat-plone-modal",parser:"mockup",createModal:null,$model:null,defaults:{width:"",height:"",modalSizeClass:"",margin:0,position:"center middle",triggers:[],zIndexSelector:".modal-wrapper,.modal-backdrop",backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.85",className:"modal-backdrop",classActiveName:"backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"], .formControls > button',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:".portalMessage, #global_statusmessage",onRender:null,templateOptions:{className:"modal fade",classDialog:"modal-dialog",classModal:"modal-content",classHeaderName:"modal-header",classBodyName:"modal-body",classFooterName:"modal-footer",classWrapperName:"modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"show",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %><% if (modalSizeClass) { %> <%= modalSizeClass %><% } %>" role="dialog" <% if (title) { %>aria-labelledby="modal-title" <% } %> tabindex="-1">    <div class="<%= options.classModal %>" role="document">      <div class="<%= options.classHeaderName %>">        <% if (title) { %><h5 class="modal-title" id="modal-title" tabindex="0"><%= title %></h5><% } %>        <button type="button" class="btn-close modal-close" aria-label="Close"></button>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <% if (buttons) { %><%= buttons %><% } %>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",disableAjaxFormSubmit:!1,target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:5e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error, .alert-danger",formFieldError:".field.error",onSuccess:null,onError:null,onFormError:null,onTimeout:null,redirectOnResponse:!1,redirectToUrl:function(e,t){var a;return(a=/<body.*data-view-url=[\"'](.*)[\"'].*/im.exec(t))&&a.length>1||(a=/<body.*data-base-url=[\"'](.*)[\"'].*/im.exec(t))&&a.length>1?a[1].split('"')[0]:(a=/<base.*href=[\"'](.*)[\"'].*/im.exec(t))&&a.length>1?a[1]:""}},form:function(e){var t=this,a=t.$modal;t.options.automaticallyAddButtonActions&&(e[t.options.buttons]={}),e.a={},i().each(e,(function(e,n){var o=s().union(s().keys(t.options.actionOptions),["templateOptions"]),r=i().extend(!0,{},t.options.actionOptions,s().pick(n,o));n.templateOptions=i().extend(!0,n.templateOptions,t.options.templateOptions);var l=s().union(s().keys(t.options.actionOptions),["actions","actionOptions"]),c=i().extend(!0,s().omit(n,l),t.options);i()(e,i()("."+n.templateOptions.classBodyName,a)).each((function(){var e=i()(this);e.on(r.eventType,(function(a){a.stopPropagation(),a.preventDefault(),t.loading.show(!1),null!==r.modalFunction?t[r.modalFunction]():i().nodeName(e[0],"input")||i().nodeName(e[0],"button")||!0===n.isForm?t.options.handleFormAction.apply(t,[e,r,c]):(null!==n.ajaxUrl||i().nodeName(e[0],"a"))&&t.options.handleLinkAction.apply(t,[e,r,c])}))}))}))},handleFormAction:function(e,t,a){var n,o,r=this,s={};if(s[e.attr("name")]=e.attr("value"),n=i().nodeName(e[0],"form")?e:e.parents("form:not(.disableAutoSubmit)"),o=null!==t.ajaxUrl?"function"==typeof t.ajaxUrl?t.ajaxUrl.apply(r,[e,t]):t.ajaxUrl:e.parents("form").attr("action"),t.disableAjaxFormSubmit)return e.attr("name")&&e.attr("value")&&n.append(i()('<input type="hidden" name="'+e.attr("name")+'" value="'+e.attr("value")+'" />')),void n.trigger("submit");n.on("submit",(function(e){e.preventDefault()})),n.trigger("submit"),r.loading.show(!1),n.ajaxSubmit({timeout:t.timeout,data:s,url:o,error:function(e,a,n){r.loading.hide(),"timeout"===a&&t.onTimeout?t.onTimeout.apply(r,e,n):t.onError?"string"==typeof t.onError?window[t.onError](e,a,n):t.onError(e,a,n):console.log("error happened",a," do something"),r.emit("formActionError",[e,a,n])},success:function(n,o,s,l){r.loading.hide(),0===i()(t.error,n).length&&0===i()(t.formFieldError,n).length?!0!==t.redirectOnResponse?(t.onSuccess&&("string"==typeof t.onSuccess?window[t.onSuccess](r,n,o,s,l):t.onSuccess(r,n,o,s,l)),!0===t.displayInModal?r.redraw(n,a):(e.trigger("destroy.plone-modal.patterns"),t.reloadWindowOnClose&&r.reloadWindow()),r.emit("formActionSuccess",[n,o,s,l])):"function"==typeof t.redirectToUrl?window.parent.location.href=t.redirectToUrl.apply(r,[e,n,t]):window.parent.location.href=t.redirectToUrl:t.onFormError?"string"==typeof t.onFormError?window[t.onFormError](r,n,o,s,l):t.onFormError(r,n,o,s,l):r.redraw(n,a)}})},handleLinkAction:function(e,t,a){var n,o=this;e.hasClass("pat-plone-modal")||(n=t.ajaxUrl?"function"==typeof t.ajaxUrl?t.ajaxUrl.apply(o,[e,t]):t.ajaxUrl:e.attr("href"),!1!==t.displayInModal?i().ajax({url:n}).fail((function(e,a,n){"timeout"===a&&t.onTimeout?t.onTimeout(o.$modal,e,n):t.onError?t.onError(e,a,n):window.alert((0,p.Z)("There was an error loading modal.")),o.emit("linkActionError",[e,a,n])})).done((function(e,n,i){o.redraw(e,a),t.onSuccess&&("string"==typeof t.onSuccess?window[t.onSuccess](o,e,n,i):t.onSuccess(o,e,n,i)),o.emit("linkActionSuccess",[e,n,i])})).always((function(){o.loading.hide()})):"_blank"===e.attr("target")?(window.open(n,"_blank"),o.loading.hide()):window.location=n)},render:function(e){var t=this;if(t.emit("before-render"),t.$raw){var a=t.$raw.clone();i()("input:checked",a).each((function(){this.setAttribute&&this.setAttribute("checked","checked")}));var n={title:"",prepend:"<div />",content:"",modalSizeClass:e.modalSizeClass,buttons:'<div class="pattern-modal-buttons"></div>',options:e.templateOptions};if(null===e.title){var o=i()(e.titleSelector,a);n.title=o.html(),i()(e.titleSelector,a).remove()}else n.title=e.title;e.prependContent&&(n.prepend=i()("<div />").append(i()(e.prependContent,a).clone()).html(),i()(e.prependContent,a).remove()),e.content?n.content=i()(e.content,a).html():n.content=a.html(),t.$modal=i()(s().template(t.options.templateOptions.template)(n)),t.$modalDialog=i()("> ."+t.options.templateOptions.classDialog,t.$modal),t.$modalContent=i()("> ."+t.options.templateOptions.classModal,t.$modalDialog),i()("form",t.$modal).on("keydown",(function(e){13===e.keyCode&&"TEXTAREA"!==e.target.nodeName&&(e.preventDefault(),i()("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click"))})),i()(e.buttons,t.$modal).each((function(){var e=i()(this);e.on("click",(function(e){e.stopPropagation(),e.preventDefault()})).clone().appendTo(i()(".pattern-modal-buttons",t.$modal)).off("click").on("click",(function(t){t.stopPropagation(),t.preventDefault(),e.trigger("click")})),e.hide()})),t.emit("before-events-setup"),i()(".modal-header > .modal-close, .modal-footer > .pattern-modal-buttons > .modal-close",t.$modal).off("click").on("click",(function(e){e.stopPropagation(),e.preventDefault(),i()(e.target).trigger("destroy.plone-modal.patterns")})),e.form&&e.form.apply(t,[e.actions]),t.$modal.addClass(t.options.templateOptions.className).on("destroy.plone-modal.patterns",(function(e){e.stopPropagation(),t.hide()})).on("resize.plone-modal.patterns",(function(e){e.stopPropagation(),e.preventDefault(),t.positionModal()})).appendTo(t.$wrapperInner),t.options.loadLinksWithinModal&&t.$modal.on("click",(function(e){e.stopPropagation(),i().nodeName(e.target,"a")&&e.preventDefault(),t.$modal.trigger("modal-click")})),t.$modal.data("pattern-"+t.name,t),t.emit("after-render"),e.onRender&&("string"==typeof e.onRender?window[e.onRender](t):e.onRender(t))}}},reloadWindow:function(){window.parent.location.reload()},init:function(){a.e(1413).then(a.bind(a,1413));var e=this;e.options.loadLinksWithinModal=i().parseJSON(e.options.loadLinksWithinModal),!0===e.options.backdropOptions.closeOnEsc&&i()(document).on("keydown",(function(t){e.$el.is("."+e.options.templateOptions.classActiveName)&&27===t.keyCode&&e.hide()})),i()(window.parent).resize((function(){e.positionModal()})),e.options.triggers&&i().each(e.options.triggers,(function(t,a){var n=a.substring(0,a.indexOf(" ")),o=a.substring(a.indexOf(" "),a.length);i()(o||e.$el).on(n,(function(t){t.stopPropagation(),t.preventDefault(),e.show()}))})),e.$el.is("a")&&(e.$el.attr("href")&&!e.options.image&&(!e.options.target&&"#"===e.$el.attr("href").substr(0,1)&&e.$el.attr("href").length>1&&(e.options.target=e.$el.attr("href"),e.options.content=""),e.options.ajaxUrl||"#"===e.$el.attr("href").substr(0,1)||(e.options.ajaxUrl=function(){return e.$el.attr("href")})),e.$el.on("click",(function(t){t.stopPropagation(),t.preventDefault(),e.show()}))),e.initModal()},createAjaxModal:function(){var e=this;e.emit("before-ajax"),e.loading.show();var t=e.options.ajaxUrl;"function"==typeof t&&(t=t.apply(e,[e.options])),e.ajaxXHR=i().ajax({url:t,type:e.options.ajaxType}).done((function(t,a,n){e.ajaxXHR=void 0,e.$raw=i()("<div />").append(i()(d.Z.parseBodyTag(t))),e.emit("after-ajax",e,a,n),e._show()})).fail((function(t,a,n){var i=e.options.actionOptions;"timeout"===a&&i.onTimeout?i.onTimeout(e.$modal,t,n):i.onError?i.onError(t,a,n):(window.alert((0,p.Z)("There was an error loading modal.")),e.hide()),e.emit("linkActionError",[t,a,n])})).always((function(){e.loading.hide()}))},createTargetModal:function(){var e=this;e.$raw=i()(e.options.target).clone(),e._show()},createBasicModal:function(){var e=this;e.$raw=i()("<div/>").html(e.$el.clone()),e._show()},createHtmlModal:function(){var e=this,t=i()(e.options.html);e.$raw=t,e._show()},createImageModal:function(){var e=this;e.$wrapper.addClass("image-modal");var t=e.$el.attr("href"),a=e.$el.attr("data-modal-srcset")||"",n=i().trim(e.$el.context.innerText)||"Image";e.$raw=i()("<div><h1>"+n+'</h1><div id="content"><div class="modal-image"><img src="'+t+'" srcset="'+a+'" /></div></div></div>'),e._show()},initModal:function(){var e=this;e.options.ajaxUrl?e.createModal=e.createAjaxModal:e.options.target?e.createModal=e.createTargetModal:e.options.html?e.createModal=e.createHtmlModal:e.options.image?e.createModal=e.createImageModal:e.createModal=e.createBasicModal},findPosition:function(e,t,a,n,i,o,r){var s,l,c,d,p={};return d=c=s=c="auto","left"===e?(c=a+"px",n>o&&(c="0px"),p.left=c):"right"===e?(d=a+"px",n>o&&(d="0px"),p.right=d,p.left="auto"):(c=o/2-n/2-a+"px",n>o&&(c="0px"),p.left=c),"top"===t?(s=a+"px",i>r&&(s="0px"),p.top=s):"bottom"===t?(l=a+"px",i>r&&(l="0px"),p.bottom=l,p.top="auto"):(s=r/2-i/2-a+"px",i>r&&(s="0px"),p.top=s),p},modalInitialized:function(){return null!==this.$modal&&void 0!==this.$modal},activateFocusTrap:function(){for(var e=this,t=e.$modal.find("."+e.options.templateOptions.classBodyName).first().find("select, input[type!=hidden], textarea, button, a"),a=e.$modal.find("."+e.options.templateOptions.classFooterName).first().find("select, input[type!=hidden], textarea, button, a"),n=[],o=0;o<t.length;o++)i()(t[o]).is(":visible")&&n.push(t[o]);for(var r=0;r<a.length;r++)i()(a[r]).is(":visible")&&n.push(a[r]);0===n.length&&(n=e.$modal.find(".modal-title"));var s=n[0],l=n[n.length-1],c=e.$modal.find(".modal-close").first();i()(document).on("keydown","."+e.options.templateOptions.classDialog,(function(e){if(9===e.which){e.preventDefault();var t=i()(e.target),a=i().inArray(t[0],n);if(a>=0&&a<n.length){var o=a+(e.shiftKey?-1:1);o<0||o>=n.length?c.focus():n[o].focus()}else e.shiftKey?l.focus():s.focus()}})),!0===e.options.backdropOptions.closeOnClick&&e.$modal.on("click",(function(t){i()(t.target).closest("."+e.options.templateOptions.classModal).length||e.hide()})),e.$modal.find(".modal-title").focus()},positionModal:function(){var e=this;if(!e.modalInitialized())return;e.$modal.removeAttr("style"),e.$wrapper.parent().is("body")&&e.$wrapper.height(i()(window.parent).height());var t="function"==typeof e.options.margin?e.options.margin():e.options.margin;let a={position:"absolute"};"0"!==t&&(a.padding=t),e.$modal.css(a),e.$modalDialog.css({width:e.options.width,height:e.options.height}),e.$modalContent.css({width:e.options.width});var n=e.options.position.split(" "),o=n[0],r=n[1],s=e.$modalDialog.outerWidth(!0),l=e.$modalDialog.outerHeight(!0),c=e.$wrapperInner.width(),d=e.$wrapperInner.height(),p=e.findPosition(o,r,t,s,l,c,d);for(var u in p)e.$modalDialog.css(u,p[u])},render:function(e){var t=this;t.emit("render"),t.options.render.apply(t,[e]),t.emit("rendered")},show:function(){var e=this;e.backdrop=e.createBackdrop(),e.createModal()},createBackdrop:function(){var e=this,t=new l.Z(e.$el.parents(e.options.backdrop),e.options.backdropOptions),a=e.options.backdropOptions.zIndex||1041;return i()(e.options.zIndexSelector).each((function(){a=Math.max(a,parseInt(i()(this).css("zIndex"))+1||1041)})),e.$wrapper=i()("<div/>").hide().css({"z-index":a,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(e.options.templateOptions.classWrapperName).insertBefore(t.$backdrop).on("click",(function(a){e.options.backdropOptions.closeOnClick&&(a.stopPropagation(),a.preventDefault(),t.hide())})),t.on("hidden",(function(){void 0!==e.$modal&&e.$modal.hasClass(e.options.templateOptions.classActiveName)&&e.hide()})),e.loading=new d.Z.Loading({backdrop:t}),e.$wrapperInner=i()("<div/>").addClass(e.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(e.$wrapper),t},_show:function(){var e=this;e.render.apply(e,[e.options]),e.emit("show"),e.backdrop.show(),e.$wrapper.show(),e.loading.hide(),e.$el.addClass(e.options.templateOptions.classActiveName),e.$modal.addClass(e.options.templateOptions.classActiveName),c.Z.scan(e.$modal),e.positionModal(),i()(window.parent).on("resize.plone-modal.patterns",(function(){e.positionModal()})),i()("body").addClass("modal-open"),e.emit("shown"),e.activateFocusTrap()},hide:function(){var e=this;e.ajaxXHR&&e.ajaxXHR.abort(),e.emit("hide"),e._suppressHide&&!window.confirm(e._suppressHide)||(e.loading.hide(),e.$el.removeClass(e.options.templateOptions.classActiveName),void 0!==e.$modal&&(e.$modal.remove(),e.initModal()),e.$wrapper.remove(),i()(".modal",i()("body")).length<1&&(e._suppressHide=void 0,e.backdrop.hide(),i()("body").removeClass("modal-open"),i()(window.parent).off("resize.plone-modal.patterns")),e.emit("hidden"),e.$el.focus())},redraw:function(e,t){var a=this;a.emit("beforeDraw"),a.$modal.remove(),a.$raw=i()("<div />").append(i()(d.Z.parseBodyTag(e))),a.render.apply(a,[t||a.options]),a.$modal.addClass(a.options.templateOptions.classActiveName),a.positionModal(),c.Z.scan(a.$modal),a.emit("afterDraw")}})},73918:function(e,t,a){"use strict";var n=a(72513),i=a.n(n),o=a(17544),r=a.n(o),s=a(10354),l=a(62832),c=a(11191),d=function(){this.init.apply(this,arguments)};d.prototype={defaults:{indexWidth:"20em",remove:"",classBetweenDtName:"querystring-criteria-betweendt",classWrapperName:"querystring-criteria-wrapper",classIndexName:"querystring-criteria-index",classOperatorName:"querystring-criteria-operator",classValueName:"querystring-criteria-value",classRemoveName:"querystring-criteria-remove",classResultsName:"querystring-criteria-results",classClearName:"querystring-criteria-clear",classDepthName:"querystring-criteria-depth"},init:function(e,t,a,n,o,r,l,c,d,p,u){var h=this;h.app=t,h.options=i().extend(!0,{},h.defaults,a),h.indexes=n,h.indexGroups={},h.baseUrl=c,h.advanced=!1,h.initial=l,h.$wrapper=i()("<div/>").addClass(h.options.classWrapperName).appendTo(e),h.patternDateOptions=d||{},h.patternAjaxSelectOptions=p||{},h.patternRelateditemsOptions=u||{},h.patternAjaxSelectOptions=i().extend({width:"250px"},h.patternAjaxSelectOptions),h.patternRelateditemsOptions=i().extend({vocabularyUrl:h.baseUrl+"@@getVocabulary?name=plone.app.vocabularies.Catalog&field=relatedItems",width:"400px"},h.patternRelateditemsOptions),h.patternRelateditemsOptions.maximumSelectionSize=1,h.$remove=i()("<div>"+h.options.remove+"</div>").addClass(h.options.classRemoveName).appendTo(h.$wrapper).on("click",(function(e){e.stopPropagation(),h.remove()})),h.$index=i()("<select><option></option></select>").attr("placeholder",(0,s.Z)("Select criteria")),i().each(h.indexes,(function(e,t){t.enabled&&(h.indexGroups[t.group]||(h.indexGroups[t.group]=i()("<optgroup/>").attr("label",t.group).appendTo(h.$index)),h.indexGroups[t.group].append(i()("<option/>").attr("value",e).html(t.title)))})),h.$wrapper.append(i()("<div/>").addClass(h.options.classIndexName).append(h.$index)),h.$index.patternSelect2({width:h.options.indexWidth,placeholder:(0,s.Z)("Select criteria")}),h.$index.on("change",(function(e){h.removeValue(),h.createOperator(e.val),h.createClear(),h.trigger("index-changed")})),void 0!==o&&(h.$index.val(o),h.createOperator(o,r,l),h.createClear()),h.trigger("create-criteria")},appendOperators:function(e){var t=this;t.$operator=i()("<select/>"),t.indexes[e]&&r().each(t.indexes[e].operations,(function(a){var n=t.indexes[e].operators[a];i()("<option/>").attr("value",a).html(n.title).appendTo(t.$operator)})),t.$wrapper.append(i()("<div/>").addClass(t.options.classOperatorName).append(t.$operator)),t.$operator.patternSelect2({width:"10em"}),t.$operator.on("change",(function(){t.createValue(e),t.createClear(),t.trigger("operator-changed")}))},convertPathOperators:function(e){return this.advanced?e:e=e.replace("advanced","relativePath").replace("path","relativePath")},createPathOperators:function(){var e=this;if(e.advanced)e.resetPathOperators();else{var t="plone.app.querystring.operation.string.advanced";void 0===e.indexes.path.operators[t]&&(e.indexes.path.operations.push(t),e.indexes.path.operators[t]={title:"Advanced",widget:"AdvancedPathWidget",description:"Enter a custom path string",operation:"plone.app.querystring.queryparser._relativePath"}),i().each(e.indexes.path.operators,(function(e,t){var a=t;e.indexOf("absolute")>0?a.title="Custom":e.indexOf("relative")>0?a.title="Parent (../)":e.indexOf("advanced")>0?a.title="Advanced Mode":(a.title="Current (./)",a.widget="RelativePathWidget")}))}},resetPathOperators:function(){i().each(this.indexes.path.operators,(function(e,t){var a=t;e.indexOf("absolute")>0?a.title="Absolute Path":e.indexOf("relative")>0?a.title="Relative Path":e.indexOf("advanced")>0?a.title="Simple Mode":(a.title="Navigation Path",a.widget="ReferenceWidget")}))},createOperator:function(e,t,a){var n=this;n.removeOperator(),n.createPathOperators(),"path"===e&&a&&".::1"!==a&&"..::1"!==a&&!a.match(/^[0-9a-f\-]{32,36}::-?[0-9]+$/)&&(n.advanced=!0,n.resetPathOperators()),n.appendOperators(e),void 0===t&&(t=n.$operator.val()),n.$operator.val(t),n.createValue(e,a),n.trigger("create-operator")},createValue:function(e,t){var a=this,n=a.indexes[e].operators[a.$operator.val()].widget,o=i()("<div/>").addClass(a.options.classValueName).appendTo(a.$wrapper);a.removeValue();var r=function(e){o.remove(".depth-select-box");for(var t="<div class='depth-select-box'><label for='depth-select'>Depth</label><select name='depth-select' class='"+a.options.classDepthName+"'><option value='-1' selected='selected'>Unlimited</option>",n=0;n<=10;n+=1)t+="<option value="+n+" ",""+n===e&&(t+="selected='selected' "),t+=">"+n+"</option>";return t+="</select></div>",i()(t).change((function(){a.trigger("depth-changed")}))};if("StringWidget"===n)a.$value=i()('<input type="text"/>').addClass(a.options.classValueName+"-"+n).val(t).appendTo(o).change((function(){a.trigger("value-changed")}));else if("DateWidget"===n)a.$value=i()('<input type="date"/>').addClass(a.options.classValueName+"-"+n).val(t).appendTo(o).on("change",(function(){a.trigger("value-changed")}));else if("DateRangeWidget"===n){var l=i()("<span/>").appendTo(o),c="",d="";t&&(c=t[0]?t[0]:"",d=t[1]?t[1]:"");var p=i()('<input type="date"/>').addClass(a.options.classValueName+"-"+n).addClass(a.options.classValueName+"-"+n+"-start").val(c).appendTo(l).on("change",(function(){a.trigger("value-changed")}));o.append(i()("<span/>").html((0,s.Z)("to")).addClass(a.options.classBetweenDtName));var u=i()("<span/>").appendTo(o),h=i()('<input type="date"/>').addClass(a.options.classValueName+"-"+n).addClass(a.options.classValueName+"-"+n+"-end").val(d).appendTo(u).on("change",(function(){a.trigger("value-changed")}));a.$value=[p,h]}else if("RelativeDateWidget"===n)a.$value=i()('<input type="text"/>').after(i()("<span/>").html((0,s.Z)("days"))).addClass(a.options.classValueName+"-"+n).val(t).appendTo(o).change((function(){a.trigger("value-changed")}));else if("AdvancedPathWidget"===n)a.advanced?a.advanced=!1:a.advanced=!0,a.createPathOperators(),a.removeOperator(),a.appendOperators(e),a.createValue(e);else if("RelativePathWidget"===n)if(a.advanced)a.$value=i()('<input type="text"/>').addClass(a.options.classValueName+"-"+n).appendTo(o).val(t).change((function(){a.trigger("value-changed")}));else{console.log(t);var m=[".","1"];void 0!==t?"."===(m=t.split("::"))[0]?a.$operator.val("plone.app.querystring.operation.string.path"):a.$operator.val("plone.app.querystring.operation.string.relativePath"):"plone.app.querystring.operation.string.relativePath"===a.$operator.val()&&(m=["..","1"]),a.$value=i()('<input type="hidden"/>').addClass(a.options.classValueName+"-"+n).appendTo(o).val(m[0]),a.$value.after(r(m[1]))}else"ReferenceWidget"===n?a.advanced?a.$value=i()('<input type="text"/>').addClass(a.options.classValueName+"-"+n).val(t).appendTo(o).change((function(){a.trigger("value-changed")})):(m=["","-1"],void 0!==t&&(m=t.split("::")),a.$value=i()('<input type="text"/>').addClass(a.options.classValueName+"-"+n).appendTo(o).val(m[0]).patternRelateditems(a.patternRelateditemsOptions).change((function(){a.trigger("value-changed")})),o.addClass("break-line"),a.$value.after(r(m[1]))):"MultipleSelectionWidget"===n&&(a.$value=i()("<select/>").prop("multiple",!0).addClass(a.options.classValueName+"-"+n).appendTo(o).change((function(){a.trigger("value-changed")})),a.indexes[e]&&i().each(a.indexes[e].values,(function(e,t){i()("<option/>").attr("value",e).html(t.title).appendTo(a.$value)})),a.$value.patternSelect2(a.patternAjaxSelectOptions));if(void 0!==t&&void 0!==a.$value)if(Array.isArray(a.$value))i().each(t,(function(e,t){a.$value[e].val(t)}));else{var f=t;"string"==typeof t&&"RelativePathWidget"!==n&&(f=t.replace(/::-?[0-9]+/,"")),a.$value.val(f)}a.trigger("create-value")},createClear:function(){var e=this;e.removeClear(),e.$clear=i()("<div/>").addClass(e.options.classClearName).appendTo(e.$wrapper)},remove:function(){var e=this;e.trigger("remove"),e.$remove.remove(),e.$index.parent().remove(),e.removeOperator(),e.removeValue(),e.removeClear(),e.$wrapper.remove()},removeClear:function(){var e=this;e.trigger("remove-clear"),e.$clear&&e.$clear.remove()},removeOperator:function(){var e=this;e.trigger("remove-operator"),e.$operator&&e.$operator.parent().remove()},removeValue:function(){var e=this;e.trigger("remove-value"),e.$value&&(Array.isArray(e.$value)?e.$value[0].parents(".querystring-criteria-value").remove():e.$value.parents(".querystring-criteria-value").remove())},buildQueryPart:function(){var e=this,t=e.$index.val();if(""===t)return"";var a="query.i:records="+t;if(void 0===e.$operator)return"";var n=e.$operator.val();if("path"===t){if(n.indexOf("advanced")>0)return"";n=e.convertPathOperators(n)}var o="query.o:records="+n,r="query.v:records=",s="query.v:records:list=",l=[];if(void 0===e.$value)l.push(r);else if(Array.isArray(e.$value))i().each(e.$value,(function(){l.push(s+i()(this).val())}));else if(Array.isArray(e.$value.val()))i().each(e.$value.val(),(function(e,t){l.push(s+t)}));else{var c=r+e.$value.val();"path"===t&&""!==e.$value.val()?c+=e.getDepthString():void 0!==e.initial&&(c=r+e.initial,delete e.initial),l.push(c)}return a+"&"+o+"&"+l.join("&")},getJSONListStr:function(){var e=this,t=e.$index.val();if(""===t)return"";if(void 0===e.$operator)return"";var a=e.$operator.val();if("path"===t){if(a.indexOf("advanced")>0)return"";a=e.convertPathOperators(a)}var n,o=[];if(Array.isArray(e.$value))i().each(e.$value,(function(){o.push(i()(this).val())}));else if(void 0!==e.$value){var r=e.$value.val();if("path"===t&&r){var s=e.getDepthString();s&&(r+=s)}o.push(r)}return n=o.length>1?'["'+o.join('","')+'"]':1===o.length?JSON.stringify(o[0]):'""',void 0!==e.indexes[t].operators[a]?'{"i":"'+t+'", "o":"'+a+'", "v":'+n+"}":void 0},getDepthString:function(){var e="",t=i()("."+this.options.classDepthName).val();return""!==t&&void 0!==t&&(e+="::"+t),e},trigger:function(e){this.$wrapper.trigger(e+"-criteria.querystring.patterns",[this])},on:function(e,t){this.$wrapper.on(e+"-criteria.querystring.patterns",t)}},t.Z=c.Z.extend({name:"querystring",trigger:".pat-querystring",parser:"mockup",defaults:{indexes:[],classWrapperName:"querystring-wrapper",criteria:{},indexOptionsUrl:null,previewURL:"portal_factory/@@querybuilder_html_results",previewCountURL:"portal_factory/@@querybuildernumberofresults",patternDateOptions:{},patternAjaxSelectOptions:{},patternRelateditemsOptions:{},classSortLabelName:"querystring-sort-label",classSortReverseName:"querystring-sortreverse",classSortReverseLabelName:"querystring-sortreverse-label",classPreviewCountWrapperName:"querystring-previewcount-wrapper",classPreviewResultsWrapperName:"querystring-previewresults-wrapper",classPreviewWrapperName:"querystring-preview-wrapper",classPreviewName:"querystring-preview",classPreviewTitleName:"querystring-preview-title",classPreviewDescriptionName:"querystring-preview-description",classSortWrapperName:"querystring-sort-wrapper",showPreviews:!0},init:async function(){await Promise.resolve().then(a.bind(a,74090)),await Promise.resolve().then(a.bind(a,15260)),a.e(18102).then(a.bind(a,18102));var e=this;if(e.$el.hide(),e.$wrapper=i()("<div/>"),e.$el.after(e.$wrapper),e.initialized=!1,e.options.criteria.remove=await l.Z.resolveIcon("x-circle"),e.options.indexOptionsUrl)try{const t=await fetch(e.options.indexOptionsUrl),a=await t.json();e.options.indexes=a.indexes,e.options.sortable_indexes=a.sortable_indexes,e._init()}catch(e){}},_init:function(){var e=this;e.$criteriaWrapper=i()("<div/>").addClass(e.options.classWrapperName).appendTo(e.$wrapper),e.$sortWrapper=i()("<div/>").addClass(e.options.classSortWrapperName).appendTo(e.$wrapper),"false"===e.options.showPreviews&&(e.options.showPreviews=!1),e.options.showPreviews&&(e.$previewWrapper=i()("<div/>").addClass(e.options.classPreviewWrapperName).appendTo(e.$wrapper),i()("<div/>").addClass(e.options.classPreviewTitleName).html((0,s.Z)("Preview")).appendTo(e.$previewWrapper),i()("<div/>").addClass(e.options.classPreviewDescriptionName).html((0,s.Z)("Preview of at most 10 items")).appendTo(e.$previewWrapper)),e.criterias=[],e.$el.val()&&i().each(JSON.parse(e.$el.val()),(function(t,a){e.createCriteria(a.i,a.o,a.v)})),e.createCriteria(),e.createSort(),e.options.showPreviews&&e.refreshPreviewEvent(),e.$el.trigger("initialized"),e.initialized=!0},createCriteria:function(e,t,a){var n=this,i=n.options.indexOptionsUrl.replace(/(@@.*)/g,""),o=new d(n.$criteriaWrapper,n,n.options.criteria,n.options.indexes,e,t,a,i,n.options.patternDateOptions,n.options.patternAjaxSelectOptions,n.options.patternRelateditemsOptions);o.on("remove",(function(){n.criterias[n.criterias.length-1]===o&&n.createCriteria()})),o.on("index-changed",(function(){n.criterias[n.criterias.length-1]===o&&n.createCriteria()}));var r=function(){n.refreshPreviewEvent(),n.updateValue()},s=-1,l=function(){clearTimeout(s),s=setTimeout(r,100)};o.on("remove",(function(e,t){-1!==n.criterias.indexOf(t)&&n.criterias.splice(n.criterias.indexOf(t),1),l()})),o.on("remove-clear",l),o.on("remove-operator",l),o.on("remove-value",l),o.on("index-changed",l),o.on("operator-changed",l),o.on("create-criteria",l),o.on("create-operator",l),o.on("create-value",l),o.on("value-changed",l),o.on("depth-changed",l),n.criterias.push(o)},createSort:function(){var e=this,t=i()('[id$="-sort_on"]').filter('[id^="formfield-"]'),a=i()('[id*="-sort_reversed"]').filter('[id^="formfield-"]');for(var n in i()("<span/>").addClass(e.options.classSortLabelName).html((0,s.Z)("Sort on")).appendTo(e.$sortWrapper),e.$sortOn=i()("<select/>").attr("name","sort_on").appendTo(e.$sortWrapper).change((function(){e.refreshPreviewEvent.call(e),i()('[id$="sort_on"]',t).val(i()(this).val())})),e.$sortOn.append(i()('<option value="">'+(0,s.Z)("No sorting")+"</option>")),e.options.sortable_indexes)e.$sortOn.append(i()("<option/>").attr("value",n).html(e.options.indexes[n].title));if(e.$sortOn.patternSelect2({width:"150px"}),e.$sortOrder=i()('<input type="checkbox" />').attr("name","sort_reversed:boolean").change((function(){e.refreshPreviewEvent.call(e),i()(this).prop("checked")?i()('input[type="checkbox"]',a).prop("checked",!0):i()('input[type="checkbox"]',a).prop("checked",!1)})),i()("<span/>").addClass(e.options.classSortReverseName).appendTo(e.$sortWrapper).append(e.$sortOrder).append(i()("<span/>").html((0,s.Z)("Reversed Order")).addClass(e.options.classSortReverseLabelName)),t.length>=1&&a.length>=1){var o=i()('input[type="checkbox"]',a).prop("checked"),r=i()('[id$="-sort_on"]',t).val();o&&e.$sortOrder.prop("checked",!0),e.$sortOn.val(r),i()(t).hide(),i()(a).hide()}},refreshPreviewEvent:function(){var e=this;if(e.options.showPreviews){void 0!==e._previewXhr&&e._previewXhr.abort(),void 0!==e.$previewPane&&e.$previewPane.remove();var t=[];i().each(e.criterias,(function(e,a){var n=a.buildQueryPart();""!==n&&t.push(n)})),e.$previewPane=i()("<div/>").addClass(e.options.classPreviewName).appendTo(e.$previewWrapper),t.length<=0?i()("<div/>").addClass(e.options.classPreviewCountWrapperName).html("No results to preview").prependTo(e.$previewPane):(t.push("sort_on="+e.$sortOn.val()),e.$sortOrder.prop("checked")&&t.push("sort_order=reverse"),e._previewXhr=i().get(e.options.previewURL+"?"+t.join("&")).done((function(t){i()("<div/>").addClass(e.options.classPreviewResultsWrapperName).html(t).appendTo(e.$previewPane)})))}},updateValue:function(){var e=this,t=[];i().each(e.criterias,(function(e,a){var n=a.getJSONListStr();""!==n&&t.push(n)}));var a="["+t.join(",")+"]";e.$el.val(a),e.$el.trigger("change")}})},15260:function(e,t,a){"use strict";a.r(t);var n=a(72513),i=a.n(n),o=a(17544),r=a.n(o),s=a(11191),l=a(10354),c=a(62832),d=a(50033),p=a(74090);const u=37,h=39;t.default=s.Z.extend({name:"relateditems",trigger:".pat-relateditems",parser:"mockup",currentPath:void 0,selectedUIDs:[],openAfterInit:void 0,defaults:{vocabularyUrl:null,attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],basePath:"",pageSize:10,browsing:void 0,closeOnSelect:!0,contextPath:void 0,dropdownCssClass:"pat-relateditems-dropdown",favorites:[],recentlyUsed:!1,recentlyUsedMaxItems:20,recentlyUsedKey:"relateditems_recentlyused",maximumSelectionSize:-1,minimumInputLength:0,mode:"browse",orderable:!0,pathOperator:"plone.app.querystring.operation.string.path",rootPath:"/",rootUrl:"",scanSelection:!1,selectableTypes:null,separator:",",sortOn:null,sortOrder:"ascending",tokenSeparators:[","," "],upload:!1,uploadAllowView:void 0,breadcrumbTemplateSelector:null,favoriteTemplateSelector:null,recentlyusedTemplateSelector:null,resultTemplateSelector:null,selectionTemplateSelector:null,toolbarTemplateSelector:null,multiple:!0},recentlyUsed:function(e){var t=c.Z.storage.get(this.options.recentlyUsedKey)||[];t=t.slice(t.length-1e3,t.length),e&&t.filter(this.isSelectable.bind(this));var a=parseInt(this.options.recentlyUsedMaxItems,10);return a&&(t=t.slice(t.length-a,t.length)),t},applyTemplate:function(e,t){var a,n=this;n.options[e+"TemplateSelector"]&&(a=i()(n.options[e+"TemplateSelector"]).html()),a||(a=n.options[e+"Template"]?n.options[e+"Template"]:n[e+"Template"]);var o=i().extend(!0,{},n.options,t,{browsing:n.browsing,open_folder:(0,l.Z)("Open folder"),current_directory:(0,l.Z)("current directory:"),one_level_up:(0,l.Z)("Go one level up")});return o._item=t,r().template(a)(o)},setAjax:function(){var e={url:this.options.vocabularyUrl,dataType:"JSON",quietMillis:500,data:function(e,t){var a=[];e&&(e="*"+e+"*",a.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:e})),!this.browsing&&this.options.selectableTypes&&a.push({i:"portal_type",o:"plone.app.querystring.operation.selection.any",v:this.options.selectableTypes}),a.push({i:"path",o:this.options.pathOperator,v:this.options.rootPath+this.currentPath+(this.browsing?"::1":"")});var n=this.options.sortOn,i=n?this.options.sortOrder:null;return this.browsing&&null===n&&(n="getObjPositionInParent",i="ascending"),{query:JSON.stringify({criteria:a,sort_on:n,sort_order:i}),attributes:JSON.stringify(this.options.attributes),batch:JSON.stringify({page:t||1,size:this.options.pageSize})}}.bind(this),results:function(e,t){var a=t*this.options.pageSize<e.total,n=e.results;this.selectedUIDs=(i()(this.el).select2("data")||[]).map((function(e){return e.UID})),n=n.filter(function(e){return!!(this.browsing&&e.is_folderish||this.isSelectable(e)&&-1===this.selectedUIDs.indexOf(e.UID))}.bind(this));var o=this.currentPath.split("/");return 1===t&&this.browsing&&o.length>1&&"/"!==this.currentPath&&(n=[{oneLevelUp:!0,Title:(0,l.Z)("One level up"),path:o.slice(0,o.length-1).join("/")||"/",currentPath:this.currentPath,is_folderish:!0,selectable:!1}].concat(n)),{results:n,more:a}}.bind(this)};this.options.ajax=e},renderToolbar:async function(){var e,t=this,n=t.currentPath.split("/"),o="",s="";r().each(n,(function(e){if(""!==e){var a={};a.path=o=o+"/"+e,a.text=e,s+=t.applyTemplate("breadcrumb",a)}}));var d="";r().each(t.options.favorites,(function(e){var a=r().clone(e);a.path=a.path.substr(t.options.rootPath.length)||"/",d+=t.applyTemplate("favorite",a)}));var p="";if(t.options.recentlyUsed){var u=t.recentlyUsed(!0);r().each(u.reverse(),(function(e){p+=t.applyTemplate("recentlyused",e)}))}async function h(e){let n=await Promise.resolve().then(a.bind(a,37103));n=n.default;const o=t.$toolbar[0].querySelector(".upload button");o.disabled=e;const r=t.$toolbar[0].querySelector(".upload .pat-upload"),s={success:(e,a)=>{const n=a.UID;if(n){new c.Z.QueryHelper({vocabularyUrl:t.options.vocabularyUrl,attributes:t.options.attributes}).search("UID","plone.app.querystring.operation.selection.is",n,(e=>{var a=t.$el.select2("data");a.push.apply(a,e.results),t.$el.select2("data",a,!0),t.emit("selected"),t.popover.hide()}),!1)}},uloadMultiple:!0,allowPathSelection:!1,relativePath:"fileUpload",baseUrl:t.options.rootUrl},l=new n(i()(r),s);o.addEventListener("show.bs.dropdown",(()=>{t.currentPath!==l.currentPath&&l.setPath(t.currentPath)}))}e=t.applyTemplate("toolbar",{items:s,favItems:d,favText:(0,l.Z)("Favorites"),searchText:(0,l.Z)("Current path:"),searchModeText:(0,l.Z)("Search"),browseModeText:(0,l.Z)("Browse"),recentlyUsedItems:p,recentlyUsedText:(0,l.Z)("Recently Used"),icon_root:await c.Z.resolveIcon("house-fill"),icon_recently_used:await c.Z.resolveIcon("grid-fill"),icon_favorites:await c.Z.resolveIcon("star-fill"),icon_upload:await c.Z.resolveIcon("cloud-arrow-up"),upload:this.options.upload,upload_text:(0,l.Z)("Upload")}),t.$toolbar.html(e),i()(".pat-relateditems-dropdown").unbind("mouseup"),i()(".pat-relateditems-dropdown").bind("mouseup",(function(e){e.stopPropagation()})),i()("button.mode.search",t.$toolbar).on("click",(function(e){e.preventDefault(),t.browsing?(i()("button.mode.search",t.$toolbar).toggleClass("btn-primary btn-default"),i()("button.mode.browse",t.$toolbar).toggleClass("btn-primary btn-default"),t.browsing=!1,i()(t.el).select2("data").length>0&&(t.openAfterInit=!0),t.openAfterInit||(i()(t.el).select2("close"),i()(t.el).select2("open"))):(i()(t.el).select2("close"),i()(t.el).select2("open"))})),i()("button.mode.browse",t.$toolbar).on("click",(function(e){e.preventDefault(),t.browsing?(i()(t.el).select2("close"),i()(t.el).select2("open")):(i()("button.mode.search",t.$toolbar).toggleClass("btn-primary btn-default"),i()("button.mode.browse",t.$toolbar).toggleClass("btn-primary btn-default"),t.browsing=!0,i()(t.el).select2("data").length>0&&(t.openAfterInit=!0),t.openAfterInit||(i()(t.el).select2("close"),i()(t.el).select2("open")))})),i()("a.crumb",t.$toolbar).on("click",(function(e){e.preventDefault(),e.stopPropagation(),t.browseTo(i()(this).attr("href"))})),i()("a.fav",t.$toolbar).on("click",(function(e){e.preventDefault(),e.stopPropagation(),t.browseTo(i()(this).attr("href"))})),t.options.recentlyUsed&&i()(".pat-relateditems-recentlyused-select",t.$toolbar).on("click",(function(e){e.preventDefault();var a=i()(this).data("uid"),n=t.recentlyUsed().filter((function(e){return e.UID===a}));if(n.length>0&&(n=n[0],t.selectItem(n),t.options.maximumSelectionSize>0&&i()(t.el).select2("data").length>=t.options.maximumSelectionSize))return})),t.options.upload&&c.Z.featureSupport.dragAndDrop()&&c.Z.featureSupport.fileApi()&&(t.options.uploadAllowView?i().ajax({url:t.options.uploadAllowView,dataType:"JSON",data:{path:t.options.rootPath+t.currentPath},type:"GET",success:function(e){h(!e.allowUpload)}}):h())},browseTo:function(e){var t=this;t.emit("before-browse"),t.currentPath=e,i()(t.el).select2("close"),t.renderToolbar(),i()(t.el).select2("open"),t.emit("after-browse")},selectItem:function(e){var t=this;t.emit("selecting");var a=i()(t.el).select2("data");if(a.push(e),i()(t.el).select2("data",a,!0),t.options.recentlyUsed){var n=t.recentlyUsed(),o=n.filter((function(t){return t.UID===e.UID}));o.length>0&&n.splice(n.indexOf(o[0]),1),n.push(e),c.Z.storage.set(t.options.recentlyUsedKey,n)}t.emit("selected")},deselectItem:function(e){var t=this;t.emit("deselecting");var a=i()(t.el).select2("data");r().each(a,(function(t,n){t.UID===e.UID&&a.splice(n,1)})),i()(t.el).select2("data",a,!0),t.emit("deselected")},isSelectable:function(e){return!1!==e.selectable&&(null===this.options.selectableTypes||-1!==this.options.selectableTypes.indexOf(e.portal_type))},init:async function(){(await a.e(36543).then(a.t.bind(a,36543,23))).Dropdown,a.e(76492).then(a.bind(a,76492)),this.breadcrumbTemplate=(await a.e(8147).then(a.t.bind(a,8147,17))).default,this.favoriteTemplate=(await a.e(58640).then(a.t.bind(a,58640,17))).default,this.recentlyusedTemplate=(await a.e(77427).then(a.t.bind(a,77427,17))).default,this.resultTemplate=(await a.e(71531).then(a.t.bind(a,71531,17))).default,this.selectionTemplate=(await a.e(8443).then(a.t.bind(a,8443,17))).default,this.toolbarTemplate=(await a.e(16071).then(a.t.bind(a,16071,17))).default;var e=this;e.browsing="search"!==e.options.mode,e.options.rootPath=e.options.rootPath.replace(/\/$/,""),e.currentPath=e.options.basePath.substr(e.options.rootPath.length)||"/",e.setAjax(),e.$el.wrap('<div class="pat-relateditems-container" />'),e.$container=e.$el.parents(".pat-relateditems-container"),p.default.prototype.initializeValues.call(e),p.default.prototype.initializeTags.call(e),e.options.formatSelection=function(t){t=i().extend(!0,{Title:"",getIcon:"",getURL:"",path:"",portal_type:"",review_state:""},t);var a=i()(e.applyTemplate("selection",t));if(e.options.scanSelection&&d.Z.scan(a),1==e.options.maximumSelectionSize){var n=t.path,o=n.split("/");n=(o=o.slice(0,-1)).join("/"),e.currentPath=n,e.renderToolbar()}return a};const t=await c.Z.resolveIcon("arrow-left-circle"),n=await c.Z.resolveIcon("arrow-right-circle");e.options.formatResult=function(a){a.selectable=e.isSelectable(a),a=i().extend(!0,{Title:"",getIcon:"",getURL:"",is_folderish:!1,oneLevelUp:!1,iconLevelUp:t,iconLevelDown:n,path:"",portal_type:"",review_state:"",selectable:!1},a),-1!==e.selectedUIDs.indexOf(a.UID)&&(a.selectable=!1);var o=i()(e.applyTemplate("result",a));return i()(".pat-relateditems-result-select",o).on("click",(function(t){if(t.preventDefault(),i()(this).is(".selectable")){var n=i()(this).parents(".pat-relateditems-result");if(n.is(".pat-relateditems-active"))n.removeClass("pat-relateditems-active"),e.deselectItem(a);else{if(e.options.maximumSelectionSize>0)i()(e.el).select2("data").length>=e.options.maximumSelectionSize&&i()(e.el).select2("close");e.selectItem(a),n.addClass("pat-relateditems-active"),e.options.closeOnSelect&&i()(e.el).select2("close")}}})),i()(".pat-relateditems-result-browse",o).on("click",(function(t){t.preventDefault(),t.stopPropagation();var a=i()(this).data("path");e.browseTo(a)})),i()(o)},e.options.initSelection=function(t,a){var n=i()(t).val();if(""!==n){var o=n.split(e.options.separator);new c.Z.QueryHelper(i().extend(!0,{},e.options,{pattern:e})).search("UID","plone.app.querystring.operation.list.contains",o,(function(t){var n=t.results.reduce((function(e,t){return e[t.UID]=t,e}),{});try{a(o.map((function(e){return n[e]})).filter((function(e){return void 0!==e})))}catch(e){}e.openAfterInit&&(i()(e.el).select2("open"),e.openAfterInit=void 0)}),!1)}},e.options.tokenizer=function(e){"auto"===this.options.mode&&(this.browsing=!e)}.bind(this),e.options.id=function(e){return e.UID},await p.default.prototype.initializeSelect2.call(e),await p.default.prototype.initializeOrdering.call(e),e.$toolbar=i()('<div class="toolbar d-flex" />'),e.$container.prepend(e.$toolbar),e.$el.on("select2-selecting",(function(t){e.isSelectable(t.choice)||t.preventDefault()})),e.renderToolbar(),e.$el.on("select2-loaded",(function(e){let t=window.innerHeight||document.documentElement.clientHeight;const a=i()(".pat-relateditems-dropdown.select2-drop-active .select2-results")[0],n=t-a.getBoundingClientRect().top-18;i()(a).css("max-height",`${n}px`)})),i()(document).on("keyup",e.$el,(function(t){if(p.default.prototype.opened.call(e)&&(t.which===u||t.which===h)){t.stopPropagation();var a=t.which===u?".pat-relateditems-result.one-level-up":".select2-highlighted",n=i()(".pat-relateditems-result-browse",a);if(1!==n.length)return;var o=n.data("path");e.browseTo(o)}}))}})},74090:function(e,t,a){"use strict";a.r(t);var n=a(72513),i=a.n(n),o=a(11191),r=a(25219),s=a(62832);t.default=o.Z.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var e=this;e.options.initialValues&&(e.options.id=function(e){return e.id},e.options.initSelection=function(t,a){var n=[],o=t.val(),r=e.options.initialValues;"string"==typeof e.options.initialValues&&""!==e.options.initialValues&&("{"===e.options.initialValues[0]?r=JSON.parse(e.options.initialValues):(r={},i()(e.options.initialValues.split(e.options.separator)).each((function(){var e=this.split(":"),t=i().trim(e[0]),a=i().trim(e[1]);r[t]=a})))),i()(o.split(e.options.separator)).each((function(){var e=this;r[this]&&(e=r[this]),n.push({id:s.Z.removeHTML(this),text:s.Z.removeHTML(e)})})),a(n)})},initializeTags:function(){var e=this;e.options.tags&&"string"==typeof e.options.tags&&("["===e.options.tags.substr(0,1)?e.options.tags=JSON.parse(e.options.tags):e.options.tags=e.options.tags.split(e.options.separator)),e.options.tags&&!e.options.allowNewItems&&(e.options.data=i().map(e.options.tags,(function(e,t){return{id:e,text:e}})),e.options.multiple=!0,delete e.options.tags)},initializeOrdering:async function(){if(!this.options.orderable)return;const e=(await a.e(37578).then(a.t.bind(a,37578,23))).default,t=()=>{const t=this.$select2[0].querySelector(".select2-choices");new e(t,{draggable:"li",dragClass:"select2-choice-dragging",chosenClass:"dragging",onStart:()=>this.$el.select2("onSortStart"),onEnd:()=>this.$el.select2("onSortEnd")})};this.$el.on("change",t.bind(this)),t()},initializeSelect2:async function(){Promise.all([a.e(14894),a.e(69106)]).then(a.bind(a,71058)),a.e(30385).then(a.bind(a,30385)),await a.e(152).then(a.t.bind(a,152,23));try{await a(70623)(`./select2_locale_${this.options.language}`)}catch{console.warn("Language file could not be loaded",this.options.language)}var e=this;function t(t,a){return t?(e.options.debug&&console.debug("callback",t,a),"string"==typeof t&&(t=window[t]),t(a)):t}e.options.formatResultCssClass=function(e){if(e.id)return"select2-option-"+e.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},i()(e.el).select2(e.options),e.$el.on("select2-selected",(function(a){t(e.options.onSelected,a)})),e.$el.on("select2-selecting",(function(a){t(e.options.onSelecting,a)})),e.$el.on("select2-deselecting",(function(a){t(e.options.onDeselecting,a)})),e.$el.on("select2-deselected",(function(a){t(e.options.onDeselected,a)})),e.$select2=e.$el.parent().find(".select2-container"),e.$el.parent().off("close.plone-modal.patterns"),e.options.orderable&&e.$select2.addClass("select2-orderable")},opened:function(){return 1===i()(".select2-dropdown-open",this.$el.parent()).length},init:async function(){var e=this,t=new r.Z;if(e.options.language=t.currentLanguage,e.options.allowNewItems=!e.options.hasOwnProperty("allowNewItems")||JSON.parse(e.options.allowNewItems),e.options.ajax||e.options.vocabularyUrl){e.options.vocabularyUrl&&(e.options.multiple=void 0===e.options.multiple||e.options.multiple,e.options.ajax=e.options.ajax||{},e.options.ajax.url=e.options.vocabularyUrl,e.options.initSelection=function(t,a){var n=[],o=t.val();i()(o.split(e.options.separator)).each((function(){var e=s.Z.removeHTML(this);n.push({id:e,text:e})})),a(n)});var a="";e.options.ajax=i().extend({quietMillis:300,data:function(e,t){return a=e,{query:e,page_limit:10,page:t}},results:function(t,n){var o=t.results;if(e.options.vocabularyUrl){var r=[];i().each(t.results,(function(e,t){r.push(t.id)})),o=[];var l=""===a||i().inArray(a,r)>=0;e.options.allowNewItems&&!l&&(a=s.Z.removeHTML(a),o.push({id:a,text:a})),i().each(t.results,(function(e,t){o.push(t)}))}return{results:o}}},e.options.ajax)}else if(e.options.multiple&&e.$el.is("select")){var n=e.$el.val()||[],o=i().map(e.$el.find("option"),(function(e){return{text:i()(e).html(),id:e.value}})),l=i()('<input type="hidden" />');l.val(n.join(e.options.separator)),l.attr("class",e.$el.attr("class")),l.attr("name",e.$el.attr("name")),l.attr("id",e.$el.attr("id")),e.$orig=e.$el,e.$el.replaceWith(l),e.$el=l,e.options.data=o}e.initializeValues(),e.initializeTags(),await e.initializeSelect2(),await e.initializeOrdering()}})},71015:function(e,t,a){"use strict";var n=a(72513),i=a.n(n),o=a(11191);t.Z=o.Z.extend({name:"sortable",trigger:".pat-sortable",parser:"mockup",defaults:{selector:"li",dragClass:"item-dragging",cloneClass:"dragging",drop:void 0},init:async function(){let e=await a.e(37578).then(a.t.bind(a,37578,23));e=e.default,this.sortable=new e(this.$el[0],{animation:150,draggable:this.options.selector,chosenClass:this.options.dragClass,dragClass:this.options.cloneClass,onEnd:function(e){var t=this.options.drop;t&&("string"==typeof t&&(t=window[this.options.drop]),t(i()(e.item),e.newIndex-e.oldIndex))}.bind(this)})},disableSort:function(){this.sortable.option("sort",!1)},enableSort:function(){this.sortable.option("sort",!0)}})},37103:function(e,t,a){"use strict";a.r(t);var n=a(72513),i=a.n(n),o=a(17544),r=a.n(o),s=a(10354),l=a(11191),c=a(62832);let d;t.default=l.Z.extend({name:"upload",trigger:".pat-upload",parser:"mockup",defaults:{showTitle:!0,url:null,className:"upload",wrap:!1,wrapperTemplate:'<div class="upload-wrapper"/>',fileaddedClassName:"dropping",useTus:!1,container:"",ajaxUpload:!0,paramName:"file",addRemoveLinks:!1,autoCleanResults:!0,previewsContainer:".previews",previewTemplate:null,maxFiles:null,maxFilesize:99999999,allowPathSelection:void 0,relatedItems:{attributes:["UID","Title","Description","getURL","portal_type","path","ModificationDate"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,selectableTypes:["Folder"]}},init:async function(){a.e(83930).then(a.bind(a,83930)),a.e(50794).then(a.bind(a,50794)),d=(await a.e(59625).then(a.t.bind(a,15205,23))).default,d.autoDiscover=!1;const e=(await a.e(94818).then(a.t.bind(a,94818,17))).default;var t=this;void 0===t.options.allowPathSelection&&(t.options.allowPathSelection=t.options.baseUrl&&t.options.relativePath),i()(document).bind("paste",(function(e){var a=e.originalEvent.clipboardData.items;if(a)for(var n=0;n<a.length;n++)if(-1!==a[n].type.indexOf("image")){var i=a[n].getAsFile();t.dropzone.addFile(i)}})),t.currentPath=t.options.currentPath,t.currentFile=0;let n=r().template(e)({_t:s.Z,allowPathSelection:t.options.allowPathSelection});t.$el.addClass(t.options.className),t.$el.append(n),t.$progress=i()(".progress-bar-success",t.$el),t.options.showTitle||t.$el.find("h2.title").hide(),t.options.ajaxUpload||(i()(".fallback",this.$el).remove(),this.$el.hasClass(".upload-container")?this.$el.addClass("no-ajax-upload"):this.$el.closest(".upload-container").addClass("no-ajax-upload")),t.options.wrap&&(t.$el.wrap(t.options.wrapperTemplate),t.$el=t.$el.parent()),t.options.allowPathSelection?(t.$pathInput=i()('input[name="location"]',t.$el),t.relatedItems=await t.setupRelatedItems(t.$pathInput)):(i()('input[name="location"]',t.$el).parent().remove(),t.relatedItems=null),t.$dropzone=i()(".upload-area",t.$el),i()("div.browse-select button.browse",t.$el).click((function(e){e.preventDefault(),e.stopPropagation(),(!t.options.maxFiles||t.dropzone.files.length<t.options.maxFiles)&&t.dropzone.hiddenFileInput.click()}));var o=await this.getDzoneOptions();try{t.dropzone=new d(t.$dropzone[0],o)}catch(e){throw window.DEBUG&&console.log(e),e}t.dropzone.on("maxfilesreached",(function(){t.showHideControls()})),t.dropzone.on("addedfile",(function(){t.showHideControls()})),t.dropzone.on("removedfile",(function(){t.showHideControls()})),t.dropzone.on("success",(function(e,a){var n;try{n=i().parseJSON(a)}catch(e){n=a}t.$el.trigger("uploadAllCompleted",{data:n,path_uid:t.$pathInput?t.$pathInput.val():null})})),t.options.autoCleanResults&&t.dropzone.on("complete",(function(e){e.status===d.SUCCESS&&setTimeout((function(){i()(e.previewElement).fadeOut()}),3e3)})),t.dropzone.on("complete",(function(e){e.status===d.SUCCESS&&1===t.dropzone.files.length&&t.showHideControls()})),t.dropzone.on("error",(function(e,t,a){void 0!==a&&403!==a.status&&i()(".dz-error-message span",e.previewElement).html((0,s.Z)("The file transfer failed"))})),t.dropzone.on("totaluploadprogress",(function(e){e=(100*(t.currentFile-1)+e)/(100*t.dropzone.files.length)*100,t.$progress.attr("aria-valuenow",e).css("width",e+"%")})),i()(".upload-all",t.$el).click((function(e){e.preventDefault(),e.stopPropagation(),t.processUpload({finished:function(){t.$progress.attr("aria-valuenow",0).css("width","0%")}})})),t.options.clipboardfile&&t.dropzone.addFile(t.options.clipboardfile)},showHideControls:function(){var e=this;e._showHideTimeout&&clearTimeout(e._showHideTimeout),e._showHideTimeout=setTimeout((function(){e._showHideControls()}),50)},_showHideControls:function(){var e=this,t=i()(".controls",e.$el),a=i()(".browse-select",e.$el),n=i()(".dz-hidden-input");if(e.options.maxFiles&&(e.dropzone.files.length<e.options.maxFiles?(a.show(),n.prop("disabled",!1)):(a.hide(),n.prop("disabled",!0))),e.dropzone.files.length>0){t.fadeIn("slow");var o=e.dropzone.files[0];i()(".dz-error-message span",o.previewElement).html("")}else t.fadeOut("slow")},pathJoin:function(){var e=[];return r().each(arguments,(function(t){t&&("/"===t[0]&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),e.push(t))})),e.join("/")},getUrl:function(){var e=this,t=e.options.url;if(!t)if(e.options.baseUrl&&e.options.relativePath)"/"!==(t=e.options.baseUrl)[t.length-1]&&(t+="/"),t+=e.pathJoin(e.currentPath,e.options.relativePath);else{var a=e.$el.parents("form");t=a.length>0?a.attr("action"):window.location.href}return t},getDzoneOptions:async function(){let e=await a.e(51967).then(a.t.bind(a,51967,17));e=e.default;var t=this;t.options.clickable=!0;var n=i().extend({},t.options);if(n.url=t.getUrl(),n.headers={"X-CSRF-TOKEN":c.Z.getAuthenticator()},n.uploadMultiple=!1,delete n.wrap,delete n.wrapperTemplate,delete n.resultTemplate,delete n.autoCleanResults,delete n.fileaddedClassName,delete n.useTus,t.options.previewsContainer){var o=t.$el.find(t.options.previewsContainer);o.length>0&&(n.previewsContainer=o[0])}return n.autoProcessQueue=!1,n.previewTemplate=e,n},processUpload:function(e){e||(e={});var t=this,a=!1,n=t.options.useTus,i=t.options.fileaddedClassName,o=e.finished;t.currentFile=0,function e(){a=!0,0===t.dropzone.files.length&&(a=!1);var r=t.dropzone.files[0];if(a&&r.status===d.ERROR&&(r.status=d.QUEUED,a=!1),!a)return t.$el.removeClass(i),void(void 0!==o&&"function"==typeof o&&o());-1!==[d.SUCCESS,d.CANCELED].indexOf(r.status)?(t.dropzone.removeFile(r),e()):r.status!==d.UPLOADING?(n&&window.tus?t.handleTusUpload(r):(t.currentFile+=1,t.dropzone.processFile(r)),setTimeout(e,100)):setTimeout(e,100)}()},handleTusUpload:function(e){var t=this;i()(e.previewElement);e.status=d.UPLOADING,window.tus.upload(e,{endpoint:t.dropzone.options.url,headers:{FILENAME:e.name,"X-CSRF-TOKEN":c.Z.getAuthenticator()},chunkSize:5242880}).fail((function(){window.DEBUG&&console.alert((0,s.Z)("Error uploading with TUS resumable uploads")),e.status=d.ERROR})).progress((function(e,a,n){var i=a/n*100;t.$progress.attr("aria-valuenow",i).css("width",i+"%"),t.$progress.html((0,s.Z)("uploading...")+"<br />"+t.formatBytes(a)+" / "+t.formatBytes(n))})).done((function(e,a){a.status=d.SUCCESS,t.dropzone.emit("success",a),t.dropzone.emit("complete",a)}))},formatBytes:function(e){var t=Math.round(e/1024);if(t<1024)return t+" KiB";var a=Math.round(t/1024);return a<1024?a+" MB":Math.round(a/1024)+" GB"},setPath:function(e){var t=this;t.currentPath=e,t.options.url=null,t.options.url=t.dropzone.options.url=t.getUrl()},setupRelatedItems:async function(e){const t=(await Promise.resolve().then(a.bind(a,15260))).default;var n=this,o=n.options.relatedItems;o.upload=!1,n.options.initialFolder&&e.attr("value",n.options.initialFolder);var r=new t(e,o);return r.$el.on("change",(function(){var e=i()(this).select2("data"),t=null;e.length>0&&(t=e[0].path),n.setPath(t)})),r}})},77941:function(e,t,a){"use strict";a.r(t);var n=a(50033),i=(a(93520),a(11191)),o=a(82799),r=a(37834),s=a(32218);const l=new o.Z("datetime-picker");l.addArgument("format","YYYY-MM-DD"),l.addArgument("week-numbers",[],["show","hide"]),l.addArgument("i18n"),l.addArgument("today","Today"),l.addArgument("clear","Clear"),l.addArgument("first-day",0);i.Z.extend({name:"datetime-picker",trigger:".pat-datetime-picker",parser:l,el_date:null,el_time:null,async init(){const e=this.el;if(this.options=l.parse(this.el,this.options),r.Z.checkInputSupport("datetime-local","invalid date"))return;window.__patternslib_import_styles&&a.e(28108).then(a.bind(a,28108));const t=(await Promise.resolve().then(a.bind(a,93520))).default,n=this.el.value.split("T"),i=n[0]||"",o=n[1]||"",c=document.createElement("div");c.setAttribute("class","pat-datetime-picker__wrapper"),s.Z.hide(e);const d=`\n            <button type="button" class="_btn _now" title="${this.options.today}">\n                <span class="_icon"/>\n                <span class="_text">${this.options.today}</span>\n            </button>`,p=`\n            <button type="button" class="_btn _clear" title="${this.options.clear}">\n                <span class="_icon"/>\n                <span class="_text">${this.options.clear}</span>\n            </button>`;c.innerHTML=`\n            <input type="date" placeholder="YYYY-MM-DD" value="${i}" />\n            <input type="time" placeholder="hh:mm" value="${o}" />\n            ${this.options.today?d:""}\n            ${this.options.clear?p:""}\n        `,this.el_time=c.querySelector("input[type=time]"),this.el_time.addEventListener("change",(()=>this.update())),this.el_date=c.querySelector("input[type=date]"),this.el_date.addEventListener("change",(()=>{this.el_time.value||(this.el_time.value=this.isotime()),this.update()}));const u={behavior:"native",format:this.options.format,weekNumbers:this.options.weekNumbers,firstDay:this.options.firstDay};if(await t.init(this.el_date,u),this.options.today){c.querySelector("._btn._now").addEventListener("click",(e=>{e.preventDefault(),this.el_date.value=this.isodate(),this.el_time.value=this.isotime(),this.update()}))}if(this.options.clear){c.querySelector("._btn._clear").addEventListener("click",(e=>{e.preventDefault(),this.el_date.value="",this.el_time.value="",this.update()}))}e.parentNode.insertBefore(c,e)},update(){this.el_date.value&&this.el_time.value?this.el.value=`${this.el_date.value}T${this.el_time.value}`:this.el.value="",this.el.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))},isodate(){return(new Date).toISOString().substr(0,10)},isotime(){return(new Date).toTimeString().substr(0,5)}}),a(67164),a(28778);var c=a(22236),d=a.n(c),p=a(18742),u=a(7424);const h=u.Z.getLogger("pat-validation"),m=new o.Z("validation");m.addArgument("disable-selector","[type=submit], button:not([type=button])"),m.addArgument("message-date",""),m.addArgument("message-datetime",""),m.addArgument("message-email",""),m.addArgument("message-max",""),m.addArgument("message-min",""),m.addArgument("message-number",""),m.addArgument("message-required",""),m.addArgument("message-equality","is not equal to %{attribute}."),m.addArgument("not-after",null),m.addArgument("not-before",null),m.addArgument("equality",null),m.addArgument("delay",100),m.addArgument("error-template",'<em class="validation warning message">${this.message}</em>'),m.addAlias("message-integer","message-number");const f="__patternslib__input__error__el",g="__patternslib__input__error__msg";i.Z.extend({name:"validation",trigger:"form.pat-validation",init(){this.options=m.parse(this.el,this.options),p.Z.add_event_listener(this.el,"submit","pat-validation--submit--validator",(e=>{for(const t of this.inputs)h.debug("Checking input for submit",t,e),this.check_input({input:t,event:e})})),this.initialize_inputs(),d()(this.el).on("pat-update",(()=>{this.initialize_inputs()})),this.el.setAttribute("novalidate","")},initialize_inputs(){this.inputs=[...this.el.querySelectorAll("input[name], select[name], textarea[name]")],this.disabled_elements=[...this.el.querySelectorAll(this.options.disableSelector)];for(const[e,t]of this.inputs.entries()){const a=r.Z.debounce((e=>{h.debug("Checking input for event",t,e),this.check_input({input:t,event:e})}),this.options.delay);p.Z.add_event_listener(t,"input",`pat-validation--input-${t.name}--${e}--validator`,(e=>a(e))),p.Z.add_event_listener(t,"change",`pat-validation--change-${t.name}--${e}--validator`,(e=>a(e))),p.Z.add_event_listener(t,"blur",`pat-validation--blur-${t.name}--${e}--validator`,(e=>a(e)))}},check_input(e){var t;let{input:a,event:n,stop:i=!1}=e;if(a.disabled)return;this.set_validity({input:a,msg:""});const o=a.validity;if(null!=n&&null!==(t=n.submitter)&&void 0!==t&&t.hasAttribute("formnovalidate"))return;h.debug(`\n            validity_state.badInput ${o.badInput}\n            validity_state.customError ${o.customError}\n            validity_state.patternMismatch ${o.patternMismatch}\n            validity_state.rangeOverflow ${o.rangeOverflow}\n            validity_state.rangeUnderflow ${o.rangeUnderflow}\n            validity_state.stepMismatch ${o.stepMismatch}\n            validity_state.tooLong ${o.tooLong}\n            validity_state.tooShort ${o.tooShort}\n            validity_state.typeMismatch ${o.typeMismatch}\n            validity_state.valid ${o.valid}\n            validity_state.valueMissing ${o.valueMissing}\n        `);const s=m.parse(a);if(o.valid){var l;if(s.equality&&(null===(l=this.el.querySelector(`[name=${s.equality}]`))||void 0===l?void 0:l.value)!==a.value){const e=s.message.equality||"The value is not equal to %{attribute}";this.set_validity({input:a,msg:e,attribute:s.equality})}else if(s.not.after||s.not.before){const e=s.message.date||s.message.datetime,t="The date must be after %{attribute}",n="The date must be before %{attribute}";let o,l,m,x;if(s.not.after){var c,d;if(r.Z.is_iso_date_time(s.not.after,!0))o=new Date(s.not.after);else l=document.querySelector(s.not.after),o=null!==(c=l)&&void 0!==c&&c.value?new Date(null===(d=l)||void 0===d?void 0:d.value):void 0;o=isNaN(o)?null:o}if(s.not.before){var p,u;if(r.Z.is_iso_date_time(s.not.before,!0))m=new Date(s.not.before);else x=document.querySelector(s.not.before),m=null!==(p=x)&&void 0!==p&&p.value?new Date(null===(u=x)||void 0===u?void 0:u.value):void 0;m=isNaN(m)?null:m}if(a.value&&r.Z.is_iso_date_time(a.value,!0)&&!isNaN(new Date(a.value))){const i=new Date(a.value);if(o&&i>o){let t;var f,g,v;if(!l&&s.not.after)t=s.not.after;else t=null===(f=l)||void 0===f||null===(g=f.labels)||void 0===g||null===(v=g[0])||void 0===v?void 0:v.textContent.replace(/\s\s+/g," "),t=t||l.name;this.set_validity({input:a,msg:e||n,attribute:t.trim()})}else if(m&&i<m){let n;var y,b,w;if(!x&&s.not.before)n=s.not.before;else n=null===(y=x)||void 0===y||null===(b=y.labels)||void 0===b||null===(w=b[0])||void 0===w?void 0:w.textContent.replace(/\s\s+/g," "),n=n||x.name;this.set_validity({input:a,msg:e||t,attribute:n.trim()})}}!i&&l&&(h.debug("Check `not-after` input.",l),this.check_input({input:l,stop:!0})),!i&&x&&(h.debug("Check `no-before` input.",l),this.check_input({input:x,stop:!0}))}if(!o.customError)return void this.remove_error(a,!0)}else o.valueMissing&&s.message.required?this.set_validity({input:a,msg:s.message.required}):o.rangeUnderflow&&s.message.min?this.set_validity({input:a,msg:s.message.min,min:a.getAttribute("min")}):o.rangeOverflow&&s.message.max?this.set_validity({input:a,msg:s.message.max,max:a.getAttribute("max")}):(o.badInput||o.stepMismatch)&&"number"===a.type&&s.message.number?this.set_validity({input:a,msg:s.message.number}):o.typeMismatch&&"email"===a.type&&s.message.email?this.set_validity({input:a,msg:s.message.email}):o.rangeUnderflow&&"date"===a.type&&s.message.date||o.rangeOverflow&&"date"===a.type&&s.message.date?this.set_validity({input:a,msg:s.message.date}):(o.rangeUnderflow&&"datetime"===a.type&&s.message.datetime||o.rangeOverflow&&"datetime"===a.type&&s.message.datetime)&&this.set_validity({input:a,msg:s.message.datetime});"submit"===(null==n?void 0:n.type)&&(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation()),this.set_error_message(a,s)},set_validity(e){let{input:t,msg:a,attribute:n=null,min:i=null,max:o=null}=e;n&&(a=a.replace(/%{attribute}/g,n)),i&&(a=a.replace(/%{count}/g,i)),o&&(a=a.replace(/%{count}/g,o)),a=a.replace(/%{value}/g,JSON.stringify(t.value)),t.setCustomValidity(a),t[g]=a},remove_error(e){let t=[e];arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t=this.inputs.filter((t=>t.name===e.name)));for(const e of t){const t=e[f];e[f]=null,null==t||t.remove()}if(this.el.checkValidity())for(const e of this.disabled_elements)e.disabled&&(e.removeAttribute("disabled"),e.classList.remove("disabled"))},set_error_message(e,t){this.remove_error(e);const a=this.inputs.filter((t=>t.name===e.name));if(a.length>1&&a.some((e=>!!e[f])))return;const n=e.validationMessage||e[g],i=s.Z.template(t.errorTemplate,{message:n}),o=s.Z.create_from_string(i).firstChild;let r;"radio"!==e.type&&"checkbox"!==e.type||(r=e.closest("fieldset.pat-checklist")),r?r.append(o):e.after(o),e[f]=o;let l=!1;for(const e of this.disabled_elements)e.disabled||(l=!0,e.setAttribute("disabled","disabled"),e.classList.add("disabled"),h.debug("Disable element",e));if(l){h.debug("Checking whole form after element was disabled.");for(const t of this.inputs.filter((t=>t!==e)))this.check_input({input:t,stop:!0})}}});var v=a(36382);const y=new o.Z("code-editor");y.addArgument("language",null),y.addArgument("linenumbers",!1),y.addArgument("theme",null),y.addArgument("tab","    "),y.addArgument("indent-on","{$"),y.addArgument("spellcheck",!1),y.addArgument("catch-tab",!0),y.addArgument("preserve-ident",!0),y.addArgument("add-closing",!0),y.addArgument("history",!0);i.Z.extend({name:"code-editor",trigger:".pat-code-editor",async init(){this.options=y.parse(this.el,this.options);const e=(await a.e(20256).then(a.bind(a,20256))).CodeJar,t=(await a.e(22907).then(a.t.bind(a,22907,23))).default;let n=t.highlightElement;if(this.options.linenumbers){n=(0,(await a.e(65663).then(a.bind(a,65663))).withLineNumbers)(t.highlightElement)}let i=this.el;if(["textarea","input"].includes(this.el.nodeName.toLowerCase())){const e=r.Z.unescape_html(this.el.value),t=this.options.language?`language-${this.options.language}`:"",a=document.createElement("pre");i=document.createElement("code"),i.setAttribute("class",t),i.setAttribute("contenteditable",""),i.style.display="block",i.textContent=e,a.append(i),this.el.parentNode.insertBefore(a,this.el),this.el.setAttribute("hidden","")}this.options.language&&i.classList.add(`language-${this.options.language}`),i.classList.add(`theme-${this.options.theme||"default"}`),a(62660)(`./prism${this.options.theme?"-"+this.options.theme:""}.css`);const o={tab:this.options.tab.replace(/'/g,"").replace(/"/g,"").replace(/\\t/g,"\t"),indentOn:new RegExp(this.options.indentOn),spellcheck:this.options.spellcheck,catchTab:this.options.catchTab,preserveIdent:this.options.preserveIdent,addClosing:this.options.addClosing,history:this.options.history};this.codeeditor=e(i,n,o),i!==this.el&&this.codeeditor.onUpdate((e=>{this.el.value=e,this.el.dispatchEvent(p.Z.input_event())}))}}),a(72459);const b=u.Z.getLogger("depends"),w=new o.Z("depends");w.addArgument("condition"),w.addArgument("action","show",["show","enable","both"]),w.addArgument("transition","none",["none","css","fade","slide"]),w.addArgument("effect-duration","fast"),w.addArgument("effect-easing","swing");i.Z.extend({name:"depends",trigger:".pat-depends",jquery_plugin:!0,async init(e,t){const n=(await a.e(35387).then(a.bind(a,35387))).default,i=this.$el[0],o=w.parse(this.$el,t);let s;this.$modal=this.$el.parents(".pat-modal");try{s=new n(this.$el,o.condition)}catch(e){return void b.error("Invalid condition: "+e.message,i)}let l=s.evaluate();switch(o.action){case"show":r.Z.hideOrShow(e,l,o,this.name),this.updateModal();break;case"enable":l?this.enable():this.disable();break;case"both":l?(r.Z.hideOrShow(e,l,o,this.name),this.updateModal(),this.enable()):(r.Z.hideOrShow(e,l,o,this.name),this.updateModal(),this.disable())}const c={handler:s,options:o,dependent:i};for(let e of s.getAllInputs()){if(e.form){let t=d()(e.form),a=t.data("patDepends.dependents");a?-1===a.indexOf(c)&&a.push(c):(a=[c],t.on("reset.pat-depends",(()=>this.onReset))),t.data("patDepends.dependents",a)}d()(e).on("change.pat-depends",null,c,this.onChange.bind(this)),d()(e).on("keyup.pat-depends",null,c,this.onChange.bind(this))}},async onReset(e){const t=d()(e.target).data("patDepends.dependents");await r.Z.timeout(50);for(let a of t)e.data=a,this.onChange(e)},updateModal(){this.$modal.length&&d()(document).trigger("pat-update",{pattern:"depends"})},enable(){this.$el.is(":input")?this.$el[0].disabled=null:this.$el.is("a")&&this.$el.off("click.patternDepends"),this.$el.hasClass("pat-autosuggest")&&this.$el.findInclusive("input.pat-autosuggest").trigger("pat-update",{pattern:"depends",enabled:!0}),this.$el.removeClass("disabled")},disable(){this.$el.is(":input")?this.$el[0].disabled="disabled":this.$el.is("a")&&this.$el.on("click.patternDepends",(e=>e.preventDefault())),this.$el.hasClass("pat-autosuggest")&&this.$el.findInclusive("input.pat-autosuggest").trigger("pat-update",{pattern:"depends",enabled:!1}),this.$el.addClass("disabled")},onChange(e){const t=e.data.handler,a=e.data.options,n=e.data.dependent,i=d()(n),o=t.evaluate();switch(a.action){case"show":r.Z.hideOrShow(i,o,a,this.name),this.updateModal();break;case"enable":o?this.enable():this.disable();break;case"both":r.Z.hideOrShow(i,o,a,this.name),this.updateModal(),o?this.enable():this.disable()}}}),a(95474),a(57887);var x=a(72513),$=a.n(x),_=a(62832),k=a(17544),T=a.n(k);const O=u.Z.getLogger("pat-contentloader");i.Z.extend({name:"contentloader",trigger:".pat-contentloader",parser:"mockup",defaults:{url:null,content:null,trigger:"click",target:null,template:null,dataType:"html"},init:function(){var e=this;"el"===e.options.url&&"A"===e.$el[0].tagName&&(e.options.url=e.$el.attr("href")),e.$el.removeClass("loading-content"),e.$el.removeClass("content-load-error"),"immediate"===e.options.trigger?e._load():e.$el.on(e.options.trigger,(function(t){t.preventDefault(),e._load()}))},_load:function(){var e=this;e.$el.addClass("loading-content"),e.options.url?e.loadRemote():e.loadLocal()},loadRemote:function(){var e=this;$().ajax({url:e.options.url,dataType:e.options.dataType,success:function(t){var a;if("html"===e.options.dataType)-1!==t.indexOf("<html")&&(t=_.Z.parseBodyTag(t)),a=$()("<div>"+t+"</div>");else if(-1!==e.options.dataType.indexOf("json")){t.constructor===Array&&1===t.length&&(t=t[0]);try{a=$()(T().template(e.options.template)(t))}catch(t){return e.$el.removeClass("loading-content"),e.$el.addClass("content-load-error"),void O.warn("error rendering template. pat-contentloader will not work")}}null!==e.options.content&&(a=a.find(e.options.content)),e.loadLocal(a)},error:function(){e.$el.removeClass("loading-content"),e.$el.addClass("content-load-error")}})},loadLocal:function(e){var t=this;if(!e&&null===t.options.content)return t.$el.removeClass("loading-content"),t.$el.addClass("content-load-error"),void O.warn("No selector configured");var a=t.$el;if(null!==t.options.target&&0===(a=$()(t.options.target)).length)return t.$el.removeClass("loading-content"),t.$el.addClass("content-load-error"),void O.warn("No target nodes found");e||(e=$()(t.options.content).clone()),e.length?(e.show(),a.replaceWith(e),n.Z.scan(e)):a.empty(),t.$el.removeClass("loading-content"),t.emit("loading-done")}}),i.Z.extend({name:"cookietrigger",trigger:".pat-cookietrigger",parser:"mockup",isCookiesEnabled:function(){var e="areYourCookiesEnabled=0";document.cookie=e;var t=document.cookie;return-1===t.indexOf(e)?0:(e="areYourCookiesEnabled=1",document.cookie=e,-1===(t=document.cookie).indexOf(e)?0:(document.cookie="areYourCookiesEnabled=; expires=Thu, 01-Jan-70 00:00:01 GMT",1))},showIfCookiesDisabled:function(){this.isCookiesEnabled()?s.Z.hide(this.el):s.Z.show(this.el)},init:function(){this.showIfCookiesDisabled()}}),a(62027),i.Z.extend({name:"formautofocus",trigger:".pat-formautofocus",parser:"mockup",defaults:{condition:"div.error",target:"div.error :input:not(.formTabs):visible:first",always:":input:not(.formTabs):visible:first"},init(){0!==$()(this.options.condition,this.$el).length?$()(this.options.target,this.$el).focus():$()(this.options.always,this.$el).focus()}});var A=a(10354),E=(i.Z.extend({name:"formunloadalert",trigger:".pat-formunloadalert",parser:"mockup",_changed:!1,_suppressed:!1,defaults:{message:(0,A.Z)("Discard changes? If you click OK, any changes you have made will be lost."),changingEvents:"change keyup paste",changingFields:"input,select,textarea,fileupload"},init(){var e=this;if(e.$el.is("form")){$()(e.options.changingFields,e.$el).on(e.options.changingEvents,(t=>{e._changed=!0}));var t=e.$el.parents(".plone-modal");0!==t.length?t.on("hide",(function(a){var n=t.data("patternPloneModal");n&&(n._suppressHide=e._handleUnload.call(e,a))})):$()(window).on("beforeunload",(t=>e._handleUnload(t))),e.$el.on("submit",(t=>{e._suppressed=!0}))}},_handleUnload(e){var t=this;if(t._suppressed)t._suppressed=!1;else if(t._changed){var a=t.options.message;return t._handleMsg(e,a),$()(window).trigger("messageset"),a}},_handleMsg(e,t){(e||window.event).returnValue=t}}),i.Z.extend({name:"livesearch",trigger:".pat-livesearch",parser:"mockup",timeout:null,active:!1,results:null,selectedItem:-1,resultsClass:"livesearch-results list-group d-none",defaults:{ajaxUrl:null,defaultSortOn:"",perPage:7,quietMillis:350,minimumInputLength:4,inputSelector:'input[type="text"]',itemTemplate:'<li class="search-result <%- state %> list-group-item list-group-item-action"><a class="text-reset text-decoration-none" href="<%- url %>"><div class="row"><div class="col info"><div class="heading"><%- title %></div><div class="description"><%- description %></div></div><% if (img_tag) { %> <div class="col img"><%= img_tag %></div><% } %> </div></a></li>'},doSearch:function(e){var t=this;t.active=!0,t.render(),t.$el.addClass("searching");var a=t.$el.serialize();void 0===e&&(e=1);var n=function(){var e=location.search,a=e.indexOf("sort_on");if(-1===a){var n=$()("#search-results");return n.length>0?n.attr("data-default-sort"):t.options.defaultSortOn}var i=e.substring(a);return i=(i=i.split("&")[0]).split("=")[1]}();$().ajax({url:t.options.ajaxUrl+"?"+a+"&page="+e+"&perPage="+t.options.perPage+"&sort_on="+n,dataType:"json"}).done((function(n){t.results=n,t.page=e,a!==t.$el.serialize()&&t.doSearch()})).fail((function(){t.results={items:[{url:"",title:(0,A.Z)("Error"),description:(0,A.Z)("There was an error searching"),state:"error",error:!1}],total:1},t.page=1})).always((function(){t.active=!1,t.selectedItem=-1,t.$el.removeClass("searching"),t.render()}))},render:function(){var e=this;if(e.$results.empty(),e.active?e.$results.append($()('<li class="searching list-group-item">'+(0,A.Z)("searching")+"</li>")):null===e.results?e.$results.append($()('<li class="no-results no-search list-group-item">'+(0,A.Z)("enter search phrase")+"</li>")):0===e.results.total?e.$results.append($()('<li class="no-results list-group-item">'+(0,A.Z)("no results found")+"</li>")):e.$results.append($()('<li class="results-summary list-group-item">'+(0,A.Z)("found")+" "+e.results.total+" "+(0,A.Z)("results")+"</li>")),null!==e.results){var t=T().template(e.options.itemTemplate);T().each(e.results.items,(function(a,n){var i=$()(t($().extend({_t:A.Z},a)));i.attr("data-url",a.url).on("click",(function(){a.error||(window.location=a.url)})),n===e.selectedItem&&i.addClass("active"),e.$results.append(i)}));var a={};if(e.page>1){var n=$()('<a href="#" class="prev position-absolute ps-3 start-0">'+(0,A.Z)("Previous")+"</a>");n.click((function(t){e.disableHiding=!0,t.preventDefault(),e.doSearch(e.page-1)})),a.prev=n}if(e.page*e.options.perPage<e.results.total){var i=$()('<a href="#" class="next position-absolute pe-3 end-0">'+(0,A.Z)("Next")+"</a>");i.click((function(t){e.disableHiding=!0,t.preventDefault(),e.doSearch(e.page+1)})),a.next=i}if(a.next||a.prev){var o=$()('<li class="list-group-item load-more d-flex justify-content-center"><span class="page">'+e.page+"</span></li>");a.prev&&o.prepend(a.prev),a.next&&o.append(a.next),e.$results.append(o)}}e.show()},show:function(){this.$el.addClass("livesearch-active"),this.$results.show()},hide:function(){this.$results.hide(),this.$el.removeClass("livesearch-active")},init:function(){var e=this;e.$input=e.$el.find(e.options.inputSelector),e.$input.off("focusout").on("focusout",(function(){setTimeout((function(){e.disableHiding?(e.disableHiding=!1,e.$input.focus()):e.hide()}),200)})).off("focusin").on("focusin",(function(){e.onceFocused?s.Z.is_visible(e.$results[0])||e.render():(e.onceFocused=!0,e.$input.val().length>=e.options.minimumInputLength&&e.doSearch())})).attr("autocomplete","off").off("keyup").on("keyup",(function(t){var a=t.keyCode||t.which;if(27===a)return e.$input.val(""),void e.hide();if(e.results&&e.results.items&&e.results.items.length>0){if(13===a)return void(-1!==e.selectedItem&&(window.location=e.results.items[e.selectedItem].url));if(38===a)return void(-1!==e.selectedItem&&(e.selectedItem-=1,e.render()));if(40===a)return void(e.selectedItem<e.results.items.length&&(e.selectedItem+=1,e.render()))}null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.active||(e.$input.val().length>=e.options.minimumInputLength?e.timeout=setTimeout((function(){e.doSearch()}),e.options.quietMillis):(e.results=null,e.render()))})),$()("#sorting-options a").click((function(t){t.preventDefault(),e.onceFocused=!1})),e.$results=$()('<ul class="'+e.resultsClass+'"></ul>').hide().insertAfter(e.$el)}}),i.Z.extend({name:"markspeciallinks",trigger:".pat-markspeciallinks",parser:"mockup",defaults:{external_links_open_new_window:!1,mark_special_links:!0},protocol_icon_map:{https:"link-45deg",http:"link-45deg",ftp:"cloud-download",callto:"telephone",bitcoin:"credit-card",geo:"geo-alt",im:"chat",irc:"chat",ircs:"chat",magnet:"link-45deg",mailto:"envelope",mms:"chat",news:"newspaper",nntp:"newspaper",openpgp4fpr:"key",sip:"telephone",sms:"chat",smsto:"chat",ssh:"lock",tel:"telephone",urn:"link-45deg",webcal:"calendar",wtai:"telephone",xmpp:"chat"},async init(){let e=!1;"string"==typeof this.options.external_links_open_new_window?e="true"===this.options.external_links_open_new_window.toLowerCase():"boolean"==typeof this.options.external_links_open_new_window&&(e=this.options.external_links_open_new_window);let t=!1;"string"==typeof this.options.mark_special_links?t="true"===this.options.mark_special_links.toLowerCase():"boolean"==typeof this.options.mark_special_links&&(t=this.options.mark_special_links),t&&a.e(94023).then(a.bind(a,94023));const n=window.location.protocol+"//"+window.location.host,i=this.el.querySelectorAll(`a[href]:not(.link-plain):not([href^="${n}"]):not([href^="#"])`);for(const a of i){let n;try{n=new URL(a.getAttribute("href"))}catch(e){continue}if(e&&n.protocol.startsWith("http")&&(a.setAttribute("target","_blank"),a.setAttribute("rel","noopener")),t){const e=this.protocol_icon_map[n.protocol.split(":")[0]];if(e){const t=await _.Z.resolveIcon(e),n=s.Z.create_from_string(t);n.querySelector("svg").classList.add("markspeciallinks__icon"),a.parentNode.insertBefore(n,a)}}}}}),a(43067));i.Z.extend({name:"navigationmarker",trigger:".pat-navigationmarker",parser:"mockup",init:function(){const e=document.body.dataset.portalUrl;var t=document.querySelector('head link[rel="canonical"]').href||window.location.href;$()("a",this.$el).each((function(){var a=this.href.replace("/view","");if(-1!==t.indexOf(a)){var n=$()(this).parent(),i=n.find("> input");i.length&&(i[0].checked=!0);for(var o=t.split("/"),r=a.split("/"),s=!1,l=0,c=r.length;l<c;l++)s=!1,r[l]===o[l]&&(s=!0);a===e&&t!==e&&(s=!1),s&&n.addClass("inPath"),t===a&&n.addClass("current")}}))}});i.Z.extend({name:"passwordstrength",trigger:".pat-passwordstrength",parser:"mockup",defaults:{zxcvbn:"//cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js"},init:function(){var e,t,a=this.el,n=(e='<div class="progress my-3"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div></div>',t=document.createElement("div"),e=e.trim(),t.innerHTML=e,t.firstElementChild),i=n.firstChild,o={0:"bg-transparent",1:"bg-danger",2:"bg-warning",3:"bg-warning",4:"bg-success"};function r(){var e=0;a.value.length>0&&(e=Math.max(1,window.zxcvbn(a.value,[].map.call((a.form||{elements:[]}).elements,(function(e){return e===a?null:e.value||null})).filter((function(e){return e}))).score));var t="";0!=e&&(t=" w-"+25*e),i.className="progress-bar"+t+" "+o[e],i.setAttribute("aria-valuenow",25*e)}a.parentNode.insertBefore(n,a.nextSibling),a.onkeyup=function(e){r()},"function"!=typeof window.zxcvbn&&function(e){var t,a,n,i=document.getElementsByTagName("script");for(a=0;a<i.length;a++)if(-1!==i[a].src.indexOf(e))return;(t=document.createElement("script")).type="text/javascript",t.async=!0,t.src=e,(n=document.getElementsByTagName("head")[0]).insertBefore(t,n.firstChild)}(this.options.zxcvbn),r()}}),i.Z.extend({name:"preventdoublesubmit",trigger:".pat-preventdoublesubmit",parser:"mockup",defaults:{message:(0,A.Z)("You already clicked the submit button. Do you really want to submit this form again?"),guardClassName:"submitting",optOutClassName:"allowMultiSubmit"},init(){var e=this;e.$el.is("form")&&$()(":submit",e.$el).click((function(){if($()(":submit").removeAttr("clicked"),$()(this).attr("clicked","clicked"),$()(this).hasClass(e.options.guardClassName)&&!$()(this).hasClass(e.options.optOutClassName))return e._confirm.call(e);$()(this).addClass(e.options.guardClassName)}))},_confirm(){return window.confirm(this.options.message)}});const D=u.Z.getLogger("pat-manage-portlets");i.Z.extend({name:"manage-portlets",trigger:".pat-manage-portlets",parser:"mockup",messageTimeout:0,submitTimeout:0,switchTimeout:0,isModal:!1,dirty:!1,init:async function(){(await Promise.resolve().then(a.t.bind(a,50834,23))).default;var e=this,t=e.$el.parents(".plone-modal");if(1===t.length){this.isModal=!0;var n=t.data("pattern-plone-modal");n.on("hide",(function(){e.dirty&&window.location.reload()})),e.loading=n.loading}else e.loading=_.Z.loading;e.bind()},bind:function(){var e=this;e.setupAddDropdown(),e.setupSwitchPortletManager(),e.setupSavePortletsSettings(),e.setupPortletEdit(),e.isModal&&$()(".portlets-link-to-parent").off("click").click((function(t){e.loading.show();var a=$()(this);t.preventDefault(),$().ajax({url:a.attr("href"),data:{ajax_load:1}}).done((function(t){var n=$()(_.Z.parseBodyTag(t)),i=a.parents(".plone-modal-body");i.empty();var o=$()("#content",n),r=$()("h1",o);$()(".plone-modal-header",i.parent()).find("h2").html(r.html()),r.remove(),i.append(o),e.rebind($()(".pat-manage-portlets",o),!0),e.loading.hide()}))}))},rebind:function(e,t){D.info("rebind"),$().contains(document,this.$el[0])&&this.$el.replaceWith(e),this.$el=e,this.bind(),t||this.statusMessage(),this.dirty=!0},statusMessage:function(e){void 0===e&&(e=(0,A.Z)("Portlet changes saved"));var t=this,a=$()("#portlet-message");0===a.length&&(a=$()('<div class="alert alert-info" role="alert" id="portlet-message" style="opacity: 0"></div>'),t.isModal?$()(".plone-modal-body:visible").prepend(a):$()("#content-core").prepend(a)),a.html('<strong class="mr-1">'+(0,A.Z)("Info")+"</strong>"+e),clearTimeout(t.messageTimeout),a.fadeTo(500,1),t.messageTimeout=window.setTimeout((function(){a.fadeTo(500,.6)}),3e3)},showEditPortlet:function(e){D.info("show edit portlet in modal");var t=this,a=$()("<a/>");$()("body").append(a);var n=new E.Z(a,{ajaxUrl:e,actionOptions:{displayInModal:!1,reloadWindowOnClose:!1,isForm:!0,onSuccess:function(e,a){n.hide();var i=$()(_.Z.parseBodyTag(a));t.rebind($()("#"+t.$el.attr("id"),i).eq(0)),t.statusMessage((0,A.Z)("Portlet added"))}}});n.on("after-render",(function(){var e=$()("#"+t.$el.attr("id"),n.$raw);1===e.length&&(e=e.clone(),n.on("shown",(function(){n.hide()})),t.rebind(e),t.statusMessage((0,A.Z)("Portlet added")))})),n.show()},setupPortletEdit:function(){var e=this;$()(".managedPortlet .portletHeader > a",e.$el).click((function(t){t.preventDefault(),e.showEditPortlet($()(this).attr("href"))}))},setupAddDropdown:function(){var e=this;$()(".add-portlet",e.$el).change((function(t){t.preventDefault();var a=$()(this),n=a.parents("form"),i=a.attr("data-context-url")+a.val()+"?_authenticator="+$()('[name="_authenticator"]').val()+"&referer="+$()('[name="referer"]',n).val();e.showEditPortlet(i)}))},setupSavePortletsSettings:function(){var e=this;$()(".portlets-settings, form.portlet-action",e.$el).ajaxForm({beforeSubmit:function(){e.loading.show()},success:function(t){e.loading.hide(),D.info("form submit");var a=$()(_.Z.parseBodyTag(t));e.rebind($()("#"+e.$el.attr("id"),a).eq(0))}}),$()(".portlets-settings select",e.$el).change((function(){D.info("select change"),clearTimeout(e.submitTimeout),e.submitTimeout=window.setTimeout((function(){$()(".portlets-settings",e.$el).submit()}),100)}))},setupSwitchPortletManager:function(){var e=this;$()("#main-container").on("change",".switch-portlet-manager",(function(t){t.stopImmediatePropagation(),D.info("switch portlet manager");var a=$()(this).val();clearTimeout(e.switchTimeout),e.switchTimeout=window.setTimeout((function(){e._reloadPortletManager(a)}),100)})),$()(window).on("popstate",(function(t){if(t.stopImmediatePropagation(),t&&void 0===t.state){var a=window.location.href;D.info("redirecting to: "+a),e._reloadPortletManager(a,!0)}}))},_reloadPortletManager:function(e,t){var a=this;a.loading.show(),$().get(e,{ajax_load:1}).done((function(n){var i=$()(_.Z.parseBodyTag(n));$()("#content").html(i),a.rebind($()(".pat-manage-portlets",i),!0),t?window.history.replaceState(null,null,e):window.history.pushState(null,null,e),a.loading.hide()}))}}),a(73918);var C=/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g;function S(e,t){for(e=e.toString(),t=t||2;e.length<t;)e="0"+e;return e}function N(e,t,a){var n=e.getDate(),i=e.getDay(),o=e.getMonth(),r=e.getFullYear(),s={d:n,dd:S(n),ddd:a.localization.shortWeekdays[i],dddd:a.localization.weekdays[i],m:o+1,mm:S(o+1),mmm:a.localization.shortMonths[o],mmmm:a.localization.months[o],yy:String(r).slice(2),yyyy:r};return t.replace(C,(function(e){return s.hasOwnProperty(e)?s[e]:e.slice(1,e.length-1)}))}function I(e,t,a){var n,i,o,r,s,l,c,d,p,u,h,m,f,g=e.find("select[name=rirtemplate]").val(),v=t.rtemplate[g],y=v.rrule,b=t.localization.rtemplate[g];for(r=0;r<v.fields.length;r++)switch((n=e.find("#"+v.fields[r])).attr("id")){case"ridailyinterval":"1"!==(h=n.find("input[name=ridailyinterval]").val())&&(y+=";INTERVAL="+h),b=h+" "+t.localization.dailyInterval2;break;case"riweeklyinterval":"1"!==(h=n.find("input[name=riweeklyinterval]").val())&&(y+=";INTERVAL="+h),b=h+" "+t.localization.weeklyInterval2;break;case"riweeklyweekdays":for(i="",o="",s=0;s<t.weekdays.length;s++)n.find(`input[name=riweeklyweekdays${s}]`).is(":checked")&&(i&&(i+=",",o+=", "),i+=t.weekdays[s],o+=t.localization.weekdays[s]);i&&(y+=";BYDAY="+i,b+=" "+t.localization.weeklyWeekdaysHuman+" "+o);break;case"rimonthlyinterval":"1"!==(h=n.find("input[name=rimonthlyinterval]").val())&&(y+=";INTERVAL="+h),b=h+" "+t.localization.monthlyInterval2;break;case"rimonthlyoptions":switch($()("input[name=rimonthlytype]:checked",e).val()){case"DAYOFMONTH":y+=";BYMONTHDAY="+(d=$()("select[name=rimonthlydayofmonthday]",e).val()),b+=", "+t.localization.monthlyDayOfMonth1Human+" "+d+" "+t.localization.monthlyDayOfMonth2;break;case"WEEKDAYOFMONTH":l=$()("select[name=rimonthlyweekdayofmonthindex]",e).val(),d=$()("select[name=rimonthlyweekdayofmonth]",e).val(),$().inArray(d,["MO","TU","WE","TH","FR","SA","SU"])>-1&&(y+=";BYDAY="+l+d,b+=", "+t.localization.monthlyWeekdayOfMonth1Human+" ",b+=" "+t.localization.orderIndexes[$().inArray(l,t.orderIndexes)],b+=" "+t.localization.monthlyWeekdayOfMonth2,b+=" "+t.localization.weekdays[$().inArray(d,t.weekdays)],b+=" "+t.localization.monthlyDayOfMonth2)}break;case"riyearlyinterval":"1"!==(h=n.find("input[name=riyearlyinterval]").val())&&(y+=";INTERVAL="+h),b=h+" "+t.localization.yearlyInterval2;break;case"riyearlyoptions":switch($()("input[name=riyearlyType]:checked",e).val()){case"DAYOFMONTH":y+=";BYMONTH="+(p=$()("select[name=riyearlydayofmonthmonth]",e).val()),y+=";BYMONTHDAY="+(d=$()("select[name=riyearlydayofmonthday]",e).val()),b+=", "+t.localization.yearlyDayOfMonth1Human+" "+t.localization.months[p-1]+" "+d;break;case"WEEKDAYOFMONTH":l=$()("select[name=riyearlyweekdayofmonthindex]",e).val(),d=$()("select[name=riyearlyweekdayofmonthday]",e).val(),y+=";BYMONTH="+(p=$()("select[name=riyearlyweekdayofmonthmonth]",e).val()),$().inArray(d,["MO","TU","WE","TH","FR","SA","SU"])>-1&&(y+=";BYDAY="+l+d,b+=", "+t.localization.yearlyWeekdayOfMonth1Human,b+=" "+t.localization.orderIndexes[$().inArray(l,t.orderIndexes)],b+=" "+t.localization.yearlyWeekdayOfMonth2,b+=" "+t.localization.weekdays[$().inArray(d,t.weekdays)],b+=" "+t.localization.yearlyWeekdayOfMonth3,b+=" "+t.localization.months[p-1],b+=" "+t.localization.yearlyWeekdayOfMonth4)}break;case"rirangeoptions":switch(e.find("input[name=rirangetype]:checked").val()){case"BYOCCURRENCES":y+=";COUNT="+(m=e.find("input[name=rirangebyoccurrencesvalue]").val()),b+=", "+t.localization.rangeByOccurrences1Human,b+=" "+m,b+=" "+t.localization.rangeByOccurrences2;break;case"BYENDDATE":y+=";UNTIL="+(f=(n=e.find("input[name=rirangebyenddatecalendar]")).val()).replaceAll("-","")+"T000000",!0===a&&(y+="Z"),b+=", "+t.localization.rangeByEndDateHuman,b+=" "+N(new Date(...f.split("-")),t.localization.longDateFormat,t)}}if(void 0!==e.ical.RDATE&&e.ical.RDATE.length>0){for(e.ical.RDATE.sort(),c=[],r=0;r<e.ical.RDATE.length;r++)""!==e.ical.RDATE[r]&&(u=parseInt(e.ical.RDATE[r].substring(0,4),10),p=parseInt(e.ical.RDATE[r].substring(4,6),10)-1,d=parseInt(e.ical.RDATE[r].substring(6,8),10),c.push(N(new Date(u,p,d),t.localization.longDateFormat,t)));0!==c.length&&(b=b+t.localization.including+" "+c.join("; "))}if(void 0!==e.ical.EXDATE&&e.ical.EXDATE.length>0){for(e.ical.EXDATE.sort(),c=[],r=0;r<e.ical.EXDATE.length;r++)""!==e.ical.EXDATE[r]&&(u=parseInt(e.ical.EXDATE[r].substring(0,4),10),p=parseInt(e.ical.EXDATE[r].substring(4,6),10)-1,d=parseInt(e.ical.EXDATE[r].substring(6,8),10),c.push(N(new Date(u,p,d),t.localization.longDateFormat,t)));0!==c.length&&(b=b+t.localization.except+" "+c.join("; "))}return y="RRULE:"+y,void 0!==e.ical.EXDATE&&""!==e.ical.EXDATE.join()&&(y=y+"\nEXDATE:"+(c=$().map(e.ical.EXDATE,(function(e){return 8===e.length&&(e+="T000000"),!0===a&&(e+="Z"),e})))),void 0!==e.ical.RDATE&&""!==e.ical.RDATE.join()&&(y=y+"\nRDATE:"+(c=$().map(e.ical.RDATE,(function(e){return 8===e.length&&(e+="T000000"),!0===a&&(e+="Z"),e})))),{result:y,description:b}}function j(e){var t={},a=e.indexOf(":"),n=e.substring(0,a);return t.value=e.substring(a+1),-1!==n.indexOf(";")?(a=n.indexOf(";"),t.parameters=n.substring(a+1),t.property=n.substring(0,a)):(t.parameters=null,t.property=n),t}function M(e){var t,a=[],n=e.split(",");for(t in n)n.hasOwnProperty(t)&&(-1!==n[t].indexOf("Z")?a.push(n[t].substring(0,15)):a.push(n[t]));return a}function Z(e,t,a,n){var i,o,r,s,l,c,d,p,u,h,m,f,g,v,y,b,w,x,_,k,T,O=[];if(e.ical=function(e){var t,a=[],n={},i=null;for((a=e.split("\n")).reverse();;){if(a.length>0){if(" "===(t=a.pop()).charAt(0)||"\t"===t.charAt(0)){i+=t;continue}}else t="";if(null!==i&&("RDATE"===(i=j(i)).property||"EXDATE"===i.property?n[i.property]=M(i.value):n[i.property]=i.value),""===(i=t))break}return n}(a),void 0===e.ical.RRULE){if(O.push(t.localization.noRule),!n)return-1}else{for(i in f=(o=/INTERVAL=([0-9]+);?/.exec(e.ical.RRULE))?o[1]:"1",g=(o=/BYDAY=([^;]+);?/.exec(e.ical.RRULE))?o[1]:"",y=(o=/BYMONTHDAY=([^;]+);?/.exec(e.ical.RRULE))?o[1].split(","):null,v=(o=/BYMONTH=([^;]+);?/.exec(e.ical.RRULE))?o[1].split(","):null,b=(o=/COUNT=([0-9]+);?/.exec(e.ical.RRULE))?o[1]:null,w=(o=/UNTIL=([0-9T]+);?/.exec(e.ical.RRULE))?o[1]:null,(o=/BYSETPOS=([^;]+);?/.exec(e.ical.RRULE))&&O.push(t.localization.bysetpos),r="",s=null,t.rtemplate)t.rtemplate.hasOwnProperty(i)&&(l=t.rtemplate[i],0===e.ical.RRULE.indexOf(l.rrule)&&e.ical.RRULE.length>r.length&&(r=e.ical.RRULE,s=i));if(r)l=t.rtemplate[s];else{for(l in t.rtemplate)if(t.rtemplate.hasOwnProperty(l)){l=t.rtemplate[l];break}O.push(t.localization.noTemplateMatch)}for(i=0;i<l.fields.length;i++)switch((h=e.find("#"+l.fields[i])).attr("id")){case"ridailyinterval":h.find("input[name=ridailyinterval]").val(f);break;case"riweeklyinterval":h.find("input[name=riweeklyinterval]").val(f);break;case"riweeklyweekdays":if(0===g.length)break;for(g=g.split(","),c=0;c<t.weekdays.length;c++)0!==(d=h.find(`input[name="riweeklyweekdays${c}"]`)).length&&(x=t.weekdays[c],d.attr("checked",g.includes(x)));break;case"rimonthlyinterval":h.find("input[name=rimonthlyinterval]").val(f);break;case"rimonthlyoptions":var A="DAYOFMONTH";for(y&&(A="DAYOFMONTH",y.length>1&&(O.push(t.localization.multipleDayOfMonth),y=y[0]),h.find("select[name=rimonthlydayofmonthday]").val(y)),g&&(A="WEEKDAYOFMONTH",-1!==g.indexOf(",")&&(O.push(t.localization.multipleDayOfMonth),g=g.split(",")[0]),"+"!==(p=g.slice(0,-2)).charAt(0)&&"-"!==p.charAt(0)&&(p="+"+p),T=g.slice(-2),h.find("select[name=rimonthlyweekdayofmonthindex]").val(p),h.find("select[name=rimonthlyweekdayofmonth]").val(T)),u=h.find("input[name=rimonthlytype]"),p=0;p<u.length;p++)m=u[p],$()(m).attr("checked",m.value===A);break;case"riyearlyinterval":h.find("input[name=riyearlyinterval]").val(f);break;case"riyearlyoptions":var E="DAYOFMONTH";for(y&&(E="DAYOFMONTH",y.length>1&&(O.push(t.localization.multipleDayOfMonth),y=y[0]),h.find("select[name=riyearlydayofmonthmonth]").val(v),h.find("select[name=riyearlydayofmonthday]").val(y)),g&&(E="WEEKDAYOFMONTH",-1!==g.indexOf(",")&&(O.push(t.localization.multipleDayOfMonth),g=g.split(",")[0]),"+"!==(p=g.slice(0,-2)).charAt(0)&&"-"!==p.charAt(0)&&(p="+"+p),T=g.slice(-2),h.find("select[name=riyearlyweekdayofmonthindex]").val(p),h.find("select[name=riyearlyweekdayofmonthday]").val(T),h.find("select[name=riyearlyweekdayofmonthmonth]").val(v)),u=h.find("input[name=riyearlyType]"),p=0;p<u.length;p++)m=u[p],$()(m).attr("checked",m.value===E);break;case"rirangeoptions":var D="NOENDDATE";for(b&&(D="BYOCCURRENCES",h.find("input[name=rirangebyoccurrencesvalue]").val(b)),w&&(D="BYENDDATE",d=h.find("input[name=rirangebyenddatecalendar]"),k=w.slice(0,4),_=w.slice(4,6),x=w.slice(6,8),d.val(`${k}-${_}-${x}`)),u=h.find("input[name=rirangetype]"),p=0;p<u.length;p++)m=u[p],$()(m).attr("checked",m.value===D)}}var C=e.find("#messagearea");return 0!==O.length?(C.text(t.localization.unsupportedFeatures+" "+O.join("; ")),C.show(),1):(C.text(""),C.hide(),0)}const z=function(e,t){var a,n=this,i=[],o=(new Date).toISOString().substring(0,10);for(let t=0;t<7;t++)(a=t+e.firstDay)>6&&(a-=7),i.push(a);function r(t){n.$modalForm.find(".rifield").hide();var a=t.val();if(a)for(let t of e.rtemplate[a].fields)n.$modalForm.find(`#${t}`).show()}function s(e){e.preventDefault(),void 0===n.$modalForm.ical.EXDATE&&(n.$modalForm.ical.EXDATE=[]),n.$modalForm.ical.EXDATE.push(this.attributes.date.value);var t=$()(this);t.addClass("exdate"),t.parent().parent().addClass("exdate"),t.off("click").on("click",l)}function l(e){e.preventDefault(),n.$modalForm.ical.EXDATE.splice($().inArray(this.attributes.date.value,n.$modalForm.ical.EXDATE),1);var t=$()(this);t.removeClass("exdate"),t.parent().parent().removeClass("exdate"),t.off("click").on("click",s)}function c(e){e.preventDefault(),n.$modalForm.ical.RDATE.splice($().inArray(this.attributes.date.value,n.$modalForm.ical.RDATE),1),$()(this).parent().parent().hide("slow",(function(){$()(this).remove()}))}function d(t){t.preventDefault();var a=n.$modalForm.find(".riaddoccurrence input#adddate").val();void 0===n.$modalForm.ical.RDATE&&(n.$modalForm.ical.RDATE=[]);var i=n.$modalForm.find(".riaddoccurrence div.alert");if(i.text(""),i.hide(),-1===$().inArray(a,n.$modalForm.ical.RDATE)){n.$modalForm.ical.RDATE.push(a);var o=$()(`<div class="d-flex justify-content-between occurrence rdate">\n                <span class="rdate">\n                    ${a},\n                    <span class="rlabel">${e.localization.additionalDate}</span>\n                </span>\n                <span class="action">\n                    <a date="${a}" href="#" class="btn btn-sm btn-secondary rdate" >\n                        ${e.icons.remove}\n                    </a>\n                </span>\n                </div>`);o.hide(),n.$modalForm.find("div.rioccurrences").prepend(o),o.slideDown(),o.find("a.rdate").on("click",c)}else i.text(e.localization.alreadyAdded).show()}function p(t,a,i,o){var r,d;r=o?n.display:n.$modalForm,(d=r.find(".rioccurrences")).hide();var u={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),rrule:a,format:e.localization.longDateFormat,start:i};$().ajax({url:e.ajaxURL,async:!1,type:"post",dataType:"json",contentType:e.ajaxContentType,cache:!1,data:u,success:function(n,i,u){var h,m,f,g,v;n.readOnly=o,n.localization=e.localization,n.icons=e.icons;for(let t of n.occurrences)m=t.date,f=parseInt(m.substring(0,4),10),g=parseInt(m.substring(4,6),10)-1,v=parseInt(m.substring(6,8),10),t.formattedDate=N(new Date(f,g,v),e.localization.longDateFormat,e);h=T().template('<div class="rioccurrences">\n    <% occurrences.forEach(function(occurrence) { %>\n        <div class="d-flex justify-content-between occurrence <%= occurrence.type %>">\n            <span>\n                <%= occurrence.formattedDate %>\n                <% if(occurrence.type === "start") { %>\n                    <span class="rlabel"><%= localization.recurrenceStart %></span>\n                <% } %>\n                <% if(occurrence.type === "rdate") { %>\n                    <span class="rlabel"><%= localization.additionalDate %></span>\n                <% } %>\n            </span>\n            <% if(!readOnly) { %>\n                <span class="action">\n                    <% if(occurrence.type === "rrule") { %>\n                        <a date="<%= occurrence.date %>" href="#"\n                           class="btn btn-sm btn-outline-secondary <%= occurrence.type %>" title="<%= localization.exclude %>">\n                            <%= icons.exclude %>\n                        </a>\n                    <% } %>\n                    <% if(occurrence.type === "rdate") { %>\n                        <a date="<%= occurrence.date %>" href="#"\n                           class="btn btn-sm btn-outline-secondary <%= occurrence.type %>" title="<%= localization.remove %>">\n                            <%= icons.remove %>\n                        </a>\n                    <% } %>\n                    <% if(occurrence.type === "exdate") { %>\n                        <a date="<%= occurrence.date %>" href="#"\n                           class="btn btn-sm btn-outline-secondary <%= occurrence.type %>" title="<%= localization.include %>">\n                           <%= icons.include %>\n                        </a>\n                    <% } %>\n                </span>\n            <% } %>\n        </div>\n    <% }) %>\n    <div class="batching">\n        <% for(var index=0; index < batch.batches.length; index++) { %>\n            <span <% if(index === batch.currentBatch) { %>class="current"<% } %>>\n                <a href="#" start="<%= batch.batches[index][0] %>">[<%= batch.batches[index][0] %> - <%= batch.batches[index][1] %>]</a>\n            </span>\n        <% } %>\n    </div>\n</div>\n')(n),d.replaceWith(h),r.find(".rioccurrences .batching a").on("click",(function(e){e.stopPropagation(),e.preventDefault(),p(t,a,this.attributes.start.value,o)})),o||(r.find(".rioccurrences .action a.rrule").on("click",s),r.find(".rioccurrences .action a.exdate").on("click",l),r.find(".rioccurrences .action a.rdate").on("click",c)),d.show()},error:function(e,t){alert(t)}})}function u(e){var t=$()(e);return t.length||(t=$()("#"+e)),t.length||(t=$()("input[name='"+e+"']")),t}function h(){var t,a,n,i,o=null;if(e.startField){if(!(t=u(e.startField)).length)return null;""===(o=t.val())&&(o=t.text()),"string"==typeof o&&(o=o.replace(" ","T")),o=new Date(o)}else if(e.startFieldYear&&e.startFieldMonth&&e.startFieldDay){if(a=u(e.startFieldYear),n=u(e.startFieldMonth),i=u(e.startFieldDay),!a.length&&!n.length&&!i.length)return null;o=new Date(a.val(),n.val()-1,i.val())}return null===o||isNaN(o)?null:o}function m(e){var t,a;return a=(t=n.$modalForm.find("input[name="+e+"]")).val(),isNaN(a)||-1!==a.toString().indexOf(".")||""===t.val()?null:a}function f(a){var i=I(a,e,!1);n.display.find("label[class=ridisplay]").text(e.localization.displayActivate+" "+i.description),t.val(i.result).trigger("change");var o=h();null!==o&&p(o,I(a,e,!1).result,0,!0),n.display.find('a[name="riedit"]').text(e.localization.edit_rules),n.display.find('a[name="ridelete"]').show()}function g(t){var a,i,o,r,s,l;if(a=h(),(r=n.$modalForm.find("#messagearea")).text(""),r.hide(),n.$modalForm.find(".riaddoccurrence div.alert").text("").hide(),"block"===n.$modalForm.find("#ridailyinterval").css("display")&&(!(o=m("ridailyinterval"))||o<1||o>1e3))return r.text(e.localization.noRepeatEvery).show(),!1;if("block"===n.$modalForm.find("#riweeklyinterval").css("display")&&(!(o=m("riweeklyinterval"))||o<1||o>1e3))return r.text(e.localization.noRepeatEvery).show(),!1;if("block"===n.$modalForm.find("#rimonthlyinterval").css("display")){if(!(o=m("rimonthlyinterval"))||o<1||o>1e3)return r.text(e.localization.noRepeatEvery).show(),!1;if(0===n.$modalForm.find("#rimonthlyoptions input:checked").length)return r.text(e.localization.noRepeatOn).show(),!1}if("block"===n.$modalForm.find("#riyearlyinterval").css("display")){if(!(o=m("riyearlyinterval"))||o<1||o>1e3)return r.text(e.localization.noRepeatEvery).show(),!1;if(0===n.$modalForm.find("#riyearlyoptions input:checked").length)return r.text(e.localization.noRepeatOn).show(),!1}if(n.$modalForm.find('input[value="BYOCCURRENCES"]:visible:checked').length>0&&(!(o=m("rirangebyoccurrencesvalue"))||o<1||o>1e3))return r.text(e.localization.noEndAfterNOccurrences).show(),!1;if(n.$modalForm.find('input[value="BYENDDATE"]:visible:checked').length>0){if(l=(s=n.$modalForm.find("input[name=rirangebyenddatecalendar]")).val(),l=new Date(l),!(i=isNaN(l)||""===s.val()?null:l))return r.text(e.localization.noEndDate).show(),!1;if(i<a)return r.text(e.localization.pastEndDate).show(),!1}return!0}function v(e){e.preventDefault(),g(n.$modalForm)&&(n.modal.hide(),f(n.$modalForm),n.$modalForm=null)}function y(e){e.preventDefault(),n.modal.hide(),n.$modalForm=null}function b(){var t;t=h(),g()&&p(t,I(n.$modalForm,e,!1).result,0,!1)}e={...e,orderIndexes:["+1","+2","+3","+4","-1"],weekdays:["SU","MO","TU","WE","TH","FR","SA"],orderedWeekdays:i},n.display=$()(T().template('<div class="ridisplay">\n    <div class="rimain">\n        <% if(!readOnly) { %>\n            <a class="btn btn-primary" name="riedit" href="#"><%= localization.add_rules %></a>\n            <a class="btn btn-danger" name="ridelete" style="display:none" href="#"><%= localization.delete_rules %></a>\n        <% } %>\n        <label class="ridisplay"><%= localization.displayUnactivate %></label>\n    </div>\n<div class="rioccurrences" style="display:none"></div>\n')(e));var w=$()(T().template('<div class="riform">\n    <form>\n        <h1><%= localization.title %></h1>\n        <div id="messagearea" class="alert alert-danger d-none"> </div>\n        <div id="rirtemplate" class="mb-2 row">\n            <label class="col-4 col-form-label" for="<%= name %>rtemplate" class="label">\n                <%= localization.recurrenceType %>\n            </label>\n            <div class="col-8">\n                <select id="rirtemplate" name="rirtemplate" class="form-select form-select-sm">\n                    <% Object.keys(rtemplate).forEach(function(val, idx) { %>\n                        <option value="<%= val %>"><%= localization.rtemplate[val] %></value>\n                    <% }) %>\n                </select>\n            </div>\n        </div>\n        <div id="riformfields" class="mb-2">\n            <div id="ridailyinterval" class="rifield row">\n                <label class="col-4 col-form-label" for="<%= name %>dailyinterval">\n                    <%= localization.dailyInterval1 %>\n                </label>\n                <div class="col-8">\n                    <input class="form-control form-control-sm w-auto float-start me-3" type="text" size="2"\n                        value="1"\n                        name="ridailyinterval"\n                        id="<%= name %>dailyinterval" />\n                    <%= localization.dailyInterval2 %>\n                </div>\n            </div>\n\n            <div id="riweeklyinterval" class="rifield row">\n                <label class="col-4 col-form-label" for="<%= name %>weeklyinterval">\n                    <%= localization.weeklyInterval1 %>\n                </label>\n                <div class="col-8">\n                    <input class="form-control form-control-sm w-auto float-start me-3" type="text" size="2"\n                        value="1"\n                        name="riweeklyinterval"\n                        id="<%= name %>weeklyinterval"/>\n                    <%= localization.weeklyInterval2 %>\n                </div>\n            </div>\n\n            <div id="riweeklyweekdays" class="rifield row">\n                <label class="col-4 col-form-label" for="<%= name %>weeklyinterval"><%= localization.weeklyWeekdays %></label>\n                <div class="col-8">\n                    <div class="row flex-nowrap">\n                    <% orderedWeekdays.forEach(function(weekday, idx) { %>\n                        <div class="riweeklyweekday col-auto">\n                            <div class="form-check">\n                                <input class="form-check-input" type="checkbox"\n                                    name="riweeklyweekdays<%=weekday %>"\n                                    id="<%= name %>weeklyWeekdays<%=weekday %>"\n                                    value="<%=weekday %>" />\n                                <label class="form-check-label" for="<%= name %>weeklyWeekdays<%= weekday %>"><%= localization.shortWeekdays[weekday] %></label>\n                            </div>\n                        </div>\n                    <% }) %>\n                    </div>\n                </div>\n            </div>\n\n            <div id="rimonthlyinterval" class="rifield row">\n                <label class="col-4 col-form-label" for="rimonthlyinterval"><%= localization.monthlyInterval1 %></label>\n                <div class="col-8">\n                    <input class="form-control form-control-sm w-auto float-start me-3" type="text" size="2"\n                        value="1"\n                        name="rimonthlyinterval"/>\n                    <%= localization.monthlyInterval2 %>\n                </div>\n            </div>\n\n            <div id="rimonthlyoptions" class="rifield row">\n                <label class="col-4 col-form-label" for="rimonthlytype"><%= localization.monthlyRepeatOn %></label>\n                <div class="col-8">\n                    <div class="row">\n                        <div class="col-auto">\n                            <div class="form-check">\n                                <input\n                                    class="form-check-input"\n                                    type="radio"\n                                    value="DAYOFMONTH"\n                                    name="rimonthlytype"\n                                    id="<%= name %>monthlytype:DAYOFMONTH" />\n                                <label class="form-check-label" for="<%= name %>monthlytype:DAYOFMONTH">\n                                    <%= localization.monthlyDayOfMonth1 %>\n                                </label>\n                            </div>\n                        </div>\n                        <div class="col-auto">\n                            <select class="form-select form-select-sm w-auto" name="rimonthlydayofmonthday" id="<%= name %>monthlydayofmonthday">\n                                <% [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31].forEach(function(val, idx) { %>\n                                    <option value="<%= val %>"><%= val %></option>\n                                <% }) %>\n                            </select>\n                        </div>\n                        <div class="col-auto">\n                            <%= localization.monthlyDayOfMonth2 %>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-auto">\n                            <div class="form-check">\n                                <input\n                                    class="form-check-input"\n                                    type="radio"\n                                    value="WEEKDAYOFMONTH"\n                                    name="rimonthlytype"\n                                    id="<%= name %>monthlytype:WEEKDAYOFMONTH" />\n                                <label class="form-check-label" for="<%= name %>monthlytype:WEEKDAYOFMONTH">\n                                    <%= localization.monthlyWeekdayOfMonth1 %>\n                                </label>\n                            </div>\n                        </div>\n                        <div class="col-auto">\n                            <select class="form-select form-select-sm w-auto float-start me-2" name="rimonthlyweekdayofmonthindex">\n                                <% orderIndexes.forEach(function(val, idx) { %>\n                                    <option value="<%= val %>"><%= localization.orderIndexes[idx] %></option>\n                                <% }) %>\n                            </select>\n                            <%= localization.monthlyWeekdayOfMonth2 %>\n                        </div>\n                        <div class="col-auto">\n                            <select class="form-select form-select-sm w-auto float-start me-2" name="rimonthlyweekdayofmonth">\n                                <% orderedWeekdays.forEach(function(val, idx) { %>\n                                    <option value="<%= val %>"><%= localization.weekdays[idx] %></option>\n                                <% }) %>\n                            </select>\n                            <%= localization.monthlyWeekdayOfMonth3 %>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div id="riyearlyinterval" class="rifield row">\n                <label class="col-4 col-form-label" for="riyearlyinterval"><%= localization.yearlyInterval1 %></label>\n                <div class="col-8">\n                    <input class="form-control form-control-sm w-auto float-start me-3" type="text" size="2"\n                        value="1"\n                        name="riyearlyinterval"/>\n                    <%= localization.yearlyInterval2 %>\n                </div>\n            </div>\n\n            <div id="riyearlyoptions" class="rifield row">\n                <label class="col-4 col-form-label" for="riyearlyType"><%= localization.yearlyRepeatOn %></label>\n                <div class="col-8">\n                    <div class="row">\n                        <div class="col-auto">\n                            <div class="form-check">\n                                <input\n                                    class="form-check-input"\n                                    type="radio"\n                                    value="DAYOFMONTH"\n                                    name="riyearlyType"\n                                    id="<%= name %>yearlytype:DAYOFMONTH" />\n                                <label class="form-check-label" for="<%= name %>yearlytype:DAYOFMONTH">\n                                    <%= localization.yearlyDayOfMonth1 %>\n                                </label>\n                            </div>\n                        </div>\n                        <div class="col-auto">\n                            <select class="form-select form-select-sm w-auto float-start me-2" name="riyearlydayofmonthmonth">\n                            <% localization.months.forEach(function(val, idx) { %>\n                                <option value="<%= idx + 1 %>"><%= val %></option>\n                            <% }) %>\n                            </select>\n                            <%= localization.yearlyDayOfMonth2 %>\n                        </div>\n                        <div class="col-auto">\n                            <select class="form-select form-select-sm w-auto float-start me-2" name="riyearlydayofmonthday">\n                                <% [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31].forEach(function(val, idx) { %>\n                                    <option value="<%= val %>"><%= val %></option>\n                                <% }) %>\n                            </select>\n                            <%= localization.yearlyDayOfMonth3 %>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="col-auto">\n                            <div class="form-check">\n                                <input\n                                    class="form-check-input"\n                                    type="radio"\n                                    value="WEEKDAYOFMONTH"\n                                    name="riyearlyType"\n                                    id="<%= name %>yearlytype:WEEKDAYOFMONTH"/>\n                                <label class="form-check-label" for="<%= name %>yearlytype:WEEKDAYOFMONTH">\n                                    <%= localization.yearlyWeekdayOfMonth1 %>\n                                </label>\n                            </div>\n                        </div>\n                        <div class="col-auto">\n                            <select class="form-select form-select-sm w-auto float-start me-2" name="riyearlyweekdayofmonthindex">\n                                <% orderIndexes.forEach(function(val, idx) { %>\n                                    <option value="<%= val %>"><%= localization.orderIndexes[idx] %></option>\n                                <% }) %>\n                            </select>\n                            <%= localization.yearlyWeekdayOfMonth2 %>\n                        </div>\n                        <div class="col-auto">\n                            <select class="form-select form-select-sm w-auto float-start me-2" name="riyearlyweekdayofmonthday">\n                                <% orderedWeekdays.forEach(function(val, idx) { %>\n                                    <option value="<%= val %>"><%= localization.weekdays[idx] %></option>\n                                <% }) %>\n                            </select>\n                            <%= localization.yearlyWeekdayOfMonth3 %>\n                        </div>\n                        <div class="col-auto">\n                            <select class="form-select form-select-sm w-auto float-start me-2" name="riyearlyweekdayofmonthmonth">\n                                <% localization.months.forEach(function(val, idx) { %>\n                                    <option value="<%= idx + 1 %>"><%= val %></option>\n                                <% }) %>\n                            </select>\n                            <%= localization.yearlyWeekdayOfMonth4 %>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div id="rirangeoptions" class="rifield row">\n                <label class="col-4 col-form-label"><%= localization.range %></label>\n                <div class="col-8 pt-2">\n                    <% if(hasRepeatForeverButton) { %>\n                    <div class="form-check">\n                        <input\n                            class="form-check-input"\n                            type="radio"\n                            value="NOENDDATE"\n                            name="rirangetype"\n                            id="<%= name %>rangetype:NOENDDATE"/>\n                        <label class="form-check-label" for="<%= name %>rangetype:NOENDDATE">\n                            <%= localization.rangeNoEnd %>\n                        </label>\n                    </div>\n                    <% } %>\n                    <div class="row mt-2">\n                        <div class="col-auto">\n                            <div class="form-check">\n                                <input\n                                    class="form-check-input"\n                                    type="radio"\n                                    checked="checked"\n                                    value="BYOCCURRENCES"\n                                    name="rirangetype"\n                                    id="<%= name %>rangetype:BYOCCURRENCES"/>\n                                <label class="form-check-label" for="<%= name %>rangetype:BYOCCURRENCES">\n                                    <%= localization.rangeByOccurrences1 %>\n                                </label>\n                            </div>\n                        </div>\n                        <div class="col-auto">\n                            <input\n                                class="form-control form-control-sm w-auto float-start me-3" type="text" size="3"\n                                value="7"\n                                name="rirangebyoccurrencesvalue" />\n                            <%= localization.rangeByOccurrences2 %>\n                        </div>\n                    </div>\n                    <div class="row mt-2">\n                        <div class="col-auto">\n                            <div class="form-check">\n                                <input\n                                    class="form-check-input"\n                                    type="radio"\n                                    value="BYENDDATE"\n                                    name="rirangetype"\n                                    id="<%= name %>rangetype:BYENDDATE"/>\n                                <label class="form-check-label" for="<%= name %>rangetype:BYENDDATE">\n                                    <%= localization.rangeByEndDate %>\n                                </label>\n                            </div>\n                        </div>\n                        <div class="col-auto">\n                            <input\n                                class="form-control form-control-sm w-auto" type="date"\n                                name="rirangebyenddatecalendar" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="rioccurrencesactions">\n            <div class="rioccurancesheader d-flex justify-content-between">\n                <h6><strong><%= localization.preview %></strong></h6>\n            </div>\n        </div>\n\n        <div class="rioccurrences"></div>\n\n        <div class="rioccurrencesactions">\n            <h6><strong><%= localization.addDate %></strong></h6>\n            <div class="riaddoccurrence ">\n                <div class="alert alert-danger d-none"></div>\n                <div class="input-group">\n                    <input class="form-control form-control-sm w-auto" type="date" name="adddate" id="adddate" />\n                    <input class="btn btn-sm btn-success" type="button" name="addaction" id="addaction" value="<%= localization.add %>">\n                </div>\n            </div>\n        </div>\n\n        <div class="ributtons">\n            <button\n                type="submit"\n                class="btn btn-secondary me-2 ricancelbutton <%= ributtonExtraClass %>"><%= localization.cancel %></button>\n            <button\n                type="submit"\n                class="btn btn-primary risavebutton <%= ributtonExtraClass %>"><%= localization.save %></button>\n        </div>\n    </form>\n</div>\n')(e));(w.appendTo("body"),w.hide(),n.modal=new E.Z(w,{content:"div.riform",buttons:".ributtons > button",modalSizeClass:"modal-lg",backdropOptions:{opacity:"0.5"}}),t.val())&&(-1===Z(w,e,t.val(),!1)?n.display.find("label[class=ridisplay]").text(e.localization.noRule):f(w));n.display.find('a[name="ridelete"]').on("click",(function(a){a.preventDefault(),n.display.find("label[class=ridisplay]").text(e.localization.displayUnactivate),t.val("").trigger("change"),n.display.find(".rioccurrences").hide(),n.display.find('a[name="riedit"]').text(e.localization.add_rules),n.display.find('a[name="ridelete"]').hide()})),n.display.find('a[name="riedit"]').on("click",(function(a){a.preventDefault(),n.modal.show(),n.$modalForm=$()("form",n.modal.$modalContent),function(t,a){var n,i,o;t?Z(a,e,t,!0):a.ical={RDATE:[],EXDATE:[]},null!==(n=h())?(a.find("select[name=rimonthlydayofmonthday]").val(n.getDate()),i=e.orderIndexes[Math.floor((n.getDate()-1)/7)],o=e.weekdays[n.getDay()],a.find("select[name=rimonthlyweekdayofmonthindex]").val(i),a.find("select[name=rimonthlyweekdayofmonth]").val(o),a.find("select[name=riyearlydayofmonthmonth]").val(n.getMonth()+1),a.find("select[name=riyearlydayofmonthday]").val(n.getDate()),a.find("select[name=riyearlyweekdayofmonthindex]").val(i),a.find("select[name=riyearlyweekdayofmonthday]").val(o),a.find("select[name=riyearlyweekdayofmonthmonth]").val(n.getMonth()+1),p(n,I(a,e,!1).result,0,!1),a.find("div.rioccurrencesactions").show()):a.find("div.rioccurrencesactions").hide(),r(a.find("select[name=rirtemplate]"))}(t.val(),n.$modalForm),function(){n.$modalForm.ical={RDATE:[],EXDATE:[]};var e=n.$modalForm.find("input[name=rirangebyenddatecalendar]");e.val()||e.val(o),n.$modalForm.find("input#addaction").on("click",d),n.$modalForm.find('select[name="rirtemplate"]').on("change",(function(){r($()(this))})),n.$modalForm.find("select").on("change",(function(){$()(this).parent().find("> input").trigger("click").trigger("change")})),n.$modalForm.find("input[name=rirangebyoccurrencesvalue]").on("change",(function(){$()(n).parent().find("input[name=rirangetype]").trigger("click").trigger("change")})),n.$modalForm.find("input[name=rirangebyenddatecalendar]").on("change",(function(){$()(this).parent().find("input[name=rirangetype]").on("click"),0!==n.$modalForm.find(".rioccurrencesactions:visible").length&&b()})),n.$modalForm.find("\n                input:radio,\n                input:checkbox,\n                .riweeklyweekday > input,\n                input[name=ridailyinterval],\n                input[name=riweeklyinterval],\n                input[name=rimonthlyinterval],\n                input[name=riyearlyinterval]").change((function(){0!==n.$modalForm.find(".rioccurrencesactions:visible").length&&b()})),n.$modalForm.find("div.riaddoccurrence input#adddate").val(o),n.$modalForm.find(".ricancelbutton").on("click",y),n.$modalForm.find(".risavebutton").on("click",v)}()}))};i.Z.extend({name:"recurrence",trigger:".pat-recurrence",parser:"mockup",defaults:{localization:{displayUnactivate:"Does not repeat",displayActivate:"Repeats every",add_rules:"Add",edit_rules:"Edit",delete_rules:"Delete",add:"Add",refresh:"Refresh",title:"Repeat",preview:"Selected dates",addDate:"Add date",recurrenceType:"Repeats:",dailyInterval1:"Repeat every:",dailyInterval2:"days",weeklyInterval1:"Repeat every:",weeklyInterval2:"week(s)",weeklyWeekdays:"Repeat on:",weeklyWeekdaysHuman:"on:",monthlyInterval1:"Repeat every:",monthlyInterval2:"month(s)",monthlyDayOfMonth1:"Day",monthlyDayOfMonth1Human:"on day",monthlyDayOfMonth2:"of the month",monthlyDayOfMonth3:"month(s)",monthlyWeekdayOfMonth1:"The",monthlyWeekdayOfMonth1Human:"on the",monthlyWeekdayOfMonth2:"",monthlyWeekdayOfMonth3:"of the month",monthlyRepeatOn:"Repeat on:",yearlyInterval1:"Repeat every:",yearlyInterval2:"year(s)",yearlyDayOfMonth1:"Every",yearlyDayOfMonth1Human:"on",yearlyDayOfMonth2:"",yearlyDayOfMonth3:"",yearlyWeekdayOfMonth1:"The",yearlyWeekdayOfMonth1Human:"on the",yearlyWeekdayOfMonth2:"",yearlyWeekdayOfMonth3:"of",yearlyWeekdayOfMonth4:"",yearlyRepeatOn:"Repeat on:",range:"End recurrence:",rangeNoEnd:"Never",rangeByOccurrences1:"After",rangeByOccurrences1Human:"ends after",rangeByOccurrences2:"occurrence(s)",rangeByEndDate:"On",rangeByEndDateHuman:"ends on",including:", and also",except:", except for",cancel:"Cancel",save:"Save",recurrenceStart:"Start of the recurrence",additionalDate:"Additional date",include:"Include",exclude:"Exclude",remove:"Remove",orderIndexes:["first","second","third","fourth","last"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortWeekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDateFormat:"mmmm dd, yyyy",shortDateFormat:"mm/dd/yyyy",unsupportedFeatures:"Warning: This event uses recurrence features not supported by this widget. Saving the recurrence may change the recurrence in unintended ways:",noTemplateMatch:"No matching recurrence template",multipleDayOfMonth:"This widget does not support multiple days in monthly or yearly recurrence",bysetpos:"BYSETPOS is not supported",noRule:"No RRULE in RRULE data",noRepeatEvery:'Error: The "Repeat every"-field must be between 1 and 1000',noEndDate:"Error: End date is not set. Please set a correct value",noRepeatOn:'Error: "Repeat on"-value must be selected',pastEndDate:"Error: End date cannot be before start date",noEndAfterNOccurrences:'Error: The "After N occurrences"-field must be between 1 and 1000',alreadyAdded:"This date was already added",rtemplate:{daily:"Daily",mondayfriday:"Monday and Friday",weekdays:"Weekday",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"}},readOnly:!1,firstDay:0,startField:null,startFieldYear:null,startFieldMonth:null,startFieldDay:null,ajaxURL:null,ajaxContentType:"application/json; charset=utf8",ributtonExtraClass:"",hasRepeatForeverButton:!0,template:{form:"#jquery-recurrenceinput-form-tmpl",display:"#jquery-recurrenceinput-display-tmpl"},rtemplate:{daily:{rrule:"FREQ=DAILY",fields:["ridailyinterval","rirangeoptions"]},mondayfriday:{rrule:"FREQ=WEEKLY;BYDAY=MO,FR",fields:["rirangeoptions"]},weekdays:{rrule:"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR",fields:["rirangeoptions"]},weekly:{rrule:"FREQ=WEEKLY",fields:["riweeklyinterval","riweeklyweekdays","rirangeoptions"]},monthly:{rrule:"FREQ=MONTHLY",fields:["rimonthlyinterval","rimonthlyoptions","rirangeoptions"]},yearly:{rrule:"FREQ=YEARLY",fields:["riyearlyinterval","riyearlyoptions","rirangeoptions"]}}},load_icons:async function(){return{reload:await _.Z.resolveIcon("arrow-clockwise"),remove:await _.Z.resolveIcon("trash"),exclude:await _.Z.resolveIcon("calendar-x"),include:await _.Z.resolveIcon("plus-circle")}},init:async function(){a.e(46823).then(a.bind(a,46823)),this.$el.addClass("recurrence-widget");var e=await this.load_icons(),t={...this.options,...this.options.configuration,icons:e},n=new z(t,this.$el);this.$el.after(n.display),this.$el.hide()}}),a(15260),i.Z.extend({name:"search",trigger:".pat-search",init:function(){var e=new _.Z.Loading,t=$()("#search-filter"),a=$()("#search-filter-toggle",t),n=$()("#advanced-search-input"),i=$()("#pt_toggle"),o=$()(".search-type-options"),r=$()("#sorting-options");window.history&&window.history.pushState&&$()(window).bind("popstate",(function(){window.location=window.location.href}));var s=0,l=function(){e.show(),function(){if(window.history&&window.history.pushState){var e=window.location.origin+window.location.pathname+"?"+$()("#searchform").serialize();window.history.pushState(null,null,e)}}(),$().ajax({url:window.location.origin+window.location.pathname+"?ajax_load=1",data:$()("#searchform").serialize()}).done((function(t){var a=$()(t);$()("#search-results").replaceWith($()("#search-results",a)),$()("#search-term").replaceWith($()("#search-term",a)),$()("#results-count").replaceWith($()("#results-count",a)),e.hide()}))},c=function(e){$()("#search-batch-start").attr("value",e)},d=function(e){$()("a",r).removeClass("active"),e.addClass("active")},p=$()("#search-results").attr("data-default-sort");d($()("a[data-sort="+p+"]")),$()("a",r).click((function(e){e.preventDefault(),d($()(this));var t=$()(this).attr("data-sort"),a=$()(this).attr("data-order");t?($()('[name="sort_on"]').attr("value",t),a&&"reverse"==a?$()('[name="sort_order"]').attr("value","reverse"):$()('[name="sort_order"]').attr("value","")):($()('[name="sort_on"]').attr("value",""),$()('[name="sort_order"]').attr("value","")),l()})),$()(".searchPage").submit((function(e){e.preventDefault(),c("0"),l()})),a.click((function(e){e.preventDefault(),t.toggleClass("activated"),t.hasClass("activated")?n.attr("value","True"):n.attr("value","False")})),i.change((function(){i[0].checked?$()("input",o).each((function(){this.checked=!0})):$()("input",o).each((function(){this.checked=!1}))})),$()("input",t).change((function(){c("0"),clearTimeout(s),s=setTimeout(l,200)})),$()("#searchform").on("click",".pagination a",(function(e){var t=new URLSearchParams($()(e.currentTarget).attr("href")).get("b_start:int");t&&(e.preventDefault(),c(t),l())}))}}),a(74090),a(71015),i.Z.extend({name:"structure",trigger:".pat-structure",parser:"mockup",defaults:{urlStructure:null,vocabularyUrl:null,indexOptionsUrl:null,contextInfoUrl:null,setDefaultPageUrl:null,menuOptions:null,backdropSelector:".plone-modal",activeColumnsCookie:"activeColumns",attributes:["CreationDate","EffectiveDate","ExpirationDate","exclude_from_nav","getIcon","getMimeIcon","getObjSize","getURL","id","is_folderish","last_comment_date","ModificationDate","path","portal_type","review_state","Subject","Title","total_comments","UID"],activeColumns:["ModificationDate","EffectiveDate","review_state"],availableColumns:{id:"ID",ModificationDate:"Last modified",EffectiveDate:"Published",ExpirationDate:"Expiration",CreationDate:"Created",review_state:"Review state",Subject:"Tags",portal_type:"Type",is_folderish:"Folder",exclude_from_nav:"Excluded from navigation",getObjSize:"Object Size",last_comment_date:"Last comment date",total_comments:"Total comments"},typeToViewAction:{File:"/view",Image:"/view",Blob:"/view"},defaultPageTypes:["Document","Event","News Item","Collection"],language:"en",dateFormat:{dateStyle:"medium",timeStyle:"medium"},rearrange:{properties:{id:"ID",sortable_title:"Title"},url:"/rearrange"},moveUrl:null,buttons:[{tooltip:"Cut",url:"/cut",icon:"plone-cut"},{tooltip:"Copy",url:"/copy",icon:"plone-copy"},{tooltip:"Paste",url:"/paste",icon:"plone-paste"},{tooltip:"Delete",url:"/delete",context:"danger",icon:"plone-delete"},{tooltip:"Workflow",url:"/workflow",icon:"plone-lock"},{tooltip:"Tags",url:"/tags",icon:"tags"},{tooltip:"Properties",url:"/properties",icon:"plone-edit"},{tooltip:"Rename",url:"/rename",icon:"plone-rename"}],datatables_options:{},upload:{uploadMultiple:!0,showTitle:!0}},async init(){a.e(24772).then(a.bind(a,24772)),(await a.e(36543).then(a.t.bind(a,36543,23))).Dropdown;const e=(await Promise.resolve().then(a.t.bind(a,17544,23))).default,t=(await a.e(5749).then(a.t.bind(a,5749,23))).default;window._=e,window.Backbone=t;const n=(await Promise.all([a.e(58133),a.e(5749),a.e(88816)]).then(a.bind(a,58133))).default;this.browsing=!0,this.options.collectionUrl=this.options.vocabularyUrl,this.options.pattern=this,this.options.language=document.querySelector("html").getAttribute("lang")||"en",this.options.queryHelperAttributes=this.options.attributes,delete this.options.attributes;const i=new n(this.options);await i.render(),this.$el.append(i.$el)}});var P=a(25219);i.Z.extend({name:"tinymce",trigger:".pat-tinymce",parser:"mockup",defaults:{upload:{uploadMultiple:!1,maxFiles:1,showTitle:!1},relatedItems:{attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,placeholder:(0,A.Z)("Search for item on site...")},text:{insertBtn:(0,A.Z)("Insert"),cancelBtn:(0,A.Z)("Cancel"),insertHeading:(0,A.Z)("Insert link"),title:(0,A.Z)("Title"),internal:(0,A.Z)("Internal"),external:(0,A.Z)("External"),externalText:(0,A.Z)("External URL (can be relative within this site or absolute if it starts with http:// or https://)"),email:(0,A.Z)("Email Address"),anchor:(0,A.Z)("Anchor"),anchorLabel:(0,A.Z)("Select an anchor"),target:(0,A.Z)("Target"),subject:(0,A.Z)("Email Subject (optional)"),image:(0,A.Z)("Image"),imageAlign:(0,A.Z)("Align"),enableImageZoom:(0,A.Z)("Enable image zoom"),scale:(0,A.Z)("Size"),alt:(0,A.Z)("Alternative Text"),insertImageHelp:(0,A.Z)("Specify an image. It can be on this site already (Internal Image), an image you upload (Upload), or from an external site (External Image)."),internalImage:(0,A.Z)("Internal Image"),externalImage:(0,A.Z)("External Image"),externalImageText:(0,A.Z)("External Image URL (can be relative within this site or absolute if it starts with http:// or https://)"),upload:(0,A.Z)("Upload"),insertLinkHelp:(0,A.Z)("Specify the object to link to. It can be on this site already (Internal), an object you upload (Upload), from an external site (External), an email address (Email), or an anchor on this page (Anchor)."),captionFromDescription:(0,A.Z)("Show Image Caption from Image Description"),caption:(0,A.Z)("Image Caption")},loadingBaseUrl:"++plone++static/tinybase",prependToUrl:"",appendToUrl:"",linkAttribute:"path",prependToScalePart:"/imagescale/",appendToScalePart:"",appendToOriginalScalePart:"",defaultSrcset:"medium",imageCaptioningEnabled:!0,imageClasses:{"image-inline":(0,A.Z)("Inline"),"image-right":(0,A.Z)("Right"),"image-left":(0,A.Z)("Left")},targetList:[{text:(0,A.Z)("Open in this window / frame"),value:""},{text:(0,A.Z)("Open in new window"),value:"_blank"},{text:(0,A.Z)("Open in parent window / frame"),value:"_parent"},{text:(0,A.Z)("Open in top frame (replaces all frames)"),value:"_top"}],imageTypes:["Image"],folderTypes:["Folder","Plone Site"],tiny:{theme:"silver",plugins:["advlist","autolink","lists","charmap","print","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","contextmenu","paste","plonelink","ploneimage"],menubar:"edit table format tools view insert",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | unlink plonelink ploneimage",height:400,language:"en"},inline:!1},init:async function(){const e=(await a.e(96870).then(a.bind(a,96870))).default;var t=(new P.Z).currentLanguage;this.options.tiny.language=t,this.instance=new e(this.el,this.options),this.instance.init()},destroy:function(){this.instance.destroy()}}),i.Z.extend({name:"textareamimetypeselector",trigger:".pat-textareamimetypeselector",parser:"mockup",current_widgets:[],defaults:{textareaName:"",widgets:{"text/html":{pattern:"tinymce",patternOptions:{}}}},init(){this.el.addEventListener("input",(e=>this.init_textareas(e.target.value))),this.init_textareas(this.el.value)},init_textareas(e){const t=this.options.widgets[e],a=document.querySelectorAll(`textarea[name="${this.options.textareaName}"]`);this.current_widgets.forEach((e=>{e.destroy()})),this.current_widgets=[],t&&a.length&&a.forEach((async e=>{this.current_widgets.push(await new n.Z.patterns[t.pattern](e,t.patternOptions||{}))}))}});const R=u.Z.getLogger("pat-toggle");i.Z.extend({name:"toggle",trigger:".pat-toggle",parser:"mockup",defaults:{attribute:"class",event:"click",targetScope:"global"},init:function(){var e=this;e.options.target?"global"===e.options.targetScope?e.$target=$()(e.options.target):e.$target=e.$el.parents(e.options.targetScope).first().find(e.options.target):e.$target=e.$el,e.$target&&0!==e.$target.length||R.error(`No target found for "${e.options.target}".`),e.on(e.options.event,(function(t){t.stopPropagation(),t.preventDefault(),e.toggle()}))},isMarked:function(){for(var e=!1,t=0;t<this.$target.length;t+=1)if("class"===this.options.attribute){if(!this.$target.eq(t).hasClass(this.options.value)){e=!1;break}e=!0}else{if(this.$target.eq(t).attr(this.options.attribute)!==this.options.value){e=!1;break}e=!0}return e},toggle:function(){var e=this;e.isMarked()?e.remove():e.add()},remove:function(){var e=this;e.emit("remove-attr"),"class"===e.options.attribute?e.$target.removeClass(e.options.value):e.$target.removeAttr(e.options.attribute),e.emit("attr-removed")},add:function(){var e=this;e.emit("add-attr"),"class"===e.options.attribute?e.$target.addClass(e.options.value):e.$target.attr(e.options.attribute,e.options.value),e.emit("added-attr")}});var L=a(54771),U=a.n(L);i.Z.extend({name:"toolbar",trigger:".pat-toolbar",parser:"mockup",defaults:{},init:function(){$()("body").on("structure-url-changed",((e,t)=>{$().ajax({url:$()("body").attr("data-portal-url")+t+"/@@render-toolbar"}).done((e=>{const t=$()(_.Z.parseBodyTag(e)),a=t.find("#edit-zone .plone-toolbar-main"),i=t.find("#edit-zone #collapse-personaltools");n.Z.scan(a),$()(".plone-toolbar-main",this.$el).replaceWith(a),$()("#collapse-personaltools",this.$el).replaceWith(i)}))})),this.$el.on("click",".toolbar-collapse",(()=>{$()("body").removeClass("plone-toolbar-left-expanded"),U().set("plone-toolbar",JSON.stringify({expanded:!1}),{path:"/"})})),this.$el.on("click",".toolbar-expand",(()=>{$()("body").addClass("plone-toolbar-left-expanded"),U().set("plone-toolbar",JSON.stringify({expanded:!0}),{path:"/"})})),this.el.classList.add("initialized")}}),i.Z.extend({name:"tree",trigger:".pat-tree",parser:"mockup",defaults:{dragAndDrop:!1,autoOpen:!1,selectable:!0,keyboardSupport:!0,onLoad:null},async init(){a.e(24708).then(a.bind(a,24708)),a.e(18683).then(a.bind(a,18683)),await a.e(63784).then(a.t.bind(a,63784,23));var e=this;for(var t in e.options){var n=e.defaults[t];void 0!==n&&"boolean"==typeof n&&(e.options[t]=_.Z.bool(e.options[t]))}if(void 0===e.options.onCanMoveTo&&(e.options.onCanMoveTo=function(e,t,a){return"inside"!==a||(void 0===t.folder||!0===t.folder)}),e.options.data&&"string"==typeof e.options.data&&(e.options.data=$().parseJSON(e.options.data)),null!==e.options.onLoad){var i=$().extend({},e.options);$().getJSON(i.dataUrl,(function(t){i.data=t,delete i.dataUrl,e.tree=e.$el.tree(i),e.options.onLoad(e)})).fail((function(e){console.log("failed to load json data")}))}else e.tree=e.$el.tree(e.options)}}),a(37103),i.Z.extend({name:"dexterity-types-listing",trigger:"form[action$='dexterity-types']",async init(){new(0,(await a.e(33521).then(a.bind(a,33521))).default)(this.el).init()}}),i.Z.extend({name:"registry",trigger:".pat-registry",parser:"mockup",init:async function(){new(0,(await a.e(20971).then(a.bind(a,20971))).default)(this.el).init()}}),i.Z.extend({name:"schemaeditor",trigger:".pat-schemaeditor",parser:"mockup",init:async function(){new(0,(await a.e(45196).then(a.bind(a,45196))).default)(this.el).init()}}),i.Z.extend({name:"contentrules",trigger:"form[name='ruleSettings']",async init(){new(0,(await a.e(76533).then(a.bind(a,76533))).default)(this.el).init()}}),i.Z.extend({name:"contentrules-elements",trigger:"pat-contentrules-elements",async init(){new(0,(await a.e(39113).then(a.bind(a,39113))).default)(this.el).init()}}),i.Z.extend({name:"discussion",trigger:"form#DiscussionSettingsEditForm",async init(){new(0,(await a.e(54523).then(a.bind(a,54523))).default)(this.el).init()}}),i.Z.extend({name:"discussion-comments",trigger:".pat-discussion",async init(){new(0,(await a.e(25031).then(a.bind(a,25031))).default)(this.el).init()}}),i.Z.extend({name:"discussion-moderation",trigger:"#fieldset-moderate-comments",async init(){new(0,(await a.e(16105).then(a.bind(a,16105))).default)(this.el).init()}});v.E.parameters.trigger.value="hover",m.parameters["error-template"].value='<em class="invalid-feedback">${this.message}</em>',window.__patternslib_import_styles=!0,n.Z.init()}}]);
//# sourceMappingURL=77941.e2647e3f07b5a3f9ceef.min.js.map